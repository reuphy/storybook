<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="generator" content="Asciidoctor 2.0.23">
<meta name="author" content="Ninja Squad">
<meta name="copyright" content="Ninja Squad">
<title>Deviens un ninja avec Angular</title>
<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:300,300italic,400,400italic,600,600italic%7CNoto+Serif:400,400italic,700,700italic%7CDroid+Sans+Mono:400,700">
<style>
/*! Asciidoctor default stylesheet | MIT License | https://asciidoctor.org */
/* Uncomment the following line when using as a custom stylesheet */
/* @import "https://fonts.googleapis.com/css?family=Open+Sans:300,300italic,400,400italic,600,600italic%7CNoto+Serif:400,400italic,700,700italic%7CDroid+Sans+Mono:400,700"; */
html{font-family:sans-serif;-webkit-text-size-adjust:100%}
a{background:none}
a:focus{outline:thin dotted}
a:active,a:hover{outline:0}
h1{font-size:2em;margin:.67em 0}
b,strong{font-weight:bold}
abbr{font-size:.9em}
abbr[title]{cursor:help;border-bottom:1px dotted #dddddf;text-decoration:none}
dfn{font-style:italic}
hr{height:0}
mark{background:#ff0;color:#000}
code,kbd,pre,samp{font-family:monospace;font-size:1em}
pre{white-space:pre-wrap}
q{quotes:"\201C" "\201D" "\2018" "\2019"}
small{font-size:80%}
sub,sup{font-size:75%;line-height:0;position:relative;vertical-align:baseline}
sup{top:-.5em}
sub{bottom:-.25em}
img{border:0}
svg:not(:root){overflow:hidden}
figure{margin:0}
audio,video{display:inline-block}
audio:not([controls]){display:none;height:0}
fieldset{border:1px solid silver;margin:0 2px;padding:.35em .625em .75em}
legend{border:0;padding:0}
button,input,select,textarea{font-family:inherit;font-size:100%;margin:0}
button,input{line-height:normal}
button,select{text-transform:none}
button,html input[type=button],input[type=reset],input[type=submit]{-webkit-appearance:button;cursor:pointer}
button[disabled],html input[disabled]{cursor:default}
input[type=checkbox],input[type=radio]{padding:0}
button::-moz-focus-inner,input::-moz-focus-inner{border:0;padding:0}
textarea{overflow:auto;vertical-align:top}
table{border-collapse:collapse;border-spacing:0}
*,::before,::after{box-sizing:border-box}
html,body{font-size:100%}
body{background:#fff;color:rgba(0,0,0,.8);padding:0;margin:0;font-family:"Noto Serif","DejaVu Serif",serif;line-height:1;position:relative;cursor:auto;-moz-tab-size:4;-o-tab-size:4;tab-size:4;word-wrap:anywhere;-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased}
a:hover{cursor:pointer}
img,object,embed{max-width:100%;height:auto}
object,embed{height:100%}
img{-ms-interpolation-mode:bicubic}
.left{float:left!important}
.right{float:right!important}
.text-left{text-align:left!important}
.text-right{text-align:right!important}
.text-center{text-align:center!important}
.text-justify{text-align:justify!important}
.hide{display:none}
img,object,svg{display:inline-block;vertical-align:middle}
textarea{height:auto;min-height:50px}
select{width:100%}
.subheader,.admonitionblock td.content>.title,.audioblock>.title,.exampleblock>.title,.imageblock>.title,.listingblock>.title,.literalblock>.title,.stemblock>.title,.openblock>.title,.paragraph>.title,.quoteblock>.title,table.tableblock>.title,.verseblock>.title,.videoblock>.title,.dlist>.title,.olist>.title,.ulist>.title,.qlist>.title,.hdlist>.title{line-height:1.45;color:#7a2518;font-weight:400;margin-top:0;margin-bottom:.25em}
div,dl,dt,dd,ul,ol,li,h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6,pre,form,p,blockquote,th,td{margin:0;padding:0}
a{color:#2156a5;text-decoration:underline;line-height:inherit}
a:hover,a:focus{color:#1d4b8f}
a img{border:0}
p{line-height:1.6;margin-bottom:1.25em;text-rendering:optimizeLegibility}
p aside{font-size:.875em;line-height:1.35;font-style:italic}
h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6{font-family:"Open Sans","DejaVu Sans",sans-serif;font-weight:300;font-style:normal;color:#ba3925;text-rendering:optimizeLegibility;margin-top:1em;margin-bottom:.5em;line-height:1.0125em}
h1 small,h2 small,h3 small,#toctitle small,.sidebarblock>.content>.title small,h4 small,h5 small,h6 small{font-size:60%;color:#e99b8f;line-height:0}
h1{font-size:2.125em}
h2{font-size:1.6875em}
h3,#toctitle,.sidebarblock>.content>.title{font-size:1.375em}
h4,h5{font-size:1.125em}
h6{font-size:1em}
hr{border:solid #dddddf;border-width:1px 0 0;clear:both;margin:1.25em 0 1.1875em}
em,i{font-style:italic;line-height:inherit}
strong,b{font-weight:bold;line-height:inherit}
small{font-size:60%;line-height:inherit}
code{font-family:"Droid Sans Mono","DejaVu Sans Mono",monospace;font-weight:400;color:rgba(0,0,0,.9)}
ul,ol,dl{line-height:1.6;margin-bottom:1.25em;list-style-position:outside;font-family:inherit}
ul,ol{margin-left:1.5em}
ul li ul,ul li ol{margin-left:1.25em;margin-bottom:0}
ul.circle{list-style-type:circle}
ul.disc{list-style-type:disc}
ul.square{list-style-type:square}
ul.circle ul:not([class]),ul.disc ul:not([class]),ul.square ul:not([class]){list-style:inherit}
ol li ul,ol li ol{margin-left:1.25em;margin-bottom:0}
dl dt{margin-bottom:.3125em;font-weight:bold}
dl dd{margin-bottom:1.25em}
blockquote{margin:0 0 1.25em;padding:.5625em 1.25em 0 1.1875em;border-left:1px solid #ddd}
blockquote,blockquote p{line-height:1.6;color:rgba(0,0,0,.85)}
@media screen and (min-width:768px){h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6{line-height:1.2}
h1{font-size:2.75em}
h2{font-size:2.3125em}
h3,#toctitle,.sidebarblock>.content>.title{font-size:1.6875em}
h4{font-size:1.4375em}}
table{background:#fff;margin-bottom:1.25em;border:1px solid #dedede;word-wrap:normal}
table thead,table tfoot{background:#f7f8f7}
table thead tr th,table thead tr td,table tfoot tr th,table tfoot tr td{padding:.5em .625em .625em;font-size:inherit;color:rgba(0,0,0,.8);text-align:left}
table tr th,table tr td{padding:.5625em .625em;font-size:inherit;color:rgba(0,0,0,.8)}
table tr.even,table tr.alt{background:#f8f8f7}
table thead tr th,table tfoot tr th,table tbody tr td,table tr td,table tfoot tr td{line-height:1.6}
h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6{line-height:1.2;word-spacing:-.05em}
h1 strong,h2 strong,h3 strong,#toctitle strong,.sidebarblock>.content>.title strong,h4 strong,h5 strong,h6 strong{font-weight:400}
.center{margin-left:auto;margin-right:auto}
.stretch{width:100%}
.clearfix::before,.clearfix::after,.float-group::before,.float-group::after{content:" ";display:table}
.clearfix::after,.float-group::after{clear:both}
:not(pre).nobreak{word-wrap:normal}
:not(pre).nowrap{white-space:nowrap}
:not(pre).pre-wrap{white-space:pre-wrap}
:not(pre):not([class^=L])>code{font-size:.9375em;font-style:normal!important;letter-spacing:0;padding:.1em .5ex;word-spacing:-.15em;background:#f7f7f8;border-radius:4px;line-height:1.45;text-rendering:optimizeSpeed}
pre{color:rgba(0,0,0,.9);font-family:"Droid Sans Mono","DejaVu Sans Mono",monospace;line-height:1.45;text-rendering:optimizeSpeed}
pre code,pre pre{color:inherit;font-size:inherit;line-height:inherit}
pre>code{display:block}
pre.nowrap,pre.nowrap pre{white-space:pre;word-wrap:normal}
em em{font-style:normal}
strong strong{font-weight:400}
.keyseq{color:rgba(51,51,51,.8)}
kbd{font-family:"Droid Sans Mono","DejaVu Sans Mono",monospace;display:inline-block;color:rgba(0,0,0,.8);font-size:.65em;line-height:1.45;background:#f7f7f7;border:1px solid #ccc;border-radius:3px;box-shadow:0 1px 0 rgba(0,0,0,.2),inset 0 0 0 .1em #fff;margin:0 .15em;padding:.2em .5em;vertical-align:middle;position:relative;top:-.1em;white-space:nowrap}
.keyseq kbd:first-child{margin-left:0}
.keyseq kbd:last-child{margin-right:0}
.menuseq,.menuref{color:#000}
.menuseq b:not(.caret),.menuref{font-weight:inherit}
.menuseq{word-spacing:-.02em}
.menuseq b.caret{font-size:1.25em;line-height:.8}
.menuseq i.caret{font-weight:bold;text-align:center;width:.45em}
b.button::before,b.button::after{position:relative;top:-1px;font-weight:400}
b.button::before{content:"[";padding:0 3px 0 2px}
b.button::after{content:"]";padding:0 2px 0 3px}
p a>code:hover{color:rgba(0,0,0,.9)}
#header,#content,#footnotes,#footer{width:100%;margin:0 auto;max-width:62.5em;*zoom:1;position:relative;padding-left:.9375em;padding-right:.9375em}
#header::before,#header::after,#content::before,#content::after,#footnotes::before,#footnotes::after,#footer::before,#footer::after{content:" ";display:table}
#header::after,#content::after,#footnotes::after,#footer::after{clear:both}
#content{margin-top:1.25em}
#content::before{content:none}
#header>h1:first-child{color:rgba(0,0,0,.85);margin-top:2.25rem;margin-bottom:0}
#header>h1:first-child+#toc{margin-top:8px;border-top:1px solid #dddddf}
#header>h1:only-child{border-bottom:1px solid #dddddf;padding-bottom:8px}
#header .details{border-bottom:1px solid #dddddf;line-height:1.45;padding-top:.25em;padding-bottom:.25em;padding-left:.25em;color:rgba(0,0,0,.6);display:flex;flex-flow:row wrap}
#header .details span:first-child{margin-left:-.125em}
#header .details span.email a{color:rgba(0,0,0,.85)}
#header .details br{display:none}
#header .details br+span::before{content:"\00a0\2013\00a0"}
#header .details br+span.author::before{content:"\00a0\22c5\00a0";color:rgba(0,0,0,.85)}
#header .details br+span#revremark::before{content:"\00a0|\00a0"}
#header #revnumber{text-transform:capitalize}
#header #revnumber::after{content:"\00a0"}
#content>h1:first-child:not([class]){color:rgba(0,0,0,.85);border-bottom:1px solid #dddddf;padding-bottom:8px;margin-top:0;padding-top:1rem;margin-bottom:1.25rem}
#toc{border-bottom:1px solid #e7e7e9;padding-bottom:.5em}
#toc>ul{margin-left:.125em}
#toc ul.sectlevel0>li>a{font-style:italic}
#toc ul.sectlevel0 ul.sectlevel1{margin:.5em 0}
#toc ul{font-family:"Open Sans","DejaVu Sans",sans-serif;list-style-type:none}
#toc li{line-height:1.3334;margin-top:.3334em}
#toc a{text-decoration:none}
#toc a:active{text-decoration:underline}
#toctitle{color:#7a2518;font-size:1.2em}
@media screen and (min-width:768px){#toctitle{font-size:1.375em}
body.toc2{padding-left:15em;padding-right:0}
body.toc2 #header>h1:nth-last-child(2){border-bottom:1px solid #dddddf;padding-bottom:8px}
#toc.toc2{margin-top:0!important;background:#f8f8f7;position:fixed;width:15em;left:0;top:0;border-right:1px solid #e7e7e9;border-top-width:0!important;border-bottom-width:0!important;z-index:1000;padding:1.25em 1em;height:100%;overflow:auto}
#toc.toc2 #toctitle{margin-top:0;margin-bottom:.8rem;font-size:1.2em}
#toc.toc2>ul{font-size:.9em;margin-bottom:0}
#toc.toc2 ul ul{margin-left:0;padding-left:1em}
#toc.toc2 ul.sectlevel0 ul.sectlevel1{padding-left:0;margin-top:.5em;margin-bottom:.5em}
body.toc2.toc-right{padding-left:0;padding-right:15em}
body.toc2.toc-right #toc.toc2{border-right-width:0;border-left:1px solid #e7e7e9;left:auto;right:0}}
@media screen and (min-width:1280px){body.toc2{padding-left:20em;padding-right:0}
#toc.toc2{width:20em}
#toc.toc2 #toctitle{font-size:1.375em}
#toc.toc2>ul{font-size:.95em}
#toc.toc2 ul ul{padding-left:1.25em}
body.toc2.toc-right{padding-left:0;padding-right:20em}}
#content #toc{border:1px solid #e0e0dc;margin-bottom:1.25em;padding:1.25em;background:#f8f8f7;border-radius:4px}
#content #toc>:first-child{margin-top:0}
#content #toc>:last-child{margin-bottom:0}
#footer{max-width:none;background:rgba(0,0,0,.8);padding:1.25em}
#footer-text{color:hsla(0,0%,100%,.8);line-height:1.44}
#content{margin-bottom:.625em}
.sect1{padding-bottom:.625em}
@media screen and (min-width:768px){#content{margin-bottom:1.25em}
.sect1{padding-bottom:1.25em}}
.sect1:last-child{padding-bottom:0}
.sect1+.sect1{border-top:1px solid #e7e7e9}
#content h1>a.anchor,h2>a.anchor,h3>a.anchor,#toctitle>a.anchor,.sidebarblock>.content>.title>a.anchor,h4>a.anchor,h5>a.anchor,h6>a.anchor{position:absolute;z-index:1001;width:1.5ex;margin-left:-1.5ex;display:block;text-decoration:none!important;visibility:hidden;text-align:center;font-weight:400}
#content h1>a.anchor::before,h2>a.anchor::before,h3>a.anchor::before,#toctitle>a.anchor::before,.sidebarblock>.content>.title>a.anchor::before,h4>a.anchor::before,h5>a.anchor::before,h6>a.anchor::before{content:"\00A7";font-size:.85em;display:block;padding-top:.1em}
#content h1:hover>a.anchor,#content h1>a.anchor:hover,h2:hover>a.anchor,h2>a.anchor:hover,h3:hover>a.anchor,#toctitle:hover>a.anchor,.sidebarblock>.content>.title:hover>a.anchor,h3>a.anchor:hover,#toctitle>a.anchor:hover,.sidebarblock>.content>.title>a.anchor:hover,h4:hover>a.anchor,h4>a.anchor:hover,h5:hover>a.anchor,h5>a.anchor:hover,h6:hover>a.anchor,h6>a.anchor:hover{visibility:visible}
#content h1>a.link,h2>a.link,h3>a.link,#toctitle>a.link,.sidebarblock>.content>.title>a.link,h4>a.link,h5>a.link,h6>a.link{color:#ba3925;text-decoration:none}
#content h1>a.link:hover,h2>a.link:hover,h3>a.link:hover,#toctitle>a.link:hover,.sidebarblock>.content>.title>a.link:hover,h4>a.link:hover,h5>a.link:hover,h6>a.link:hover{color:#a53221}
details,.audioblock,.imageblock,.literalblock,.listingblock,.stemblock,.videoblock{margin-bottom:1.25em}
details{margin-left:1.25rem}
details>summary{cursor:pointer;display:block;position:relative;line-height:1.6;margin-bottom:.625rem;outline:none;-webkit-tap-highlight-color:transparent}
details>summary::-webkit-details-marker{display:none}
details>summary::before{content:"";border:solid transparent;border-left:solid;border-width:.3em 0 .3em .5em;position:absolute;top:.5em;left:-1.25rem;transform:translateX(15%)}
details[open]>summary::before{border:solid transparent;border-top:solid;border-width:.5em .3em 0;transform:translateY(15%)}
details>summary::after{content:"";width:1.25rem;height:1em;position:absolute;top:.3em;left:-1.25rem}
.admonitionblock td.content>.title,.audioblock>.title,.exampleblock>.title,.imageblock>.title,.listingblock>.title,.literalblock>.title,.stemblock>.title,.openblock>.title,.paragraph>.title,.quoteblock>.title,table.tableblock>.title,.verseblock>.title,.videoblock>.title,.dlist>.title,.olist>.title,.ulist>.title,.qlist>.title,.hdlist>.title{text-rendering:optimizeLegibility;text-align:left;font-family:"Noto Serif","DejaVu Serif",serif;font-size:1rem;font-style:italic}
table.tableblock.fit-content>caption.title{white-space:nowrap;width:0}
.paragraph.lead>p,#preamble>.sectionbody>[class=paragraph]:first-of-type p{font-size:1.21875em;line-height:1.6;color:rgba(0,0,0,.85)}
.admonitionblock>table{border-collapse:separate;border:0;background:none;width:100%}
.admonitionblock>table td.icon{text-align:center;width:80px}
.admonitionblock>table td.icon img{max-width:none}
.admonitionblock>table td.icon .title{font-weight:bold;font-family:"Open Sans","DejaVu Sans",sans-serif;text-transform:uppercase}
.admonitionblock>table td.content{padding-left:1.125em;padding-right:1.25em;border-left:1px solid #dddddf;color:rgba(0,0,0,.6);word-wrap:anywhere}
.admonitionblock>table td.content>:last-child>:last-child{margin-bottom:0}
.exampleblock>.content{border:1px solid #e6e6e6;margin-bottom:1.25em;padding:1.25em;background:#fff;border-radius:4px}
.sidebarblock{border:1px solid #dbdbd6;margin-bottom:1.25em;padding:1.25em;background:#f3f3f2;border-radius:4px}
.sidebarblock>.content>.title{color:#7a2518;margin-top:0;text-align:center}
.exampleblock>.content>:first-child,.sidebarblock>.content>:first-child{margin-top:0}
.exampleblock>.content>:last-child,.exampleblock>.content>:last-child>:last-child,.exampleblock>.content .olist>ol>li:last-child>:last-child,.exampleblock>.content .ulist>ul>li:last-child>:last-child,.exampleblock>.content .qlist>ol>li:last-child>:last-child,.sidebarblock>.content>:last-child,.sidebarblock>.content>:last-child>:last-child,.sidebarblock>.content .olist>ol>li:last-child>:last-child,.sidebarblock>.content .ulist>ul>li:last-child>:last-child,.sidebarblock>.content .qlist>ol>li:last-child>:last-child{margin-bottom:0}
.literalblock pre,.listingblock>.content>pre{border-radius:4px;overflow-x:auto;padding:1em;font-size:.8125em}
@media screen and (min-width:768px){.literalblock pre,.listingblock>.content>pre{font-size:.90625em}}
@media screen and (min-width:1280px){.literalblock pre,.listingblock>.content>pre{font-size:1em}}
.literalblock pre,.listingblock>.content>pre:not(.highlight),.listingblock>.content>pre[class=highlight],.listingblock>.content>pre[class^="highlight "]{background:#f7f7f8}
.literalblock.output pre{color:#f7f7f8;background:rgba(0,0,0,.9)}
.listingblock>.content{position:relative}
.listingblock code[data-lang]::before{display:none;content:attr(data-lang);position:absolute;font-size:.75em;top:.425rem;right:.5rem;line-height:1;text-transform:uppercase;color:inherit;opacity:.5}
.listingblock:hover code[data-lang]::before{display:block}
.listingblock.terminal pre .command::before{content:attr(data-prompt);padding-right:.5em;color:inherit;opacity:.5}
.listingblock.terminal pre .command:not([data-prompt])::before{content:"$"}
.listingblock pre.highlightjs{padding:0}
.listingblock pre.highlightjs>code{padding:1em;border-radius:4px}
.listingblock pre.prettyprint{border-width:0}
.prettyprint{background:#f7f7f8}
pre.prettyprint .linenums{line-height:1.45;margin-left:2em}
pre.prettyprint li{background:none;list-style-type:inherit;padding-left:0}
pre.prettyprint li code[data-lang]::before{opacity:1}
pre.prettyprint li:not(:first-child) code[data-lang]::before{display:none}
table.linenotable{border-collapse:separate;border:0;margin-bottom:0;background:none}
table.linenotable td[class]{color:inherit;vertical-align:top;padding:0;line-height:inherit;white-space:normal}
table.linenotable td.code{padding-left:.75em}
table.linenotable td.linenos,pre.pygments .linenos{border-right:1px solid;opacity:.35;padding-right:.5em;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}
pre.pygments span.linenos{display:inline-block;margin-right:.75em}
.quoteblock{margin:0 1em 1.25em 1.5em;display:table}
.quoteblock:not(.excerpt)>.title{margin-left:-1.5em;margin-bottom:.75em}
.quoteblock blockquote,.quoteblock p{color:rgba(0,0,0,.85);font-size:1.15rem;line-height:1.75;word-spacing:.1em;letter-spacing:0;font-style:italic;text-align:justify}
.quoteblock blockquote{margin:0;padding:0;border:0}
.quoteblock blockquote::before{content:"\201c";float:left;font-size:2.75em;font-weight:bold;line-height:.6em;margin-left:-.6em;color:#7a2518;text-shadow:0 1px 2px rgba(0,0,0,.1)}
.quoteblock blockquote>.paragraph:last-child p{margin-bottom:0}
.quoteblock .attribution{margin-top:.75em;margin-right:.5ex;text-align:right}
.verseblock{margin:0 1em 1.25em}
.verseblock pre{font-family:"Open Sans","DejaVu Sans",sans-serif;font-size:1.15rem;color:rgba(0,0,0,.85);font-weight:300;text-rendering:optimizeLegibility}
.verseblock pre strong{font-weight:400}
.verseblock .attribution{margin-top:1.25rem;margin-left:.5ex}
.quoteblock .attribution,.verseblock .attribution{font-size:.9375em;line-height:1.45;font-style:italic}
.quoteblock .attribution br,.verseblock .attribution br{display:none}
.quoteblock .attribution cite,.verseblock .attribution cite{display:block;letter-spacing:-.025em;color:rgba(0,0,0,.6)}
.quoteblock.abstract blockquote::before,.quoteblock.excerpt blockquote::before,.quoteblock .quoteblock blockquote::before{display:none}
.quoteblock.abstract blockquote,.quoteblock.abstract p,.quoteblock.excerpt blockquote,.quoteblock.excerpt p,.quoteblock .quoteblock blockquote,.quoteblock .quoteblock p{line-height:1.6;word-spacing:0}
.quoteblock.abstract{margin:0 1em 1.25em;display:block}
.quoteblock.abstract>.title{margin:0 0 .375em;font-size:1.15em;text-align:center}
.quoteblock.excerpt>blockquote,.quoteblock .quoteblock{padding:0 0 .25em 1em;border-left:.25em solid #dddddf}
.quoteblock.excerpt,.quoteblock .quoteblock{margin-left:0}
.quoteblock.excerpt blockquote,.quoteblock.excerpt p,.quoteblock .quoteblock blockquote,.quoteblock .quoteblock p{color:inherit;font-size:1.0625rem}
.quoteblock.excerpt .attribution,.quoteblock .quoteblock .attribution{color:inherit;font-size:.85rem;text-align:left;margin-right:0}
p.tableblock:last-child{margin-bottom:0}
td.tableblock>.content{margin-bottom:1.25em;word-wrap:anywhere}
td.tableblock>.content>:last-child{margin-bottom:-1.25em}
table.tableblock,th.tableblock,td.tableblock{border:0 solid #dedede}
table.grid-all>*>tr>*{border-width:1px}
table.grid-cols>*>tr>*{border-width:0 1px}
table.grid-rows>*>tr>*{border-width:1px 0}
table.frame-all{border-width:1px}
table.frame-ends{border-width:1px 0}
table.frame-sides{border-width:0 1px}
table.frame-none>colgroup+*>:first-child>*,table.frame-sides>colgroup+*>:first-child>*{border-top-width:0}
table.frame-none>:last-child>:last-child>*,table.frame-sides>:last-child>:last-child>*{border-bottom-width:0}
table.frame-none>*>tr>:first-child,table.frame-ends>*>tr>:first-child{border-left-width:0}
table.frame-none>*>tr>:last-child,table.frame-ends>*>tr>:last-child{border-right-width:0}
table.stripes-all>*>tr,table.stripes-odd>*>tr:nth-of-type(odd),table.stripes-even>*>tr:nth-of-type(even),table.stripes-hover>*>tr:hover{background:#f8f8f7}
th.halign-left,td.halign-left{text-align:left}
th.halign-right,td.halign-right{text-align:right}
th.halign-center,td.halign-center{text-align:center}
th.valign-top,td.valign-top{vertical-align:top}
th.valign-bottom,td.valign-bottom{vertical-align:bottom}
th.valign-middle,td.valign-middle{vertical-align:middle}
table thead th,table tfoot th{font-weight:bold}
tbody tr th{background:#f7f8f7}
tbody tr th,tbody tr th p,tfoot tr th,tfoot tr th p{color:rgba(0,0,0,.8);font-weight:bold}
p.tableblock>code:only-child{background:none;padding:0}
p.tableblock{font-size:1em}
ol{margin-left:1.75em}
ul li ol{margin-left:1.5em}
dl dd{margin-left:1.125em}
dl dd:last-child,dl dd:last-child>:last-child{margin-bottom:0}
li p,ul dd,ol dd,.olist .olist,.ulist .ulist,.ulist .olist,.olist .ulist{margin-bottom:.625em}
ul.checklist,ul.none,ol.none,ul.no-bullet,ol.no-bullet,ol.unnumbered,ul.unstyled,ol.unstyled{list-style-type:none}
ul.no-bullet,ol.no-bullet,ol.unnumbered{margin-left:.625em}
ul.unstyled,ol.unstyled{margin-left:0}
li>p:empty:only-child::before{content:"";display:inline-block}
ul.checklist>li>p:first-child{margin-left:-1em}
ul.checklist>li>p:first-child>.fa-square-o:first-child,ul.checklist>li>p:first-child>.fa-check-square-o:first-child{width:1.25em;font-size:.8em;position:relative;bottom:.125em}
ul.checklist>li>p:first-child>input[type=checkbox]:first-child{margin-right:.25em}
ul.inline{display:flex;flex-flow:row wrap;list-style:none;margin:0 0 .625em -1.25em}
ul.inline>li{margin-left:1.25em}
.unstyled dl dt{font-weight:400;font-style:normal}
ol.arabic{list-style-type:decimal}
ol.decimal{list-style-type:decimal-leading-zero}
ol.loweralpha{list-style-type:lower-alpha}
ol.upperalpha{list-style-type:upper-alpha}
ol.lowerroman{list-style-type:lower-roman}
ol.upperroman{list-style-type:upper-roman}
ol.lowergreek{list-style-type:lower-greek}
.hdlist>table,.colist>table{border:0;background:none}
.hdlist>table>tbody>tr,.colist>table>tbody>tr{background:none}
td.hdlist1,td.hdlist2{vertical-align:top;padding:0 .625em}
td.hdlist1{font-weight:bold;padding-bottom:1.25em}
td.hdlist2{word-wrap:anywhere}
.literalblock+.colist,.listingblock+.colist{margin-top:-.5em}
.colist td:not([class]):first-child{padding:.4em .75em 0;line-height:1;vertical-align:top}
.colist td:not([class]):first-child img{max-width:none}
.colist td:not([class]):last-child{padding:.25em 0}
.thumb,.th{line-height:0;display:inline-block;border:4px solid #fff;box-shadow:0 0 0 1px #ddd}
.imageblock.left{margin:.25em .625em 1.25em 0}
.imageblock.right{margin:.25em 0 1.25em .625em}
.imageblock>.title{margin-bottom:0}
.imageblock.thumb,.imageblock.th{border-width:6px}
.imageblock.thumb>.title,.imageblock.th>.title{padding:0 .125em}
.image.left,.image.right{margin-top:.25em;margin-bottom:.25em;display:inline-block;line-height:0}
.image.left{margin-right:.625em}
.image.right{margin-left:.625em}
a.image{text-decoration:none;display:inline-block}
a.image object{pointer-events:none}
sup.footnote,sup.footnoteref{font-size:.875em;position:static;vertical-align:super}
sup.footnote a,sup.footnoteref a{text-decoration:none}
sup.footnote a:active,sup.footnoteref a:active,#footnotes .footnote a:first-of-type:active{text-decoration:underline}
#footnotes{padding-top:.75em;padding-bottom:.75em;margin-bottom:.625em}
#footnotes hr{width:20%;min-width:6.25em;margin:-.25em 0 .75em;border-width:1px 0 0}
#footnotes .footnote{padding:0 .375em 0 .225em;line-height:1.3334;font-size:.875em;margin-left:1.2em;margin-bottom:.2em}
#footnotes .footnote a:first-of-type{font-weight:bold;text-decoration:none;margin-left:-1.05em}
#footnotes .footnote:last-of-type{margin-bottom:0}
#content #footnotes{margin-top:-.625em;margin-bottom:0;padding:.75em 0}
div.unbreakable{page-break-inside:avoid}
.big{font-size:larger}
.small{font-size:smaller}
.underline{text-decoration:underline}
.overline{text-decoration:overline}
.line-through{text-decoration:line-through}
.aqua{color:#00bfbf}
.aqua-background{background:#00fafa}
.black{color:#000}
.black-background{background:#000}
.blue{color:#0000bf}
.blue-background{background:#0000fa}
.fuchsia{color:#bf00bf}
.fuchsia-background{background:#fa00fa}
.gray{color:#606060}
.gray-background{background:#7d7d7d}
.green{color:#006000}
.green-background{background:#007d00}
.lime{color:#00bf00}
.lime-background{background:#00fa00}
.maroon{color:#600000}
.maroon-background{background:#7d0000}
.navy{color:#000060}
.navy-background{background:#00007d}
.olive{color:#606000}
.olive-background{background:#7d7d00}
.purple{color:#600060}
.purple-background{background:#7d007d}
.red{color:#bf0000}
.red-background{background:#fa0000}
.silver{color:#909090}
.silver-background{background:#bcbcbc}
.teal{color:#006060}
.teal-background{background:#007d7d}
.white{color:#bfbfbf}
.white-background{background:#fafafa}
.yellow{color:#bfbf00}
.yellow-background{background:#fafa00}
span.icon>.fa{cursor:default}
a span.icon>.fa{cursor:inherit}
.admonitionblock td.icon [class^="fa icon-"]{font-size:2.5em;text-shadow:1px 1px 2px rgba(0,0,0,.5);cursor:default}
.admonitionblock td.icon .icon-note::before{content:"\f05a";color:#19407c}
.admonitionblock td.icon .icon-tip::before{content:"\f0eb";text-shadow:1px 1px 2px rgba(155,155,0,.8);color:#111}
.admonitionblock td.icon .icon-warning::before{content:"\f071";color:#bf6900}
.admonitionblock td.icon .icon-caution::before{content:"\f06d";color:#bf3400}
.admonitionblock td.icon .icon-important::before{content:"\f06a";color:#bf0000}
.conum[data-value]{display:inline-block;color:#fff!important;background:rgba(0,0,0,.8);border-radius:50%;text-align:center;font-size:.75em;width:1.67em;height:1.67em;line-height:1.67em;font-family:"Open Sans","DejaVu Sans",sans-serif;font-style:normal;font-weight:bold}
.conum[data-value] *{color:#fff!important}
.conum[data-value]+b{display:none}
.conum[data-value]::after{content:attr(data-value)}
pre .conum[data-value]{position:relative;top:-.125em}
b.conum *{color:inherit!important}
.conum:not([data-value]):empty{display:none}
dt,th.tableblock,td.content,div.footnote{text-rendering:optimizeLegibility}
h1,h2,p,td.content,span.alt,summary{letter-spacing:-.01em}
p strong,td.content strong,div.footnote strong{letter-spacing:-.005em}
p,blockquote,dt,td.content,td.hdlist1,span.alt,summary{font-size:1.0625rem}
p{margin-bottom:1.25rem}
.sidebarblock p,.sidebarblock dt,.sidebarblock td.content,p.tableblock{font-size:1em}
.exampleblock>.content{background:#fffef7;border-color:#e0e0dc;box-shadow:0 1px 4px #e0e0dc}
.print-only{display:none!important}
@page{margin:1.25cm .75cm}
@media print{*{box-shadow:none!important;text-shadow:none!important}
html{font-size:80%}
a{color:inherit!important;text-decoration:underline!important}
a.bare,a[href^="#"],a[href^="mailto:"]{text-decoration:none!important}
a[href^="http:"]:not(.bare)::after,a[href^="https:"]:not(.bare)::after{content:"(" attr(href) ")";display:inline-block;font-size:.875em;padding-left:.25em}
abbr[title]{border-bottom:1px dotted}
abbr[title]::after{content:" (" attr(title) ")"}
pre,blockquote,tr,img,object,svg{page-break-inside:avoid}
thead{display:table-header-group}
svg{max-width:100%}
p,blockquote,dt,td.content{font-size:1em;orphans:3;widows:3}
h2,h3,#toctitle,.sidebarblock>.content>.title{page-break-after:avoid}
#header,#content,#footnotes,#footer{max-width:none}
#toc,.sidebarblock,.exampleblock>.content{background:none!important}
#toc{border-bottom:1px solid #dddddf!important;padding-bottom:0!important}
body.book #header{text-align:center}
body.book #header>h1:first-child{border:0!important;margin:2.5em 0 1em}
body.book #header .details{border:0!important;display:block;padding:0!important}
body.book #header .details span:first-child{margin-left:0!important}
body.book #header .details br{display:block}
body.book #header .details br+span::before{content:none!important}
body.book #toc{border:0!important;text-align:left!important;padding:0!important;margin:0!important}
body.book #toc,body.book #preamble,body.book h1.sect0,body.book .sect1>h2{page-break-before:always}
.listingblock code[data-lang]::before{display:block}
#footer{padding:0 .9375em}
.hide-on-print{display:none!important}
.print-only{display:block!important}
.hide-for-print{display:none!important}
.show-for-print{display:inherit!important}}
@media amzn-kf8,print{#header>h1:first-child{margin-top:1.25rem}
.sect1{padding:0!important}
.sect1+.sect1{border:0}
#footer{background:none}
#footer-text{color:rgba(0,0,0,.6);font-size:.9em}}
@media amzn-kf8{#header,#content,#footnotes,#footer{padding:0}}
</style>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/prettify/r298/prettify.min.css">
</head>
<body class="book toc2 toc-left">
<div id="header">
<h1>Deviens un ninja avec Angular</h1>
<div class="details">
<span id="author" class="author">Ninja Squad</span><br>
</div>
<div id="toc" class="toc2">
<div id="toctitle">Table of Contents</div>
<ul class="sectlevel1">
<li><a href="#intro">1. Introduction</a></li>
<li><a href="#es2015">2. Une rapide introduction à ECMAScript&#160;2015+</a>
<ul class="sectlevel2">
<li><a href="#_transpileur">2.1. Transpileur</a></li>
<li><a href="#_let">2.2. <code>let</code></a></li>
<li><a href="#_constantes">2.3. Constantes</a></li>
<li><a href="#_raccourcis_pour_la_création_dobjets">2.4. Raccourcis pour la création d&#8217;objets</a></li>
<li><a href="#_affectations_déstructurées">2.5. Affectations déstructurées</a></li>
<li><a href="#_paramètres_optionnels_et_valeurs_par_défaut">2.6. Paramètres optionnels et valeurs par défaut</a></li>
<li><a href="#_rest_operator">2.7. <em>Rest operator</em></a></li>
<li><a href="#_classes">2.8. Classes</a></li>
<li><a href="#_promises">2.9. <em>Promises</em></a></li>
<li><a href="#_arrow_functions">2.10. (<em>arrow functions</em>)</a></li>
<li><a href="#_asyncawait">2.11. Async/await</a></li>
<li><a href="#_set_et_map">2.12. <em>Set</em> et <em>Map</em></a></li>
<li><a href="#_template_de_string">2.13. Template de string</a></li>
<li><a href="#modules">2.14. Modules</a></li>
<li><a href="#_conclusion">2.15. Conclusion</a></li>
</ul>
</li>
<li><a href="#types">3. Un peu plus loin qu&#8217;ES2015+</a>
<ul class="sectlevel2">
<li><a href="#_types_dynamiques_statiques_et_optionnels">3.1. Types dynamiques, statiques et optionnels</a></li>
<li><a href="#_hello_typescript">3.2. Hello TypeScript</a></li>
<li><a href="#_un_exemple_concret_dinjection_de_dépendance">3.3. Un exemple concret d&#8217;injection de dépendance</a></li>
</ul>
</li>
<li><a href="#typescript">4. Découvrir TypeScript</a>
<ul class="sectlevel2">
<li><a href="#_les_types_de_typescript">4.1. Les types de TypeScript</a></li>
<li><a href="#_valeurs_énumérées_enum">4.2. Valeurs énumérées (<em>enum</em>)</a></li>
<li><a href="#_return_types">4.3. Return types</a></li>
<li><a href="#_interfaces">4.4. Interfaces</a></li>
<li><a href="#_paramètre_optionnel">4.5. Paramètre optionnel</a></li>
<li><a href="#_des_fonctions_en_propriété">4.6. Des fonctions en propriété</a></li>
<li><a href="#_classes_2">4.7. Classes</a></li>
<li><a href="#_utiliser_dautres_bibliothèques">4.8. Utiliser d&#8217;autres bibliothèques</a></li>
<li><a href="#_décorateurs">4.9. Décorateurs</a></li>
</ul>
</li>
<li><a href="#advanced-typescript">5. TypeScript avancé</a>
<ul class="sectlevel2">
<li><a href="#_readonly">5.1. readonly</a></li>
<li><a href="#_keyof">5.2. keyof</a></li>
<li><a href="#_mapped_type">5.3. Mapped type</a></li>
<li><a href="#_union_de_types_et_gardien_de_types">5.4. Union de types et gardien de types</a></li>
</ul>
</li>
<li><a href="#web-components">6. Le monde merveilleux des Web Components</a>
<ul class="sectlevel2">
<li><a href="#_le_nouveau_monde">6.1. Le nouveau Monde</a></li>
<li><a href="#_custom_elements">6.2. Custom elements</a></li>
<li><a href="#_shadow_dom">6.3. Shadow DOM</a></li>
<li><a href="#_template">6.4. Template</a></li>
<li><a href="#_les_bibliothèques_basées_sur_les_web_components">6.5. Les bibliothèques basées sur les Web Components</a></li>
</ul>
</li>
<li><a href="#philosophy">7. La philosophie d&#8217;Angular</a></li>
<li><a href="#zero-to-something">8. Commencer de zéro</a>
<ul class="sectlevel2">
<li><a href="#_node_js_et_npm">8.1. Node.js et NPM</a></li>
<li><a href="#_angular_cli">8.2. Angular CLI</a></li>
<li><a href="#_structure_de_lapplication">8.3. Structure de l&#8217;application</a></li>
<li><a href="#_notre_premier_composant_standalone">8.4. Notre premier composant <em>standalone</em></a></li>
<li><a href="#_démarrer_lapplication">8.5. Démarrer l&#8217;application</a></li>
</ul>
</li>
<li><a href="#signals-basics">9. Les signaux&#160;: les briques de base de l&#8217;état de l&#8217;application</a>
<ul class="sectlevel2">
<li><a href="#_quest_ce_quun_signal">9.1. Qu&#8217;est-ce qu&#8217;un signal&#160;?</a></li>
<li><a href="#_créer_lire_et_écrire_un_signal">9.2. Créer, lire et écrire un signal</a></li>
</ul>
</li>
<li><a href="#templates">10. La syntaxe des templates</a>
<ul class="sectlevel2">
<li><a href="#_interpolation">10.1. Interpolation</a></li>
<li><a href="#_utiliser_dautres_composants_dans_nos_templates">10.2. Utiliser d&#8217;autres composants dans nos templates</a></li>
<li><a href="#_binding_de_propriété">10.3. <em>Binding</em> de propriété</a></li>
<li><a href="#_événements">10.4. Événements</a></li>
<li><a href="#_expressions_vs_instructions">10.5. Expressions vs instructions</a></li>
<li><a href="#local-variables">10.6. Variables locales</a></li>
<li><a href="#_if_for_et_switch_avec_la_syntaxe_control_flow">10.7. If, For et Switch avec la syntaxe <em>control flow</em></a></li>
<li><a href="#_variable_de_template_avec_let">10.8. Variable de template avec <code>@let</code></a></li>
<li><a href="#_directives_structurelles">10.9. Directives structurelles</a></li>
<li><a href="#_directives_de_templating">10.10. Directives de templating</a></li>
<li><a href="#_résumé">10.11. Résumé</a></li>
</ul>
</li>
<li><a href="#building-components">11. Créer des composants et directives</a>
<ul class="sectlevel2">
<li><a href="#_introduction">11.1. Introduction</a></li>
<li><a href="#_directives">11.2. Directives</a></li>
<li><a href="#_sélecteurs">11.3. Sélecteurs</a></li>
<li><a href="#_inputs_avec_input">11.4. Inputs avec <code>input()</code></a></li>
<li><a href="#_le_décorateur_input">11.5. Le décorateur <code>@Input</code></a></li>
<li><a href="#_outputs_avec_output">11.6. Outputs avec <code>output()</code></a></li>
<li><a href="#_le_décorateur_output">11.7. Le décorateur <code>@Output</code></a></li>
<li><a href="#_cycle_de_vie">11.8. Cycle de vie</a></li>
<li><a href="#_métadonnées_spécifiques_des_composants">11.9. Métadonnées spécifiques des composants</a></li>
<li><a href="#_template_url_de_template">11.10. Template / URL de template</a></li>
<li><a href="#_styles_url_de_styles">11.11. Styles / URL de styles</a></li>
</ul>
</li>
<li><a href="#reacting-to-signal-changes">12. Réagir aux changements des signaux</a>
<ul class="sectlevel2">
<li><a href="#_signaux_calculés_avec_computed">12.1. Signaux calculés avec <code>computed</code></a></li>
<li><a href="#_effets_avec_effect">12.2. Effets avec <code>effect</code></a></li>
</ul>
</li>
<li><a href="#styles">13. Style des composants et encapsulation</a>
<ul class="sectlevel2">
<li><a href="#_stratégie_shadow_dom">13.1. Stratégie <em>Shadow DOM</em></a></li>
<li><a href="#_stratégie_emulated_émulée">13.2. Stratégie <em>Emulated</em> ("émulée")</a></li>
<li><a href="#_stratégie_none_aucune">13.3. Stratégie <em>None</em> ("aucune")</a></li>
<li><a href="#_style_lhôte">13.4. Style l&#8217;hôte</a></li>
</ul>
</li>
<li><a href="#pipes">14. <em>Pipes</em></a>
<ul class="sectlevel2">
<li><a href="#_ceci_nest_pas_une_pipe">14.1. Ceci n&#8217;est pas une pipe</a></li>
<li><a href="#_json">14.2. json</a></li>
<li><a href="#_slice">14.3. slice</a></li>
<li><a href="#_keyvalue_clé_valeur">14.4. keyvalue ("clé valeur")</a></li>
<li><a href="#_uppercase_majuscule">14.5. uppercase ("majuscule")</a></li>
<li><a href="#_lowercase_minuscule">14.6. lowercase ("minuscule")</a></li>
<li><a href="#_titlecase_titre">14.7. titlecase ("titre")</a></li>
<li><a href="#_number_nombre">14.8. number ("nombre")</a></li>
<li><a href="#_percent_pourcent">14.9. percent ("pourcent")</a></li>
<li><a href="#_currency_devise_monétaire">14.10. currency ("devise monétaire")</a></li>
<li><a href="#_date">14.11. date</a></li>
<li><a href="#_async">14.12. async</a></li>
<li><a href="#_un_pipe_dans_ton_code">14.13. Un <em>pipe</em> dans ton code</a></li>
<li><a href="#_créer_tes_propres_pipes">14.14. Créer tes propres <em>pipes</em></a></li>
</ul>
</li>
<li><a href="#dependency-injection">15. Injection de dépendances</a>
<ul class="sectlevel2">
<li><a href="#_cuisine_et_dépendances">15.1. Cuisine et Dépendances</a></li>
<li><a href="#_développement_facile">15.2. Développement facile</a></li>
<li><a href="#_configuration_facile">15.3. Configuration facile</a></li>
<li><a href="#_autres_types_de_provider">15.4. Autres types de provider</a></li>
<li><a href="#_injecteurs_hiérarchiques">15.5. Injecteurs hiérarchiques</a></li>
<li><a href="#_injection_sans_types">15.6. Injection sans types</a></li>
<li><a href="#_services_fournis_par_le_framework">15.7. Services fournis par le framework</a></li>
</ul>
</li>
<li><a href="#reactive-programming">16. Programmation réactive</a>
<ul class="sectlevel2">
<li><a href="#_ok_on_vous_rappellera">16.1. OK, on vous rappellera</a></li>
<li><a href="#_rxjs">16.2. RxJS</a></li>
<li><a href="#_les_signaux_et_linteropérabilité_avec_rxjs">16.3. Les signaux et l&#8217;interopérabilité avec RxJS</a></li>
</ul>
</li>
<li><a href="#tests">17. Tester ton application</a>
<ul class="sectlevel2">
<li><a href="#_tester_cest_douter">17.1. Tester c&#8217;est douter</a></li>
<li><a href="#_tests_unitaires">17.2. Tests unitaires</a></li>
<li><a href="#_dépendances_factices">17.3. Dépendances factices</a></li>
<li><a href="#_tester_des_composants">17.4. Tester des composants</a></li>
<li><a href="#_tester_avec_des_templates_ou_providers_factices">17.5. Tester avec des templates ou providers factices</a></li>
<li><a href="#_des_tests_unitaires_plus_simples_et_plus_propres_avec_ngx_speculoos">17.6. Des tests unitaires plus simples et plus propres avec <code>ngx-speculoos</code></a></li>
<li><a href="#_tests_de_bout_en_bout">17.7. Tests de bout en bout</a></li>
</ul>
</li>
<li><a href="#http">18. Envoyer et recevoir des données par HTTP</a>
<ul class="sectlevel2">
<li><a href="#_obtenir_des_données_providehttpclient">18.1. Obtenir des données (<code>provideHttpClient</code>)</a></li>
<li><a href="#_transformer_des_données">18.2. Transformer des données</a></li>
<li><a href="#_options_avancées">18.3. Options avancées</a></li>
<li><a href="#_intercepteurs">18.4. Intercepteurs</a></li>
<li><a href="#_contexte">18.5. Contexte</a></li>
<li><a href="#_tests">18.6. Tests</a></li>
</ul>
</li>
<li><a href="#router">19. Routeur</a>
<ul class="sectlevel2">
<li><a href="#_en_route_providerouter">19.1. En route (<code>provideRouter</code>)</a></li>
<li><a href="#_navigation">19.2. Navigation</a></li>
<li><a href="#_redirections">19.3. Redirections</a></li>
<li><a href="#_quelle_route_pour_une_url">19.4. Quelle route pour une URL&#160;?</a></li>
<li><a href="#_routes_hiérarchiques">19.5. Routes hiérarchiques</a></li>
<li><a href="#_guards">19.6. Guards</a></li>
<li><a href="#_resolvers">19.7. Resolvers</a></li>
<li><a href="#_événements_de_routage">19.8. Événements de routage</a></li>
<li><a href="#_paramètres_et_data">19.9. Paramètres et data</a></li>
<li><a href="#_lier_les_paramètres_et_data_aux_inputs_des_composants">19.10. Lier les paramètres et data aux inputs des composants</a></li>
<li><a href="#_chargement_à_la_demande">19.11. Chargement à la demande</a></li>
</ul>
</li>
<li><a href="#forms">20. Formulaires</a>
<ul class="sectlevel2">
<li><a href="#_form_form_form_idable">20.1. Form, form, form-idable&#160;!</a></li>
<li><a href="#_formulaire_piloté_par_le_template">20.2. Formulaire piloté par le template</a></li>
<li><a href="#_formulaire_piloté_par_le_code">20.3. Formulaire piloté par le code</a></li>
<li><a href="#_un_peu_de_validation">20.4. Un peu de validation</a></li>
<li><a href="#_erreurs_et_soumission">20.5. Erreurs et soumission</a></li>
<li><a href="#_un_peu_de_style">20.6. Un peu de style</a></li>
<li><a href="#_créer_un_validateur_spécifique">20.7. Créer un validateur spécifique</a></li>
<li><a href="#_regrouper_des_champs">20.8. Regrouper des champs</a></li>
<li><a href="#_réagir_aux_modifications">20.9. Réagir aux modifications</a></li>
<li><a href="#_mettre_à_jour_seulement_à_la_perte_de_focus_ou_à_la_soumission">20.10. Mettre à jour seulement à la perte de focus ou à la soumission</a></li>
<li><a href="#_formarray_et_formrecord">20.11. <code>FormArray</code> et <code>FormRecord</code></a></li>
<li><a href="#_des_formulaires_typés">20.12. Des formulaires typés</a></li>
<li><a href="#_des_messages_derreur_de_validation_super_simples_avec_ngx_valdemort">20.13. Des messages d&#8217;erreur de validation super simples avec <code>ngx-valdemort</code></a></li>
<li><a href="#_aller_plus_loin_définir_ses_propres_contrôles_de_formulaires_avec_controlvalueaccessor">20.14. Aller plus loin&#160;: définir ses propres contrôles de formulaires avec <code>ControlValueAccessor</code></a></li>
<li><a href="#_conclusion_2">20.15. Conclusion</a></li>
</ul>
</li>
<li><a href="#zones">21. Les Zones et la magie d&#8217;Angular</a>
<ul class="sectlevel2">
<li><a href="#_zonejs">21.1. ZoneJS</a></li>
<li><a href="#_la_détection_de_changement">21.2. La détection de changement</a></li>
</ul>
</li>
<li><a href="#aot-compiler">22. Compilation Angular&#160;: JiT (Just in Time) et AoT (Ahead of Time)</a>
<ul class="sectlevel2">
<li><a href="#_génération_de_code">22.1. Génération de Code</a></li>
<li><a href="#_compilation_en_avance_ahead_of_time_aot">22.2. Compilation En Avance (<em>Ahead of Time</em>, AoT)</a></li>
</ul>
</li>
<li><a href="#advanced-observables">23. Observables&#160;: utilisation avancée</a>
<ul class="sectlevel2">
<li><a href="#_certains_laiment_chaud">23.1. Certains l&#8217;aiment chaud</a></li>
<li><a href="#_dé_souscriptions">23.2. Dé-souscriptions</a></li>
<li><a href="#_dé_souscriptions_automatiques">23.3. Dé-souscriptions automatiques</a></li>
<li><a href="#_le_pouvoir_des_opérateurs">23.4. Le pouvoir des opérateurs</a></li>
<li><a href="#_utiliser_les_subjects_comme_déclencheurs">23.5. Utiliser les Subjects comme déclencheurs</a></li>
<li><a href="#_construire_son_propre_observable">23.6. Construire son propre Observable</a></li>
<li><a href="#_gestion_détat_avec_un_store_ngrx_ngxs_elf_et_autres">23.7. Gestion d&#8217;état avec un <em>store</em> (NgRx, NGXS, Elf et autres)</a></li>
<li><a href="#_conclusion_3">23.8. Conclusion</a></li>
</ul>
</li>
<li><a href="#advanced-components">24. Composants et directives avancés</a>
<ul class="sectlevel2">
<li><a href="#_transformation_dinputs">24.1. Transformation d&#8217;inputs</a></li>
<li><a href="#_requêtes_de_vue_viewchild">24.2. Requêtes de vue&#160;: <code>viewChild</code></a></li>
<li><a href="#_contenu_ng_content">24.3. Contenu&#160;: <code>ng-content</code></a></li>
<li><a href="#_requêtes_de_contenu_contentchild">24.4. Requêtes de contenu&#160;: <code>contentChild</code></a></li>
<li><a href="#_projection_de_contenu_conditionnelle_et_contextuelle_ng_template_et_ngtemplateoutlet">24.5. Projection de contenu conditionnelle et contextuelle&#160;: <code>ng-template</code> et <code>ngTemplateOutlet</code></a></li>
<li><a href="#_à_lécoute_de_lhôte_host_listener">24.6. À l&#8217;écoute de l&#8217;hôte&#160;: <em>Host Listener</em></a></li>
<li><a href="#_binding_sur_lhôte_host_binding">24.7. Binding sur l&#8217;hôte&#160;: <em>Host binding</em></a></li>
<li><a href="#_manipulation_de_dom_avec_afterrender_ou_afternextrender">24.8. Manipulation de DOM avec <code>afterRender</code> ou <code>afterNextRender</code></a></li>
</ul>
</li>
<li><a href="#angular-modules">25. Les modules Angular</a>
<ul class="sectlevel2">
<li><a href="#_une_unité_de_compilation">25.1. Une unité de compilation</a></li>
<li><a href="#_composition_de_modules">25.2. Composition de modules</a></li>
<li><a href="#_modules_fonctionnels_associés_au_routage">25.3. Modules fonctionnels associés au routage</a></li>
</ul>
</li>
<li><a href="#internationalisation">26. Internationalisation</a>
<ul class="sectlevel2">
<li><a href="#_la_locale">26.1. La <em>locale</em></a></li>
<li><a href="#_la_devise_par_défaut">26.2. La devise par défaut</a></li>
<li><a href="#_traduire_du_texte">26.3. Traduire du texte</a></li>
<li><a href="#_processus_et_outillage">26.4. Processus et outillage</a></li>
<li><a href="#_traduire_les_messages_dans_le_code">26.5. Traduire les messages dans le code</a></li>
<li><a href="#_pluralisation">26.6. Pluralisation</a></li>
<li><a href="#_i18n_à_lexécution_avec_transloco">26.7. I18n à l&#8217;exécution avec Transloco</a></li>
<li><a href="#_bonnes_pratiques">26.8. Bonnes pratiques</a></li>
</ul>
</li>
<li><a href="#performances">27. Performances</a>
<ul class="sectlevel2">
<li><a href="#_premier_chargement_bundling_compression_lazy_loading_rendu_côté_serveur">27.1. Premier chargement (<em>bundling</em>, compression, <em>lazy-loading</em>, rendu côté serveur&#8230;&#8203;)</a></li>
<li><a href="#_rechargement_cache_service_worker">27.2. Rechargement (cache, <em>service worker</em>)</a></li>
<li><a href="#_profilage">27.3. Profilage</a></li>
<li><a href="#_performances_à_lexécution">27.4. Performances à l&#8217;exécution</a></li>
<li><a href="#_mode_production">27.5. Mode production</a></li>
<li><a href="#_track_dans_les_boucles_for">27.6. <code>track</code> dans les boucles <em>for</em></a></li>
<li><a href="#_stratégies_de_détection_de_changements">27.7. Stratégies de détection de changements</a></li>
<li><a href="#_sortir_de_la_zone">27.8. Sortir de la zone</a></li>
<li><a href="#_détection_de_changements_zoneless">27.9. Détection de changements <em>zoneless</em></a></li>
<li><a href="#_pipes_purs">27.10. <em>Pipes</em> purs</a></li>
</ul>
</li>
<li><a href="#signals">28. Signaux&#160;: pour aller plus loin</a>
<ul class="sectlevel2">
<li><a href="#_égalité">28.1. Égalité</a></li>
<li><a href="#_untracked">28.2. <code>untracked</code></a></li>
<li><a href="#_effets_racine_et_effets_de_composant">28.3. Effets racine et effets de composant</a></li>
<li><a href="#_afterrendereffect">28.4. <code>afterRenderEffect</code></a></li>
<li><a href="#_nettoyage_dun_effet">28.5. Nettoyage d&#8217;un effet</a></li>
<li><a href="#_binding_bidirectionnel_avec_les_model_inputs">28.6. Binding bidirectionnel avec les <code>model</code> inputs</a></li>
<li><a href="#_signaux_liés_avec_linkedsignal">28.7. Signaux liés avec <code>linkedSignal</code></a></li>
<li><a href="#_ressources_asynchrones_avec_resource_et_rxresource">28.8. Ressources asynchrones avec <code>resource</code> et <code>rxResource</code></a></li>
<li><a href="#_appels_http_avec_httpresource">28.9. Appels HTTP avec <code>httpResource</code></a></li>
</ul>
</li>
<li><a href="#defer">29. Chargement différé avec <code>@defer</code></a>
<ul class="sectlevel2">
<li><a href="#_placeholder_loading_et_error">29.1. <code>@placeholder</code>, <code>@loading</code> et <code>@error</code></a></li>
<li><a href="#_conditions">29.2. Conditions</a></li>
<li><a href="#_pré_chargement_avec_prefetch">29.3. Pré-chargement avec <code>prefetch</code></a></li>
<li><a href="#_comment_tester_le_chargement_différé">29.4. Comment tester le chargement différé&#160;?</a></li>
</ul>
</li>
<li><a href="#going-to-production">30. Livrer en production</a>
<ul class="sectlevel2">
<li><a href="#_environnements_et_configurations">30.1. Environnements et configurations</a></li>
<li><a href="#_stricttemplates">30.2. strictTemplates</a></li>
<li><a href="#_assembler_ton_application">30.3. Assembler ton application</a></li>
<li><a href="#_configuration_du_serveur">30.4. Configuration du serveur</a></li>
<li><a href="#_conclusion_5">30.5. Conclusion</a></li>
</ul>
</li>
<li><a href="#ending">31. Ce n&#8217;est qu&#8217;un au revoir</a></li>
<li><a href="#changelog">Annexe A: Historique des versions</a>
<ul class="sectlevel2">
<li><a href="#_v19_2_0_2025_02_26">A.1. v19.2.0 - 2025-02-26</a></li>
<li><a href="#_v19_1_0_2025_01_16">A.2. v19.1.0 - 2025-01-16</a></li>
<li><a href="#_v19_0_0_2024_11_19">A.3. v19.0.0 - 2024-11-19</a></li>
<li><a href="#_v18_2_0_2024_08_15">A.4. v18.2.0 - 2024-08-15</a></li>
<li><a href="#_v18_1_0_2024_07_10">A.5. v18.1.0 - 2024-07-10</a></li>
<li><a href="#_v18_0_0_2024_05_22">A.6. v18.0.0 - 2024-05-22</a></li>
<li><a href="#_v17_3_0_2024_03_14">A.7. v17.3.0 - 2024-03-14</a></li>
<li><a href="#_v17_2_0_2024_02_15">A.8. v17.2.0 - 2024-02-15</a></li>
<li><a href="#_v17_1_0_2024_01_18">A.9. v17.1.0 - 2024-01-18</a></li>
<li><a href="#_v17_0_0_2023_11_08">A.10. v17.0.0 - 2023-11-08</a></li>
<li><a href="#_v16_2_0_2023_08_10">A.11. v16.2.0 - 2023-08-10</a></li>
<li><a href="#_v16_1_0_2023_06_14">A.12. v16.1.0 - 2023-06-14</a></li>
<li><a href="#_v16_0_0_2023_05_17">A.13. v16.0.0 - 2023-05-17</a></li>
<li><a href="#_v15_2_0_2023_02_23">A.14. v15.2.0 - 2023-02-23</a></li>
<li><a href="#_v15_1_0_2023_01_11">A.15. v15.1.0 - 2023-01-11</a></li>
<li><a href="#_v15_0_0_2022_11_16">A.16. v15.0.0 - 2022-11-16</a></li>
<li><a href="#_v14_2_0_2022_08_26">A.17. v14.2.0 - 2022-08-26</a></li>
<li><a href="#_v14_1_0_2022_07_21">A.18. v14.1.0 - 2022-07-21</a></li>
<li><a href="#_v14_0_0_2022_06_03">A.19. v14.0.0 - 2022-06-03</a></li>
<li><a href="#_v13_3_0_2022_03_16">A.20. v13.3.0 - 2022-03-16</a></li>
<li><a href="#_v13_2_0_2022_01_27">A.21. v13.2.0 - 2022-01-27</a></li>
<li><a href="#_v13_1_0_2021_12_10">A.22. v13.1.0 - 2021-12-10</a></li>
<li><a href="#_v13_0_0_2021_11_04">A.23. v13.0.0 - 2021-11-04</a></li>
<li><a href="#_v12_2_0_2021_08_05">A.24. v12.2.0 - 2021-08-05</a></li>
<li><a href="#_v12_1_0_2021_06_25">A.25. v12.1.0 - 2021-06-25</a></li>
<li><a href="#_v12_0_0_2021_05_13">A.26. v12.0.0 - 2021-05-13</a></li>
<li><a href="#_v11_2_0_2021_02_12">A.27. v11.2.0 - 2021-02-12</a></li>
<li><a href="#_v11_1_0_2021_01_21">A.28. v11.1.0 - 2021-01-21</a></li>
<li><a href="#_v11_0_0_2020_11_12">A.29. v11.0.0 - 2020-11-12</a></li>
<li><a href="#_v10_2_0_2020_10_22">A.30. v10.2.0 - 2020-10-22</a></li>
<li><a href="#_v10_1_0_2020_09_03">A.31. v10.1.0 - 2020-09-03</a></li>
<li><a href="#_v10_0_0_2020_06_25">A.32. v10.0.0 - 2020-06-25</a></li>
<li><a href="#_v9_1_0_2020_03_26">A.33. v9.1.0 - 2020-03-26</a></li>
<li><a href="#_v9_0_0_2020_02_07">A.34. v9.0.0 - 2020-02-07</a></li>
<li><a href="#_v8_2_0_2019_08_01">A.35. v8.2.0 - 2019-08-01</a></li>
<li><a href="#_v8_1_0_2019_07_02">A.36. v8.1.0 - 2019-07-02</a></li>
<li><a href="#_v8_0_0_2019_05_29">A.37. v8.0.0 - 2019-05-29</a></li>
<li><a href="#_v7_2_0_2019_01_09">A.38. v7.2.0 - 2019-01-09</a></li>
<li><a href="#_v7_1_0_2018_11_27">A.39. v7.1.0 - 2018-11-27</a></li>
<li><a href="#_v7_0_0_2018_10_25">A.40. v7.0.0 - 2018-10-25</a></li>
<li><a href="#_v6_1_0_2018_07_26">A.41. v6.1.0 - 2018-07-26</a></li>
<li><a href="#_v6_0_0_2018_05_04">A.42. v6.0.0 - 2018-05-04</a></li>
<li><a href="#_v5_2_0_2018_01_10">A.43. v5.2.0 - 2018-01-10</a></li>
<li><a href="#_v5_0_0_2017_11_02">A.44. v5.0.0 - 2017-11-02</a></li>
<li><a href="#_v4_3_0_2017_07_16">A.45. v4.3.0 - 2017-07-16</a></li>
<li><a href="#_v4_2_0_2017_06_09">A.46. v4.2.0 - 2017-06-09</a></li>
<li><a href="#_v4_0_0_2017_03_24">A.47. v4.0.0 - 2017-03-24</a></li>
<li><a href="#_v2_4_4_2017_01_25">A.48. v2.4.4 - 2017-01-25</a></li>
<li><a href="#_v2_2_0_2016_11_18">A.49. v2.2.0 - 2016-11-18</a></li>
<li><a href="#_v2_0_0_2016_09_15">A.50. v2.0.0 - 2016-09-15</a></li>
<li><a href="#_v2_0_0_rc_5_2016_08_25">A.51. v2.0.0-rc.5 - 2016-08-25</a></li>
<li><a href="#_v2_0_0_rc_0_2016_05_06">A.52. v2.0.0-rc.0 - 2016-05-06</a></li>
<li><a href="#_v2_0_0_alpha_47_2016_01_15">A.53. v2.0.0-alpha.47 - 2016-01-15</a></li>
</ul>
</li>
</ul>
</div>
</div>
<div id="content">
<div id="preamble">
<div class="sectionbody">
<div style="page-break-after: always;"></div>
</div>
</div>
<div class="sect1">
<h2 id="intro">1. Introduction</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Alors comme ça on veut devenir un ninja&#160;?!
Ça tombe bien, tu es entre de bonnes mains&#160;!</p>
</div>
<div class="paragraph">
<p>Mais pour y parvenir, nous avons un bon bout de chemin à parcourir ensemble,
semé d&#8217;embûches et de connaissances à acquérir :).</p>
</div>
<div class="paragraph">
<p>On vit une époque excitante pour le développement web.
Il y a un nouvel Angular, une réécriture complète de ce bon vieil AngularJS.
Pourquoi une réécriture complète&#160;? AngularJS&#160;1.x ne suffisait-il donc pas&#160;?</p>
</div>
<div class="paragraph">
<p>J&#8217;adore cet ancien AngularJS. Dans notre petite entreprise, on l&#8217;a utilisé pour construire plusieurs projets,
on a contribué du code au cœur du framework, on a formé des centaines de développeurs (oui, des centaines, littéralement),
et on a même écrit un livre sur le sujet.</p>
</div>
<div class="paragraph">
<p>AngularJS est incroyablement productif une fois maîtrisé.
Mais cela ne nous empêche pas de constater ses faiblesses.
AngularJS n&#8217;est pas parfait, avec des concepts très difficiles à cerner, et des pièges ardus à éviter.</p>
</div>
<div class="paragraph">
<p>Et qui plus est, le web a bien évolué depuis qu&#8217;AngularJS a été conçu.
JavaScript a changé.
De nouveaux frameworks sont apparus, avec de belles idées, ou de meilleures implémentations.
Nous ne sommes pas le genre de développeurs à te conjurer d&#8217;utiliser tel outil plutôt que tel autre.
Nous connaissons juste très bien quelques outils et savons ce qui peut correspondre au projet.
AngularJS était un de ces outils, qui nous permettait de construire des applications web bien testées, et de les construire vite.
On a aussi essayé de le plier quand il n&#8217;était pas forcément l&#8217;outil idéal. Merci de ne pas nous condamner, ça arrive aux meilleurs d&#8217;entre nous, n&#8217;est-ce pas&#160;? ;p</p>
</div>
<div class="paragraph">
<p>En tout cas, Angular a beaucoup de points positifs, et une vision dont peu de frameworks peuvent se targuer.
Il a été conçu pour le web de demain, avec ECMAScript&#160;6, les Web Components, et le mobile en tête.
Quand il a été annoncé, j&#8217;ai d&#8217;abord été triste, comme beaucoup de gens, en réalisant que cette version 2.0 n&#8217;allait pas être une simple évolution (et désolé si tu viens de l&#8217;apprendre).</p>
</div>
<div class="paragraph">
<p>Mais j&#8217;étais aussi très curieux de voir quelles idées allait apporter la talentueuse équipe de Google.</p>
</div>
<div class="paragraph">
<p>Alors j&#8217;ai commencé à écrire ce livre, dès les premiers commits,
lisant les documents de conception, regardant les vidéos de conférences, et analysant chaque commit depuis le début.
J&#8217;avais écrit mon premier livre sur AngularJS&#160;1.x quand c&#8217;était déjà un animal connu et bien apprivoisé.
Ce livre-ci est très différent, commencé quand rien n&#8217;était encore clair dans la tête même des concepteurs.
Parce que je savais que j&#8217;allais apprendre beaucoup, sur Angular évidemment,
mais aussi sur les concepts qui allaient définir le futur du développement web, et certains n&#8217;ont rien à voir avec Angular.
Et ce fut le cas. J&#8217;ai du creuser pas mal,
et j&#8217;espère que tu vas apprécier revivre ces découvertes avec moi, et comprendre comment ces concepts s&#8217;articulent avec Angular.</p>
</div>
<div class="paragraph">
<p>L&#8217;ambition de cet ebook est d&#8217;évoluer avec Angular.
S&#8217;il s&#8217;avère qu&#8217;Angular devient le grand framework qu&#8217;on espère,
tu en recevras des mises à jour avec des bonnes pratiques et de nouvelles fonctionnalités quand elles émergeront
(et avec moins de fautes de frappe, parce qu&#8217;il en reste probablement malgré nos nombreuses relectures&#8230;&#8203;).
Et j&#8217;adorerais avoir tes retours, si certains chapitres ne sont pas assez clairs,
si tu as repéré une erreur, ou si tu as une meilleure solution pour certains points.</p>
</div>
<div class="paragraph">
<p>Je suis cependant assez confiant sur nos exemples de code,
parce qu&#8217;ils sont extraits d&#8217;un vrai projet, et sont couverts par des centaines de tests unitaires.
C&#8217;était la seule façon d&#8217;écrire un livre sur un framework en gestation, et de repérer les problèmes
qui arrivaient inévitablement avec chaque release.</p>
</div>
<div class="paragraph">
<p>Même si au final tu n&#8217;es pas convaincu par Angular, je suis à peu près sûr que tu vas apprendre deux-trois trucs en chemin.</p>
</div>
<div class="paragraph">
<p>Si tu as acheté le "pack pro" (merci&#160;!), tu pourras construire une petite application morceau par morceau, tout au long du livre.
Cette application s&#8217;appelle <strong>PonyRacer</strong>, c&#8217;est un site web où tu peux parier sur des courses de poneys.
Tu peux même <a href="https://ng-ponyracer.ninja-squad.com">tester cette application ici</a>&#160;!
Vas-y, je t&#8217;attends.</p>
</div>
<div class="paragraph">
<p>Cool, non&#160;?</p>
</div>
<div class="paragraph">
<p>Mais en plus d&#8217;être super cool, c&#8217;est une application complète.
Tu devras écrire des composants, des formulaires, des tests,
tu devras utiliser le routeur, appeler une API HTTP (fournie), et même faire des Web Sockets.
Elle intègre tous les morceaux dont tu auras besoin pour construire une vraie application.</p>
</div>
<div class="paragraph">
<p>Chaque exercice viendra avec son squelette, un ensemble d&#8217;instructions et quelques tests.
Quand tu auras tous les tests en succès, tu auras terminé l&#8217;exercice&#160;!</p>
</div>
<div class="paragraph">
<p>Les 6 premiers exercices du Pack Pro sont gratuits.
Les autres ne sont accessibles que pour les acheteurs de notre formation en ligne.
À la fin de chaque chapitre,
nous listerons les exercices du Pack Pro liés aux fonctionnalités expliquées dans le chapitre,
en signalant les exercices gratuits avec le symbole suivant&#160;:
<span class="image"><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAIgAAACACAMAAADnN9ENAAACN1BMVEVMaXF1aF51aF51aF51aF51aF51aF51aF51aF51aF51aF51aF51aF51aF6CcGNyZVxFQz9FQz9FQz9FQz+OeGi4kni0j3ZjWlJIRUFFQz9FQz+ghHC6lHqxj3eYfmx5a2BFQz9FQz9FQz9gWFGXfWtnXVROSkVsYVitjHV1aF5FQz9oW1GbfmqqiHFMSENRTEeKeGv0zK/wyKvPqI1TTUZbUkpdVk+finr81LbTrJFFQz9mXFS5nor40LLCnIJ+bmJyZlzSspvsxKdFQz9LSEPauaDLpIm2kXhFQz9XUUvnwKOPeWlgWFCGdmm+mH6khnFFQz9FQz+Xg3TfuJzJrJWGc2VaU01PSUNmWU51YlRdU0qwl4VKRkFrXFCRdWGUd2OmhW63knhiV05qXFGdgGvjvKDbtJhFQz9YUEiIb12OdmRxYVWLdmejg2xTTEWDbFuZe2ayjnWkhW94ZllvY1qWeWRUTUarinN+aVmef2mVe2iTe2pwX1Kohm+piXNaUkqMcl+tinKAbF1eVEpiVkyRdWG1kHeRdWGRdWGHcWCRdWGzj3aRdWGRdWGggWyXe2ePdGNAPDhCQ0NWV1c5OTmRdWF1YlUvLy+/w8PJzc22ubmGbl6RdWGph3FMTU2RdWFsW1CGiIiriHFSSEJaT0aRdWGggWp9aFmRdWE4NTSxjnWRdWGRdWGRdWGRdWGwjHSbfWd/aFhIQTxaTkU7ODVsW055ZFVORT9BPDhyX1GLcV5USUI1MzK6wa3dAAAAr3RSTlMAYIBAj/+/EJ/PcO8wUP/fYIBwMP///////9///////yBQv3D//////9/P////////////////////7///////////EP////+f/////////0Cv////////////////////////////j////////////////////////////////////2D/YP8w7/8g/xDP/////////5////////9w//9Q//////+v//+A//9Av9+PTccICgAABmhJREFUeAHs1YVC5ToUheEgC5cTfB827u4Q3N3d3e8dg3F796nQCe7t2Pme4G+brIqA31dAQEBAQFBwcIj4DYTCEBYuHOERACKjwoXXomGKjhFnwmCJjhUeA+JgiPdJmZAo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" alt="Free" width="18"></span>
, et les autres avec le symbole suivant&#160;:
<span class="image"><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAIgAAACACAMAAADnN9ENAAACSVBMVEVMaXH7whr7whr7whr7whr7whr7whr7whr7whr7whr7whr7whp4o614o614o614o637whr7whp4o614o614o614o614o614o614o614o62EoKN4o614o637whqFXFKFXFKQnZm4kni0k3vA1Njr8fLd5+myytB/qLGFXFKFXFKcmY98oqp4o63V4uWFXFKFXFKoloWgmIx4o62Hpqu+nofCpI/b08yFXFKAoaaMnpzYzcSFXFKFXFKUnJaYm5O7mIDl5eOGrbaFXFKGk5Kfd2WSalyYcGClfmqhlIZ6lpx+hIWDaWOFXFKFXFJ/gICkl4nFqpeFXFKFXFKCamSDZV2EYFiDaWOCbmne2dTk7O77whqOZE6Ad3TIsJ6jwMflryWbb0h/gIDo6+rH2dz0vB58jZGIn6Cxgj17kZbOvK2FXFL7whq5iTqVt75/e3rPnC/eqSiMYk+FXFKjdkS4p6Ll6OjLtqbSwrXFubacu8PstSGynZiOsrqLZVzauj/013mrlI56mqLCtFrt69fY1dSApaTrvizz2oafgXqSb2aqxcuhrX/11GvO3uGQeHG5z9T20V7e3t7s7uX4y0P6xSjv5byYeHC+sKyli4TSzMrIzc28wcGwtLVHR0c8OztIR0c1NTWNkJEvLy+NioqTkJCHhISlqKnU2dpCQUGBhIRnZmZeYGBqbGyZnJ07Ozvf5ebLwsCmqapfYGFiYmLAw8Tw9fXs8vNqjZVBTE9PYmY4Pj9deH5mho5GU1Y9RUdhf4ZznKVKW140Njdz5u6AAAAAf3RSTlMAMIBQ7/+fEI/PYL8QcIBAIK+v/7+fz+8wUP/fYEAgEP//////////32D//yD//7///4//////UP///zDv///////P//////////+vj3Ag//+fQJ/////////fz///////////////////gHD///////+v//////////////9AWHP9fwAABxxJREFUeAHs1IVy5DAQBNBZ0DJ3mJUonGiPmZmZmZmZPv6ssb2oFFqHeYUq7LJ7mlatWhWVWDxBf4SkEHH6EwhPKk2/X0Z4sn9AknRSeJIx+u0SguXot8sLliG7QrFUKtOvUEkKVrUXpQZPT6EZrBdAX7FA0YsLX7ZCFv0w+gco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" alt="Pro" width="18"></span>.</p>
</div>
<div class="paragraph">
<p>Si tu n&#8217;as pas acheté le "pack pro" (tu devrais), ne t&#8217;inquiète pas&#160;:
tu apprendras tout ce dont tu auras besoin.
Mais tu ne construiras pas cette application incroyable avec de beaux poneys en pixel art.
Quel dommage :)&#160;!</p>
</div>
<div class="paragraph">
<p>Tu te rendras vite compte qu&#8217;au-delà d&#8217;Angular, nous avons essayé d&#8217;expliquer les concepts au cœur du framework.
Les premiers chapitres ne parlent même pas d&#8217;Angular&#160;: ce sont ceux que j&#8217;appelle les "chapitres conceptuels",
ils te permettront de monter en puissance avec les nouveautés intéressantes de notre domaine.</p>
</div>
<div class="paragraph">
<p>Ensuite, nous construirons progressivement notre connaissance du framework, avec les composants, les templates, les <em>pipes</em>, les formulaires, http, le routeur, les tests&#8230;&#8203;</p>
</div>
<div class="paragraph">
<p>Et enfin, nous nous attaquerons à quelques sujets avancés.
Mais c&#8217;est une autre histoire.</p>
</div>
<div class="paragraph">
<p>Passons cette trop longue introduction,
et jetons-nous sur un sujet qui va définitivement changer notre façon de coder&#160;: ECMAScript&#160;6.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
Cet ebook utilise Angular version 19.2.8 dans les exemples.
</td>
</tr>
</table>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="title">Angular et versions</div>
<div class="paragraph">
<p>Le titre de ce livre était à l&#8217;origine "Deviens un Ninja avec Angular&#160;2".
Car à l&#8217;origine, Google appelait ce framework Angular&#160;2.
Depuis, ils ont revu leur politique de <em>versioning</em>.</p>
</div>
<div class="paragraph">
<p>Nous avons maintenant une version majeure tous les 6 mois.
Et désormais, le framework est simplement nommé “Angular”.</p>
</div>
<div class="paragraph">
<p>Pas d&#8217;inquiétudes, ces versions majeures ne seront pas des réécritures complètes sans compatibilité ascendante,
comme Angular&#160;2 l&#8217;a été pour AngularJS&#160;1.x.</p>
</div>
<div class="paragraph">
<p>Comme cet ebook est (gratuitement) mis à jour avec chacune des versions majeures,
il est désormais nommé "Deviens un Ninja avec Angular" (sans aucun numéro).</p>
</div>
</td>
</tr>
</table>
</div>
<div style="page-break-after: always;"></div>
</div>
</div>
<div class="sect1">
<h2 id="es2015">2. Une rapide introduction à ECMAScript&#160;2015+</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Si tu lis ce livre, on peut imaginer que tu as déjà entendu parler de JavaScript.
Ce qu&#8217;on appelle JavaScript (JS) est une des implémentations d&#8217;une spécification standardisée, appelée ECMAScript.
La version de la spécification que tu connais le plus est probablement la version 5&#160;:
c&#8217;est celle utilisée depuis de nombreuses années.</p>
</div>
<div class="paragraph">
<p>En 2015, une nouvelle version de cette spécification a été validée&#160;:
ECMAScript&#160;2015, ES2015, ou ES6,
puisque c&#8217;est la sixième version de cette specification.
Et nous avons depuis une nouvelle version chaque année (ES2016, ES2017, etc.),
avec à chaque fois quelques nouvelles fonctionnalités.
Je l&#8217;appellerai désormais systématiquement ES2015, parce que c&#8217;est son petit nom le plus populaire,
ou ES2015+ pour parler de ES2015, ES2016, ES2017, etc.
Elle ajoute une tonne de fonctionnalités à JavaScript, comme les classes,
les constantes, les <em>arrow functions</em>, les générateurs&#8230;&#8203;
Il y a tellement de choses qu&#8217;on ne peut pas tout couvrir, sauf à y consacrer entièrement ce livre.
Mais Angular a été conçu pour bénéficier de cette nouvelle version de JavaScript.
Même si tu peux toujours utiliser ton bon vieux JavaScript, tu auras plein d&#8217;avantages à utiliser ES2015+.
Ainsi, nous allons consacrer ce chapitre à découvrir ES2015+,
et voir comment il peut nous être utile pour construire une application Angular.</p>
</div>
<div class="paragraph">
<p>On va laisser beaucoup d&#8217;aspects de côté, et on ne sera pas exhaustifs sur ce qu&#8217;on verra.
Si tu connais déjà ES2015+, tu peux directement sauter ce chapitre.
Sinon, tu vas apprendre des trucs plutôt incroyables qui te serviront à l&#8217;avenir
même si tu n&#8217;utilises finalement pas Angular&#160;!</p>
</div>
<div class="sect2">
<h3 id="_transpileur">2.1. Transpileur</h3>
<div class="paragraph">
<p>La sixième version de la spécification a atteint son état final en 2015.
Il est donc supporté par les navigateurs modernes,
mais il y a encore des navigateurs qui ne supportent pas toute la spécification,
ou qui la supportent seulement partiellement.
Et bien sûr, avec une spécification maintenant annuelle (ES2016, ES2017, etc.),
certains navigateurs seront toujours en retard.
Ainsi, on peut se demander à quoi bon présenter le sujet s&#8217;il est toujours en pleine évolution&#160;?
Et tu as raison, car rares sont les applications qui peuvent se permettre d&#8217;ignorer les navigateurs devenus obsolètes.
Mais comme tous les développeurs qui ont essayé ES2015+ ont hâte de l&#8217;utiliser dans leurs applications,
la communauté a trouvé une solution&#160;: un transpileur.</p>
</div>
<div class="paragraph">
<p>Un transpileur prend du code source ES2015+ en entrée et génère du code ES5, qui peut tourner dans n&#8217;importe quel navigateur.
Il génère même les fichiers <em>source map</em>, qui permettent de débugger directement le code ES2015+ depuis le navigateur.
En 2015, il y avait deux outils principaux pour transpiler de l&#8217;ES2015+&#160;:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><a href="https://github.com/google/traceur-compiler">Traceur</a>, un projet Google,
historiquement le premier, mais maintenant non-maintenu.</p>
</li>
<li>
<p><a href="https://babeljs.io/">Babeljs</a>, un projet démarré par Sebastian McKenzie, un jeune développeur de 17 ans (oui, ça fait mal),
et qui a reçu beaucoup de contributions extérieures.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Le code source d&#8217;Angular était d&#8217;ailleurs transpilé avec Traceur, avant de basculer en TypeScript.
TypeScript est un langage open source développé par Microsoft.
C&#8217;est un sur-ensemble typé de JavaScript qui compile vers du JavaScript standard, mais nous étudierons cela très bientôt.</p>
</div>
<div class="paragraph">
<p>Pour parler franchement, Babel est biiiiien plus populaire que Traceur aujourd&#8217;hui, on aurait donc tendance à te le conseiller.
Le projet est maintenant le standard de-facto.</p>
</div>
<div class="paragraph">
<p>Si tu veux jouer avec ES2015+, ou le mettre en place dans un de tes projets,
jette un œil à ces transpileurs, et ajoute une étape à la construction de ton projet.
Elle prendra tes fichiers sources ES2015+ et générera l&#8217;équivalent en ES5.
Ça fonctionne très bien mais, évidemment, certaines fonctionnalités nouvelles sont difficiles voire impossibles à transformer,
parce qu&#8217;elles n&#8217;existent tout simplement pas en ES5.
Néanmoins, l&#8217;état d&#8217;avancement actuel de ces transpileurs est largement suffisant pour les utiliser sans problèmes,
alors jetons un coup d&#8217;œil à ces nouveautés ES2015+.</p>
</div>
</div>
<div class="sect2">
<h3 id="_let">2.2. <code>let</code></h3>
<div class="paragraph">
<p>Si tu pratiques le JS depuis un certain temps,
tu dois savoir que la déclaration de variable avec <code>var</code> peut être délicate.
Dans à peu près tous les autres langages,
une variable existe à partir de la ligne contenant la déclaration de cette variable.
Mais en JS, il y a un concept nommé <em>hoisting</em> ("remontée") qui déclare la variable au tout début de la fonction,
même si tu l&#8217;as écrite plus loin.</p>
</div>
<div class="paragraph">
<p>Ainsi, déclarer une variable <code>name</code> dans le bloc <code>if</code>&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="javascript">function getPonyFullName(pony) {
  if (pony.isChampion) {
    var name = 'Champion ' + pony.name;
    return name;
  }
  return pony.name;
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>est équivalent à la déclarer tout en haut de la fonction&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="javascript">function getPonyFullName(pony) {
  var name;
  if (pony.isChampion) {
    name = 'Champion ' + pony.name;
    return name;
  }
  // name is still accessible here
  return pony.name;
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>ES2015 introduit un nouveau mot-clé pour la déclaration de variable, <code>let</code>,
qui se comporte enfin comme on pourrait s&#8217;y attendre&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="javascript">function getPonyFullName(pony) {
  if (pony.isChampion) {
    let name = 'Champion ' + pony.name;
    return name;
  }
  // name is not accessible here
  return pony.name;
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>L&#8217;accès à la variable <code>name</code> est maintenant restreint à son bloc.
<code>let</code> a été pensé pour remplacer définitivement <code>var</code> à long terme,
donc tu peux abandonner ce bon vieux <code>var</code> au profit de <code>let</code>.
La bonne nouvelle est que ça doit être indolore, et que si ça ne l&#8217;est pas,
c&#8217;est que tu as mis le doigt sur un défaut de ton code&#160;!</p>
</div>
</div>
<div class="sect2">
<h3 id="_constantes">2.3. Constantes</h3>
<div class="paragraph">
<p>Tant qu&#8217;on est sur le sujet des nouveaux mot-clés et des variables,
il y en a un autre qui peut être intéressant.
ES2015 introduit aussi <code>const</code> pour déclarer des&#8230;&#8203; constantes&#160;!
Si tu déclares une variable avec <code>const</code>, elle doit obligatoirement être initialisée,
et tu ne pourras plus lui affecter de nouvelle valeur par la suite.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="javascript">const poniesInRace = 6;</code></pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="javascript">poniesInRace = 7; // SyntaxError</code></pre>
</div>
</div>
<div class="paragraph">
<p>Comme pour les variables déclarées avec <code>let</code>,
les constantes ne sont pas hoisted ("remontées") et sont bien déclarées dans leur bloc.</p>
</div>
<div class="paragraph">
<p>Il y a un détail qui peut cependant surprendre le profane.
Tu peux initialiser une constante avec un objet et modifier par la suite le contenu de l&#8217;objet.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="javascript">const PONY = {};
PONY.color = 'blue'; // works</code></pre>
</div>
</div>
<div class="paragraph">
<p>Mais tu ne peux pas assigner à la constante un nouvel objet&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="javascript">const PONY = {};</code></pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="javascript">PONY = {color: 'blue'}; // SyntaxError</code></pre>
</div>
</div>
<div class="paragraph">
<p>Même chose avec les tableaux&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="javascript">const PONIES = [];
PONIES.push({ color: 'blue' }); // works</code></pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="javascript">PONIES = []; // SyntaxError</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_raccourcis_pour_la_création_dobjets">2.4. Raccourcis pour la création d&#8217;objets</h3>
<div class="paragraph">
<p>Ce n&#8217;est pas un nouveau mot-clé, mais ça peut te faire tiquer en lisant du code ES2015.
Il y a un nouveau raccourci pour créer des objets,
quand la propriété de l&#8217;objet que tu veux créer a le même nom que la variable utilisée comme valeur pour l&#8217;attribut.</p>
</div>
<div class="paragraph">
<p>Exemple&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="javascript">function createPony() {
  const name = 'Rainbow Dash';
  const color = 'blue';
  return { name: name, color: color };
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>peut être simplifié en&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="javascript">function createPony() {
  const name = 'Rainbow Dash';
  const color = 'blue';
  return { name, color };
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Tu peux aussi utiliser un autre raccourci,
quand tu veux déclarer une méthode dans un objet&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="javascript">function createPony() {
  return {
    run: () =&gt; {
      console.log('Run!');
    }
  };
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>qui peut être simplifié en&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="javascript">function createPony() {
  return {
    run() {
      console.log('Run!');
    }
  };
}</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_affectations_déstructurées">2.5. Affectations déstructurées</h3>
<div class="paragraph">
<p>Celui-là aussi peut te faire tiquer en lisant du code ES2015.
Il y a maintenant un raccourci pour affecter des variables à partir d&#8217;objets ou de tableaux.</p>
</div>
<div class="paragraph">
<p>En ES5&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="javascript">var httpOptions = { timeout: 2000, isCache: true };
// later
var httpTimeout = httpOptions.timeout;
var httpCache = httpOptions.isCache;</code></pre>
</div>
</div>
<div class="paragraph">
<p>Maintenant, en ES2015, tu peux écrire&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="javascript">const httpOptions = { timeout: 2000, isCache: true };
// later
const { timeout: httpTimeout, isCache: httpCache } = httpOptions;</code></pre>
</div>
</div>
<div class="paragraph">
<p>Et tu auras le même résultat.
Cela peut être perturbant,
parce que la clé est la propriété à lire dans l&#8217;objet et la valeur est la variable à affecter.
Mais cela fonctionne plutôt bien&#160;!
Et même mieux&#160;:
si la variable que tu veux affecter a le même nom que la propriété de l&#8217;objet à lire,
tu peux écrire simplement&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="javascript">const httpOptions = { timeout: 2000, isCache: true };
// later
const { timeout, isCache } = httpOptions;
// you now have a variable named 'timeout'
// and one named 'isCache' with correct values</code></pre>
</div>
</div>
<div class="paragraph">
<p>Le truc cool est que ça marche aussi avec des objets imbriqués&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="javascript">const httpOptions = { timeout: 2000, cache: { age: 2 } };
// later
const {
  cache: { age }
} = httpOptions;
// you now have a variable named 'age' with value 2</code></pre>
</div>
</div>
<div class="paragraph">
<p>Et la même chose est possible avec des tableaux&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="javascript">const timeouts = [1000, 2000, 3000];
// later
const [shortTimeout, mediumTimeout] = timeouts;
// you now have a variable named 'shortTimeout' with value 1000
// and a variable named 'mediumTimeout' with value 2000</code></pre>
</div>
</div>
<div class="paragraph">
<p>Bien entendu, cela fonctionne avec des tableaux de tableaux, des tableaux dans des objets, etc.</p>
</div>
<div class="paragraph">
<p>Un cas d&#8217;usage intéressant de cette fonctionnalité est la possibilité de retourner des valeurs multiples.
Imagine une fonction <code>randomPonyInRace</code> qui retourne un poney et sa position dans la course.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="javascript">function randomPonyInRace() {
  const pony = { name: 'Rainbow Dash' };
  const position = 2;
  // ...
  return { pony, position };
}

const { position, pony } = randomPonyInRace();</code></pre>
</div>
</div>
<div class="paragraph">
<p>Cette nouvelle fonctionnalité de déstructuration assigne la <code>position</code> retournée par la méthode à la variable <code>position</code>,
et le poney à la variable <code>pony</code>. Et si tu n&#8217;as pas usage de la position, tu peux écrire&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="javascript">function randomPonyInRace() {
  const pony = { name: 'Rainbow Dash' };
  const position = 2;
  // ...
  return { pony, position };
}

const { pony } = randomPonyInRace();</code></pre>
</div>
</div>
<div class="paragraph">
<p>Et tu auras seulement une variable <code>pony</code>.</p>
</div>
</div>
<div class="sect2">
<h3 id="_paramètres_optionnels_et_valeurs_par_défaut">2.6. Paramètres optionnels et valeurs par défaut</h3>
<div class="paragraph">
<p>JS a la particularité de permettre aux développeurs d&#8217;appeler une fonction avec un nombre d&#8217;arguments variable&#160;:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>si tu passes plus d&#8217;arguments que déclarés par la fonction,
les arguments supplémentaires sont tout simplement ignorés (pour être tout à fait exact,
tu peux quand même les utiliser dans la fonction avec la variable spéciale <code>arguments</code>).</p>
</li>
<li>
<p>si tu passes moins d&#8217;arguments que déclarés par la fonction,
les paramètres manquants auront la valeur <code>undefined</code>.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Ce dernier cas est celui qui nous intéresse.
Souvent, on passe moins d&#8217;arguments quand les paramètres sont optionnels, comme dans l&#8217;exemple suivant&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="javascript">function getPonies(size, page) {
  size = size || 10;
  page = page || 1;
  // ...
  server.get(size, page);
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Les paramètres optionnels ont la plupart du temps une valeur par défaut.
L&#8217;opérateur OR (<code>||</code>) va retourner l&#8217;opérande de droite si celui de gauche est <code>undefined</code>,
comme cela serait le cas si le paramètre n&#8217;avait pas été fourni par l&#8217;appelant
(pour être précis, si l&#8217;opérande de gauche est <em>falsy</em>, c&#8217;est-à-dire <code>undefined</code>, <code>0</code>, <code>false</code>, <code>""</code>, etc.).
Avec cette astuce, la fonction <code>getPonies</code> peut ainsi être invoquée&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="javascript">getPonies(20, 2);
getPonies(); // same as getPonies(10, 1);
getPonies(15); // same as getPonies(15, 1);</code></pre>
</div>
</div>
<div class="paragraph">
<p>Cela fonctionnait, mais ce n&#8217;était pas évident de savoir que les paramètres étaient optionnels,
sauf à lire le corps de la fonction.
ES2015 offre désormais une façon plus formelle de déclarer des paramètres optionnels,
dès la déclaration de la fonction&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="javascript">function getPonies(size = 10, page = 1) {
  // ...
  server.get(size, page);
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Maintenant il est limpide que la valeur par défaut de <code>size</code> sera 10 et celle de <code>page</code> sera <code>1</code> s&#8217;ils ne sont pas fournis.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
Il y a cependant une subtile différence, car maintenant <code>0</code> ou <code>""</code> sont des valeurs valides,
et ne seront pas remplacées par les valeurs par défaut, comme <code>size = size || 10</code> l&#8217;aurait fait.
C&#8217;est donc plutôt équivalent à <code>size = size === undefined ? 10: size;</code>.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>La valeur par défaut peut aussi être un appel de fonction&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="javascript">function getPonies(size = defaultSize(), page = 1) {
  // the defaultSize method will be called if size is not provided
  // ...
  server.get(size, page);
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>ou même d&#8217;autres variables, d&#8217;autres variables globales,
ou d&#8217;autres paramètres de la même fonction&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="javascript">function getPonies(size = defaultSize(), page = size - 1) {
  // if page is not provided, it will be set to the value
  // of the size parameter minus one.
  // ...
  server.get(size, page);
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Ce mécanisme de valeur par défaut ne s&#8217;applique pas qu&#8217;aux paramètres de fonction,
mais aussi aux valeurs de variables, par exemple dans le cas d&#8217;une affectation déstructurée&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="javascript">const { timeout = 1000 } = httpOptions;
// you now have a variable named 'timeout',
// with the value of 'httpOptions.timeout' if it exists
// or 1000 if not</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_rest_operator">2.7. <em>Rest operator</em></h3>
<div class="paragraph">
<p>ES2015 introduit aussi une nouvelle syntaxe pour déclarer un nombre variable de paramètres dans une fonction.
Comme on le disait précédemment, tu peux toujours passer des arguments supplémentaires à un appel de fonction,
et y accéder avec la variable spéciale <code>arguments</code>.
Tu peux faire quelque chose comme&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="javascript">function addPonies(ponies) {
  for (var i = 0; i &lt; arguments.length; i++) {
    poniesInRace.push(arguments[i]);
  }
}

addPonies('Rainbow Dash', 'Pinkie Pie');</code></pre>
</div>
</div>
<div class="paragraph">
<p>Mais tu seras d&#8217;accord pour dire que ce n&#8217;est ni élégant, ni évident&#160;:
le paramètre <code>ponies</code> n&#8217;est jamais utilisé,
et rien n&#8217;indique que l&#8217;on peut fournir plusieurs poneys.</p>
</div>
<div class="paragraph">
<p>ES2015 propose une syntaxe bien meilleure, grâce au <em>rest operator</em> <code>&#8230;&#8203;</code> ("opérateur de reste").</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="javascript">function addPonies(...ponies) {
  for (let pony of ponies) {
    poniesInRace.push(pony);
  }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p><code>ponies</code> est désormais un véritable tableau, sur lequel on peut itérer.
La boucle <code>for &#8230;&#8203; of</code> utilisée pour l&#8217;itération est aussi une nouveauté d&#8217;ES2015.
Elle permet d&#8217;être sûr de n&#8217;itérer que sur les valeurs de la collection,
et non pas sur ses propriétés comme <code>for &#8230;&#8203; in</code>.
Ne trouves-tu pas que notre code est maintenant bien plus beau et lisible&#160;?</p>
</div>
<div class="paragraph">
<p>Le <em>rest operator</em> peut aussi fonctionner avec des affectations déstructurées&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="javascript">const [winner, ...losers] = poniesInRace;
// assuming 'poniesInRace' is an array containing several ponies
// 'winner' will have the first pony,
// and 'losers' will be an array of the other ones</code></pre>
</div>
</div>
<div class="paragraph">
<p>Le <em>rest operator</em> ne doit pas être confondu avec le <em>spread operator</em> ("opérateur d&#8217;étalement"),
même si, on te l&#8217;accorde, ils se ressemblent dangereusement&#160;!
Le <em>spread operator</em> est son opposé&#160;: il prend un tableau, et l&#8217;étale en arguments variables.
Le seul cas d&#8217;utilisation qui me vient à l&#8217;esprit serait pour les fonctions comme <code>min</code> ou <code>max</code>,
qui peuvent recevoir des arguments variables, et que tu voudrais appeler avec un tableau&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="javascript">const ponyPrices = [12, 3, 4];
const minPrice = Math.min(...ponyPrices);</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_classes">2.8. Classes</h3>
<div class="paragraph">
<p>Une des fonctionnalités les plus emblématiques,
et qui va largement être utilisée dans l&#8217;écriture d&#8217;applications Angular&#160;:
ES2015 introduit les classes en JavaScript&#160;!
Tu pourras désormais facilement faire de l&#8217;héritage de classes en JavaScript.
C&#8217;était déjà possible, avec l&#8217;héritage prototypal, mais ce n&#8217;était pas une tâche aisée, surtout pour les débutants&#8230;&#8203;</p>
</div>
<div class="paragraph">
<p>Maintenant c&#8217;est les doigts dans le nez, regarde&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="javascript">class Pony {
  constructor(color) {
    this.color = color;
  }

  toString() {
    return `${this.color} pony`;
    // see that? It is another cool feature of ES2015, called template literals
    // we'll talk about these quickly!
  }
}

const bluePony = new Pony('blue');
console.log(bluePony.toString()); // blue pony</code></pre>
</div>
</div>
<div class="paragraph">
<p>Les déclarations de classes, contrairement aux déclarations de fonctions,
ne sont pas <em>hoisted</em> ("remontées"), donc tu dois déclarer une classe avant de l&#8217;utiliser.
Tu as probablement remarqué la fonction spéciale <code>constructor</code>.
C&#8217;est le constructeur, la fonction appelée à la création d&#8217;un nouvel objet avec le mot-clé <code>new</code>.
Dans l&#8217;exemple, il requiert une couleur,
et nous créons une nouvelle instance de la classe <code>Pony</code> avec la couleur "blue".
Une classe peut aussi avoir des méthodes, appelables sur une instance, comme la méthode <code>toString()</code> dans l&#8217;exemple.</p>
</div>
<div class="paragraph">
<p>Une classe peut aussi avoir des attributs et des méthodes statiques&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="javascript">class Pony {
  static defaultSpeed() {
    return 10;
  }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Ces méthodes statiques ne peuvent être appelées que sur la classe directement&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="javascript">const speed = Pony.defaultSpeed();</code></pre>
</div>
</div>
<div class="paragraph">
<p>Une classe peut avoir des accesseurs (<em>getters, setters</em>), si tu veux implémenter du code sur ces opérations&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="javascript">class Pony {
  get color() {
    console.log('get color');
    return this._color;
  }

  set color(newColor) {
    console.log(`set color ${newColor}`);
    this._color = newColor;
  }
}
const pony = new Pony();
pony.color = 'red';
// 'set color red'
console.log(pony.color);
// 'get color'
// 'red'</code></pre>
</div>
</div>
<div class="paragraph">
<p>Et bien évidemment, si tu as des classes, l&#8217;héritage est possible en ES2015.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="javascript">class Animal {
  speed() {
    return 10;
  }
}
class Pony extends Animal {}
const pony = new Pony();
console.log(pony.speed()); // 10, as Pony inherits the parent method</code></pre>
</div>
</div>
<div class="paragraph">
<p>Animal est appelée la classe de base, et Pony la classe dérivée.
Comme tu peux le voir, la classe dérivée possède toutes les méthodes de la classe de base.
Mais elle peut aussi les redéfinir&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="javascript">class Animal {
  speed() {
    return 10;
  }
}
class Pony extends Animal {
  speed() {
    return super.speed() + 10;
  }
}
const pony = new Pony();
console.log(pony.speed()); // 20, as Pony overrides the parent method</code></pre>
</div>
</div>
<div class="paragraph">
<p>Comme tu peux le voir,
le mot-clé <code>super</code> permet d&#8217;invoquer la méthode de la classe de base,
avec <code>super.speed()</code> par exemple.</p>
</div>
<div class="paragraph">
<p>Ce mot-clé <code>super</code> peut aussi être utilisé dans les constructeurs,
pour invoquer le constructeur de la classe de base&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="javascript">class Animal {
  constructor(speed) {
    this.speed = speed;
  }
}

class Pony extends Animal {
  constructor(speed, color) {
    super(speed);
    this.color = color;
  }
}

const pony = new Pony(20, 'blue');
console.log(pony.speed); // 20</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_promises">2.9. <em>Promises</em></h3>
<div class="paragraph">
<p>Les <em>promises</em> ("promesses") ne sont pas si nouvelles,
et tu les connais ou les utilises peut-être déjà,
parce qu&#8217;elles tenaient une place importante dans AngularJS&#160;1.x.
Mais comme nous les utiliserons beaucoup avec Angular,
et même si tu n&#8217;utilises que du pur JS sans Angular,
on pense que c&#8217;est important de s&#8217;y attarder un peu.</p>
</div>
<div class="paragraph">
<p>L&#8217;objectif des <em>promises</em> est de simplifier la programmation asynchrone.
Notre code JS est plein d&#8217;asynchronisme, comme des requêtes AJAX,
et en général on utilise des <em>callbacks</em> pour gérer le résultat et l&#8217;erreur.
Mais le code devient vite confus, avec des <em>callbacks</em> dans des <em>callbacks</em>,
qui le rendent illisible et peu maintenable. Les <em>promises</em> sont plus pratiques que les <em>callbacks</em>,
parce qu&#8217;elles permettent d&#8217;écrire du code à plat, et le rendent ainsi plus simple à comprendre.
Prenons un cas d&#8217;utilisation simple, où on doit récupérer un utilisateur, puis ses droits,
puis mettre à jour un menu quand on a récupéré tout ça&#160;.</p>
</div>
<div class="paragraph">
<p>Avec des <em>callbacks</em>&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="javascript">getUser(login, function (user) {
  getRights(user, function (rights) {
    updateMenu(rights);
  });
});</code></pre>
</div>
</div>
<div class="paragraph">
<p>Avec des <em>promises</em>&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="javascript">getUser(login)
  .then(function (user) {
    return getRights(user);
  })
  .then(function (rights) {
    updateMenu(rights);
  })</code></pre>
</div>
</div>
<div class="paragraph">
<p>J&#8217;aime cette version, parce qu&#8217;elle s&#8217;exécute comme elle se lit&#160;:
je veux récupérer un utilisateur, puis ses droits, puis mettre à jour le menu.</p>
</div>
<div class="paragraph">
<p>Une <em>promise</em> est un objet <em>thenable</em>, ce qui signifie simplement qu&#8217;il a une méthode <code>then</code>.
Cette méthode prend deux arguments&#160;: un callback de succès et un callback d&#8217;erreur.
Une <em>promise</em> a trois états&#160;:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><em>pending</em> ("en cours")&#160;: quand la <em>promise</em> n&#8217;est pas réalisée,
par exemple quand l&#8217;appel serveur n&#8217;est pas encore terminé.</p>
</li>
<li>
<p><em>fulfilled</em> ("réalisée")&#160;: quand la <em>promise</em> s&#8217;est réalisée avec succès,
par exemple quand l&#8217;appel HTTP serveur a retourné un status 200-OK.</p>
</li>
<li>
<p><em>rejected</em> ("rejetée")&#160;: quand la <em>promise</em> a échoué,
par exemple si l&#8217;appel HTTP serveur a retourné un status 404-NotFound.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Quand la promesse est réalisée (<em>fulfilled</em>),
alors le callback de succès est invoqué, avec le résultat en argument.
Si la promesse est rejetée (<em>rejected</em>), alors le callback d&#8217;erreur est invoqué,
avec la valeur rejetée ou une erreur en argument.</p>
</div>
<div class="paragraph">
<p>Alors, comment crée-t-on une <em>promise</em>&#160;?
C&#8217;est simple, il y a une nouvelle classe <code>Promise</code>,
dont le constructeur attend une fonction avec deux paramètres, <code>resolve</code> et <code>reject</code>.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="javascript">const getUser = function (login) {
  return new Promise(function (resolve, reject) {
    // async stuff, like fetching users from server, returning a response
    if (response.status === 200) {
      resolve(response.data);
    } else {
      reject('No user');
    }
  });
};</code></pre>
</div>
</div>
<div class="paragraph">
<p>Une fois la <em>promise</em> créée, tu peux enregistrer des <em>callbacks</em>,
via la méthode <code>then</code>.
Cette méthode peut recevoir deux arguments,
les deux <em>callbacks</em> que tu veux voir invoqués en cas de succès ou en cas d&#8217;échec.
Dans l&#8217;exemple suivant, nous passons simplement un seul <em>callback</em> de succès,
ignorant ainsi une erreur potentielle&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="javascript">getUser(login)
  .then(function (user) {
    console.log(user);
  })</code></pre>
</div>
</div>
<div class="paragraph">
<p>Quand la promesse sera réalisée,
le callback de succès (qui se contente ici de tracer l&#8217;utilisateur en console) sera invoqué.</p>
</div>
<div class="paragraph">
<p>La partie la plus cool c&#8217;est que le code peut s&#8217;écrire à plat.
Si par exemple ton <em>callback</em> de succès retourne lui aussi une <em>promise</em>, tu peux écrire&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="javascript">getUser(login)
  .then(function (user) {
    return getRights(user) // getRights is returning a promise
      .then(function (rights) {
        return updateMenu(rights);
      });
  })</code></pre>
</div>
</div>
<div class="paragraph">
<p>ou plus élégamment&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="javascript">getUser(login)
  .then(function (user) {
    return getRights(user); // getRights is returning a promise
  })
  .then(function (rights) {
    return updateMenu(rights);
  })</code></pre>
</div>
</div>
<div class="paragraph">
<p>Un autre truc cool est la gestion d&#8217;erreur&#160;:
tu peux définir une gestion d&#8217;erreur par <em>promise</em>, ou globale à toute la chaîne.</p>
</div>
<div class="paragraph">
<p>Une gestion d&#8217;erreur par <em>promise</em>&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="javascript">getUser(login)
  .then(
    function (user) {
      return getRights(user);
    },
    function (error) {
      console.log(error); // will be called if getUser fails
      return Promise.reject(error);
    }
  )
  .then(
    function (rights) {
      return updateMenu(rights);
    },
    function (error) {
      console.log(error); // will be called if getRights fails
      return Promise.reject(error);
    }
  )</code></pre>
</div>
</div>
<div class="paragraph">
<p>Une gestion d&#8217;erreur globale pour toute la chaîne&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="javascript">getUser(login)
  .then(function (user) {
    return getRights(user);
  })
  .then(function (rights) {
    return updateMenu(rights);
  })
  .catch(function (error) {
    console.log(error); // will be called if getUser or getRights fails
  })</code></pre>
</div>
</div>
<div class="paragraph">
<p>Tu devrais sérieusement t&#8217;intéresser aux <em>promises</em>,
parce que ça va devenir la nouvelle façon d&#8217;écrire des APIs,
et toutes les bibliothèques vont bientôt les utiliser.
Même les bibliothèques standards&#160;:
c&#8217;est le cas de la nouvelle <a href="https://fetch.spec.whatwg.org/">Fetch API</a> par exemple.</p>
</div>
</div>
<div class="sect2">
<h3 id="_arrow_functions">2.10. (<em>arrow functions</em>)</h3>
<div class="paragraph">
<p>Un truc que j&#8217;adore dans ES2015 est la nouvelle syntaxe <em>arrow function</em> ("fonction flèche"),
utilisant l&#8217;opérateur <em>fat arrow</em> ("grosse flèche")&#160;: <code>&#8658;</code>.
C&#8217;est très utile pour les <em>callbacks</em> et les fonctions anonymes&#160;!</p>
</div>
<div class="paragraph">
<p>Prenons notre exemple précédent avec des <em>promises</em>&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="javascript">getUser(login)
  .then(function (user) {
    return getRights(user); // getRights is returning a promise
  })
  .then(function (rights) {
    return updateMenu(rights);
  })</code></pre>
</div>
</div>
<div class="paragraph">
<p>Il peut être réécrit avec des <em>arrow functions</em> comme ceci&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="javascript">getUser(login)
  .then(user =&gt; getRights(user))
  .then(rights =&gt; updateMenu(rights))</code></pre>
</div>
</div>
<div class="paragraph">
<p>N&#8217;est-ce pas super cool&#160;?!</p>
</div>
<div class="paragraph">
<p>Note que le <code>return</code> est implicite s&#8217;il n&#8217;y a pas de bloc&#160;:
pas besoin d&#8217;écrire <code>user &#8658; return getRights(user)</code>.
Mais si nous avions un bloc, nous aurions besoin d&#8217;un <code>return</code> explicite&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="javascript">getUser(login)
  .then(user =&gt; {
    console.log(user);
    return getRights(user);
  })
  .then(rights =&gt; updateMenu(rights))</code></pre>
</div>
</div>
<div class="paragraph">
<p>Et les <em>arrow functions</em> ont une particularité bien agréable que n&#8217;ont pas les fonctions normales&#160;:
le <code>this</code> reste attaché lexicalement,
ce qui signifie que ces <em>arrow functions</em> n&#8217;ont pas un nouveau <code>this</code> comme les fonctions normales.
Prenons un exemple où on itère sur un tableau avec la fonction <code>map</code> pour y trouver le maximum.</p>
</div>
<div class="paragraph">
<p>En ES5&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="javascript">var maxFinder = {
  max: 0,
  find: function (numbers) {
    // let's iterate
    numbers.forEach(function (element) {
      // if the element is greater, set it as the max
      if (element &gt; this.max) {
        this.max = element;
      }
    });
  }
};

maxFinder.find([2, 3, 4]);
// log the result
console.log(maxFinder.max);</code></pre>
</div>
</div>
<div class="paragraph">
<p>Ca semble pas mal, non&#160;? Mais en fait ça ne marche pas&#8230;&#8203;
Si tu as de bons yeux, tu as remarqué que le <code>forEach</code> dans la fonction <code>find</code> utilise <code>this</code>,
mais ce <code>this</code> n&#8217;est lié à aucun objet.
Donc <code>this.max</code> n&#8217;est en fait pas le <code>max</code> de l&#8217;objet <code>maxFinder</code>&#8230;&#8203;
On pourrait corriger ça facilement avec un alias&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="javascript">var maxFinder = {
  max: 0,
  find: function (numbers) {
    var self = this;
    numbers.forEach(function (element) {
      if (element &gt; self.max) {
        self.max = element;
      }
    });
  }
};

maxFinder.find([2, 3, 4]);
// log the result
console.log(maxFinder.max);</code></pre>
</div>
</div>
<div class="paragraph">
<p>ou en <em>bindant</em> le <code>this</code>&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="javascript">var maxFinder = {
  max: 0,
  find: function (numbers) {
    numbers.forEach(
      function (element) {
        if (element &gt; this.max) {
          this.max = element;
        }
      }.bind(this)
    );
  }
};

maxFinder.find([2, 3, 4]);
// log the result
console.log(maxFinder.max);</code></pre>
</div>
</div>
<div class="paragraph">
<p>ou en le passant en second paramètre de la fonction <code>forEach</code> (ce qui est justement sa raison d&#8217;être)&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="javascript">var maxFinder = {
  max: 0,
  find: function (numbers) {
    numbers.forEach(function (element) {
      if (element &gt; this.max) {
        this.max = element;
      }
    }, this);
  }
};

maxFinder.find([2, 3, 4]);
// log the result
console.log(maxFinder.max);</code></pre>
</div>
</div>
<div class="paragraph">
<p>Mais il y a maintenant une solution bien plus élégante avec les <em>arrow functions</em>&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="javascript">const maxFinder = {
  max: 0,
  find: function (numbers) {
    numbers.forEach(element =&gt; {
      if (element &gt; this.max) {
        this.max = element;
      }
    });
  }
};

maxFinder.find([2, 3, 4]);
// log the result
console.log(maxFinder.max);</code></pre>
</div>
</div>
<div class="paragraph">
<p>Les <em>arrow functions</em> sont donc idéales pour les fonctions anonymes en <em>callback</em>&#160;!</p>
</div>
</div>
<div class="sect2">
<h3 id="_asyncawait">2.11. Async/await</h3>
<div class="paragraph">
<p>Nous discutions des promesses précédemment,
et il est intéressant de connaître un autre mot-clé
introduit pour les gérer de façon plus synchrone&#160;: <code>await</code>.</p>
</div>
<div class="paragraph">
<p>Cette fonctionnalité n&#8217;est pas introduite par ECMAScript&#160;2015 mais par ECMAScript&#160;2017,
et pour utiliser <code>await</code>,
ta fonction doit être marquée comme <code>async</code>.
Quand tu utilises le mot-clé <code>await</code> devant une promesse,
tu pauses l&#8217;exécution de la fonction <code>async</code>,
attends la résolution de la promesse,
puis reprends l&#8217;exécution de la fonction <code>async</code>.
La valeur retournée est la valeur résolue par la promesse.</p>
</div>
<div class="paragraph">
<p>On peut donc écrire notre exemple précédent en utilisant <code>async/await</code> comme ceci&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="javascript">async function getUserRightsAndUpdateMenu() {
  // getUser is a promise
  const user = await getUser(login);
  // getRights is a promise
  const rights = await getRights(user);
  updateMenu(rights);
}
await getUserRightsAndUpdateMenu();</code></pre>
</div>
</div>
<div class="paragraph">
<p>Et notre code a l&#8217;air complètement synchrone&#160;!
Une autre fonctionnalité assez cool de <code>async/await</code>
est la possibilité d&#8217;utiliser un simple <code>try/catch</code> pour gérer les erreurs&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="javascript">async function getUserRightsAndUpdateMenu() {
  try {
    // getUser is a promise
    const user = await getUser(login);
    // getRights is a promise
    const rights = await getRights(user);
    updateMenu(rights);
  } catch (e) {
    // will be called if getUser, getRights or updateMenu fails
    console.log(e);
  }
}
await getUserRightsAndUpdateMenu();</code></pre>
</div>
</div>
<div class="paragraph">
<p>Note que, même si le code ressemble à du code synchrone,
il reste asynchrone.
L&#8217;exécution de la fonction est mise en pause puis reprise,
mais, comme avec les callbacks,
cela ne bloque pas le fil d&#8217;exécution&#160;:
les autres événements peuvent être gérés
pendant que l&#8217;exécution est mise en pause.</p>
</div>
</div>
<div class="sect2">
<h3 id="_set_et_map">2.12. <em>Set</em> et <em>Map</em></h3>
<div class="paragraph">
<p>On va faire court&#160;: on a maintenant de vraies collections en ES2015. Youpi \o/!</p>
</div>
<div class="paragraph">
<p>On utilisait jusque-là de simples objets JavaScript pour jouer le rôle de <em>map</em> ("dictionnaire"),
c&#8217;est à dire un objet JS standard, dont les clés étaient nécessairement des chaînes de caractères.
Mais nous pouvons maintenant utiliser la nouvelle classe <em>Map</em> &#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="javascript">const cedric = { id: 1, name: 'Cedric' };
const users = new Map();
users.set(cedric.id, cedric); // adds a user
console.log(users.has(cedric.id)); // true
console.log(users.size); // 1
users.delete(cedric.id); // removes the user</code></pre>
</div>
</div>
<div class="paragraph">
<p>On a aussi une classe <code>Set</code> ("ensemble")&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="javascript">const cedric = { id: 1, name: 'Cedric' };
const users = new Set();
users.add(cedric); // adds a user
console.log(users.has(cedric)); // true
console.log(users.size); // 1
users.delete(cedric); // removes the user</code></pre>
</div>
</div>
<div class="paragraph">
<p>Tu peux aussi itérer sur une collection, avec la nouvelle syntaxe <code>for &#8230;&#8203; of</code>&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="javascript">for (let user of users) {
  console.log(user.name);
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Tu verras que cette syntaxe <code>for &#8230;&#8203; of</code> est celle choisie par l&#8217;équipe Angular
pour itérer sur une collection dans un template.</p>
</div>
</div>
<div class="sect2">
<h3 id="_template_de_string">2.13. Template de string</h3>
<div class="paragraph">
<p>Construire des strings a toujours été pénible en JavaScript,
où nous devions généralement utiliser des concaténations&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="javascript">const fullname = 'Miss ' + firstname + ' ' + lastname;</code></pre>
</div>
</div>
<div class="paragraph">
<p>Les templates de string sont une nouvelle fonctionnalité mineure mais bien pratique,
où on doit utiliser des accents graves (<em>backticks</em> <code>`</code>) au lieu des habituelles apostrophes (<em>quote</em> <code>'</code>)
ou apostrophes doubles (<em>double-quotes</em> <code>"</code>),
fournissant un moteur de template basique avec support du multi-ligne&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="javascript">const fullname = `Miss ${firstname} ${lastname}`;</code></pre>
</div>
</div>
<div class="paragraph">
<p>Le support du multi-ligne est particulièrement adapté à l&#8217;écriture de morceaux d&#8217;HTML,
comme nous le ferons dans nos composants Angular&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="javascript">const template = `&lt;div&gt;
  &lt;h1&gt;Hello&lt;/h1&gt;
&lt;/div&gt;`;</code></pre>
</div>
</div>
<div class="paragraph">
<p>Une dernière fonctionnalité est la possibilité de les "tagger".
Tu peux définir une fonction, et l&#8217;appliquer sur une chaîne de caractères template.
Ici <code>askQuestion</code> ajoute un point d&#8217;interrogation à la fin de la chaîne de caractère&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="javascript">const askQuestion = strings =&gt; strings + '?';
const template = askQuestion`Hello there`;</code></pre>
</div>
</div>
<div class="paragraph">
<p>Mais quelle est la différence avec une fonction classique alors&#160;?
Une fonction de tag reçoit en fait plusieurs paramètres&#160;:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>un tableau des morceaux statiques de la chaîne de caractères</p>
</li>
<li>
<p>les valeurs résultant de l&#8217;évaluation des expressions</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Par exemple, si l&#8217;on a la chaîne de caractère template
contenant les expressions suivante&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="javascript">const person1 = 'Cedric';
const person2 = 'Agnes';
const template = `Hello ${person1}! Where is ${person2}?`;</code></pre>
</div>
</div>
<div class="paragraph">
<p>alors la fonction de tag reçoit les différents morceaux statiques et dynamiques.
Ici nous avons une fonction de tag qui passe en majuscule les noms des protagonistes&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="javascript">const uppercaseNames = (strings, ...values) =&gt; {
  // `strings` is an array with the static parts ['Hello ', '! Where is ', '?']
  // `values` is an array with the evaluated expressions ['Cedric', 'Agnes']
  const names = values.map(name =&gt; name.toUpperCase());
  // `names` now has ['CEDRIC', 'AGNES']
  // let's merge the `strings` and `names` arrays
  return strings.map((string, i) =&gt; `${string}${names[i] ? names[i] : ''}`).join('');
};
const result = uppercaseNames`Hello ${person1}! Where is ${person2}?`;
// returns 'Hello CEDRIC! Where is AGNES?'</code></pre>
</div>
</div>
<div class="paragraph">
<p>Passons maintenant à l&#8217;un des grands changements introduits&#160;: les modules.</p>
</div>
</div>
<div class="sect2">
<h3 id="modules">2.14. Modules</h3>
<div class="paragraph">
<p>Il a toujours manqué en JavaScript une façon standard de ranger ses fonctions dans un espace de nommage,
et de charger dynamiquement du code.
Node.js a été un leader sur le sujet, avec un écosystème très riche de modules utilisant la convention CommonJS.
Côté navigateur,
il y a aussi l&#8217;API <a href="https://github.com/amdjs/amdjs-api/blob/master/AMD.md">AMD</a> (Asynchronous Module Definition),
utilisée par <a href="http://requirejs.org/">RequireJS</a>.
Mais aucun n&#8217;était un vrai standard, ce qui nous conduit à des débats incessants sur la meilleure solution.</p>
</div>
<div class="paragraph">
<p>ES2015+ a pour objectif de créer une syntaxe avec le meilleur des deux mondes,
sans se préoccuper de l&#8217;implémentation utilisée.
Le comité Ecma TC39
(qui est responsable des évolutions d&#8217;ES2015+ et auteur de la spécification du langage)
voulait une syntaxe simple (c&#8217;est indéniablement l&#8217;atout de CommonJS),
mais avec le support du chargement asynchrone (comme AMD),
et avec quelques bonus comme la possibilité d&#8217;analyser statiquement
le code par des outils et une gestion claire des dépendances cycliques.
Cette nouvelle syntaxe se charge de déclarer ce que tu exportes depuis tes modules,
et ce que tu importes dans d&#8217;autres modules.</p>
</div>
<div class="paragraph">
<p>Cette gestion des modules est fondamentale dans Angular,
parce que tout y est défini dans des modules,
qu&#8217;il faut importer dès qu&#8217;on veut les utiliser.
Supposons qu&#8217;on veuille exposer une fonction pour parier sur un poney donné dans une course,
et une fonction pour lancer la course.</p>
</div>
<div class="paragraph">
<p>Dans <code>races.service.js</code>:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="javascript">export function bet(race, pony) {
  // ...
}
export function start(race) {
  // ...
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Comme tu le vois, c&#8217;est plutôt simple&#160;:
le nouveau mot-clé <code>export</code> fait son travail et exporte les deux fonctions.</p>
</div>
<div class="paragraph">
<p>Maintenant, supposons qu&#8217;un composant de notre application veuille appeler ces deux fonctions.</p>
</div>
<div class="paragraph">
<p>Dans un autre fichier&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="javascript">import { bet, start } from './races.service';</code></pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="javascript">// later
bet(race, pony1);
start(race);</code></pre>
</div>
</div>
<div class="paragraph">
<p>C&#8217;est ce qu&#8217;on appelle un <em>named export</em> ("export nommé").
Ici on importe les deux fonctions,
et on doit spécifier le nom du fichier contenant ces deux fonctions, ici 'races.service'.
Evidemment, on peut importer une seule des deux fonctions, si besoin avec un alias&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="javascript">import { start as startRace } from './races.service';</code></pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="javascript">// later
startRace(race);</code></pre>
</div>
</div>
<div class="paragraph">
<p>Et si tu veux importer toutes les fonctions du module, tu peux utiliser le caractère joker <code>*</code>.</p>
</div>
<div class="paragraph">
<p>Comme tu le ferais dans d&#8217;autres langages, il faut utiliser le caractère joker <code>*</code> avec modération,
seulement si tu as besoin de toutes les fonctions, ou la plupart.
Et comme tout ceci sera prochainement géré par ton IDE préféré qui prendra en charge la gestion automatique des imports,
on n&#8217;aura plus à se soucier d&#8217;importer les seules bonnes fonctions.</p>
</div>
<div class="paragraph">
<p>Avec un caractère joker, tu dois utiliser un alias,
et j&#8217;aime plutôt ça, parce que ça rend le reste du code plus lisible&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="javascript">import * as racesService from './races.service';</code></pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="javascript">// later
racesService.bet(race, pony1);
racesService.start(race);</code></pre>
</div>
</div>
<div class="paragraph">
<p>Si ton module n&#8217;expose qu&#8217;une seule fonction, ou valeur, ou classe,
tu n&#8217;as pas besoin d&#8217;utiliser un <em>named export</em>,
et tu peux bénéficier de l&#8217;export par défaut, avec le mot-clé <code>default</code>.
C&#8217;est pratique pour les classes notamment&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="javascript">// pony.js
export default class Pony {}
// races.service.js
import Pony from './pony';</code></pre>
</div>
</div>
<div class="paragraph">
<p>Note l&#8217;absence d&#8217;accolade pour importer un export par défaut.
Tu peux l&#8217;importer avec l&#8217;alias que tu veux, mais pour être cohérent,
c&#8217;est mieux de l&#8217;importer avec le nom du module
(sauf évidemment si tu importes plusieurs modules portant le même nom,
auquel cas tu devras donner un alias pour les distinguer).
Et bien sûr tu peux mélanger l&#8217;export par défaut et l&#8217;export nommé,
mais un module ne pourra avoir qu&#8217;un seul export par défaut.</p>
</div>
<div class="paragraph">
<p>En Angular, tu utiliseras beaucoup de ces imports dans ton application.
Chaque composant et service sera une classe, généralement isolée dans son propre fichier et exportée,
et ensuite importée à la demande dans chaque autre composant.</p>
</div>
</div>
<div class="sect2">
<h3 id="_conclusion">2.15. Conclusion</h3>
<div class="paragraph">
<p>Voilà qui conclue notre rapide introduction à ES2015+.
On a zappé quelques parties, mais si tu as bien assimilé ce chapitre,
tu n&#8217;auras aucun problème à coder ton application en ES2015+.
Si tu veux approfondir,
je te recommande chaudement <a href="https://exploringjs.com/">Exploring JS</a>
par Axel Rauschmayer,
ou <a href="https://leanpub.com/understandinges6">Understanding ES6</a>
par Nicholas C. Zakas.
Ces deux ebooks peuvent être lus gratuitement en ligne,
mais pense à soutenir ces auteurs qui ont fait un beau travail&#160;!
En l&#8217;occurrence, j&#8217;ai relu récemment <a href="http://speakingjs.com">Speaking JS</a>,
le précédent livre d&#8217;Axel, et j&#8217;ai encore appris quelques trucs,
donc si tu veux rafraîchir tes connaissances en JS, je te le conseille vivement&#160;!</p>
</div>
<div style="page-break-after: always;"></div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="types">3. Un peu plus loin qu&#8217;ES2015+</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_types_dynamiques_statiques_et_optionnels">3.1. Types dynamiques, statiques et optionnels</h3>
<div class="paragraph">
<p>Tu sais probablement que les applications Angular sont écrites en TypeScript. Et tu te demandes peut-être qu&#8217;est-ce que TypeScript, et ce qu&#8217;il apporte de plus.</p>
</div>
<div class="paragraph">
<p>JavaScript est dynamiquement typé. Tu peux donc faire des trucs comme&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="javascript">let pony = 'Rainbow Dash';
pony = 2;</code></pre>
</div>
</div>
<div class="paragraph">
<p>Et ça fonctionne. Ça offre pleins de possibilités&#160;: tu peux ainsi passer n&#8217;importe quel objet à une fonction, tant que cet objet a les propriétés requises par la fonction&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="javascript">const pony = { name: 'Rainbow Dash', color: 'blue' };
const horse = { speed: 40, color: 'black' };
const printColor = animal =&gt; console.log(animal.color);
// works as long as the object has a `color` property</code></pre>
</div>
</div>
<div class="paragraph">
<p>Cette nature dynamique est formidable, mais elle est aussi un handicap dans certains cas, comparée à d&#8217;autres langages plus fortement typés. Le cas le plus évident est quand tu dois appeler une fonction inconnue d&#8217;une autre API en JS&#160;: tu dois lire la documentation (ou pire le code de la fonction) pour deviner à quoi doivent ressembler les paramètres. Dans notre exemple précédent, la méthode <code>printColor</code> attend un paramètre avec une propriété <code>color</code>, mais encore faut-il le savoir. Et c&#8217;est encore plus difficile dans notre travail quotidien, où on multiplie les utilisations de bibliothèques et services développés par d&#8217;autres. Un des co-fondateurs de Ninja Squad se plaint souvent du manque de type en JS, et déclare qu&#8217;il n&#8217;est pas aussi productif, et qu&#8217;il ne produit pas du code aussi bon qu&#8217;il le ferait dans un environnement plus statiquement typé. Et il n&#8217;a pas entièrement tort, même s&#8217;il trolle aussi par plaisir&#160;! Sans les informations de type, les IDEs n&#8217;ont aucun indice pour savoir si tu écris quelque chose de faux, et les outils ne peuvent pas t&#8217;aider à trouver des bugs dans ton code. Bien sûr, nos applications sont testées, et Angular a toujours facilité les tests, mais c&#8217;est pratiquement impossible d&#8217;avoir une parfaite couverture de tests.</p>
</div>
<div class="paragraph">
<p>Cela nous amène au sujet de la maintenabilité. Le code JS peut être difficile à maintenir, malgré les tests et la documentation. Refactoriser une grosse application JS n&#8217;est pas chose aisée, comparativement à ce qui peut être fait dans des langages statiquement typés. La maintenabilité est un sujet important, et les types aident les outils, ainsi que les développeurs, à éviter les erreurs lors de l&#8217;écriture et la modification de code. Google a toujours été enclin à proposer des solutions dans cette direction&#160;: c&#8217;est compréhensible, étant donné qu&#8217;ils gèrent des applications parmi les plus grosses du monde, avec GMail, Google apps, Maps&#8230;&#8203; Alors ils ont essayé plusieurs approches pour améliorer la maintenablité des applications <em>front-end</em>&#160;: GWT, Google Closure, Dart&#8230;&#8203; Elles devaient toutes faciliter l&#8217;écriture de grosses applications web.</p>
</div>
<div class="paragraph">
<p>Avec Angular, l&#8217;équipe Google voulait nous aider à écrire du meilleur JS, en ajoutant des informations de type à notre code. Ce n&#8217;est pas un concept nouveau pour JS, c&#8217;était même le sujet de la spécification ECMAScript&#160;4, qui a été abandonnée. Au départ ils annoncèrent AtScript, un sur-ensemble d&#8217;ES2015 avec des annotations (des annotations de type et d&#8217;autres, dont je parlerai plus tard). Ils annoncèrent ensuite le support de TypeScript, le langage de Microsoft, avec des annotations de type additionnelles. Et enfin, quelques mois plus tard, l&#8217;équipe TypeScript annonçait, après un travail étroit avec l&#8217;équipe de Google, que la nouvelle version du langage (1.5) aurait toutes les nouvelles fonctionnalités d&#8217;AtScript. L&#8217;équipe Angular déclara alors qu&#8217;AtScript était officiellement abandonné, et que TypeScript était désormais la meilleure façon d&#8217;écrire des applications Angular&#160;!</p>
</div>
</div>
<div class="sect2">
<h3 id="_hello_typescript">3.2. Hello TypeScript</h3>
<div class="paragraph">
<p>Je pense que c&#8217;était la meilleure chose à faire pour plusieurs raisons. D&#8217;abord, personne n&#8217;a vraiment envie d&#8217;apprendre une nouvelle extension de langage. Et TypeScript existait déjà, avec une communauté et un écosystème actifs. Je ne l&#8217;avais jamais vraiment utilisé avant Angular, mais j&#8217;en avais entendu du bien, de personnes différentes. TypeScript est un projet de Microsoft, mais ce n&#8217;est pas le Microsoft de l&#8217;ère Ballmer et Gates. C&#8217;est le Microsoft de Nadella, celui qui s&#8217;ouvre à la communauté, et donc, à l&#8217;open-source. Google en a conscience, et c&#8217;est tout à leur avantage de contribuer à un projet existant, plutôt que de maintenir le leur. Le framework TypeScript gagnera de son côté en visibilité&#160;: <em>win-win</em> comme dirait ton manager.</p>
</div>
<div class="paragraph">
<p>Mais la raison principale de parier sur TypeScript est le système de types qu&#8217;il offre. C&#8217;est un système optionnel qui vient t&#8217;aider sans t&#8217;entraver. De fait, après avoir codé quelque temps avec, tu auras probablement envie de l&#8217;utiliser dans toutes tes applications. J&#8217;aime ce qu&#8217;ils ont fait, et on jettera un coup d&#8217;oeil à TypeScript dans le chapitre suivant. Tu pourras ainsi lire et comprendre n&#8217;importe quel code Angular, et tu pourras décider de l&#8217;utiliser, ou pas, dans tes applications.</p>
</div>
<div class="paragraph">
<p>Si tu te demandes "mais pourquoi avoir du code fortement typé dans une application Angular&#160;?", prenons un exemple. Angular 1 et 2 ont été construits sur le puissant concept d&#8217;injection de dépendance. Tu le connais déjà peut-être, parce que c&#8217;est un <em>design pattern</em> classique, utilisé dans beaucoup de frameworks et langages, et notamment AngularJS&#160;1.x comme je le disais.</p>
</div>
</div>
<div class="sect2">
<h3 id="_un_exemple_concret_dinjection_de_dépendance">3.3. Un exemple concret d&#8217;injection de dépendance</h3>
<div class="paragraph">
<p>Pour synthétiser ce qu&#8217;est l&#8217;injection de dépendance, prenons un composant d&#8217;une application, disons <code>RaceList</code>, permettant d&#8217;accéder à la liste des courses que le service <code>RaceService</code> peut retourner. Tu peux écrire <code>RaceList</code> comme ça&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="javascript">class RaceList {
  constructor() {
    this.raceService = new RaceService();
    // let's say that list() returns a promise
    this.raceService
      .list()
      // we store the races returned into a member of `RaceList`
      .then(races =&gt; (this.races = races));
    // arrow functions, FTW!
  }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Mais ce code a plusieurs défauts. L&#8217;un d&#8217;eux est la testabilité&#160;: c&#8217;est compliqué de remplacer <code>raceService</code> par un faux service (un bouchon, un <em>mock</em>), pour tester notre composant.</p>
</div>
<div class="paragraph">
<p>Si nous utilisons le <em>pattern</em> d&#8217;injection de dépendance (<em>Dependency Injection</em>, DI), nous déléguons la création de <code>RaceService</code> à un framework, lui réclamant simplement une instance. Le framework est ainsi en charge de la création de la dépendance, et il peut nous "l&#8217;injecter", par exemple dans le constructeur&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="javascript">class RaceList {
  constructor(raceService) {
    this.raceService = raceService;
    this.raceService.list().then(races =&gt; (this.races = races));
  }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Désormais, quand on teste cette classe, on peut facilement passer un faux service au constructeur&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="javascript">// in a test
const fakeService = {
  list: () =&gt; {
    // returns a fake promise
  }
};
const raceList = new RaceList(fakeService);
// now we are sure that the race list
// is the one we want for the test</code></pre>
</div>
</div>
<div class="paragraph">
<p>Mais comment le framework sait-il quel composant injecter dans le constructeur&#160;? Bonne question&#160;! AngularJS&#160;1.x se basait sur le nom du paramètre, mais cela a une sérieuse limitation&#160;: la minification du code va changer le nom du paramètre. Pour contourner ce problème, tu pouvais utiliser la notation à base de tableau, ou ajouter des métadonnées à la classe&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="javascript">RaceList.$inject = ['RaceService'];</code></pre>
</div>
</div>
<div class="paragraph">
<p>Il nous fallait donc ajouter des métadonnées pour que le framework comprenne ce qu&#8217;il fallait injecter dans nos classes. Et c&#8217;est exactement ce que proposent les annotations de type&#160;: une métadonnée donnant un indice nécessaire au framework pour réaliser la bonne injection. En Angular, avec TypeScript, voilà à quoi pourrait ressembler notre composant <code>RaceList</code>&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="javascript">class RaceList {
  raceService: RaceService;
  races: Array&lt;string&gt; = [];

  constructor(raceService: RaceService) {
    // the interesting part is `: RaceService`
    this.raceService = raceService;
    this.raceService.list().then(races =&gt; (this.races = races));
  }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Maintenant l&#8217;injection peut se faire sans ambiguïté&#160;!</p>
</div>
<div class="paragraph">
<p>C&#8217;est pourquoi nous allons passer un peu de temps à apprendre TypeScript (TS). Angular est clairement construit pour tirer parti de celui-ci, et rendre notre vie de développeur plus facile en l&#8217;utilisant. Et l&#8217;équipe Angular a envie de soumettre le système de type au comité de standardisation, donc peut-être qu&#8217;un jour il sera normal d&#8217;avoir de vrais types en JS.</p>
</div>
<div class="paragraph">
<p>Il est temps désormais de se lancer dans TypeScript&#160;!</p>
</div>
<div style="page-break-after: always;"></div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="typescript">4. Découvrir TypeScript</h2>
<div class="sectionbody">
<div class="paragraph">
<p>TypeScript, qui existe depuis 2012, est un sur-ensemble de JavaScript, ajoutant quelques trucs à ES5. Le plus important étant le système de type, lui donnant même son nom. Depuis la version 1.5, sortie en 2015, cette bibliothèque essaie d&#8217;être un sur-ensemble d&#8217;ES2015+, incluant toutes les fonctionnalités vues précédemment, et quelques nouveautés, comme les décorateurs.
Ecrire du TypeScript ressemble à écrire du JavaScript. Par convention les fichiers sources TypeScript ont l&#8217;extension <code>.ts</code>, et seront compilés en JavaScript standard, en général lors du build, avec le compilateur TypeScript. Le code généré reste très lisible.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="bash">npm install -g typescript
tsc test.ts</code></pre>
</div>
</div>
<div class="paragraph">
<p>Mais commençons par le début.</p>
</div>
<div class="imageblock text-center">
<div class="content">
<img src="data:image/png;base64,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" alt="TypeScript">
</div>
</div>
<div class="sect2">
<h3 id="_les_types_de_typescript">4.1. Les types de TypeScript</h3>
<div class="paragraph">
<p>La syntaxe pour ajouter des informations de type en TypeScript est basique&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="javascript">let variable: type;</code></pre>
</div>
</div>
<div class="paragraph">
<p>Les différents types sont simples à retenir&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="javascript">const ponyNumber: number = 0;
const ponyName: string = 'Rainbow Dash';</code></pre>
</div>
</div>
<div class="paragraph">
<p>Dans ces cas, les types sont facultatifs, car le compilateur TS peut les deviner depuis leur valeur (c&#8217;est ce qu&#8217;on appelle l&#8217;inférence de type).</p>
</div>
<div class="paragraph">
<p>Le type peut aussi être défini dans ton application, avec par exemple la classe suivante <code>Pony</code>&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="javascript">const pony: Pony = new Pony();</code></pre>
</div>
</div>
<div class="paragraph">
<p>TypeScript supporte aussi ce que certains langages appellent des types génériques, par exemple avec un <code>Array</code>&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="javascript">const ponies: Array&lt;Pony&gt; = [new Pony()];</code></pre>
</div>
</div>
<div class="paragraph">
<p>Cet <code>Array</code> ne peut contenir que des poneys, ce qu&#8217;indique la notation générique <code>&lt;&gt;</code>. On peut se demander quel est l&#8217;intérêt d&#8217;imposer cela. Ajouter de telles informations de type aidera le compilateur à détecter des erreurs&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="javascript">ponies.push('hello'); // error TS2345
// Argument of type 'string' is not assignable to parameter of type 'Pony'.</code></pre>
</div>
</div>
<div class="paragraph">
<p>Et comment faire si tu as besoin d&#8217;une variable pouvant recevoir plusieurs types&#160;? TS a un type spécial pour cela, nommé <code>any</code>.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="javascript">let changing: any = 2;
changing = true; // no problem</code></pre>
</div>
</div>
<div class="paragraph">
<p>C&#8217;est pratique si tu ne connais pas le type d&#8217;une valeur, soit parce qu&#8217;elle vient d&#8217;un bout de code dynamique, ou en sortie d&#8217;une bibliothèque obscure.</p>
</div>
<div class="paragraph">
<p>Si ta variable ne doit recevoir que des valeurs de type <code>number</code> ou <code>boolean</code>, tu peux utiliser l&#8217;union de types&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="javascript">let changing: number | boolean = 2;
changing = true; // no problem</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_valeurs_énumérées_enum">4.2. Valeurs énumérées (<em>enum</em>)</h3>
<div class="paragraph">
<p>TypeScript propose aussi des valeurs énumérées&#160;: <code>enum</code>. Par exemple, une course de poneys dans ton application peut être soit <code>ready</code>, <code>started</code> ou <code>done</code>.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="javascript">enum RaceStatus {
  Ready,
  Started,
  Done
}</code></pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="javascript">const race = new Race();
race.status = RaceStatus.Ready;</code></pre>
</div>
</div>
<div class="paragraph">
<p>Un <code>enum</code> est en fait une valeur numérique, commençant à 0. Tu peux cependant définir la valeur que tu veux&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="javascript">enum Medal {
  Gold = 1,
  Silver,
  Bronze
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Depuis TypeScript&#160;2.4, tu peux même donner une valeur sous forme de chaîne de caractères&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="javascript">enum Position {
  First = 'First',
  Second = 'Second',
  Other = 'Other'
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Cependant, pour être tout à fait honnêtes, nous n&#8217;utilisons pas d&#8217;enum dans nos projets&#160;:
on utilise des unions de types.
Elles sont plus simples et couvrent à peu près les mêmes usages&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="javascript">let color: 'blue' | 'red' | 'green';
// we can only give one of these values to `color`
color = 'blue';</code></pre>
</div>
</div>
<div class="paragraph">
<p>TypeScript permet même de créer ses propres types,
on pourrait donc faire comme suit&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="javascript">type Color = 'blue' | 'red' | 'green';
const ponyColor: Color = 'blue';</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_return_types">4.3. Return types</h3>
<div class="paragraph">
<p>Tu peux aussi spécifier le type de retour d&#8217;une fonction&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="javascript">function startRace(race: Race): Race {
  race.status = RaceStatus.Started;
  return race;
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Si la fonction ne retourne rien, tu peux le déclarer avec <code>void</code>&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="javascript">function startRace(race: Race): void {
  race.status = RaceStatus.Started;
}</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_interfaces">4.4. Interfaces</h3>
<div class="paragraph">
<p>C&#8217;est déjà une bonne première étape. Mais comme je le disais plus tôt, JavaScript est formidable par sa nature dynamique. Une fonction marchera si elle reçoit un objet possédant la bonne propriété&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="javascript">function addPointsToScore(player, points) {
  player.score += points;
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Cette fonction peut être appliquée à n&#8217;importe quel objet ayant une propriété <code>score</code>. Maintenant comment traduit-on cela en TypeScript&#160;? Facile&#160;!, on définit une interface, un peu comme la "forme" de l&#8217;objet.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="javascript">function addPointsToScore(player: { score: number }, points: number): void {
  player.score += points;
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Cela signifie que le paramètre doit avoir une propriété nommée <code>score</code> de type <code>number</code>. Tu peux évidement aussi nommer ces interfaces&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="javascript">interface HasScore {
  score: number;
}</code></pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="javascript">function addPointsToScore(player: HasScore, points: number): void {
  player.score += points;
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Tu verras que l&#8217;on utilise très souvent les interfaces dans le livre
pour représenter nos entités.</p>
</div>
<div class="paragraph">
<p>On utilise également les interfaces pour représenter nos modèles métiers dans nos projets.
Généralement, on ajoute un suffixe <code>Model</code> pour le montrer de façon claire.
Il est alors très facile de créer une nouvelle entité&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="javascript">interface PonyModel {
  name: string;
  speed: number;
}
const pony: PonyModel = { name: 'Light Shoe', speed: 56 };</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_paramètre_optionnel">4.5. Paramètre optionnel</h3>
<div class="paragraph">
<p>Y&#8217;a un autre truc sympa en JavaScript&#160;: les paramètres optionnels. Si tu ne les passes pas à l&#8217;appel de la fonction, leur valeur sera <code>undefined</code>. Mais en TypeScript, si tu déclares une fonction avec des paramètres typés, le compilateur te gueulera dessus si tu les oublies&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="javascript">addPointsToScore(player); // error TS2346
// Supplied parameters do not match any signature of call target.</code></pre>
</div>
</div>
<div class="paragraph">
<p>Pour montrer qu&#8217;un paramètre est optionnel dans une fonction (ou une propriété dans une interface), tu ajoutes <code>?</code> après le paramètre. Ici, le paramètre <code>points</code> est optionnel&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="javascript">function addPointsToScore(player: HasScore, points?: number): void {
  points = points || 0;
  player.score += points;
}</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_des_fonctions_en_propriété">4.6. Des fonctions en propriété</h3>
<div class="paragraph">
<p>Tu peux aussi décrire un paramètre comme devant posséder une fonction spécifique plutôt qu&#8217;une propriété.
La définition de cette interface serait&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="javascript">interface CanRun {
  run(meters: number): void;
}</code></pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="javascript">function startRunning(pony: CanRun): void {
  pony.run(10);
}

const ponyOne = {
  run: (meters: number) =&gt; logger.log(`pony runs ${meters}m`)
};
startRunning(ponyOne);</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_classes_2">4.7. Classes</h3>
<div class="paragraph">
<p>Une classe peut implémenter une interface. Pour nous, un poney peut courir, donc on pourrait écrire&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="javascript">class Pony implements CanRun {
  run(meters: number): void {
    logger.log(`pony runs ${meters}m`);
  }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Le compilateur nous obligera à implémenter la méthode <code>run</code> dans la classe. Si nous l&#8217;implémentons mal, par exemple en attendant une <code>string</code> au lieu d&#8217;un <code>number</code>, le compilateur va crier&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="javascript">class IllegalPony implements CanRun {
  run(meters: string) {
    console.log(`pony runs ${meters}m`);
  }
}
// error TS2420: Class 'IllegalPony' incorrectly implements interface 'CanRun'.
// Types of property 'run' are incompatible.</code></pre>
</div>
</div>
<div class="paragraph">
<p>Tu peux aussi implémenter plusieurs interfaces si ça te fait plaisir&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="javascript">class HungryPony implements CanRun, CanEat {
  run(meters: number): void {
    logger.log(`pony runs ${meters}m`);
  }

  eat(): void {
    logger.log(`pony eats`);
  }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Et une interface peut en étendre une ou plusieurs autres&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="javascript">interface Animal extends CanRun, CanEat {}

class Pony implements Animal {
  // ...
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Une classe en TypeScript peut avoir des propriétés et des méthodes. Avoir des propriétés dans une classe n&#8217;est pas une fonctionnalité standard d&#8217;ES2015+, c&#8217;est seulement possible en TypeScript.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="javascript">class SpeedyPony {
  speed = 10;

  run(): void {
    logger.log(`pony runs at ${this.speed}m/s`);
  }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Tout est public par défaut. Mais tu peux utiliser le mot-clé <code>private</code> pour cacher une propriété ou une méthode. Ajouter <code>public</code> ou <code>private</code> à un paramètre de constructeur est un raccourci pour créer et initialiser un membre privé ou public&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="javascript">class NamedPony {
  constructor(
    public name: string,
    private speed: number
  ) {}

  run(): void {
    logger.log(`pony runs at ${this.speed}m/s`);
  }
}</code></pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="javascript">const pony = new NamedPony('Rainbow Dash', 10);
// defines a public property name with 'Rainbow Dash'
// and a private one speed with 10</code></pre>
</div>
</div>
<div class="paragraph">
<p>Ce qui est l&#8217;équivalent du plus verbeux&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="javascript">class NamedPonyWithoutShortcut {
  public name: string;
  private speed: number;

  constructor(name: string, speed: number) {
    this.name = name;
    this.speed = speed;
  }

  run(): void {
    logger.log(`pony runs at ${this.speed}m/s`);
  }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Ces raccourcis sont très pratiques et nous allons beaucoup les utiliser en Angular&#160;!</p>
</div>
</div>
<div class="sect2">
<h3 id="_utiliser_dautres_bibliothèques">4.8. Utiliser d&#8217;autres bibliothèques</h3>
<div class="paragraph">
<p>Mais si on travaille avec des bibliothèques externes écrites en JS, comment savoir les types des paramètres attendus par telle fonction de telle bibliothèque&#160;? La communauté TypeScript est tellement cool que ses membres ont défini des définitions pour les types et les fonctions exposés par les bibliothèques JavaScript les plus populaires.</p>
</div>
<div class="paragraph">
<p>Les fichiers contenant ces définitions ont une extension spéciale&#160;: <code>.d.ts</code>. Ils contiennent une liste de toutes les fonctions publiques des bibliothèques. <a href="https://github.com/DefinitelyTyped/DefinitelyTyped">DefinitelyTyped</a> est l&#8217;outil de référence pour récupérer ces fichiers. Par exemple, si tu veux utiliser TS dans ton application AngularJS&#160;1.x, tu peux récupérer le fichier dédié depuis le repository directement avec NPM&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="bash">npm install --save-dev @types/angular</code></pre>
</div>
</div>
<div class="paragraph">
<p>ou le télécharger manuellement.
Puis tu inclues ce fichier au début de ton code et hop!, tu profites du bonheur d&#8217;avoir une compilation <em>typesafe</em>&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="javascript">/// &lt;reference path="angular.d.ts" /&gt;
angular.module(10, []); // the module name should be a string
// so when I compile, I get:
// Argument of type 'number' is not assignable to parameter of type 'string'.</code></pre>
</div>
</div>
<div class="paragraph">
<p><code>/// &lt;reference path="angular.d.ts" /&gt;</code> est un commentaire spécial reconnu par TS, qui indique au compilateur de vérifier l&#8217;interface <code>angular.d.ts</code>.
Maintenant, si tu te trompes dans l&#8217;appel d&#8217;une méthode AngularJS, le compilateur te le dira, et tu peux corriger sans avoir à lancer manuellement ton application&#160;!</p>
</div>
<div class="paragraph">
<p>Encore plus cool, depuis TypeScript 1.6, le compilateur est capable de trouver par lui-même ces définitions pour une dépendance
si elles sont packagées avec la dépendance elle-même.
De plus en plus de projets adoptent cette approche, et Angular fait de même.
Tu n&#8217;as donc même pas à t&#8217;occuper d&#8217;inclure ces interfaces dans ton projet Angular&#160;:
le compilateur TS va tout comprendre comme un grand si tu utilises NPM pour gérer tes dépendances&#160;!</p>
</div>
</div>
<div class="sect2">
<h3 id="_décorateurs">4.9. Décorateurs</h3>
<div class="paragraph">
<p>Cette fonctionnalité a été ajoutée en TypeScript 1.5, en partie pour le support d&#8217;Angular.
En effet, comme on le verra bientôt, les composants Angular peuvent être décrits avec des décorateurs.
Tu n&#8217;as peut-être jamais entendu parler de décorateurs, car tous les langages ne les proposent pas.
Un décorateur est une façon de faire de la méta-programmation.
Ils ressemblent beaucoup aux annotations,
qui sont principalement utilisées en Java, C#, et Python, et peut-être d&#8217;autres langages que je ne connais pas.
Suivant le langage, tu peux ajouter une annotation sur une méthode, un attribut, ou une classe.
Généralement, les annotations ne sont pas vraiment utiles au langage lui-même, mais plutôt aux frameworks et aux bibliothèques.</p>
</div>
<div class="paragraph">
<p>Les décorateurs sont vraiment puissants&#160;: ils peuvent modifier leur cible (classes, méthodes, etc.)
et par exemple modifier les paramètres ou le résultat retourné,
appeler d&#8217;autres méthodes quand la cible est appelée,
ou ajouter des métadonnées destinées à un framework (c&#8217;est ce que font les décorateurs d&#8217;Angular).
Jusqu&#8217;à présent, cela n&#8217;existait pas en JavaScript.
Mais le langage évolue, et il y a maintenant une proposition officielle pour le support des décorateurs,
qui les rendra peut-être possibles un jour.</p>
</div>
<div class="paragraph">
<p>En Angular, on utilisera les annotations fournies par le framework.
Leur rôle est assez simple&#160;: ils ajoutent des métadonnées à nos classes, propriétés ou paramètres pour par exemple indiquer "cette classe est un composant",
"cette dépendance est optionnelle", "ceci est une propriété spéciale du composant", etc.
Ce n&#8217;est pas obligatoire de les utiliser, car tu peux toujours ajouter les métadonnées manuellement si tu ne veux que du pur ES5,
mais le code sera plus élégant avec des décorateurs, comme ceux proposés par TypeScript.</p>
</div>
<div class="paragraph">
<p>En TypeScript, les annotations sont préfixées par <code>@</code>, et peuvent être appliquées sur une classe, une propriété de classe, une fonction, ou un paramètre de fonction.
Pas sur un constructeur en revanche, mais sur ses paramètres oui.</p>
</div>
<div class="paragraph">
<p>Pour mieux comprendre ces décorateurs, essayons d&#8217;en construire un très simple par nous-mêmes,
<code>@Log()</code>, qui va écrire le nom de la méthode à chaque fois qu&#8217;elle sera appelée.</p>
</div>
<div class="paragraph">
<p>Il s&#8217;utilisera comme ça&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="javascript">class RaceService {
  @Log()
  getRaces() {
    // call API
  }

  @Log()
  getRace(_raceId: number) {
    // call API
  }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Pour le définir, nous devons écrire une méthode renvoyant une fonction comme celle-ci&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="javascript">const Log = () =&gt; {
  return (_target: any, name: string, descriptor: any) =&gt; {
    logger.log(`call to ${name}`);
    return descriptor;
  };
};</code></pre>
</div>
</div>
<div class="paragraph">
<p>Selon ce sur quoi nous voulons appliquer notre décorateur, la fonction n&#8217;aura pas exactement les mêmes arguments.
Ici, nous avons un décorateur de méthode, qui prend 3 paramètres&#160;:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>target</code>&#160;: le prototype de la classe ciblée par notre décorateur</p>
</li>
<li>
<p><code>name</code>&#160;: le nom de la méthode ciblée</p>
</li>
<li>
<p><code>descriptor</code>&#160;: le descripteur de la méthode ciblée, par exemple est-ce que la méthode est énumérable, etc.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Nous voulons simplement écrire le nom de la méthode, mais tu pourrais faire pratiquement ce que tu veux&#160;:
modifier les paramètres, le résultat, appeler une autre fonction, etc.</p>
</div>
<div class="paragraph">
<p>Ici, dans notre exemple basique, chaque fois que les méthodes <code>getRace()</code> ou <code>getRaces()</code> sont exécutées,
nous verrons une nouvelle trace dans la console du navigateur&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="javascript">raceService.getRaces();
// logs: call to getRaces
raceService.getRace(1);
// logs: call to getRace</code></pre>
</div>
</div>
<div class="paragraph">
<p>En tant qu&#8217;utilisateur d&#8217;Angular, jetons un œil à ces annotations&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="javascript">@Component({ selector: 'ns-home', template: 'home' })
class HomeComponent {
  constructor() {
    logger.log('Home');
  }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>L&#8217;annotation <code>@Component</code> est ajoutée à la classe <code>Home</code>.
Quand Angular chargera notre application, il va trouver la classe <code>Home</code>,
et va comprendre que c&#8217;est un composant grâce au décorateur.
Cool, hein&#160;?! Comme tu le vois, une annotation peut recevoir des paramètres, ici un objet de configuration.</p>
</div>
<div class="paragraph">
<p>Je voulais juste présenter le concept de décorateur,
nous aurons l&#8217;occasion de revoir tous les décorateurs disponibles en Angular tout au long de ce livre.</p>
</div>
<div class="paragraph">
<p>Ainsi mon conseil est d&#8217;essayer TypeScript.
Tous mes exemples dans ce livre l&#8217;utiliseront à partir de maintenant,
car Angular, et tout l&#8217;outillage autour, est vraiment conçu pour en tirer parti.</p>
</div>
<div style="page-break-after: always;"></div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="advanced-typescript">5. TypeScript avancé</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Si tu commences juste ton apprentissage de TypeScript,
tu peux sauter sans problème ce chapitre dans un premier temps et y revenir plus tard.
Ce chapitre est là pour montrer des utilisations plus avancées de TypeScript,
qui n&#8217;auront vraiment de sens que que si le langage t’est déjà familier.</p>
</div>
<div class="sect2">
<h3 id="_readonly">5.1. readonly</h3>
<div class="paragraph">
<p>Tu peux utiliser le mot-clé <code>readonly</code> (lecture seule) pour marquer une propriété
d&#8217;un objet ou d&#8217;une classe comme étant&#8230;&#8203; en lecture seule.
De cette façon, le compilateur refusera de compiler du code qui tente
d&#8217;assigner une nouvelle valeur à cette propriété&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="javascript">interface Config {
  readonly timeout: number;
}

const config: Config = { timeout: 2000 };
// `config.timeout` is now readonly and can't be reassigned</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_keyof">5.2. keyof</h3>
<div class="paragraph">
<p>Le mot-clé <code>keyof</code> peut être utilisé pour un type
représentant l&#8217;union de tous les noms des propriétés d&#8217;un autre type.
Par exemple, si tu as une interface <code>PonyModel</code>&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="javascript">interface PonyModel {
  name: string;
  color: string;
  speed: number;
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Tu veux écrire une fonction
qui renvoie la valeur d&#8217;une propriété.
Voici une première implémentation naïve&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="javascript">function getProperty(obj: any, key: string): any {
  return obj[key];
}

const pony: PonyModel = {
  name: 'Rainbow Dash',
  color: 'blue',
  speed: 45
};
const nameValue = getProperty(pony, 'name');</code></pre>
</div>
</div>
<div class="paragraph">
<p>Il y a deux problèmes ici&#160;:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>tu peux donner n&#8217;importe quelle valeur au paramètre <code>key</code>, même une clé qui n&#8217;existe pas dans <code>PonyModel</code>.</p>
</li>
<li>
<p>le type de retour étant <code>any</code>, nous perdons beaucoup en information de typage.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>C&#8217;est ici que <code>keyof</code> peut être utile.
<code>keyof</code> permet de lister toutes les clés d&#8217;un type&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="javascript">type PonyModelKey = keyof PonyModel;
// this is the same as `'name'|'speed'|'color'`
let property: PonyModelKey = 'name'; // works
property = 'speed'; // works
// key = 'other' would not compile</code></pre>
</div>
</div>
<div class="paragraph">
<p>On peut donc utiliser ce type pour rendre <code>getProperty</code> plus strictement typée,
en déclarant que&#160;:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>le premier paramètre est de type <code>T</code>&#160;;</p>
</li>
<li>
<p>le second paramètre est de type <code>K</code>, qui est une clé de <code>T</code>.</p>
</li>
</ul>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="javascript">function getProperty&lt;T, K extends keyof T&gt;(obj: T, key: K): T[K] {
  return obj[key];
}

const pony: PonyModel = {
  name: 'Rainbow Dash',
  color: 'blue',
  speed: 45
};
// TypeScript infers that `nameValue` is of type `string`!
const nameValue = getProperty(pony, 'name');</code></pre>
</div>
</div>
<div class="paragraph">
<p>On fait ici d&#8217;une pierre, deux coups&#160;:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>key</code> peut maintenant seulement être une propriété existante de <code>PonyModel</code>&#160;;</p>
</li>
<li>
<p>le type de retour sera déduit par TypeScript (ce qui est sacrément cool&#160;!).</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Maintenant voyons comment nous pouvons utiliser <code>keyof</code> pour aller encore plus loin.</p>
</div>
</div>
<div class="sect2">
<h3 id="_mapped_type">5.3. Mapped type</h3>
<div class="paragraph">
<p>Disons que tu veux construire un type qui a exactement les mêmes propriétés que <code>PonyModel</code>,
mais tu veux que chaque propriété soit optionnelle.
Tu peux bien sûr le définir manuellement&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="javascript">interface PartialPonyModel {
  name?: string;
  color?: string;
  speed?: number;
}

const pony: PartialPonyModel = {
  name: 'Rainbow Dash'
};</code></pre>
</div>
</div>
<div class="paragraph">
<p>Mais on peut faire quelque chose de plus générique avec un <em>mapped type</em>,
un "type de transformation"&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="javascript">type Partial&lt;T&gt; = {
  [P in keyof T]?: T[P];
};

const pony: Partial&lt;PonyModel&gt; = {
  name: 'Rainbow Dash'
};</code></pre>
</div>
</div>
<div class="paragraph">
<p>Le type <code>Partial</code> est une transformation qui applique le modificateur <code>?</code>
à chaque property du type&#160;!
En fait, <code>Partial</code> est suffisamment fréquent pour qu&#8217;il soit inclus dans TypeScript depuis la version 2.1,
et il est déclaré exactement comme ceci dans la bibliothèque standard.</p>
</div>
<div class="paragraph">
<p>TypeScript offre également d&#8217;autres types de transformation.</p>
</div>
<div class="sect3">
<h4 id="_readonly_2">5.3.1. Readonly</h4>
<div class="paragraph">
<p><code>Readonly</code> rend toutes les propriétés d&#8217;un objet <code>readonly</code>&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="javascript">const pony: Readonly&lt;PonyModel&gt; = {
  name: 'Rainbow Dash',
  color: 'blue',
  speed: 45
};
// all properties are `readonly`</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_pick">5.3.2. Pick</h4>
<div class="paragraph">
<p><code>Pick</code> t&#8217;aide à construire un type avec seulement quelques-unes des propriétés d&#8217;origine&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="javascript">const pony: Pick&lt;PonyModel, 'name' | 'color'&gt; = {
  name: 'Rainbow Dash',
  color: 'blue'
};
// `pony` can't have a `speed` property</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_record">5.3.3. Record</h4>
<div class="paragraph">
<p><code>Record</code> t&#8217;aide à construire un type avec les mêmes propriétés
et un autre type pour ces propriétés&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="javascript">interface FormValue {
  value: string;
  valid: boolean;
}

const pony: Record&lt;keyof PonyModel, FormValue&gt; = {
  name: { value: 'Rainbow Dash', valid: true },
  color: { value: 'blue', valid: true },
  speed: { value: '45', valid: true }
};</code></pre>
</div>
</div>
<div class="paragraph">
<p>Il y a <a href="https://www.typescriptlang.org/docs/handbook/utility-types.html">encore d&#8217;autres types</a>,
mais ceux-ci sont les plus utiles.</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_union_de_types_et_gardien_de_types">5.4. Union de types et gardien de types</h3>
<div class="paragraph">
<p>Les unions de types sont très pratiques.
Disons que ton application a des utilisateurs connectés et des utilisateurs anonymes,
et que, parfois, tu dois faire une action différente selon le cas.
Tu peux modéliser les entités comme ceci&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="javascript">interface User {
  type: 'authenticated' | 'anonymous';
  name: string;
  // other fields
}

interface AuthenticatedUser extends User {
  type: 'authenticated';
  loggedSince: number;
}

interface AnonymousUser extends User {
  type: 'anonymous';
  visitingSince: number;
}

function onWebsiteSince(user: User): number {
  if (user.type === 'authenticated') {
    // this is a LoggedUser
    return (user as AuthenticatedUser).loggedSince;
  } else if (user.type === 'anonymous') {
    // this is an AnonymousUser
    return (user as AnonymousUser).visitingSince;
  }
  // TS doesn't know every possibility was covered
  // so we have to return something here
  return 0;
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Je ne sais pas pour toi,
mais je n&#8217;aime pas trop ces typages explicites <code>as &#8230;&#8203;</code>.
Peut-on faire mieux&#160;?</p>
</div>
<div class="paragraph">
<p>La première possibilité est d&#8217;utiliser un <em>type guard</em>, un gardien de types,
une fonction spéciale dont le seul but est d&#8217;aider le compilateur TypeScript.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="javascript">function isAuthenticated(user: User): user is AuthenticatedUser {
  return user.type === 'authenticated';
}

function isAnonymous(user: User): user is AnonymousUser {
  return user.type === 'anonymous';
}

function onWebsiteSince(user: User): number {
  if (isAuthenticated(user)) {
    // this is inferred as a LoggedUser
    return user.loggedSince;
  } else if (isAnonymous(user)) {
    // this is inferred as an AnonymousUser
    return user.visitingSince;
  }
  // TS still doesn't know every possibility was covered
  // so we have to return something here
  return 0;
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>C&#8217;est mieux&#160;!
Mais on a toujours besoin de retourner une valeur par défaut,
même si nous avons couvert tous les cas.</p>
</div>
<div class="paragraph">
<p>On peut légèrement améliorer la situation si on abandonne les gardiens de types
et que l&#8217;on utilise une union de types à la place.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="javascript">interface BaseUser {
  name: string;
  // other fields
}

interface AuthenticatedUser extends BaseUser {
  type: 'authenticated';
  loggedSince: number;
}

interface AnonymousUser extends BaseUser {
  type: 'anonymous';
  visitingSince: number;
}

type User = AuthenticatedUser | AnonymousUser;

function onWebsiteSince(user: User): number {
  if (user.type === 'authenticated') {
    // this is inferred as a LoggedUser
    return user.loggedSince;
  } else {
    // this is narrowed as an AnonymousUser
    // without even testing the type!
    return user.visitingSince;
  }
  // no need to return a default value
  // as TS knows that we covered every possibility!
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>C&#8217;est encore mieux, car TypeScript comprend automatiquement le type utilisé dans la branche <code>else</code>.</p>
</div>
<div class="paragraph">
<p>Parfois tu sais que ce modèle va grandir dans le futur,
et que d&#8217;autres cas devront être gérés.
Par exemple, si tu ajoutes un <code>AdminUser</code>.
Dans ce cas, on peut utiliser un <code>switch</code>.
Un <code>switch</code> sur une union de types ne compilera pas si l&#8217;un des cas n&#8217;est pas géré.
Donc introduire notre <code>AdminUser</code>, ou un autre type plus tard, ajouterait automatiquement des erreurs de compilation
dans tous les endroits de notre code où nous devons les gérer&#160;!</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="javascript">interface AdminUser extends BaseUser {
  type: 'admin';
  adminSince: number;
}

type User = AuthenticatedUser | AnonymousUser | AdminUser;

function onWebsiteSince(user: User): number {
  switch (user.type) {
    case 'authenticated':
      return user.loggedSince;
    case 'anonymous':
      return user.visitingSince;
    case 'admin':
      // without this case, we could not even compile the code
      // as TS would complain that all possible paths are not returning a value
      return user.adminSince;
  }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>J&#8217;espère que ces patterns vous aideront dans vos projets.
Penchons-nous maintenant sur les Web Components.</p>
</div>
<div style="page-break-after: always;"></div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="web-components">6. Le monde merveilleux des Web Components</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Avant d&#8217;aller plus loin, j&#8217;aimerais faire une petite pause pour parler des Web Components.
Vous n&#8217;avez pas besoin de connaître les Web Components pour écrire du code Angular.
Mais je pense que c&#8217;est une bonne chose d&#8217;en avoir un aperçu,
car en Angular certaines décisions ont été prises pour faciliter leur intégration,
ou pour rendre les composants que l&#8217;on construit similaires à des Web Components.
Tu es libre de sauter ce chapitre si tu ne t&#8217;intéresses pas du tout au sujet,
mais je pense que tu apprendras deux-trois choses qui pourraient t&#8217;être utiles pour la suite.</p>
</div>
<div class="sect2">
<h3 id="_le_nouveau_monde">6.1. Le nouveau Monde</h3>
<div class="paragraph">
<p>Les composants sont un vieux rêve de développeur.
Un truc que tu prendrais sur étagère et lâcherais dans ton application,
et qui marcherait directement et apporterait la fonctionnalité à tes utilisateurs sans rien faire.</p>
</div>
<div class="paragraph">
<p>Mes amis, cette heure est venue.</p>
</div>
<div class="paragraph">
<p>Oui, bon, peut-être. En tout cas, on a le début d&#8217;un truc.</p>
</div>
<div class="paragraph">
<p>Ce n&#8217;est pas complètement neuf.
On avait déjà la notion de composants dans le développement web depuis quelque temps,
mais ils demandaient en général de lourdes dépendances comme
jQuery, Dojo, Prototype, AngularJS, etc.
Pas vraiment le genre de bibliothèques que tu veux absolument ajouter à ton application.</p>
</div>
<div class="paragraph">
<p>Les Web Components essaient de résoudre ce problème&#160;:
avoir des composants réutilisables et encapsulés.</p>
</div>
<div class="imageblock text-center">
<div class="content">
<img src="data:image/png;base64,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" alt="Web Components">
</div>
</div>
<div class="paragraph">
<p>Ils reposent sur un ensemble de standards émergents,
que les navigateurs ne supportent pas encore parfaitement.
Mais quand même, c&#8217;est un sujet intéressant,
même si on ne pourra pas en bénéficier pleinement avant quelques années,
ou même jamais si le concept ne décolle pas.</p>
</div>
<div class="paragraph">
<p>Ce standard émergent est défini dans trois spécifications&#160;:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Custom elements ("éléments personnalisés")</p>
</li>
<li>
<p>Shadow DOM ("DOM de l&#8217;ombre")</p>
</li>
<li>
<p>Template</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Note que les exemples présentés ont plus de chances de fonctionner dans un Chrome ou un Firefox récent.</p>
</div>
</div>
<div class="sect2">
<h3 id="_custom_elements">6.2. Custom elements</h3>
<div class="paragraph">
<p>Les éléments customs sont un nouveau standard qui permet au développeur de créer ses propres éléments du DOM,
faisant de <code>&lt;ns-pony&gt;&lt;/ns-pony&gt;</code> un élément HTML parfaitement valide.
La spécification définit comment déclarer de tels éléments,
comment tu peux les faire étendre des éléments existants,
comment tu peux définir ton API, etc.</p>
</div>
<div class="paragraph">
<p>Déclarer un élément custom se fait avec un simple <code>customElements.define</code>&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="javascript">class PonyComponent extends HTMLElement {
  constructor() {
    super();
    console.log("I'm a pony!");
  }

}

customElements.define('ns-pony', PonyComponent);</code></pre>
</div>
</div>
<div class="paragraph">
<p>Et ensuite l&#8217;utiliser avec&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="html">&lt;ns-pony&gt;&lt;/ns-pony&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>Note que le nom doit contenir un tiret,
pour indiquer au navigateur que c&#8217;est un élément custom.</p>
</div>
<div class="paragraph">
<p>Évidemment ton élément custom peut avoir des propriétés et des méthodes,
et il aura aussi des callbacks liés au cycle de vie,
pour exécuter du code quand le composant est inséré ou supprimé,
ou quand l&#8217;un de ses attributs est modifié.
Il peut aussi avoir son propre template.
Par exemple, peut-être que ce <code>ns-pony</code> affiche une image du poney, ou seulement son nom&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="javascript">class PonyComponent extends HTMLElement {
  constructor() {
    super();
    console.log("I'm a pony!");
  }


  /**
   * This is called when the component is inserted
   */
  connectedCallback() {
    this.innerHTML = '&lt;h1&gt;General Soda&lt;/h1&gt;';
  }

}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Si tu jettes un coup d&#8217;œil au DOM, tu verras <code>&lt;ns-pony&gt;&lt;h1&gt;General Soda&lt;/h1&gt;&lt;/ns-pony&gt;</code>.
Mais cela veut dire que le CSS ou la logique JavaScript de ton application
peut avoir des effets indésirables sur ton composant.
Donc, en général, le template est caché et encapsulé dans un truc appelé le Shadow DOM ("DOM de l&#8217;ombre"),
et tu ne verras dans le DOM que <code>&lt;ns-pony&gt;&lt;/ns-pony&gt;</code>,
bien que le navigateur affiche le nom du poney.</p>
</div>
</div>
<div class="sect2">
<h3 id="_shadow_dom">6.3. Shadow DOM</h3>
<div class="paragraph">
<p>Avec un nom qui claque comme celui-là,
on s&#8217;attend à un truc très puissant.
Et il l&#8217;est.
Le Shadow DOM est une façon d&#8217;encapsuler le DOM de ton composant.
Cette encapsulation signifie que la feuille de style et la logique JavaScript de ton application
ne vont pas s&#8217;appliquer sur le composant et le ruiner accidentellement.
Cela en fait l&#8217;outil idéal pour dissimuler le fonctionnement interne de ton composant,
et s&#8217;assurer que rien n&#8217;en fuit à l&#8217;extérieur.</p>
</div>
<div class="paragraph">
<p>Si on retourne à notre exemple précédent&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="javascript">class PonyComponent extends HTMLElement {
  constructor() {
    super();
    const shadow = this.attachShadow({ mode: 'open' });
    const title = document.createElement('h1');
    title.textContent = 'General Soda';
    shadow.appendChild(title);
  }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Si tu essaies maintenant de l&#8217;observer, tu devrais voir&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="html">&lt;ns-pony&gt;
  #shadow-root (open)
    &lt;h1&gt;General Soda&lt;/h1&gt;
&lt;/ns-pony&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>Désormais, même si tu ajoutes du style aux éléments <code>h1</code>,
rien ne changera&#160;:
le Shadow DOM agit comme une barrière.</p>
</div>
<div class="paragraph">
<p>Jusqu&#8217;à présent, nous avions utilisé une chaîne de caractères pour notre template.
Mais ce n&#8217;est habituellement pas la façon de procéder.
La bonne pratique est de plutôt utiliser l&#8217;élément <code>&lt;template&gt;</code>.</p>
</div>
</div>
<div class="sect2">
<h3 id="_template">6.4. Template</h3>
<div class="paragraph">
<p>Un template spécifié dans un élément <code>&lt;template&gt;</code> n&#8217;est pas affiché par le navigateur.
Son but est d&#8217;être à terme cloné dans un autre élément.
Ce que tu déclareras à l&#8217;intérieur sera inerte&#160;: les scripts ne s&#8217;exécuteront pas, les images ne se chargeront pas, etc.
Son contenu peut être requêté par le reste de la page avec la méthode classique <code>getElementById()</code>,
et il peut être placé sans risque n&#8217;importe où dans la page.</p>
</div>
<div class="paragraph">
<p>Pour utiliser un template, il doit être cloné&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="html">&lt;template id="pony-template"&gt;
  &lt;style&gt;
    h1 {
      color: orange;
    }
  &lt;/style&gt;
  &lt;h1&gt;General Soda&lt;/h1&gt;
&lt;/template&gt;</code></pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="javascript">class PonyComponent extends HTMLElement {
  constructor() {
    super();
    const template = document.querySelector('#pony-template');
    const clonedTemplate = document.importNode(template.content, true);
    const shadow = this.attachShadow({ mode: 'open' });
    shadow.appendChild(clonedTemplate);
  }
}</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_les_bibliothèques_basées_sur_les_web_components">6.5. Les bibliothèques basées sur les Web Components</h3>
<div class="paragraph">
<p>Toutes ces spécifications constituent les Web Components.
Je suis loin d&#8217;en être expert,
et ils présentent toute sorte de pièges.</p>
</div>
<div class="paragraph">
<p>Comme les Web Components ne sont pas complètement supportés par tous les navigateurs,
il y a un <em>polyfill</em> à inclure dans ton application pour être sûr que ça fonctionne.
Ce <em>polyfill</em> est appelé <a href="https://github.com/WebComponents/webcomponentsjs">web-component.js</a>,
et il est bon de noter qu&#8217;il est le fruit d&#8217;un effort commun entre Google, Mozilla et Microsoft, entre autres.</p>
</div>
<div class="paragraph">
<p>Au-dessus de ce <em>polyfill</em>, quelques bibliothèques ont vu le jour.
Elles proposent toutes de faciliter le travail avec les Web Components,
et viennent souvent avec un lot de composants tout prêts.</p>
</div>
<div class="paragraph">
<p>Parmi les initiatives notables, on peut citer&#160;:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><a href="https://www.polymer-project.org/">Polymer</a>, première tentative de la part de Google&#160;;</p>
</li>
<li>
<p><a href="https://lit-element.polymer-project.org/">LitElement</a>, projet plus récent de l&#8217;équipe Polymer&#160;;</p>
</li>
<li>
<p><a href="http://x-tag.github.io/">X-tag</a> de Mozilla et Microsoft&#160;;</p>
</li>
<li>
<p><a href="https://stenciljs.com/">Stencil</a>.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Je ne vais pas rentrer dans les détails, mais tu peux facilement utiliser un composant existant.
Supposons que tu veuilles embarquer une carte Google dans ton application&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="html">&lt;!-- Polyfill Web Components support for older browsers --&gt;
&lt;script src="webcomponents.js"&gt;&lt;/script&gt;

&lt;!-- Import element --&gt;
&lt;script src="google-map.js"&gt;&lt;/script&gt;

&lt;!-- Use element --&gt;
&lt;body&gt;
  &lt;google-map latitude="45.780" longitude="4.842"&gt;&lt;/google-map&gt;
&lt;/body&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>Il y a une tonne de composants disponibles.
Tu peux en avoir un aperçu sur <a href="https://www.webcomponents.org/" class="bare">https://www.webcomponents.org/</a>.</p>
</div>
<div class="paragraph">
<p>Tu peux faire plein de trucs cools avec LitElement
et les autres frameworks similaires, comme du binding bi-directionnel,
donner des valeurs par défaut aux attributs, émettre des événements custom,
réagir aux modifications d&#8217;attribut, répéter des éléments si tu fournis une collection à un composant, etc.</p>
</div>
<div class="paragraph">
<p>C&#8217;est un chapitre trop court pour te montrer sérieusement tout ce que l&#8217;on peut faire avec les Web Components,
mais tu verras que certains de leurs concepts vont émerger dans la lecture à venir.
Et tu verras sans aucun doute que l&#8217;équipe Google a conçu Angular
pour rendre facile l&#8217;utilisation des Web Components aux côtés de nos composants Angular.
Il est même possible d&#8217;exporter nos composants Angular sous forme de Web Components,
grâce à <a href="https://angular.dev/guide/elements">Angular Elements</a>.</p>
</div>
<div style="page-break-after: always;"></div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="philosophy">7. La philosophie d&#8217;Angular</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Pour construire une application Angular,
il te faut saisir quelques trucs sur la philosophie du framework.</p>
</div>
<div class="imageblock text-center">
<div class="content">
<img src="data:image/png;base64,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" alt="angular logo" width="200">
</div>
</div>
<div class="paragraph">
<p>Avant tout, Angular est un framework orienté composant.
Tu vas écrire de petits composants, et assemblés,
ils vont constituer une application complète.
Un composant est un groupe d&#8217;éléments HTML,
dans un template, dédiés à une tâche particulière.
Pour cela, tu auras probablement besoin d&#8217;un peu de logique métier derrière ce template,
pour peupler les données, et réagir aux événements par exemple.</p>
</div>
<div class="paragraph">
<p>Cette orientation composant est largement partagée par de nombreux frameworks front-end&#160;:
c&#8217;est le cas depuis le début de <a href="https://reactjs.org/">React</a>,
le framework tendance de Facebook&#160;; <a href="https://emberjs.com/">Ember</a>
a sa propre façon de faire quelque chose de similaire&#160;;
et les <a href="https://svelte.dev/">Svelte</a>
ou <a href="https://vuejs.org/">Vue.js</a> parient aussi sur la construction de petits composants.</p>
</div>
<div class="imageblock text-center">
<div class="content">
<img src="data:image/png;base64,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" alt="emberjs logo" width="200">
</div>
</div>
<div class="imageblock text-center">
<div class="content">
<img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAA+gAAAPoCAYAAABNo9TkAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAvyhJREFUeNrs3Qe0VcXVwPFNQBBEBBRFRUQUBRV7B3uLsWDvlWjsGnv7rInGYIk1JvbEirFrbFHEGrErWMFeAI2KIiD1fXs7++kTXrn3vVtmzvn/1tqLosCcmVNmnzOlVU1NjQAAAAAAgOr6FVUAAAAAAAAJOgAAAAAAIEEHAAAAAIAEHQAAAAAAkKADAAAAAECCDgAAAAAASNABAAAAACBBBwAAAAAAJOgAAAAAAJCgAwAAAAAAEnQAAAAAAEjQAQAAAAAACToAAAAAACToAAAAAACABB0AAAAAABJ0AAAAAABAgg4AAAAAAAk6AAAAAAAgQQcAAAAAgAQdAAAAAACQoAMAAAAAQIIOAAAAAABI0AEAAAAAIEEHAAAAAAAk6AAAAAAAkKADAAAAAAASdAAAAAAASNABAAAAAAAJOgAAAAAAJOgAAAAAAIAEHQAAAAAAEnQAAAAAAECCDgAAAAAACToAAAAAACBBBwAAAACABB0AAAAAAJCgAwAAAABAgg4AAAAAAEjQAQAAAAAgQQcAAAAAACToAAAAAACQoAMAAAAAABJ0AAAAAABI0AEAAAAAAAk6AAAAAAAk6AAAAAAAgAQdAAAAAAASdAAAAAAAQIIOAAAAAAAJOgAAAAAAIEEHAAAAAIAEHQAAAAAAkKADAAAAAECCDgAAAAAASNABAAAAACBBBwAAAAAAJOgAAAAAAJCgAwAAAAAAEnQAAAAAAEjQAQAAAAAACToAAAAAACToAAAAAACABB0AAAAAABJ0AAAAAABAgg4AAAAAAEjQAQAAAAAgQQcAAAAAACToAAAAAACQoAMAAAAAABJ0AAAAAABI0AEAAAAAAAk6AAAAAAAk6AAAAAAAgAQdAAAAAAASdAAAAAAAQIIOAAAAAAAJOgAAAAAAIEEHAAAAAIAEHQAAAAAAkKADAAAAAECCDgAAAAAASNABAAAAACBBBwAAAAAAJOgAAAAAAJCgAwAAAAAAEnQAAAAAAEjQAQAAAAAACToAAAAAACToAAAAAACABB0AAAAAABJ0AAAAAADQHG3yeNCDR8+g5QEAAAAgYtf2yV+62oZmB5BD7TXm1+ioMY9GJ43Wde6Ldd/ifaMxU2NCnQAAFK5znbB7bZfZ+qK191y7136nMUnje42vNKZQfQBI0AEgXa00ltDoo7GURm+NxTQW1eihsYBGhxb+G19rjPP4zH/8UOM9jTEaH2tMpykAZNxcGj39XrukRi+N7n6/7e7RtYX/xmSN/2l86vfbT/xeazFa4wONGpoCAAk6AMTROVxBY3WNVTVW1FhWwlfxcurqsWwD/32GJ+yjPEZqvO6dyZk0G4DE2Fdve+nZ3++5y3v0qkBfsoO/BOjZwH+3r+1varym8ZLGC36/5SUpgCS1qqnJ30tH5qADSXcS19DYXGNdjTUrkIyX0qQ6HcjnNUZofESzAojM4n5/tftt7QvQ1O61dn99SuMxjf/KL6cuAUhEHuegk6ADiJ19qd5UY2uNzTS6Zez4bNjmcI0nPd6hyQFU2DIa63msL2FaUJZ8qzFM416N+yUMmQdAgk6CToIOoIikfEeN3SR8KW+do2Mfq/GwxkPeofyS0wFAidmLzo00fi1hRNLCOTp2m2ZkX9Zv0bhdwpoiAEjQSdBJ0AHMprV3FA/Q2FLC/PK8myVhSPy/Ne7ReJUqAdBMK2lsq/EbCUPWf0WV/DhP3e6vV0l4McoaIQAJOgk6CTqQe908KT9Ewsq/aNhHnqjbMM3hdCYBNMJeem6gsY3GIAnzytEwm250hSfrjFwCSNBJ0EnQgdyxOY/Haeyp0Y7qKJp1IG145q0aT0v42g4g3+yr+ECNXTR2kuyt2VEJUzVu1DhPWBMEIEEnQSdBB3LAtug5TWM7YYhlqXzmyfoNEobEA8gXG7K+l4S1OxiJVBr20vMujbMkbNsGgAS9IugcA6iUfhpDNV7R2IH7T0lZh/xIjRe9I3mUxkJUC5BpC/q1/rpf+0eSnJe8j7yDP7Nu82cYAJCgA0jeAhqXeydyZ+47Zddf40IJX9VtOyGbf9qaagEyobVf03Ztf+7Xen+qpex95Z38GXa5P9MAgAQdQJIdycM1RktYAK4NVVLx+rfV8G1RuQ81zpDs7W0M5MVifg1/6Nf0lsKLt0pr48+y0f5s45kGgAQdQDLW1HhB4xKNzlRH1fXQOF3jA+/cb6LRimoBotbKr9V7/No93a9lVFdnf7Y97886ACBBBxCt9hKGXD6rsTLVEZ3a4bH/0RipcaDGPFQLEJV5/Noc6dcq01TitLI/6y70Zx8AkKADiMraEhbTOYp7SxKW0/ibxicaf9ZYhCoBqsquwXP9mvybX6OIvx9tz7xX/RkIACToAKrOvuzYtmlPSdjbHGnponG8hCG012ksS5UAFbWsX3t2DZ7g1yTSsrQ/A08XRjsAIEEHUEW2pY8NwTyTTkny2mrsqzFKwgrRA6kSoKwG+rU2yq+9tlRJ0uwZeIbGo8J2dwBI0AFUwfoShrRvSFVkii1MZStE29eg4RIWqQJQOpv4tfWUX2ss2JgtG/izcX2qAgAJOoBKOVTCl/NuVEWmre/tbAshbUF1AC1i19Azfk2RvGVbN2/nQ6kKACToAMrJ9n29UuMyjbmojtywxY8ekLB1Hok6UHxi/oJfQ+tQHbkxlz8rrxT2TAdAgg6gDDpq3KtxAFWRW6t5kvG0MLUBaMqGfq084NcO8smemff5MxQASNABlER3jceFr6cIBmgM8+CLINDw9TGA6oD6tT9Du1MVAEjQAbSUrUY7XPgChDnZF0KbU3unsD0bYNfAXcIIE9RvNX+W9qAqAJCgA2iuXsL+5mjadhqvSZhruTDVgZyxc/4qvwa2pTrQCHuWPunPVgAgQQdQlCU0nvAfgabYIkg213KMxh+F+ZbIvo5+rr+nsb+wEBiKe7b2pioAkKADKJQNwXtEoydVgSJ10DhF412NwTxnkNG+02A/x+1cb0+VoEg9/RnLcHcAJOgAmtTNOw5LURVoARv2e43GixobUB3IiA38nL5GmM6BllnSn7XdqAoAJOgAGmJfP207mH5UBUpkZQmrF9tCcgzpRKp6+zn8uJ/TQCn082duB6oCAAk6gNm11rhFY02qAmVgC8mN0jhTGBKMdLT3c3aUn8NAqa3pz97WVAUAEnQAdV2qsQ3VgDInO6dpvEWygwRs5+fqacJLJZTXNv4MBgASdAA/OtgDqITFJQwXfkijD9WByPTxc/NOP1cBnsMASNABVMxAjYuoBlTB5hqva5yu0Y7qQJW183PxdT83gUq7yJ/JAEjQAeTUohq3a7SlKlAlc2uc4UnRxlQHqmRjPwfP8HMSqAZ7Ft/hz2YAJOgAcsYWpLlZYyGqAhFYWuNRjRs0FqQ6UCEL+jn3qJ+DQAznJIvGASToAHLIViZej2pAZPbUeFNjH6oCZbaPn2t7UhWIzLr+jAZAgg4gJzbSOJFqQKTm17hewkJdvagOlFgvP7eu93MNiNGJ/qwGQIIOIOPm844pw+cQO1uoa6TG73leoUR9HjuXRgmLwCF+9oz+h0ZnqgLIlzZUAZA7tkrsYjk75hkaozXe0XhXY4zGOI0vNcZrTNCYrvH9bH+us3eSukr40mY/2vzAxb0OLfr4r0kgy6Ojxl80dtYYrPE2VYJm6KtxrcbaVEVZzdL4yO+xH2t84r/+QuNrja/8x5l+362rg4SV9OfV6K7Rze+3S0lYH8B+XFbytahpD39m78upBeRHq5qamtwd9ODRM2h55NU2Gvfk4Dgt0X5M4ymN5zVe1phUxn+vvScA/TRW0lhVYxXhy0epTdE4TeNCTwSAptiLs6M1zvLrFKUzwe+tL2m8qvGWhBdoU8r4b7bze+zqErYj21TCi9Os2zYnz25gDtf2yd/3ZBJ0ID86eQdqkYwe31iNoRr3aTytMa3a91cJX3zWkbAYn3UmWSW6NP6rsZ+EERFAQ+x6u174al4q7/q99UmNZyV8Ja92J9JGOK3hCexukt3RYZ9LeAH8HachSNBJ0EnQgey4TOPQjB2TDUu/3Tvh9sV8ZuTlXVhjEwnzXzeTMIQTzWNf6U7RuFj4mo5fsq/mR2qcLXw1bwmbAvSIxsMStqEbm0C728tQmwqzi2RvKPzlGodxWoIEnQSdBB3IBvvC8F/Jzjxpm8P4d++wfJbq/VdjZQnTDuzrz4qcps0yXML8zI+oCkhYD+J6jQ2oimZ5TeNujXs1XpHqfyFvru6ezB4k2Vmp315A24is5zlNQYJOgk6CDqTNkvIXPRlMnc0tv0TjPJlzgaHULeGJui2GtqYn8CiMDfs8XOOfVEWu7a1xqYTpPCiMdQJHaNzmifkHGTs+WwfkGAmr93fMwPHYfH974c6oIZCgZ7zjDiDb9stAcm6dkaslrJh+SgaTc/GOsa1WbvNll/TjHMXpWxBLyGw7IpvusADVkTsLeNv/g+S8YKP8HrOk33P+ksHkXPxZcao/O67JQGK7qj/TAWQYX9CB7CcutpBW94SPwVYF3l/jmZy2oXXI9tXYXfKxWnFLjfMO7ENURS78WuO6xO9xlWJTg26WMAXgpZzWwQAJL3v7Jn6PW0ZYMA45wRd0AFlzUsIdV3t7aMNVV8lxci7ekbbh27b6vg1/f1TSnRdaCXa+PyDhi2A7qiOz2nkbP0By3uR99BG/dyzi95KXclwfz/gz5VJJe379SZzaQHbxBR3IrkU1RkuaqxjbsMR9hX1fG2LbRx3kddSF6miQLXhlIw/epCoyZVmNWzRWoCoa9I2EL+V/k7A9GuY0yOuoc4Jlt10sbNj+ZzQjso4v6ACy5P8STc5tSPtqJOeNsg730RJewhygMZIqqZetjP+CxsFURWYc7G1Kcl6/UX5PWNTvESTnDbvHnzVvJVh2e7afShMCJOgA0mEL//w2wXIPk7CNzHs0YUHsK8rVnoja3uq2XzHD33+pg8ZfNe4SRhukrIu34V+9TfGzGr/27R6wgt8TplAtBbFnzQB/9qRmsD/rAZCgA0jAaRpzJVZm63xvIWFoJorvoNs8U1swa3mNGzSYy/NLtoXdqxprURXJWcvbbluq4hdm+LXe36/9R4QXdM3xjT977kqs3HP5sx4ACTqAyPWWMO82JTafdCeNaTRfi9l8a9sP2uYn2tfGH6iSn/TUeErjBGGf+RS08rZ6ytsOwQ9+bffxa/0NqqTFpvkz6JbEyr27P/MBkKADiNjxGimtqHGHxl4aM2m6kvpQ41CNXhoXaEymSn5k18a5Gg9qdKM6otXN2+jcxO5n5TTZr+Vefm1/SJWU1Ex/Ft2R2P3seJoOIEEHEC9bGGi/hMpr8/52Jzkvq/Eax0r4ymLbUjE3NbD5uq9orEtVRGddb5vNqYofTfFrt7dfy+OpkrIm6btLWnPS9/NnPwASdAAR+r1G20TKaiuPby8Ma69kon60d/Ivod5/tKh3xI8ThrzHoJW3xTASjh/ZNXqxX7NHk5hXtN63l3R2x2jrz34AJOgAItNRY/9EyvqlxlYa39JsFTdO40gJe6n/U2NWzuvDhogO0bhT0twPOSs6exsMEYa0z/Jrc2lPvMZxelScPZu29GdVCvb3PgAAEnQAEdkvkQTDhhDuovExTVZVH2nsI2GLtnupjh9XCH9ZY2WqouJW8bpnlfZwLa7g1+ZHVEdVfaKxs6QxBauzpDW9DQAJOpB5NjT0iETKeqrG4zRZNEZpDNLYUMK83zxbQuNZCfsLozKsrp/xus+zV/watGuRVdnjMVzj/xIp6+HCVB2ABB1ANDbWWCqBctrc0iE0V7Qd0dU09pB8j26YW+Majcsl7DOM8pjL6/gar/O8smttd7/2hnNaRGmIpLFonG27txHNBZCgA4jDgQmU0eb02bBNVmyPl819vVmjr4SvRnnemu0Q75QvxGlRcgt53R6S4zqY7NeYXWu3CGtBxH5ftGfXhATKehDNBZCgA4ijs7tNAuW0xY4+pbmSYNs6na3RT2NojuthoMZLGmtwSpTMGl6nA3NcB0P92jpb2PYwFfbsOiqBcm4jvFQESNABVJ0tDBP71mr/0biepkqODb/dVcLc2JE5rQPb7utJYV56KQz2uszrFmoj/VraVVgkM0XX+7MsZtYX2JemAkjQAVTXXpGXb6rGYTRT0oZLWGnbRkFMzOHxtxPmpbdE3fnm7XJ4/HbNHOXX0HBOh6Qd6s+0mO1NMwEk6ACqxxYWWjbyMl6g8S5NlbwZGhdLmDP7r5zWAfPSi5f3+eZ2rdhw9ov8GkLaRmucH3kZl/W+AQASdABVEPub8nEa59JMmfK5hL2Bf63xXg6Pn3nphcvzfHO7Nrbwa+UzToVMOdefbTHbi2YCSNABVF4bjV0iL+Ppks8h0XnwsEZ/jT9L/r4MMi+9ab+VfM43n+HXhF0bD3EaZNL3/myL2a7eRwBAgg6ggjbQWDDi8n2gcS3NlGm2AvWJGqtrvJizY6+dl/4XjdacCj9p7XVyteRvvvlLfi2cKKzOnnXX+jMuVgt6HwEACTqACtop8vLl8ctqXr2qsbbGsZK/vdNt4bz7NObjNPixDu7zOsmTyX7ur+XXArLPnm2xT9/aiWYCSNABVI59pdou4vLZnrHX0Uy567DagoArShjanCc21/gZjSVz3P5Leh1skbPjftLP+QuEF5J5c70/62K1nTC6ByBBB1AxG2h0i7h852lMo5lyaYyEvZ6PlHx9TV9O4zmN9XPY5uv5sS+Xo2Oe5Of4hn7OI3/sGTck4vJ1y+n9CCBBB1AV20RctvEaV9FEuTZL4xKNFTSeyNFxL6DxiMZ+OTrmfTX+48eeF3ZOr+jn+Cwu91yztRZiXtF9EE0EkKADqIwtIy7b5cICSQhsq6mNNI7S+CEnx9xWwgJS52i0yvBxtvJjvM6POQ9+8HN5I8nnFoOY0xR/5tFXAECCDuRYX4l3rqsN+buaJkId9oXxIo1VJaxynRcnaQzVmDuDx2bHdKsfY1685OfwRcJXc/zSNRLvlK4lvc8AgAQdQBltHXHZbtcYSxOhHm9KWOn9D5KfxbRsFeVhEvd2iMVa0I9p55y04Qw/Z9f2cxiYnT3z/hVx+fiKDpCgAyizzSMu299pHjRiusZpGgMlP0OELbGzBdSWzcCx9PNjWTsnbfeen6un+bkLNCTmdVe2oHkAEnQA5dPeO4wxGq3xFE2EAozQWFnCNkV5sITG0xJWO0+Vlf0ZP5Y8+IefoyO4XFEA224v1peOA73vAIAEHUAZrKvRLtKy3ahRQxOhQBMlrHa+q8aEHBxvF42HNXZMsOw7etm75KCdJvg5ua+fo0Ah7Nn3z0jL1s77DgBI0AGUwSYRl+1mmgfNYAup2ZZVeRh9Mbcf7xEJlfkIye5id7N7ys/FoVyWyNgzcBOaByBBB5Cvh+zzGmNoHjTTxxobSliMK+srZNtz92KNIRL3NmytvIwX56CvMMvPvY38XASaY4w/C+k7ACBBB3Kis8YKkZbtVpoHLTRTwmJc1pHMw04Ax2ncIHHuId7Wy3ZcDtphrJ9zdu7N4DJERp+FK3gfAgAJOoASsoVeWkdatrtpHpTI4xKGGT+cg2PdQ+MBjXkjKlMnL9MeOaj/h/xce5zLDhl/FlrfYQDNA5CgAyitWB+ur2h8QPOghL6UsDXQiZL9r5obS1gBeuEIyrKwl2XjjNf5DD+3fuPnGlAqH/gzkT4EABJ0IAfWibRc99E0KANbFfnPEoYfj8v4sa6k8axG3yqWoa+XYcWM17WdSxv7ucWuEyiH+0nQAZCgA9nXRmO1SMv2AM2DMnpCwn7UWR+G3EvCPuPVeBG3jv/bvTJex4/7ufQklxXK6N+Rlsv6EK1pHoAEHUBpLKfRIcJyfaHxAs2DMrOvnptKWGk7y189u2o8qjGogv/mIP83u2a4Xmv83NlUsj8aA9X3gj8bY2N9iOVpHoAEHUBprBFpuaxjP4vmQQXUrvK+jcaEDB9ne407NParwL+1n/9b7TNcnxP8nDnNzyGg3Gb5szFGq9M8AAk6gNJYM9JysfoxKu1+72S+nuFjtGGo12gcU8Z/41j/N7I85PV1P1fu57JBhQ2jLwGABB3ItlUiLdejNA2qYIzG2ho3Z/gYW2mcr3GO/7yUf6/9neeV+O+Nzc1+jozhckEVPBZpuValaQASdAAtN5eEOeix+UjjQ5oHVTJZwl7dR2pMz/BxnqRxhZTmS3dr/7tOynB92blwhJ8bk7lMUCUf+jMyNst6nwIACTqAFuin0TbCcj1N0yACl0hY/CvL+1kfqHFLC+8D9mdv9r8rq770c+FSLgvwjKxXO+9TACBBB9ACse5L/AxNg0jYVmw21/iVDB/jThp3S/N2c+jgf3bnDNfPK34OPMHlAJ6RSfYpAJCgA8lYKdJyPUvTICI2nHSgxq0ZPsYtNB7UmLeIP2P/7wP+Z7PqFm/7j7gMwDOSBB0gQQdQbjHOP7e5naNoGkR4Xu6mcYJkd/u/9aTwfctr91VfP6N1McvbendhvjniMyrS83I5mgYgQQfQMjHOF7PhpOwpjFgN0dhW4/uMHt8aGsM1ujfy/3T3/2eNjNbB997GQzjdEamZEue0G+agAyToAFqgo8ZiEZbrBZoGkbtPY12NTzJ6fP01ntRYvJ7/1tP/W/+MHvvH3rb3cZojcjE+K+3+MA9NA5CgA2ieZSTOvYpfo2mQgFclfEF+PqPH10fComi96/xeb0/O+2T0mK0t1/S2BWL3eoRlauV9CwAk6ACaoW+k5XqTpkEixmlsINldPG5xT8iX8Wjoq3oWWBuu720KpOCNSMvFMHeABB1AM8X4FWxWxJ0OoD5TJCwkdpZGTQaPb1EJ882H+8+zpsbbztrwB05nJJagx7hg5VI0DUCCDqB5loywTLaV0SSaBgkmeadnOMnrLo0vGpeqH7zNTpdsvlxBtk2SOLf/W5KmAUjQATRP7wjLNJJmQcJsmPRGwjDpFFgbbSjZ3tse2RfjM7M3zQKQoAPIzkOU+edI3X8lLDTGy6a4kxpro+eoCiQuxmcmCTpAgg6gGWwblBiHrJLUIAtsq64BGv+hKqLziLfNx1QFMiDGZ+bCwlZrAAk6gKItFmm53qdpkBETNbbUuI6qiIa1xVbeNkAWxPrMXIymAUjQARSnR6Tl+pCmQYZM1xiscYawCFk11S7iN9jbBMiKWJ+ZPWgagAQdQHFifLtt21WxuBay6EyN/TSmURUVN83r/iyqAhk0zp+d9DEAkKADJOgl9yHNggz7hzC8utJqpxn8g6pAhsX47OxJswAk6ABI0IHY2aJxGwgjRSrB6nh9jUepCpCgVxxD3AESdABFWpBOBlAVL0tYRfxdqqJs3vU6foWqAAl6VSxEswAk6ACKE+MWayToyAtbeXmgxvNURcmN8LplRwiQoNPHAECCDiQjxrfbY2kW5MiXGhtpPEhVlIzV5cZet0BexPjsXJBmAUjQAaSfoDMvF3kzSWNbjVuoiha7xetyElWBnInx2ckQd4AEHUAROmnMHWG5+OqFPLJtwPbS+BtV0WxXaOwpbGOHfPpfhGWyPkZnmgYgQQdQmAUiLdd4mgY5NVPjYI1zqIqiWZ0dojGLqkBOxTr6bH6aBiBBB1CYrpGW6380DXLuFI1jNGqoiibVeF2dQlUg52J9dnahaQASdADpPjStgzGdpgHkQo3fSviqjvrN9Dq6kKoAfnx2xpikk6ADJOgAEk/QAQTXaeykMZWqmIPVyY5eRwDifYaSoAMk6AAKFOMQ9y9oFuAX7tLYUuN7quInVhe/0bibqgCif4aSoAMk6AAKFOPKqt/SLMAcHpOwr/dXVMWPdWB1MYyqAJJ4hpKgAyToAArUkc4FkIznNdbT+DzHdfC518HznA5AMs/QjjQLQIIOgAQdyKI3NdbV+DCHx/6hH/ubnAYACToAEnSABL0yJtIsQKPe11hf490cHfO7fszv0/xAcs9QEnSABB1AgeaJsEzf0SxAkz72hPWNHBzrG36sH9PsQJLPUBJ0gAQdQIHmjbBMU2gWoCDjNDbQeCXDx/iKH+M4mhtI9hlKgg6QoAMoUFs6F0DSbM/jjTRGZPDYRvix/Y9mBpJ+hralWQASdACFaR9hmZiDDhRngsZtGTyu2/zYAKT9DG1PswAk6AAKM1eEZaqhWYCi7KExJIPHNcSPDQB9DQAk6EAudIiwTCwSBxRuK41rNVpn8Nha+7FtTTMDST9DO9AsAAk6gMLwVhtIl61sPlSyPb/Tju1WCQvFAWhajKPQ2tAsAAk6gMLE+FZ7Ms0CNGlljXskH1+m7Bjv1liFZgeaNCvCMs1DswAk6ADSNZ0qABq1lMbDGvPl6JjtWB/yYwfQMBZaBUCCDgBAhXTTeNB/5NgBAAAJOgAAVTCfJ6h5/opsx/6I5Gv0AAAAJOgAAETEFku7U2NVqkJW8rpoS1UAAECCDgBAJbWSsN3YRlTFT6wurpNsbi8HAAAJOgAAkbpcYw+qYQ67a1xKNQAAQIIOoHwYtgr87ESNg6mGBh3sdQQgYEszACToAEqqPVUA/Mi+mp9DNTTpHGGEAVCrDVUAgAQdAIDSsjnWNu+8FVXRJOboA3GroQoAEnQAhfmOKgCi019YpbxYtavc96cqAPoaAEjQgVTF+Fa7Hc2CHOuh8YCwz3dzzOd114OqQI7NTRUAIEEHQOcCIMGMAS84kHe85AZAgg4kbEqEZWIFWuQRQ7RLhykCyLOO9DUAkKAD6ZoWYZnmolmQMyxyVnossoe8ivEZOo1mAUjQARRmYoRl6kSzIGdOEbYJKwer09OpBuTMvPQ1AJCgA+maGWGZ+IKOvCWRZ1ENZXOa8PID+RLj1I4ZNAtAgg6gMDFufdKBZkFOMAy7/Jg+gLxpH2GZ+IIOkKADKND0CMvEEHfkAQuZVQ4L8CFPYnyGMgcdIEEHUKDJdC6AiuumcbewFVglWV3f63UPZP1cjw2ruAMk6AAKxCJxQGXZFI77NHpTFRXXy+ueaTTIshifoQxxB0jQARQoxjnoJOjIKpsPfZXGmlRF1VjdXyPM+wcJet77GgAJOlUAkKCToCPnztHYnWqoul29LQASdBJ0gAQdAA9NEnTkkG31dUIGjuMmjZszcBwnauzFaQkSdBJ0IK/aUAUACToJOnJqQ8nGdmr3awz2n3eX9Lcuu1rjM41hnKLIkBgXiSNBByLEF3QgTjEu3DI/zYIMWUpjqKS/ndpzGrtI2C7JYnuNEYkfk7XJbd5GQBbYS8CuJOgASNCBdMX40GxNko6MyMrWXiM1fi2/3JbxW42tNcYkfmx2r7lf2PIO2TB/pH1uEnSABB1AgSZEWq6uNA0SZy+a7Otsv8SP41ON33hCPrsvPXH/NPFjXEbjdm8zIGWxPjsn0DQACTqAwnxFJwMoi79obJb4MRSSgL/XSAKfkk00Lua0ReJiHX32NU0DkKADKPyhOSvCcnWjaZCwgzUOT/wYbDi7DWF/o4D/14bAbyu/HAKfokO97YBULRhhmWaRoAMk6AAKVxPpg3MBmgaJspXNL0r8GGZq7CbFLQI33P/MzMSP/RJJf3V65FeMo8++8r4GABJ0AEU8POlkAC1nq4HbXOaUV2y3jvRBEha3K5b9mUMS74zbtrB3CCu7I00xDnHn6zlAgg4gAw/PRWkWJMZWAb9Po0vix3GyhP3Bm+tK/ztS1llY2R1pWiTCMn1FswAk6ACK82WEZepOsyAhtvr3LRp9Ez+Ov2mcW4K/x/6OKxKvi2W8TVnZHSmJ8dn5Jc0CkKADKE6Mb7cXolmQkCEaWyR+DMM0jizh33e4/50pszY9l9MbCYnx2ckQd4AEHUCRxkdYpkVoFiRiH42jEz8GW4V9e41pJfw7Z/rfOTLxujlWYy9OcyQixulh42kWgAQdQPoPT4a4IwVravw98WOwPc7LtY/5t/53f5p4HV3pbQ3ELsZt1sbRLAAJOoDifB5hmWyhrXY0DSJmX6ruSPw8rUQCXc4XAJUyt7d1D057RH6exrhI5ViaBiBBB1CcLyItF8PcEau2nrClvNuADWev1BD0cgyhrzRra9tCjxeHiFWsz0yGuAMk6ACK9Hmk5eJrFWJlK5SnPOTZ9ikfLJVdxG2Y/5sp75G+pqS/Oj2ya7FIy8UXdIAEHUCRYn273ZOmQYQO9UQzZbZP+U1V+HdvkvT3SN9Pwgr1AAl6YZiDDpCgAyiSzQ2dQmcDaNK6Ghcmfgz2BbiaW4dlYY/08zXW43IAz8wmWd/iO5oGIEEHULwYh7mToCMmNuXC5p23TfgY7pc4vv5aGe5NuB7tHLidexR4ZjbpM5oFIEEH0DwxboPEEHfEor3GXRrdEj4GW6htTwn7k1fbTC9Lynukd/NzogOXB0jQSdABEnQApfZJhGVikTjEwoZkr5Zw+WPc6myipL9H+qrConGIR4wvtT+mWQASdADZSdAXp1kQARuOvU/C5Z+ssWOkibCVaQcvY6r21jiSywQRWCzSaxwACTqAjCToXTyAahkoYUGwVNV4Ajki4jI+r7GXpL392hAJCwgC1dI10uclX9ABEnQAGUrQTR+aBlWyiMZtkvaicLal2R0JlPNOSXv7tbZ+rizCZQOelUn0LQCQoAPRi/Ut95I0DaqYcC2c8DHYnuPnJlReK+uNCdd3d41/SdovdJCupUjQAZCgA9kS6zyxpWgaVMEFGgMSLv/TGoMTLPdvNZ5KuN7X0biQywdVEOvLbBJ0gAQdQDN9LWFV5dgwxB2VZgvCHZZw+cdobK8xLcGyW5l38GNI1aEa+3IZocKWjrBM1qf4hqYBSNABNN8HEZaJL+iopJU1/ppw+W0btW01vkz4GKzsgySuLeGKdbmfS0Cl9I6wTO/TLAAJOgASdKC5OmvcrtEh0fLPlLCd2hsZaIs3JXxJn5lo+e0cssX52IUClRLjF/QPaBaABB1Ay7wXYZm6acxH06DMWklYoKx3wsdg+7U/mqE2ecyPKVVLaNzg5xZQTvZycX76FABI0IHsiXU4Gl/RUW62xdeWCZf/Mo0rMtgudkyXJlz+LSXt7eOQhlifkXxBB0jQAWQ0QWehOJTTJhpnJlz+BzV+n+H2OcqPMVVn+jkG5O0ZyRx0gAQdQAvF+rabvdBRLj00btZonWj539HYTdKdq12ImX6M7yRa/tZ+jvXgckOZxDo1hy/oAAk6gBI8TGdFWC6+oKMc2moMlbDOQYpslfOtJe3Vzos51q0SPtZufq615bJDGcS4QNwsEnSABB1Ay03V+CzCcjEHHeVwnsY6iZbdvirvojE6R+1le6PvLOmOFljHzzmg1GIcZfaZ9ykAkKADaKEYO/wk6Cg1247siITLf5zGwzlst0c0jk24/HbO7czlhxKLcZTZuzQLQIIOoDTejrBMC2l0omlQIjYc9JqEy3+9xl9y3H4XaVyXcPmvkjiHJCNN9mxcMMJyvUPTACToAEoj1rfey9I0KIH2EuYCp/rC5zmNA2lGOUjj2YQTqqF+LgJZfTbyBR0gQQdQIrHOaSVBRylcrLFSomW3OZ07aEyjGX+sA5um8Gmi5bdz8FKaESWwHH0JACToQLa9HWm5lqNp0EJ7ahyQcEJqyfnnNONPxnqSnupCVL/V2JtmRAvF+vL6LZoGIEEHUBofSZxf6PiCjpaeP39PuPwHa4ygGecwwusmVVdwb0MGn43Wh/iYpgFI0AGUhm1hNIZOCDJkHo3bNTokWn4bCn0tzdggWzDukkTL3sHPzY40I5opxtFlYyTd7RABEnQAUYpxcZeewkruaJ7LNPolWvYnNI6hCZtkdTQ80bLbuXk5TYhmsGfiYhGW622aBiBBB1Bab0RaLr6io1h7aOybaNltiOhOGtNpxibNkLC/+EeJlt/mou9FM6JIsa7NwvxzgAQdQIm9SWcEGWB7TV+RaNlt4TNbFO5LmrFgX3qd/ZBo+f+qsQzNiCLE+tL6TZoGIEEHUFqxfkFfkaZBgdpp3Koxb6LlP1TjRZqxaC953aXI5qHf4ucuUIhYt4wcRdMAJOgASsvmj8W4wMsKNA0KdL7GyomW/RoPNI8tqHdVomW3c/YCmhAJPxOt7/AOTQOQoAMoLRte+16E5VqJpkEBBkm6X1FfSLjsMTnM6zJF1v7b0YQoQIyjysZ4HwIACTqAEotxmPt8Gr1oGjTCVvu3L6itEix77RxqOrctN03SnsNvIygWpxnRiCX8mRgb5p8DJOgAcvaQZZg7GtJG42aNrgmW3YaF7qbxCc1YMp94naa4H3MXP5fb0IxoQH/6DgBI0IF8iXWhOIa5oyFnaQxItOwnazxGE5bcY163KVrHz2kgpWchC8QBJOgAyuS1SMvVn6ZBPTbROCHRst+hcR5NWDbneR2n6ESNzWhC1CPW0WSv0zQACTqA8nhX4txPeGWaBrNZSOOGRJ8ztmPCYI0amrFsaryO306w7LaWwj81utOMmE2MX9CneN8BAAk6gDKYIXEOc+8tYX4mUPtsuSHRBGaixvYa39GMZfed1/XEBMue8gsolIc9A5eMsFxvet8BAAk6gDKJcZi7fVFahaaBs2HtmyZY7tqvum/RhBXzlqQ7WiHlKRwovVifga/SNAAJOoDyinUuGQk6TMqLaF2gcTtNWHFW5+cnWnY71wfShFCrRlqukTQNQIIOoLxiXShuNZom9zpr3CRpbkM1XMLiX6iOk7wNUmPn+o1+7iPfYn0G8gUdIEEHUGaxfkFflabJvcs1eiVY7rGS7t7cWWF1v7vGuATLvrif+8i3WEeRsYI7QIIOoMy+1vg4wnLZQnF8Rcqv3T1STAx3TTQxzJqxfg7NTPT834smzK0u/gyMzUca39A8AAk6gPJ7OcIy2UJxfEXPp14af0207KdoPEkTRuNxjTMSLftlkuYIErTcKv4MjM0rNA2QnjZUAZBsgr5thOWyBP0xmidXWkvYbmq+BMt+n8aQ2X5vXo12Gp005tFoKz9vIdjZO+G1P9ox/6rOj528PqTOn2ntvy/+d81T59/qUs8zed4Cfq+lbFuzGU38nq2qPqHOrydpTPOf2/ZotV+5a7/OzfTfn6XxbZ0fa/+eun/fN/53TfI/M1V+udXaORIWXts8sfPJ2tnmo68vTJfIm1jnn79M0wAk6AAq46VIy7UWTZM7J0q6q1j31xjjCbYl5R1z0mb1JfxdIijX9xo/eNI+V6J1O0DCqIyzuDXkypr0FQCUSquamprcHfTg0TNoeaRuIYlzzuznGovSPLnqlD4tvOwF6rJOhr20GkFV5IY9+xaOsFzdNcbTPEjZtX3y18VgDjqQpvHeIYjNIho9aJ5csK/NN5KcA3Owa8K2G5yXqsiFHpEm55+TnAPpPkQApOkFjUERlsuGud9O82TO/BK+xiwo4UXMDhpLUS1AvZaUsDbDbRJWp/9Cwqinr6iazIl1atcLNA1Agg6gsl6JNEFfnQQ9KXN54r2YJ96L+s8Xnu335qaqgKIMqucebXPsP5PwdfNjT94/rfN7n3giP53qS0as889ZwR0gQQdQYS9GWi4WiouHDbHt4Qn2IrMl3rW/Z8l5K6oKqAh70bWkR0NsBfzxsyXtY/3Hz/337effU51RWCPScrFAHECCDoAE/Ue23YxtLcU2Q+Vn2zotIWHv5V51ft5bY3H5eXsvAOmw9YEWlqbnNdtq9x9ofOhR9+fvyy+3rkP5+tGxbrH2Is0DkKADqKzx3hHrFVm5OmisKOy/WgrtZ0u6e80W81NFQG518nvtig3896/qJOy1SXvdZH4KVdhiK/ozLzbWxuNoHoAEHUDlPR9hgm7WIUEvmH0lW0ajjyfjdRPxhageAM00v8eqDfz38bMl7pa0v+sxluor+FkXIxaIA0jQAVSJ7bO7c4TlGqBxGc3zk/k0lvYkfBn/ee2v2YoJQDUs5FHfImcTPVEf7T++U+fX31J10Sfoz9E0AAk6gOol6HRa4tBOwsJPtV/Da5Nw+/WCnKoAEmIvDleV+r++j/eEvTZ5r433NKbmrJ4G0DcAQIIOoC7bRmVGhNdyTwmrh3+awTrvorGcx7Ly8xdxO+bWnJIAMq72y/t6s/2+LQz6kSfulsC/qTFK4w2NCRmsh8U8YjND2GINIEEHUDWTNV6ThucYVtNAjVsTrtt5PAHvP9uPPTjtAGAO9oKyt8fms/23Tz1hH+kJ+yj/9aSEjzfWr+eved8AAAk6gCp5MdIEfZ1EEnQbmt6vThJe+3XcFmxjf3AAaLkeHpvV+b0aCQvT1SbstUn7W5LGUPlYp3KxvRpAgg6gymwxmAPpvDTJ9hZeSsK2OLVJuCXkS3IvBICKsxegtV/ct67z+zZEe4z8PDze4jX/vVk84wrqEwAgQQdQRc9GWq6VJOzT+10V/u25NZbXWNnLYbGCRkdOFwCIvm/a12PHOr//vcbrGq96vOJJ/A9VKGMnf67E6BlOIYAEHUB12eq5X2p0i6xcNh/R5ug9WIGO0ioetQl5X+5vAJAp9oJ1Hfnll2v72v52nYT9Jf+x3C+GB0ici4JaX2A0pwpAgg6g+uyN+bYRlmu9Eifotcn4qnXCtjRjrjgA5LMfu7zHnv57szxJfalOlDppXy/ivgAAEnQAEfhvxAl6c9kwdfsivobHaiTjAIAm2Hojy3jsXk/S/ryHJe3NHR6/fsR9AQAk6AAi8HSk5bKkuoM0veVLbYdqjTphi7nNRdMCAMqQtE+XsPjc83XiHWl6ITp7pq0a6XE+TVMDJOgA4vCyhG1p2kVWrrYaa2s8Ntvvd/XfX8vDEvJONCMAoELsBfBqHof4732r8YKExVctYbcv0l/P9ufW9mdbbKZ6XwAACTqACNgwPRu6F+O2LxtqjPckfIB3bmwRN4aqAwBiMp/GJh7G9mp/2xN1m989wp9pMXpJqrOiPQASdAANeCbSBP0UDwAAUmIvkvt5DI68rM/SXEA2/IoqADKDuWcAAOTTU1QBQIIOIL6H8yyqAQCAXLFnPy/pARJ0AJH5RmMU1QAAQK7Ys/9rqgEgQQcQnyeoAgAAcuVJqgAgQQcQJ+agAQBAgg6ABB1ABPiCDgAACToAEnQAEfhCwp6tAAAg++yZP55qAEjQAcSLN+kAAPDMB0CCDqCKemkcorEaVQEAQC7YM/9g7wMAyIA2VAGQ9PW7jsZWGr/RWI4qAQAgV1bR+Kv/3LZbe0Dj3xrPasygegASdADlNb8n41tqbK7RmSoBAABqeY/jNb7ReETjfo0HNb6iegASdAClsaTGthpbawzUaE2VAACARnTR2MVjpoRtWO/TuEfjPaoHIEEHUDhbG2J1jW00BglD1wEAQPPZi/0NPC7QeMMTdYsXNGqoIoAEHcCc16I9OHfwpHxhqgSIjn2F+k5jlsa33qmd4P/tG/9xgv++zf2c6L83TWOS/3yKxg91/s4f/PfqU/fPza7u31+o+aT+xWE7aszVyP87t0Z7//k8Gm395/P6vauV/Dzdpov/2Nl/v/bvaejfBlB5y3mcrDHWE/U7NIYL89YBEnQgx9ppbOJJuX0tn58qAUrGEuXv68QET2hrf/2dJ9n286meYNuPk/2/Ta3z/0/1/xctN58n/PN4gm/3wU4aHfznXfzHjv7/dvKfd/T/v3OdX3cU1uEAWso+CBzkYfPU7/Vk/VG/9wEgQQcyzTqltsibzSnfyjufAOZkHcOv64lvPNn+tpEfv6H6ovWtlP5lRxdP5js38mPXBqItTQL8xD4U7OdhLyptgbk7JSwyN5nqAUjQgaywr0VbSFioxRZ660CVAHN4VWPfOon4JKoEBfpGmv9SpmOdZP1ajZWpTuBH9gFhdw+7H9sCc7d5sv4D1QOUT6uamvytCzF4NNNrUHb2VWYzjZ0lzCnnSznQMPtabgsjjqQqUEX9JSyY1Y6qABpkX9bv8WTdtnGbRpWgnK7tk7/vySzYApROa0/Kr9EYJ+Ft814k50CTziA5RwTsHDydagAa1cn7Nvd5X+ca7/uwBSxQInxBB1puNY09JAxhZ/V1oDjPaQyUsEI6UG2WZNh+0WtTFUBRbDX4WzVu1niR6kCp5PELOgk60DxLys9zs/pSHUCz2KJDK2mMpioQkT4ar0hY1BNA8d72RP0mjfepDpCgF4dF4oDC2SJC9pXchnatJWGPX6CSbK7fhxofeKen7o89NO5O7Lw8keQcEbJz8iSNSxIqc40/n97TWEKjt8cSHr2EFetROfbh4iyNMyWMkrpe41/CDhtAQfiCDjTOhjtuLmF1adurnMWDUG62AM+Y2eJ9j880ZtXzZ+y8tC9+/RI6zmEam3hiAUTXP9L4j8bGCZXZkvMVpP7tsGzNoUXrJO5LzRaslYJys8VA7/Vk/WFhWhMKxBB3EnSgVl9Pyu1r+SJUB0rMtqx5V+OdOkn4aP/xi2b8fWdIWotbfeeJxEecCohYTwkLx6WUvJ6vcVwz/tyCnqj3qfPj0h4M9Uepfa5xgyfrb1MdIEEnQSdBR0Pm1dhNY38JWz4BLVHjCWhtIv62/9zi4xL+O/bV3L6epzS647cS9pwGYrdfYueqfZVcU+OlEv6dPesk6/38x2X895nqhZb6ryfqNmf9e6oDJOgk6IBZy5Nym7/XkepAMxLxDzXe8BjlP1pCPqXc93AJK04PSKi+7tfYmtMGCbHtpLZKqLz2wm4NjXJ3dtp7wr7cbNGLxB3NYMm5rQJ/tcYIqgMk6CToyB9b8M22RjtAoz/VgQJ9ovGWhGGvb/qPb0n13vofqPG3hOrPFghaXsLwRiAVNs3JXrx1SajMx2pcUKV/u6Mn7vZsXbbOjz04lVAge7ZeKWEVeBaWI0EnQSdBR8bZl8aDNHaQ8PYfqM94+flLeN2v4t9GljTYS4L5EqpXGy58PacXErSvxnUJlddeGtrLsJjWeegsP39lX96TdvtxIU4vNMBGod2hcYXGs1QHCToJOgk6ssMWuLGv5QdL2HMZqGXzNW1++Msar9aJrxIo++0SXjSl4kGN33DKIWF2Dv86ofL+W9IYmj+/P5trY1UJ89xbc8qhDns2/1XCXPVJVAcJOgk6CTrSZIvYHKKxj6T1lRHlYVu82LC5V/xB/5L/enKCxzJIwp7nqZggYZjrp5yGSJgtimajaeZNqMy2tsptCdZ1Bwk7PaziSfvK/mv2coeNZLtewlf1d6gOEnQSdBJ0xK+1Jy+WmG8kLFSTV7aN12t1EnH70YaDT8/Asc3rx5LSfE6GtiMrUlv3YayEoeQTMlD3c/mx1H5ltx9XFPZwzytLYB6T8FXd9ldnX3USdBJ0EnRExr6Q29ZNh2ksQXXkir1Nf1HjBfn56/hof3hn0WUahyZUXoa2I1P9Jo1HJbwATsXfJay9kkW/krBve+1XdtsidTVh1FzefODPRlsB/juqgwSdBJ0EHdVlD+bDJXyhm5fqyLxpnoBbMv68xzsZTsZnt7bG094pTYG9PLFFoBjajixZUsIInXkSKa/dHwdKfhbZsvujzWFfw2N1T+AZHp99EyUs5nipxhiqgwSdBJ0EHZVlXy+OlLAAzq+ojsx63zuVloiP8E7x1JzWhT2hbLj+CgmV2YYDX8lpjAyy589FCZXX1tuw+dx57QC1kzAcfk0Pe9nZm9M4s2Zp3KdxicYwqoMEnQSdBB3lY/PPbMGbY4TV2LNoqifilpA/5zGOavnJ0VK9fY2b43GNjSU/oxuQL/Zi+EkJW3em4jiN82m6n3T3RN0S9nUkfG1vR7Vkzqt+3g+V/L6gIkEnQSdBR8nZ0HWbX/57jcWpjsz6xNuXhG5Oi2q8rdExkfLayvj2pf89mg4Z1lfCuhdzJ1Je2xu9nzDlpN7+sMaHElbqRzZ9JGHUy9V+LYAEPVoMDUbMummc5Q/Nv5CcZ95iEoZgYk4XJZScm1NJzpED9tLs9ITK21HSGpZfSauQnGfe4t6X/Mj7lgtQJSBBBwpn20dd7Im5dfS7UiW5sS1VMIdfa+yYUHlH+PUL5IFNO3khofLuoLEFzTaHQVRBbnT1vuVH/qzqQZWABB1oWC8J28HYl7cjNDpQJbmzHVXwCzZ09tKEymur7Nt0FPajRV7M9HN+WkJlvlTSGZbPswfl0sH7mrba+1+9DwqQoAOuj8a1Gu9q/E7YCiXPlpOwdR6CExOrj7M13qDZkDMj/dxPhW0TdxLN9hO7xy5PNeSWLQx4sPdBr/U+KUCCjlwnYzdpvCVhH/O5qBIIw9xrWSfhhITKO0rjTzQbcupPnqin4gQSkZ8wvB3ifdD9vE96k/dRARJ05MbSfvN7XWN3jdZUCepgqGFwuaQzDNWG+R6gMZ1mQ07ZuW8jwGYlUt52fo+ByPZUAepo7X3T172vujRVAhJ0ZFkvCcOH3vCbH+cf6rOWxsI5r4NdNDZN7GXCc5y6yDm7Bq5IqLyb+r0mzxb2Zw5QX460u/dZrxXmqIMEHRljK2T+TeMdCcOH2lAlaOK+tEOOj7+ThJWhU/GxximctsCPbG53SvuMX+D3nLzagb4wmtDG+67Wh7XF5BalSkCCjpTZHpMXaozWOFBY/C0GNhT5vxonaxwScTnzPOTwzMQ6ALa4zvdcWsCPJmocllB5F/V7Tl7F/Kw5VOMMjRc1ari0qq6tP++sT3uBsI86yqhVTU3+rvnBo2fQ8uXVXuP3GsdrdKY6qu5rjYc1/q3xkMZX/vv2VnicxvyRvkhYROOLnLXVShL2VE5llMnNGntwiQFzuF3SGQlk99vVNF7NWRstqPG5xLkOjj23F9Ko7bDaUPytPDYRtqGNwQSNIRoXaUyhOsrn2j75G3jLF3SUkj3kBkt4u3gOyXlVvesPjoHeCbF5VDfVSc7FH/z3RXwu5W0191YShs+l8iSyc+koLjWgXra/8rcJPbuvyGGfcFuJd5Hae+sk52asxlUSVpxfwBP1v0ta0ymyprP3dd/1vi8LHoMEHdHZWsKKl9cI83OqwVYOfkbC1jl9NZbxn9vvzWzkz90V8THtmLM23F9j7YTKe7Tkb4QDUCj7MpvSXuNr+T0oT3aKuGyNPZvta62NiDtIo6fGKhqnSxh9xVD4yuvhfV/rA29FdaAUGOKOllpRwvCeDaiKivtB4xGNeyR8Cf+yGX/H3P7nOkZ4fLZtkQ3r+yoHbWlfRN6WOKcb1GeYhGGWdAaBRvpYGk9pDEikvHav7dfMZ0lq7F5rX6XnirBstqZHN3/GF8uemVtqbCNhlf65uQwrbriEETQjqYrSYIg7UFxCYVsrvUhyXlG2ANG/NHaVMHTdhrtd24IOlXUAHor0WOfyTkYe/Cmh5NzOmYNJzoEm2TVie6NPSyhpPScnbTMo0uRc/Jn8QzP/rL10uNqfnQt6X8H6DJO4HCvG+sQvex+ZheRAgo6KsFUsj5Ewz9xWAWfLtPL7RuMf3qGwB+7OGkM9WS+FOyI+9p1y0L62ONPghMp7toQ5dwCa9qbGuQmV1+5Fa+SgXWKeQlWqZ/JE7ytYn8G+yG+n8U/vU6C82ngfebT3mdnFCEVhiDuKsYXGJRpLURVlZ6uD3u0P18ckDPcul/k0xmu0i7Aesj7M3YbAPith/mcqycbKks4XQSAGdm99TcLaICmwkXFrSljbJItiHt4+VcLq7eVcYNCOe2ONXSQslMeCvuVnL7WPlHhHLEaNIe5A/WwREluw5AGS87Kyt9220roNTeuusZ/fzKeX+d+1jsCwSOvEOhLbZbjN904oOU9tuC4QU9L1O0lnWkhqo3qKtZ3EO7x9mJR/9f/p3rfYz/sa23jfYyKXatksrfGgxp3epwZI0NFsNiTnRI23JH9bXlWKrcZ6q4T9cu2t+Z4SFnybWuFy3BlxHe2S0bbvJGkNfbV5jc9wyQLN8qRfQ6nI8lapMT9TKv0snup9jj29D2J9kduEfb3LxV4Ovel9a4a9o0EMcUdDNpKwwEVfqqLkbNszG7Zub6xtZEIMb61tbrttC9Q60vpaRLK3pdf5EuampcCmQNjqzsxdBJqvi4QX3gslUl7bG/2QjLUBz7rCzKuxvcYe3h9kj+/Ss3vBYRLvCMZoMMQdCA+vGz2BJDkvLZvXd5TGYhqbS1isJZYhZdYheDrSerOOwQ4ZOxfs2joiofIeQ3IOtNg3ks5LOWPD8lfKWBvsEHGy+bTE8yLa+ia2OO1m3mc52vswKJ1+3te+wfveAAk66rWXhKE3e1AVJfOxxh88IVtdwp7xYyMt690R1+POGTsvLpZ450DOzt7u38SlDJTETd4pT4ElsrYwbKsM1X/Mz5K7Ii2X9Vn+4n2Yft6n+ZhLuWT29L73XlQFajHEHaaXxt8kfNVFy9ncLZtHdr0nN6mshLu4xgeRdsasDntIvC83irFtxB2x2dn8xBU13uGyBkrGFox6XeLcOaM+9tL+5gzUu+0I8qnE+XHKOuNLaHyUSF1aHdrQ930lDIVvz2VdEg9rHKTxIVXxM4a4I4/t/3uNUSTnJXm42iJAv/NOgL0RfVTS2qbGOgYvR3yuZuEr+twaFyZU3iEk50DJ2ZZLf07sPtAxA/W+U8T93pcSSs7F+zaPel/H+jwHSlhEtIbLu0WsLz7S++bkaDlP0JBPfSTMd7JhS/NQHc023jtatr/t+hpXSfm3SCmnmL/s7p6B8+U4CV9JUvCehJWcAZTenzTGJFLWRTVOyUCd7xpx2e5OuF6tz3OlxkAJ0/msT/QFl3izdfS++dPeVwcJOnLAhi8frvGqxtpUR7PYSqu2J7wN67LFU2y7jNEZObaYt1uz+W+9E67bnn6upMJWl/2Byx0oC7u2Dk2ovLbA6RIJ17c9O9bi2Vt27/pzzqak7eB9pVlc7s2ytvfVD5dsrQMBEnTMxuYY25AkW/SlA9VRtE80TvcH/ZYSvjZPz9gx2rYfIyMtmz2gdku4bs9P6LobqvEQlzxQVo9o3JpIWW2+/IUJ1/VuESc5I/3ZmyXT/aWD9ZXsxc4ZEub/ozgdvM/+qPfhQYKOjNlPwqI0G1EVRbE3v7Zox7b+kDlLsr966dCIy5bqMPcNJcx/TIFtr3MMlz5QEcdqfJdIWe05uFmi9Rzzs+PWjJ/j1mc6U8KCxDby0F5MMVe9OBt5H34fqoIEHdnQVeMOjWs1OlEdBftKwhdPm1v+a417JAxtz4OYOwvLSnr78tryo5ckVF7rSH3GLQCoCLvWzkiovBf5PS0lK/mzI1ZDc3KuWx/KRh7aQmhLex/rK24BBbM+/PXep+9KdZCgI13rSZi/sj1VUTBbxdxGG9j8KVvQa0wO68AWB3sh4vKl9hX9EI3lEymr7ehwMbcBoKIulXinFs2un9/TUhLzM+N5f+bmzRjvY1lfa7DEu4NMjKxP/4r38UGCjoTY220bim17cC9GdTTJ5krdJmEF0lUlvKHM++JYMX9F3zWhe1c3CV+kU1DjHe8Z3BKAirJr7lBJZ9jvmX5vS6WfG/Pq7UNzfu5bX+s673ut630xnkFN6+l9/LMkvREtIEHPpV4aT2icqtGa6mjUlxK2kbJF33aRsIcnAntIxrry6mL+IE+lI9s5kbLeqPEUpz5QFXbt/TORsnaWdF48rivxfqiYRYL+C097X2wJ75v9jyppVGvv61ufnwXkSNARMVst04YJrUNVNOodjQMlvIG0vV1ZWXROn/rDMlZ7JFCHNqz9gETae4KE4YYAqud4vxZTcICkMXUn5meFPWNZ76P+/scpnnQe6H02NMz6/K94DgASdETE3qL9UeM+jS5UR4PsLeMgCYvFXCkMY29KzMPc7S17+8jr7wJJZ+iZvYUfzykPVNUXnpikwO5tsW+71t6fFTxj0zTZ+2rLet+NEV4N6+I5wB+F0bMk6IiCzQP7jz/UW1Edc7BVQ20I2WoaG2jcK/EO3Y6NrRQa61wwW81024jrbitJZzsiW0jyCk53IAp/92syBZtqbB1x+baVeHevsWfr7ZzuBZnlfbf1vC83VPKzq04xWnku8Iiks0YESNAzaYCEYS0bUhVzmKpxlUZfCQvEvESVFM2+5gyLuHyx7gc6l4TtY1Jgi1IdQWcHiIZdi4dIOgvGne/3PJ4RxXlMwjo4KM5L3qfr6328qVTJHDby3GAAVUGCjso7wJOnRamKX5goYWixLfz2O8nnNmmldEvEZdsk0vPfVmNeJqH2ZdggEJf/SjoLxtl+1odFWK5F/RkRK4a3t8wY7+NZX+987/vhl+f/MElnHRyQoCfP5n1dImFeTluq4yffaJwhYVGRYzU+p0pK4m6J9w21zbOKbQGg+TVOS6Rtv5ewKBWA+Jyo8V0iZbV73gKRlWkPiXcurj1T7+IULwnr6x3nfb/TvS+IoK3nCpcIW7GRoKOsumo8qHE4VfGTryUscNVLwrYv3JxLa4Kfc7GKbQjjGZLOQo1nCysIA7EaJ2GP4xR09nsfz4bC2DP1W07xkvrGr5de3if8iir5yeF+znWlKkjQUXq2iuXzEveQrUqyuVsn+83YVq38jiopm6GRXxerR1SWgxJp09Eaf+HUBqJ2scaoRMpq22EtF0lZVvf7cawY3l4+33mfcAnvIzLPP7DcYUTk1wVI0JNji8A9o7EkVfHjF11bpdLmHf1JmHdUCbZ1x6SIy7d3JOWweXCpDCM7SlhcB4idrfR9RCJlbSPxLI65d8T1ZM/S+zm1y26i9xF7e5+R0ZUiS3kuwcLSJOgogT01HpIwhCzPbL5s7VvRc/zXqFyH4r6Iy7ebVH89Bns7vUUi7flvD2RDBwnTKupGB6olMx7X+FciZf21hK3XqqmtPxNida/E/cI7i33HczxR/yN9xx9ziYc8t0DEWtXU1OTuoAePnpFKUe2t3x8k3/ubT5GwR/O5wlClahokYcG4WG0v1Vt0x1502pYmKyTQjvbVvL+EIe6I20Ia/SRM47Gwl5OLSFiMa36PphLxyRLmYlr8T8KCSh9ofOjxlsZ4qjp6Pb2tUnjxMlJjZane1o3badwZcf3Y3uz3cEpXjd0/T9I4WKN9juvBkr//k/DyInrX9snfGnck6HGyM/FyCVtI5NUsjX9IWHjmY54pVddOwqJFsY7kuMc7PlW5pWhck0g7nuudE8TFtsRZV2MNCS96LLpV6N/+wpOq1yWsc2Lb7rF4YHxspfQzEynr/lW8J9qL5EGR1otN0esuTC+Kgb30slXf95V8jya2Vd4Pkeq9UCNBJ0FPJkG3RGhoxA+YSrDVJm37p1GC2G7kse6pOd2TnEqPsphHwtfohRNoP0u6+gpD/GJgnXQbDryJJ+Y9IyufvRR9UsJQyEeE0UsxsK/nb0V4rtRnrIT90St9r+nm97m5In6GHsipHJXlNYZIOlPUysE+cOwiEb84ymOCzhz0uHSUsHhIXpNzGyZsi1f8huQ8Sv+IuGzWIavGvMPjEknOzfEk51Vlq+eeofGyhKHm10nYqznGhMvKZHMUb5Qwcsa+rJ8urABcTTZd4dhEyrqw3xsrbbeIk3PzT07j6IzyPueG3gfNo0Gee3TkdIgHX9DjYQv7PKCxVg7PQ3vbbnNhrpcwtB2R3i8kfC2OdTcBe7iuUsF/z+YDvyvhK3rsbNjy+hLmnaGyie5eEr5O9M/IMdlw+KGevH9EE1fcMEljFWZ7oWBf0Ss5XcJefq0caX2M8frgHhwv+2i5r4TF5BbO4fE/J+FlRXQr3vMFHdViwx2H5zA5twXgzvaH1rUk59GzjkXMX9FXrnAS9MdEknObW3YEHcOKsS94O0iYqvOBnyf9M3R8/f2Y3vdj3EHi/mqZNUdJ5PNFnQ3J/0OFz8uVI66Pf3IPjt4s74su7X3TKTk7fstBHvecBCTouWdv6Z6QNFaALiX7AmPzYe3LOcNu03Fj5J2MSu1/u6LGPom0mc17fJVTt+y6apwsYf727RLmmGf5GfsrP8bb/ZhP9jpAeb3m13QK9qlg0hzz3uf2zLyBUzcZ33vf1Pqot+Xs2K1vM1zyOYKABB0/sbdUNlxt6Rwdsy1yYwsj7Sqszp4i+yL4ZMTls3mzlRgLdV4i909bNfhUTtuyWkzjEr+fnS35/PrQ3Y/9Y6+LxTgtyupUv7ZT6GMOqcC/Y/f8vSKuB3tmfshpmxy7n+3ifda3cnTcy3huwpd0EvRcWtAvgL45OV57I3mCxkoaj9H8SYt5oRt7oPymzP/GZhqbJtJWNsT0K07ZsljYk1GbW3q4pDHdodzm8boY7XXDV5jysGv6rETKukkF7pdbaiwUcR38g1M2aY953/UEyc+Iz76eoyxE85Og50k3P/H75eR47/BjtTfp02j+5P1LwgJAsSrnVnB2z/xzIu1kieNlnK4l10nCCIr3PBltS5XMoZ3XzXt+35+XKim5yyW8CEmB3TNblfHv3z/iY7dn5e2crsmb5veyft6nzQM71sc8ZwEJeubN5yf8cjk41k80ttHYUeNTmj4zJmrcFXH5bF7sImX6u20I/UqJtNPxwguxUj8vB2u8LWG7q/ZUSZOsjmy7rXe87uhzlDZhOCGRsto89HJtg7mo3/Njdac/M5ENn3qfdpuc9GuX85xlPpqeBD3LbFXThyVbK/rWx1bCvMQv7Pto9kyKeZi7zUcsxwJuc0tlVyVuCVt48i5O05Kx7ftsL/BrhGHbzbGw190LUtmtELPOrvHhiZTV7p3lGG2yt1Rm3ZHmYnG4bLK+7bLe1836DkT9PXfpQLOToGeRPZhsNcg1M36cozTW1jhSeGucZY9KZfe3LZYNeSz1kMrDJOxrHTvrLBzDKVoS9gXYhueO0FiV6mixVbwuhwgjEErlmEQShN4aB5X472wlcQ9v/9Sflcimid7XXdv7vlm2pucwTOkiQc8Ue4jY3opbZvgYZ2ico7GahC9NyDbrEN4YeWdwgxL+fbVbaKXARje8xCnaYrYn7OsSpgq0oTpKxuryOK/btaiOFntZ0lmEzLau6lTCv29Dv9fH6ibJ/tdVhD7vat4HnpHh49zSc5lWNDkJelZcpLFHho+v9qv5KRpTae7c+Gfk5SvllxVLzrsk0CaTvBOMliWQp2k8pbEU1VE2S3kdW123pjpanPhOSqCcttjUsSX8+34b+fGyent+TPU+cNa/plsucyHNTYKeBQdrHJHRY7M3wzb8094cvkhT586bEuaUxmp7CV++W2pxCcPbU2Cri3/GqdlsNoVhuMaZwlfzSmjjdf2EpDF9JFafS2X2Gy+Fo6U0+yt39Xt8rOzZ+BanZu686H3iP0t2R0/83nMbkKAna3ONSzPcIbD9oE8UvprnWcxf0W1Rt1KMXPmjhG2jYvepJ+honk28czWAqqi4AV73m1AVzXa+pLGq9DwSRk201F5+j+fZiNhM9b6x9ZHHZvQYL/UcByToybFVD4dKNofu2eqVttXUYzRz7t0qcW/ldWAL//yKGrsn0hY2vG4yp2Sz2Jzoh4T9Xqupm7fBcVRFs9i1n8o6GQdo9CnB3xEreybewimZe495H+L+DB5ba89x+tPMJOipdTTukeztG/iDhBUrB2l8STND/U/jgYjLZ1v9DWzBnz87kfukfX28kdOxaDbE+ioJw4OZBx1Hp2+ItwlTDIp3o6Qx3cza9pwW/PmBfm+PlT0Tv+J0hPeVt/G+8w8ZO7b5PNfhxTYJejIdDNuKYImMHZfNpbIVd23PxxqaGXXEvhBOc7+iryvp7LyQylZLMZlX498S9zZNebW/t828VEVR7Nl8VCJl3UFjjQrf0yvlek5FzHZdXuJ96KytS7CE5zy84CZBj96fpLTbO8XgagmLXrxG86Ie1pEeH3lHsDmLxf05kfq/Q+NJTsOi2CJVT0uYI4g4beZt1J2qKIrV2e0JlNO2ajq3GX+uq9/TY2XPwgc4DVGP17wvfXXGjmsDz31Agh51InBsho5nosbOEuZ6MbcVDZkucX8xaK+xd5F/xoakrZ1A3dtiNCdwChbFVuW37b1WoCqit4K31eJURVFOkDQWb7V9zLco8s/s7ff0WF3vz0SgPpO9T2196+8zdFzHStwvzkjQc2wZjWskvBXOgnc01tT4F02LAlwrcU99OLCIa9OGap2TSL1fpvEep1/BekvY0ov9zdOxlLdZb6qiYO9LGFKbgj8V0Re1e/jvIj4WewZezemHAljfeg3va2dBK8+BlqFpSdBjYlsw2RyMrCwKd6/fONjDE4V6V8L+0bHqK2FOeSFs+57lEqhzW6Dvj5x6BeuhMUz4Gpuixb3telAVBbMFLlNYzNVWuS50O0y7h/eL+FjsGTiGUw8Fesv72vdm5HgsB7IXD3PTtCTosbC5qlkYLmlvf8/Q2FbjO5oVRYr9y0EhCwu182sgBVbOCZx2BVmI5DwzSfpCVEVBvk3oXvYHv/eW4h5eTVdx2qFI33mf+zTJxgLMtu3auTQrCXoMbCGbIzJwHFMkzIk5U1ilHc1zp8S9tcyO0vR2IIckksTZsLi/c8oVxN7q/0davu8yqq+Pt+V8VEVBrpQ0RsLZPffQJv6fbn4Pj9VX/gwEimV97j94H3xKBo7HcqLNaVYS9GqyB8b1kv6888811pc0Vn5FvGyPzxsiLl9baXz+om3pdGIidX2SxgxOuYLa3DrN/amKzOjvbdqWqmiS3SNOTuie1ti2er+LvM3t2TeVUw4tYH3wDbxPnrJWnhuxPzoJetXYcKaFEz+G1yUsBvcCzYkSuCby8lknr00D/+1IjQUTqONnNO7iVCuok2CLF25EVWTORt62raiKJt0tYeu12C0gDe/h3kbiXhzOsDgcSuF575O/nvhxdBemfJCgV8kuGoMSP4bHJSy68inNiRIZ5QlkrHpqbF3P79veuilskWhD4Y7nNCuIzenbg2rIrD28jdG04ySNqWtH+714dlv7vTtW9sx7g9MMJWJ98vW8j56yQZ4rgQS9YuaXdLYwaYitOm/7j7IYHEot9q/ohzXQgU1hXqt9OX+WU6xJW5C85cJpUvw+2nn0nKQxP9ruwScUeM/mmYcs+9bvbbclfhyXeM4EEvSKuFDSGArbkEs1dhPmS6E8bvOHS6w21Fi2zq9tVegUFnq0+aQncXo1yfbLvonnW276MDcJe6QXwu4d0xMopyXjdacOLuv37JgTqaGcXiiDqd5XvyzhY1jQcyaQoJedrUy4d8LlP9uTkVk0JcpkksbNEZfP5q0eXOfX/6fRIYF6tflc73J6Ncq2arpDowtVkRtdvM3bURWNGi1pzAm1e3Hdhe0OlrjXGrBn3WROL5SJ9dUP9757qvYWVnUvvqNaU5O/HbUGj2724sfWAbA5tksleui2QvWfOe1RAatovBRx+b6X8JXGhl69k0DnfqKELabGc2o16gIJ81iRP/aV5hiqoVH2NWuMNL5aegymaSyj8T+NsRodI3/WvcKphQr14f+UaNntBaHtwNGskbvX9mmTu8bmC3pxjko4OT+W5BwV9LLGixGXzzp8+0qYw5rCl7cLSM6btKk0vAo08vF83oxqaNQXGuclUE7bTu10v0fHnJy/SHKOCjpX0ljMtj59eD4Xhy/ohbMtA+xLW6cED5kv56iGgzSuiLh8H2ssIg1vuxYLS8yXlDB1APWzYc62ivLCVEWu2dfW5TS+oSoaNI/GexLW3oiZddRsP+iYV2+34fd/45RChZ3gyXpqbFFqGxkzrtg/yBd0NObcRJPzM0nOUSU2N+/7iMvXM4Hk3PyR5LxJ55Ocw8+B86mGRk3yfkHs2kSenNuz7SZOJ1TBnxO5hmfXKdEXCyToEbM5Rnsl2mk9g+ZDldjb0tuohhaxL11XUg2N2khjP6oBbj8/J9Cwq/3eguazZ9tEqgFVYn378xIs996eU4EEvST+mGBd2QP4eJoOEZyHaD6bIz+NamjQ3BJeYLSiKuDsXPi7nxuon223dirV0CJXUQWoshMSPA9beU4FEvQWW0dji8TKfK+E+b81NB+q7L8aI6mGZnlN41aqoVG2aveSVANmY4u5spp/4+zewgJnzfO6xnNUA6rM+vgHe58/JZZTDaD5SNBbKrU3PSM0dtOYSdMhEn+lCprFFnecRTU0aFGvI6A+J0lYBBINd+5Pphqa5QqqAJGY6X3+EeRWJOh5sqFHKj7R2FpjMk2HiNwozNUr1hMaD1ENjTpb4t6CCdVl58Y5VEOj7B4zjGooynf+TANiMdn7/p8kVOYNNDam6UjQm+u0BC/QL2k2RMZWu72BaiiYfdk6gWpoVH9Jc+FOVNZefq6gYScL0+GKcYPEvTsJ8ulLSe8D3f/RbCTozbGyhDc8qXTo95EwZxWIEcPcC3e3pDdcrdLO4vmFAvs4Z1INjbJ7zV1UQ8EY3o5YWQ6wt6Tzwm0Dz7VAgl6UlBaYsT0Rb6fJELE3NJ6kGppkc85ZXblxtkXLIKoBBdpW2NanKacK610U4gl/lgGxukPS2mv8GJqMBL0YPTV2TaSsTwvDRJAGvjw07RY6gE2yqUdsq4ZCtRJeejXlTY2bqAaeYciEUz03SMEunnOBBL0gh2m0SaCcNufEXiSwYjtScKfGOKqhQTM0zqAaGtVXwjw7oBjbaCxDNTTqTL8HoX727GIqAFIw03OD/yVQ1jaec4EEvUltNfZNpKz7aXxGkyER0zSuoRoadL3GGKqhUUfz3EIz+zoMpWzcexrXUQ0NusafYUAKPksol9nXcy+QoDfKvs50S6CcV2v8m+ZCYq4UvtLUxzp+7AvauAU09qQa0Ex7+jmEhtk9aCrVMIcZ/uwCUmI5QgofRSzn2obmIkFvyv4JlPFDSWsRO6DWxxr3UQ1zsM7fR1RDo36r0Z5qQDO193MIjd+fSUTndK/XDZCaozxnSOH5DhL0Bi2msVnkZbTtE+wlwkSaC4m6hCr4hSka51ANjbKFvgZTDWihwcICg02xe9FkquEXLqUKkKiJnjPEvvWa5V4sFkeC3qA9E6iTmzUeo6mQsOESVg1GcLnGWKqhUetpLE01oIXsHFqfamjUOL8nIXjDn1lAqixniH2Xhl8JU9hI0BsR+9ZqEzSOpZmQARdRBT+yt9tDqIYmMfwNpcJIjKYNEUbp/T97dwFlR5E1cPxmI8QgkOAkIUASggR3l8V1g9sCQXdxXRbYxVlc98Pd3bK4uwV3goaggRAkQmy+e9N3YCIz896bJ1Vd/98590yAkFRXdXfV7a6uqncuVYAcONRzCHIwEvTo2BYsiwVeRtvbkG2qkAc3RtBZVINN9x9ONTRpBo3NqAaUiZ1L7amGJtn2TDxEzfqoG6kG5MC3nkOErL9kW6mCBH0KAwIv3xCNi2gm5MSvwpZrP2qcwanQrA00ZqIaUCYz+TmFpp3p96iUXe59FZAHlkN8GHgZ/0IzkaBPLfQ3NEcK21Mhf53FpMQHwMwiaN7WVAHKbCuqoFk/SdoPECcJL0WQL5ZDHEUuRoIek9k1lg24fC9p3E4zIWc+0rgv0WO3ae2sZt+8thobUg0osw393ELT7B71XaLHfp/3UUCeWC7xYsDlW9ZzMhJ0qmCyPwdeFydI+FskAKX4b6LHfaqwCFMhVtboQjWgzLr4uYWm2fTuU+ibgNywXOLEwPPSdWgmEvR66wVctrc17qWJkFMPSXpbrn2lcQFNH/29GZxbKbBp3l8mdszvet8E5NG9nluEal2aiAS93hoBl822O+HtOfLKzu3UVgs+WWMMTV8QpreDc6u2xvg9KyXnMO5CzsddIW/vugZNJNKqri69e9DAIVOstdZL49NAi2pbqvXUGM+pihzroDFUY9YEjvVzjb4a42j2ZnWV7Ft9HiSjEib5PedHqqJZ7TQ+8PFS3n3v4y4eoiLP2vq4a85Ayzd/w9zsij5tkmsgBj4iKwRctqtIzpEAGwilslruiSTnRd2b6aNQyfHPilRDQeyedXwix3oRyTkSMN5zjFAlv0YIg59wE3Sb2nApzYNEXJBA4vpp4B0iHTQ4x9CYazU+zvkxjhPWB0E6LpVwP+VYngQdoW6v9pTGJzQPEvG1xk05P8b/SLYPKQqzElWACuMNeuHs3nVSzo/xJu+LgBR84rlGiJYiQef4Fw+0bLdx70Bi8rxYnH17fjVNXJTFqAJU2OJUQVGulXy/ODiHJkZiQs017N7cmgQ9Xb00OgVYLlu85g7uG0jMaxqP5/TYbN9zvj0vXA/JFokDKsnOsXmohoLl+S36E94HASm5w3OO0FhuNh8Jerr6BVquFyXbKxlIzak5PCbbQ/gKmrYovD1HtfAWvTjXSD7fop9C0yJBX3nOEaK+JOjp6hNouR7lnoFEPaTxbg4Hfr/RtEVZlCpAlfSnCopib9Hzti/6u973ACl6kByNBD00oT6deVyANNmKonn6DtAWHLqcZi3a/FQBONeCZW/RP83R8Zwj4a5mDVTaY+RoJOih6R1gmexN2/PcL5Cw6zS+z8mxnC7sqZuXezM415CxPZTz8hb9e+9zgFS9LGHO8kv63px6gt49wDK9yYAeibPz/6IcHMe3GhfTnCXpQRWAcy1otivFZzk4josYcyFxYz33IEcjQQ/GbAGWiVVEAZELJP5Vz8/UGE1T0jGDcy2H7C167It6jvO+BkhdiLnHbCk3SMoJehuNWQMs1zvcJ4DJ327fFHH5bdrkhTRjSTpqdKAaUCUdON9KZrtTfBlx+W/yvgZIXYi5x6yeq5GgJ8YavlWA5fpEAJiYF4s7S+NXmrDkezPAORc+ewN9On0MEL0Qc49WKd+bU0/QQzSM+wQwmU25eiLCco/Q+C/NR7KEaMxGFZTsEsnW24jNE8InhUDouQcJeoJm5iIBgndOpGX+haYrWReqAFU2E1VQMltg7Sz6FoAEnfEACXpeTZT8bC8FlMMgjQ8jKu9IjfNpthbpSBWgyjpRBS1iC639EFF5P/C+BUDme89BQtMq1QZJOUEP8akM36wCU5qkcUZE5T3Pk3TQIQOpsLFLTG+kz/S+BUDYOUiys5t4gx6Wn6kCYBrXSBwr7f4sTJukQ0aM+Kyi5WzdjRgeTlpfcjXNBUwjxE/zeIOeoBCntNVxfwCm8ZvEsVjcsxo/0lwAEjTS74Ghe0qy1ecBTCnEWSXJboGZcoI+KsAyteX+AEzDVvHcPIJyrqOxAM3VYhOpAlTZBKqgxezet14E5dxUWLUfmJ52AZZpDAk6HXIIWKgGmNb+EsdT1DYaR9JcLcZaHKi2UVRBi/3T74Gh6+B9CoAphbhA63gSdDrkENi3l625RwBTdBh/i6i8O2rMS7MBSIjd83aKqLzWp3Sm2YDftZYw138ZTYKenlCntM3JfQL43W6STXGPhU0RO5xmaxEWy0S1/UQVtMjhEub02MZ009iVZgOCzz14g06HHIzu3CeA3+9PMU5FHKgxN81XMhbaQ7WxNWLp5vJ7Xmz2F3YyAkLPPZJ9eJryzen7QMvVg/sEMNkmGr0jLHd7jUNpvpL9QBWA8UA0DvN7Xmysb9mM5gOCzj2SvTennqCHOHWitwCoH/jFai+N2WlCEnREYQRVUJLZ/F4XKz5HAjJ9AizTBBL0NNUF2vD9uU8AsoLGyhGX3xa3O4hmLIntUcyUY1TLj8K+2KU6WMJc+bmYfmYFmhGQRQIsU9Izm1L//ubrAMu0FPcJIBfJ7T4aXWnKknxOFaBKhlIFJenq9zj6GiB+SwdYpm9I0NP1ZYBl6ivZCqNAqmzLngE5OI4ZNQ6hOUvyGVUAzrWgHez3uNhZX8OnhUjZLJ57hGYYCXq6Pg20TVbjfoGEWVLbJifHsq/wFp2kCSH7mCoomt3T9svJsVhfsz9NioStEmg++GnKjZJ6gj4k0HKtzf0CiZpZ8rU/7UySvWlCPu7NyJ9PqIKiHeT3trzY1fseIEWh5hxJjwNST9DfD7Rc63C/QKJ21+ics2OyN02z0LRFeZsqAOdakOxelrc3zp297wFStEGg5XqPBD1d7wZaLvsWhNXckZo2kp9pkw3xFr14b1EF4FwLUt7entfbT/LzaRVQqP4S5vfnJOiJn5hfaXwXaNm24L6BxNhiPT1zemy8RS+O7Uv9JdWAChsm7IFejDy+Pa/XU/KxOCmQh1xjeOpjgD9xbsrrgZZrG5oGicnzdjddNA6kiYvyKlUAzrGgHOj3MvogIB+2DrRcr6XeMCToIoMDLVc/jZVpHiRiKY0Vcn6MBwgLERXjWaoAnGPBsHtX3lc7XyGBfgioZznGQuRmJOiheiHgsrFoCVJxQALHaG+e2Bed5AmcYzE6RNJ4wPh3mhqJCDnHeCH1xmlVV1eX3EEPHDKh4T92k+w79BAfVozWmEdjJPcR5Nhcku173S6BY/1FYwHJvq9C09pr/JTIeYHq+80TzrFURbNmlWw7uhkTONZxGr00vqbZkWN277NvvDsGWLZJGrNr/FD/L67ok976jbxBz06AUL91sAuHp7nIu78nlITZAPdwmrwgljjxhhOV8hzJecEOTyQ5F++LGHchhXFXx0DL9nrD5DxVJOiZRwIum33z1YEmQk7Zub13Yse8j2SzBtC8B6kCcG7VlN2r9k3smPdm3IWcj7tCXk/iYZqIBD2GBH0OjV1oIuTU9pJNn0ytczySpi/IfVQBOLdq6sgEk1Xrk3ag6ZFTu3huQU4WML5Bz9i3jiMC7oRsr9a+GmM4ZZEzts3Rkgket33/uqDG55wCBd3/5qEaUEZfcU4VxPYG/1BjhgSP3T59XIpTADljec4HGj0CLZ/lOd2mznf4Bj1d9h3a4wGXr7vkf3sTpGeVRJNz8QHv0ZwCBbmdKkCZ3UYVFOToRJNz8b5pVU4B5Mx+ASfn5gnhZSQJ+lTuCrx8/9DoSjMhZx1FynbR6M1p0KxbqAJwTlWd3Zt2TbwO9uU0QI7MonFE4GW8k2YiQZ/aPRoTA7+wjqOZkBO28NCAxOvA5mwdw6nQLFtt+wuqAWUyzM8pNO0Yv0elzPooPoVAXhznuUSoJnouBhL0KXwr2dSKkP1N0p0SjHz5O4O/yWyRvIWphibZQik3Uw0ok5v8nELjFvZ7U+qsj9qbakAOLCnhbx/4hOdiIEGfxo2Bl6+1xoW0GyJn+8zuTjX8fg8+nmpo1uUkVSjjuYSmHcc443d7ep8FxDzOuMBziJDdRFORoDfmVo1RgZdxecnepAOx2kZjTqrhdzaNkpkxTXtf4xmqAS30tJ9LaJzdi7agGn43u8a2VAMiZjnDCoGX0XIv1gYhQW/Uz5GcIKdqLEBzIVJ/pwqm0Ep4i16IS6kCcA5V3PF+TwJ9FuK3gOcMobvFczCQoDcqhulvnTSukvCnqwBTW1bCf5JbCxtrrEg1NMm2xvqGakCJvha2V2vOCn4vwpRs5uJyVAMiYznC1Z4zhO4KmosEvTnPShxT4GwP6UNpLkSGzzMadwJV0CTbG/X/qAaU6AJhf13uQaXjLTpiYznCyhGUk0/YSNCL6shj6UxXprkQCdveg2/5Gre2xhpUQ5MuIslCCcb4uYPG2b3nz1RDo7bW6EY1IBIrSzwP3C6guUjQC3WlxsgIytlW4wY6DURiV40OVEOTTqQKmvS9xmVUA4p0qZ874N5TKuu7dqEaEIFunhu0jaCsIz3nAgl6QX7VuCSSsvbUuFZY1AVhs/OT/WSbZ0+916camnSK8BYdhbNz5VSqoUnrC7PxCrE342ZEMNa61nODGFzqORdI0At2jsa4SMq6gWT7lgKhsqmTfaiGgpwsPHBrylfCdGUU7kI/Z9D4gP5kqqEgvTXWoRoQsOM8J4iB5Vhn02Qk6MWyFV9viqi8R2tsSbMhUCywUzjbh5hv9Ztmb9FHUQ1ohr2Z4e1507bxew4Kw0KnCNVWngvE4ibPtUCCXrSTNCZEUlZ7Cm7bKSxPsyEwPYSte4pli7u0pRoa9R2JFwpwmp8rmD67x/DteXE2knimDyMdNva/SuKZfTfBcyyQoJfkQ41rIipvR41Bkk3DAkKxh0YbqqEoC2jsTjU06XSNoVQDGjHUzxE0bne/16Bw1pftSTUgIL197N8xojJf6zkWSNBLZm+yxkVU3tk07vefQK21JdEs2TEanaiGRo3VOIxqQCMO9XME02f3ln9TDSXZTaMd1QDG/CUZJ/FsAUeCHrDPJL5tfWJ8moZ82kRjLqqhJHNoHEg1NOlWjUeoBkzFzonbqIYm2b1lTqqhJFZvm1INqLFYZ81eofEpzUeCXg72nURs2wAsT5KOAOxGFbSIvSGelWpoVJ1kWx+NpirgRvs5UUdVNKqbMPukpfaiClDj5PweiW/dKculeHtOgl42tkXLKRGWey2N24WpWKiNeYU9vVuqi8Y/qYYmfSzZ5wCA+LnwMdXQpCP93oLSrS18v4/aaOdj+7UjLPupwraXJOhldqbEOSXDEqSbSdJRA7sGfo95QeOnCOrRtqjrwenUJNtL9UWqIXkvCvvqNqeHxLHtpd2bHwu4fLZa9h6cTqhBcn6zxPnyw3KoM2hCEvRyi3lBos01biRJRxW11hgYeBntSW4Mqzy3F6aENWeixg4av1AVybK239HPBTTuBL+nhM4G8qFvw7Qr4ypUOTm/0cf0MWLhThL0irEpJY9HWvYBki2oNAPNiCqwp7shv/W1LZj+p3GexLFP8k4ai3FaNcmmNe9PNSTL2v4jqqFJi/m9JHR2Tz7Xx1vvB1zO2YXF4lAdM/gYfkCk5bdr+Q6akQS9kmzxmVifAG3qSQlbN6HSQt9a7WKNCZK9dYthfQm7V5/GadWsqyR7w4C03Ohtj6adFsm47xS/N9tCfxcGXlYWi0OldfKxe6wPg8Z67gQS9Ir6UOP4iMv/Z8m2oOlGU6JC5tbYOODy2R6clzT4ZxsADougXtfz6xdNs4dDb1MNyXhbwn8gGErfv14E5Rw2VVJ+jYS9iw6LxaGSumo8HHnff7znTiBBrzj7bvX1iMu/gsYzGr1oSlTAzhptAi7fTRrfN/hne7obyzfep3LfbpZts2XTAH+iKnLvJ29rttlrWiu/d8TgBJlyluJICXtWDIvFoVLsM8GnNVaM+BhelzjW+iFBzwmbGru7/4xVP43nhO9aUf57Suhvs6Y3ZfJKiWNrpqU0tuM0a9YQYcGwvJvobTyEqmjW9n7vCJ3dg68o8J4dkl002nKaoYz6+xh9YXIlEnQU5xWJ54l0Y+bSeEpjXZoTZbKWxvwBl2+wZNurTW28xrGR1LGtbMxij82zb/b2oxpyaz9vYzTN7hUnRlLWYxoZzL+m8XzA5Z5DYyNONZSJjcntzXn3yI/jVM+VQIJedcdpvBz5MXTRuFdjH5oTZRD62/P/NvHfbpA4vl2eV2NfTrWCXCjxP0jFtE6X8N+qhsL69l4RlNPuvTc2cy3T9yGF6/VeH5vH7GXPkVCiVnV1dckd9MAhZZ1t0UfjVY3OOagaS14OFKaFojSzSbbAT6j7wtp35z01xjTxezbTuCuCuh6h0VvjR067ZrWWbKGp7amKXLAkbif6qYLMItnWc10jKKvde+9p4r/P4P3LrIGW3waWvTS+5LRDif3UOZKPh++2qOPSUsaF4a7o0ya5E4I36C03xJPaPLAbgz25Y4V3lOKvASfn4knamGZ+z90S9lTKejbgPppTriCWyO3sbYu43e33GZLzwhwdSXL+fDPJuflNsrVCQmUZxC6cciixP79X8jMz7kBh1XYS9EBcrnFrTo7FtmGxqSlL0Kwogq1kG/IUP5sqdHGBv/efkdS5TYVje5/C2NutrTUeoiqi9ZC3IQsOFWZ+iefTtSMK/H2X+r08VAO9LwQKZWPtwRLHFoiFuM1zIpCgB8O22fggJ8cyn8azGjvQrCjQKpLtDBCqx6XwJ7pPSvY0O3Q25fMUTr2CjdP4i8aDVEV0rM029zZEYU6ROBaTtHvtUwX+Xpux+FjAx2IPRdbk1EOBdvCx9nw5OR4bY7EWAwl6cGw/1i00RuXkeDpqXKdxvrBiNJq3Z+Dlu7TI33+UxqQI6t3uOStx+hXM9su2b12Z7h6Pu73NxlAVBbN7wpYRlHOS32uLcUngx7Qbpx+aMYOPra/zsXZe+tYBnguBBD0470j+nh7ZNzHPSLYgFTA9s3iiGKrvNO4o8v95Q+OmCOreplOeJUyrLMZvfr5eSVUE70pvq9+oiqLuCWdGck+40e+1xbBFPL8N+JgGeJ8ITE9vH1PnbSeW3T0HAgl6sGxQf27OjmkZyfYy3IrmxXRso9Eh8EF+KVNjj5Y4ptQuL9m3uSicLTJm34v+W8L+pjVVdd42A4UF4Ypl94IVIiin3Vv/VeL/F/LDtfYa23IaYjq28rH0Mjk7Lst5bqR5SdBjcJiE/Z1UKWbSuEXjIsnPlByUx86BD/QvLfH//VTCn05ZL5bvTUNzgp+/fNscVuL2V28bFMfuAf+JpKyX+D22FHZPD/kTpL9yKqKBjj52vsXH0nliuc7hNDEJeizGSzbN6b0cHtteku37vizNDNVXwn5b86jGxy34/0+UbE/P0PXS2J/TsSTXaqyl8TVVUXPfeFtcR1WUxO4BMSw49YvfW0v1id/bQ2V94oKcjvCx8qs+ds6b9zzX4QE3CXpUbKGETTWG5/DYrOOxlSeP1GhNUyct9DcFF7Xw/7dvHc+KpC3sepyVU7Ikz/pA6mmqomas7pfxtkDxZvV7QAzOkpZ/R35R4MfIW/S0tfbr8VnJ58Oa4Z7jsCgcCXqUPpJsW588Pl1qq3GSZFtSsYBcuvePnQLvQAaV4c85Q8JelKjezBrHcVqW7EuNtTVOF75Lryar69O87r+kOkp2nN8DQmf30jPL8Of8T7IFQEO1I2PsZPXxsfFJPlbOm/otSz+iqUnQY2ZPzwbmeMC3smSrsB7A+ZSc1TV6Bly+a6Q8D8dsOubxkbSJbXe3KKdmyezzJPuebj2Nr6iOivvK6/ofXvcozaIS/laX9Y73e2o5koSrAz5O6xvZEz29nOpAjdd9bJxHdZ7TMNOJBD0Xrtc4NMfHZwtgnKPxhPA2PSW7BF6+y8r4Z9miRB9G0CZtpDxvp1L3sEZ/jRuoioq5wev4Yaqixc70az90dg8t58Kblwd+vExzT0f9W/OzJd8LKR/qOQ1I0HPDvrk6JefHuKpkb9MPiWSwgNJ1kmxxkFDZ0933y/jn2du9WL7vXFdjY07RFhuhsYPGhhpDqY6ysbrcyOt2BNXRYhv7NR+Df2pMKOOf94Fke0qHyvrIzpyiudbGx7z21nyVnB/rKRLPmjwk6CiKDfAvzvkx2pND+2b3BY2lafLcCn3gUYk3K3doPB9J+9g12JbTtCzu11jEByYTqI6SWd2d7XV5H9VRFm39Wo/Bcxp3VuDPvSzgY+4sYT/IRsvYGPdFvwbzvv3wxRLPSwoSdBTNvt3YR9KYNrm0J+k29a4TTZ87Ie99bt833lKh6/ewSNpnQb/XoDxsqz17S7K4xgNUR9Ee8Lo7WOLYtjAW+0g8K0QfLpVZi+c2jZ/pK1FFnXxsa2PcpRI43hv9XsPiqSTouTZRsu+SbkngWNv4gOxtyVZ8RD70kLAXv7HOZFSF/mybOn9XJO10jEY3TteyeldjA4/XqI5mvdagvt6lOsqqm1/jMbhLKreolN3rQ37psYaEvZgqimNj2Xd8bJvCp5yWq+zkuQtI0JNI0rfXuDWR4+0l2fTgRzQWpvmjt1Pg945KT3m0aV4xTHVm27XKsTfCNktoS8keQGJKb3vdLC3MOKiUWLZVs3vlPyv8d4S8WJz1lTtyukbPxq6P+lh23kSO+VbPVUjOSdCTTNJvT+iYbZ9bW0TunEgGFmg8QQ85MXi5wn/HexL+6sH19hK2XauUOr9/29TtLST7xjZ1z3ldLO51w5TIyljUr+0Y2L3y/Qr/HYM13gy4DpjmHq+ZfcxqY9e1Ejru20jOSdBTNiHBJN2mBNme6UM0duMcjM4KGv0CLl+19sW1qaW/RHK9ncdpW1GTJHursrKH3c9T2tN7vB9z/fHf4XWCyjlP4phe+7NUbxr+lQHXQ1/vOxFXfrS7j1UPkLR2JrrdcxMWRSVBT9o4jW00rk3suGeVbCryYDquqIT89tw6k2rtz/mtxqmRtJmtF7AVp25V2Btkm9ptUyBtWu/HOT7Wj/0Ye/oxM4OgOraSsNcAaeg0v1dWg32HHvKDMd6ix2NFH5te6mPVlFzrOcl4ToPaalVXl94MtIFDgnwo1Eqyp+L7Jnge1nnnaitkf81lGax23j5dAy2fbYe1YRX/vg6S7cPbI4K2s72nF9IYzWlc9fv6yj7gsSR2zsiP5xvJpj7awkHPCFPYq822crJPbGJYdOwLyVaYH1PFv9MWo9ss0PoYoTG3xm+cxsGaS+N0yd4et0rw+M+XbLZAcPf1K/q0Sa4xeIMeVpK6n8ZJiQ5id9D4ULKFbzpzOgRpk4CTc3N1lf8+G3geFUnb2YD+CE7hmtzXn/F7e3fJvmG0vcDfj+gYrKy2B/yafgx2LE+TnNfEERLPiuBHVTk5NyFPc7e+c1NO4SB19rHnhz4WTTE5t9xjf+7rASVGvEEPkr1JPjXRm4SxKXHHa1wifAMTkrsDHmCMlOzp99gq/732kPMlyVarDp3Vja1E+ymnchB6aawj2Rv2VTXmD6Rcn3gCbttiPazxGU0VBEvMbcZO+wjK+orGclL9tQjaagzTmD3QehlEkh4Uey27p8a/NeZItA4sCTxc44yQC5niG3QS9HDZthy2+mm7hG+eH0n2xuAO4alerdnT/298ABSiizX2rtHfvbrGE5G0o00B/Qunc5Dm9KRmMY3+/rO3VG5xogl+j7XVr9/yny/5dY7w2GcFsawlsWYN74lnSrZHdYjsu16b5v49p3Ntcx+NARqn+D02VbYGli3WfF3oBSVBJ0EPsZOz5DT1LclssQ57wnk//UrN7CHZjIZQ2VvIWi5SFfK3j1NbT+MhTuko2KjEppX30phPYx6Nbg2ik/zxSVBH/1m/zsCvGqM0fmgQX0o2g+Izyd40MkMpnrHAY5GU1WZabV7Dv98eboW85dpegfelebe+xgkayyReDyP9IcXjMRSWBJ0EPUS23+m9Es93Z5Vk33IerfEkVVF1j0q4e4DaNih9a1wGWwzJ3kK2jaAt35Vsn2qSMyB8NjJ9zccCoRvvCfIHNS6HPdQP9bOjxyWt/bRDsZpk31mvQlVMXjTWFtR9J5YCs0gcQvS2ZFs+vE5VTL6xPiHZ2z+2Zqsem3q7esDluzqAMtiA9KJI2tO+Q/87pzUQhb9HkpybiwNIzkPpExpjfelcnNZVs7yPGZ8kOZ/sdc8p3qEqSNDRcl9JtojQHVTFZLaw0vMaD2isRHVU3NYarQMtmy1CdG0gZbFVYEdG0qZW1tk4tYGgzebXagzs3ndsIGW5ScLdx/lP3qeislbyMeILPmZElkOs6jkFSNBRJvY9oe2ja6ubs2Baxr6ltZWGH/KbDipj24DLZk/FhwZSlh8iGkzbuhYnc2oDQTtZ4lmD5ji/B4ZguCdn9KnpWcXHhM/6GBFZznCc5xC/Uh0k6KjMRXaMZE9fR1Edv7Ono09JtojO2lRHWc0rYX9OcFVg5fk/CWOKZyEGCgvlAKFaxq/RGHzg976QXBtwfdm0616c4mW1to8BnxbemDc0ynOGY4WXeyToqLjbJHtK+DlVMQVb6fYRybYK+gvnd1nYk/5WgZbNngSH9tmHTas8NKL7//kBty+QqlZ+bcbShx0q4U0ptz3HRwbcvrxFL08f9hcf8z3iY0D8wXKElT1nAAk6qsQWerBVStkuaVrLeuJmC+ztKmnvJd9S2wRctjskzOla/4vourTZEX/lNAeC8leJZyHUh/yeF5qxku0dT9+aP+18bPeOjwOWpUqme11ajvAGVUGCjuqz7702kOzbkklUxzQW0rhC4yPJnvDPRJUUxbYOWzLg8l0VcNkOkXi2MTtFowunOxCELn5NxmCC3+tCdV3AZVtCox+ne1Fm8rHcRz62o/6mZbnAsZ4b/EB1kKCj9hfjhlyMjeqhcbrGFxpnSvZdNZoX8hQ8m7r1ZMDls9kbl0TSzraN3gmc7kAQjvdrMgaX+L0uVM9ofEIfGz0bs53tY7jTfUyHafHSjgQdAXpQYynJtpTA9NnT14Mle/p6o2TTf9C47QIu23URdEC2oGMs267ZXstLcMoDNWXX4D6RlHWk3+NCZotiXU+CHq1lfKxmY7YDhVmQTXnBcwA+eyVBR4Bsu6nVJHvCyNOzxrXxjnGwZFtx2AqXbamWaQaKCwZcvhsiqMPvJXsbFgPb5/4CYcE4oFZa+TXYOpLyHu/3uNCFnKCH/hlZLdhYbBsfm73sY7U2VEujbKx/mo/9h1IdJOgIl62kerhk+z9+TXU0ayWNmzU+1ThSYzaqZLKQF7CxBRLfjaQe/6vxfiRlXVHi2dYJyJtd/RqMwft+b4uBbQH3Cn1t8GzsdZSPxW7ysRma9rWP9f8h4e2iABJ0NMK2nFhcwlxdNUTzaJwk2RNIW3xkuYTrIvQtYG6IqC6t0zwgovL+R6MbtwOgquyaOyWi8h4QWUIQcp8R8lam1bCcj7ns+/ITfSyG5g3yMf4jVAUJOuIzXGNT70zHUh0FaS/Zm4wXNV7V2FvS++7JtvfpFWjZbDrXTZHVp30TdlckZbW3GCdxGwCq6kSJZ/bWXRLfd643Sbif/c0r8WypVy4z+djqNR9r2ZhrBm4DBbGx/P4am/kYHyToiJQtknKeZAuiDaY6imLfhl2o8aVkq9Uuk8hxhzzl7mnJnrTH5mCJ5yHZHsK+skC1WL+yZ0TJwcER1vFXGk/Q5wZxrl/qYyobW7EwaXEG+1j+fB/bgwQdOWDf7Nr3bbbqKt+qFKezJy0v+w1yT/93eb0nbB1w+W6ItF7tu7rTIzoHLpJ4FqsCYtXar7VYxmKn+70sRiH3HdvkeDxuY6W9JFsHwMZQu+d4/FQp433svqLEs/4OSNBRhAmSrby6vIS9d2nI7OnlxZI9kbeB1VI5O75VNeYKtGzjNG6LuG7tG9NYVlm18/pvXO5ARf1N4tnuc6jE9Z381G7X+C3Qss3pfW+eLOVjpa9zOlaqlrd9zH68j+FBgo4cs+9+bKrR6VzwJZtR/ngq/JJkb9W75OC4BgRctgc0RkRct6M1Do2ovPYt+txc6kBFzC1xrfdwqN/DYmX7tt8fcPm2yME53cXHQi/72CjPsw0rzcbmp/lY/TWqgwQd6bAnybYd28oab1EdLWLf69Y/Kb5O48+RXlutAk/Qb8zBuXKrxuORlNUW8jmLyxuoiLMkngVIH/d7V+xCXmB0gMS5mvuffMxznY+BLpZ01uuplLd8bP4PCXfWB0jQUWEv+c3Uvm8ZR3W0SAeNHTQeluw7PZuStEBE5bdpVN0DLZu9uRmUk/PEVmCNZeaKfRu5Ppc2UFbrSzwLg03we1Ye2LazowItm20vFtNq7gv4GOdTH/Ps4GMglG6cj8WX8bE5SNDBTWHyjdb2VHya6iiLnhr/0hii8aRki8x1DbzMIU+xuzfggVWx7JuyCyIq738l234QQMu192sqFhdIftasGeV9CX1waWwMs6ePaYb4GKcnl3RZPO1j8OOFl2UgQcdU3tdYXbJvq3+kOsrCpqytJtk2bbaw3J0aWwaa8IQ8OLg5Z+eFPSWPZQ9Te1NyJJcyUBZHSTwzq37we1WehNyXhNgHd/Axy10+hrnYxzStuJTL4kcfc6/uY3CABB3TVefJ5IIa1wh7LZbTDBqbS/Yt3zcal2usFch1aCuszhdovf2icV/OzoWRkSW9h/s9AUDp+mkcFlF5/+X3qjy5z/uUEPWSML7ftjHJ2hpXSPZduY1ZNvMxDMo31r7G+9VLGGuDBB2Fsrd7O2usqfEO1VF2ttrpQI1HJdu+5hyNlaR2T6VDfntu356PyeE5YIOfwZGU1QZmFwtvTYBS2bVzUURJzuueOOTNWI17Ai7fgBqen7Yw2bkawzQe0dhV8rE7TWje9rH1zhLPTDqQoCMw9q3REhqHaPxMdVSELQ5zgMazGp9rnKGxXJXLsGXA9XNLTtt9ksZ+Es+Tc5uCN5DLFSjJQL+GYmD3JFsYbmJO24Jp7n9YzsccNvZ4xtt9Li7XivhJ42CNJX1sDTSqVV1derMqBg5h6+8S2U37RI1dhIc71fCpDyRuk2xP0UpZSOPdgDu0OSTfW41cJdmT9Bj84OcLT/2Bws0m2felXSMp7w2SrcqdVzaLwT4zmznQ8i0qlZ25uLRkD+VtJ4H5uDwrbpL380dL9skAinRFnzbJHTNJFophN5bdJPtG6hmqo+Ks4zxCsmnQlqyfKdk0+HJft5sHXAd3Sf73AbVv0X+NpKzdhL3RgWKdFVFybveiw3PeHr953xKqcvfJNmZYxccQn/qY4giS86p4ysfMu5GcgwQdlfaaZKt4bi/Z99OovF6STY2yafBfSLZNjy3iUo7HiiEn6Lcl0La2Mu6JEZV3R411uCSBgqzj10ws7F70ZQLtEnLfslkZ/gwbG/xZ40Jvz6d9DNGLS7IqhvoYeQ0fMwNFYYo7WqqD3/TtaWxnqqPqbMqx7et6t8aDUvxe4XNLtiBMiIt/2ZoHs0v+36CbthpvSDZ9PAYfSzYNcyyXINBk//iWxLOtmk3DX0xjfAJtY9Pcv5UwF0GzgXkPKf5BiY3B1tPYVGMjyWY8obpsBsopks2aGUN1lAdT3IHi2Q3oJI2+Ghdo8PSjuqwD/qvG7Rrfe7K+pxS+yMtmEu7K3IMSSc7FB8T7SDwLxlnC8W8uP6BJR0eUnJu/J5Kci/ctgwItm/XJhc5ss4fse3nfb2uD3OZjApLz6prgY+C+PiYmOQcJOoLwtScYi2jcIezpWAvtNTaUbDsse/L+omTfNy/ZxP8T8vT2OxJrv8c1boyovIdK9rYNwLTs2ohpz/Mb/B6UktsDLttmTSTvS3rfbn28zYC7yPv+9lx2VVfnY5WFfQzMd+YoC6a4o1JW0DhNY1WqIgjWiT+g8T/J9l63aVg2tc+euLcNsLxWPpventpTaJv5YNNMZ4qkvC9rrCj53Y4JKEVrydYLWT6S8trnRP0STC7sE4TvJMzP82wmg63+/5OXz74nt2nr62t05xILgi0A9w+NF6iKymKKO1A+dsOyheTsKfCbVEfNWYe+u2Qr19p36/a9+nmBJufmfklzipgNkGOaOr6sZPvmAvjD3yNKzs0xkuabP+tj7g20bNY3n6/xkPfZd3ofTnJee2/62HZ1knNUCm/QUQ32IMj23DxOsqf0QHNsf9ZbEj12e1Rs2+AsHkl5bbZDf43POG0B6SnZHtaxLJpqi1PaNlCpDoy2SrivQXHek+xhln3nz2ecVcQbdKAyJnkHaN+n2+IlH1MlaIK91bgv4eO3gXJMC8ZZInIRpy0w2UURJed2j9lX0l7c9T5hQS807WMfu9rOJbeSnIMEHXlM1K+V7C26rTT+OVWC6bApfb8mXgf2/erVEZXXtvbZiVMXidtBY4OIymv3mGcSbzPbmvRBTl1Mx+c+Vu3nY9dJVAlI0JFn9rT+Usm2o9hD41OqBA3cRRVMdrhk3x7GwvZ9nZVmQ6Ls3D8novL+4PcY0OdgSp9I9r1/Xx+r8l0sSNCRlHEal/lNcBeND6iS5Nlq4IOohslshf0jIktQzqPZkKjzJK4HVEf4PQZZn0MShg98LLqgxuU+RgVI0JEs6xhtqp3tI7mdxltUSbKelrjeGleaDRKejai8dv1uQrMhMZv4uR+LZ/3egswI73uQprf8+l3Yx6I8rAEJOtCAfd9zk8YSGgM0XqJKksNUwynZYjR/k2xP3FhcoNGFpkMi7Fy/MKLyjvd7Cgtd0fek7kWNv0i2Y8pNwjfmIEEHmk3Ubc9P20d2Dcn2KWUwwSApVfZ0/+yIymv79J5OsyERdq7PE1F5zxFmqdH3pKvOx5S2h/kK3u6ML0GCDhTpSY2NNRaTbOrReKokt4ZofEs1TNfxEteuB7bAzlo0G3JuLT/XYzHU7yWY1nDvg5BP430MuZiPKZ+iSkCCDrTc25It3rGAZKtF/0yV5E4fb9cXJHtjvJVGT6plMtsKaP+IyttK4xKNTjQdcqqTn+OtIirzfsIWlvWsb9nG+xrrc37yPgj58rOPGRfwMeTbVAmiGETV1aU3s2PgENZ/yIGZNHbT2Fdjfqoj177UeF6yNQksXkl4kGnT8TaLqLw2+D2YUxg5ZIP+gyIq7z2R3TvKaUaNpTSW81hR4vosAcWzrdLO17hCeKETvSv6tCFBJ0FHZP7kg44DJPumCPlnW7G9p/GyJ+y20Is9FU/h8wf7vvtdH3DG0larSvaABcgLS/Bs1e/WkZT3F8lWqB6WQNu01ejfIBlfVmOhiNoKLWOfRdo6C/ZAikXfSNBJ0EnQEYClPFG3aWszUB1JGaPxhmRv1+vDEtk8Xuw2a+T8iMr7vsaSGmM5TZED7TVe0+gXUZn3j+yeUSgbtS+isbT3//bTVuTuwGmalN8kW4X9XL82QYJOgk6CjgDNIdnCPXtp9KA6kjV2qqT9VY13JP437TZrxPYxXiGiMp+m8Q9OSeTAqRqHR1Re+756ZYn/bWLbBsl4fUJuyXh7TslkfaFxkcblwgKzJOgk6CToiIZNadtUsj1f/yxxLeaDyhgn2XT41yXbauh1j5GRHcei/sChbSTltanuK0n2SQIQK9v681mJZ7q0PYxcRuPNyOp5Zo0lPCwJX8zvee04BZNnScvDGhdqDPK+BSToJOgk6IhUX429NXb1zh9o6FNP1N9sELbITMhvnU7SODKiOrZPDuzNF1PdEaMYp7afrHFUwOWzBx3zewJeH5aQz8fphqn8qHGVZG/MP6Q6SNBJ0EnQkS8dNbaVbAr8ilQHmjDak0p70/52g59fB5Qw2BT+vhHVKVPdEavYprYP8YQ3lAdic0n2Frx/g582ZZ3vxdEUW2D0Uo2bvU8GCToJOgk6cq6/J+o7anSlOlCg7z1Rf99/vueJ/Dc1KMuaGo9KPJ9vMNUdMbLVwJ+TeKa228BubY3Ha/B3zynZivGL+M9+3td24zRCgUZoXKtxmbBvOUjQSdCRLHsTuYXGHhqrCd+qozQ/eqL+jiftFjYV73Op7FR5G8TsFlE9MdUdsfUPr3iyGYsrbahTwT/fFqrsqbGgZFuY1Sfj9utZOGVQAktGnvT+7DbJVmYHSNBJ0IHJ+vrAZieNuakOlMFYT9Q/aPDzff/1T2X487t60jtHRHVypsahnBqI5Fw9OKLyfueJ8ogy/FldvE/sI9mb8L6elFswNR3l8JVkb8ttJfYhVAdI0EnQgabYVMb1NHaRbCV49lVHJXzrifpH04mfi/hzbF2FGyM6bptRsIbG05wCCNiqGk9I9sY4FtsXeS+YSaP3dMKS8Tk4BVAB9nb8HskWfXtQWIkdJOgk6CToKIG9odxGsrfqLCyHavnOE3V7q2CrzH/iYb/+ajq//16NDSM6vo8l20bpV5oaAeos2SKM80dU5vsbuQfYbLD5/Fjm91/38UR8dpoaVfK8J+W3SHxbm4IEnQSdBB0Bs2l+O0v2lqIn1YEaGdsgWa//aW+lz5a41lCwLXP+RnMi0HNzr4jKa4O5g/36n69BIm4/29OcqJGhGtdrXCPZp10ACToJOgk6KsamPNr0R3urvqVk3+oBKD6p2ECyaY5AKOzzpvuFBUOBUtjb8dsl+7bcPmOaRJWABL34JANA8azDsRVHbZs2+05vgHdIrEwNFM4SIFu1l5WfEYpZ/JwkOQcKN8bHQDYWmtPHRk+SnAMk6ECt2IInd0r2Jt06JpsCf5/GeKoGaFZ3jXOpBgTiXD8nATRtvI91bMwzl4+B7hS2SANI0IHA2LZZ9q3VRvLHU+SHhVVKgabYpyJ/oRpQYwP8XAQwfRN9TLO7j3E28jHPT1QNUD5tqAKgYmwf2ss9ZpPs6fLWkn273prqAaZgi3L18OtmesFUSZSD3Xu7NhJHUj3AdJNy+5bcVl+/TWM4VQJUFovEAdVn29psrrGFxpoabakSoFm28NAP/vNHyd7YjGzkp8XP/s+/SLaV2xiqMBc6SLYF2owaM/vPLh4z+c+ZPWZp8LM+CWdBT6B5Nn39ccm+K79Lsm0/gZpIcZE43qAD1Wcd3SUeNnDcVLKplesK2+EAjalPuko10ZP2nzxhr48fPXkfO9Wv7feN8wS//t/96gPXUf7f6n+OFr67rDeDRkeNdhqdpvOzg9/nZvZ/19ljBk+e6//7LA3+W+cGCTizj4DKsHvcQxp3aNzj90MAJOhAcqwDvNrD3gRtKNnb9fVbmIwAmFJrT/oquWJ8faI+Sf74JrP+wYB4cv+r/3qCJ//T0/D/b+y+0RJtPeltqL0nxw11lj9m+DT8dcNE2e5TrRok5gDiGoPYNpf2lvy+Ju5JAEjQgSRZx3izh12b9q36xhqbaPSheoDgdWyQpHajOgAEaIhkb8jvlezbcr77BEjQARTAOszHPQ7RWFCyqfC2YuoqwjRPAABQ2HjiWY3/aQzS+IAqAUjQAbScdaine9hCR+t7wm4/WfQIAADUswUybeq6vSl/QLKdMACQoAOoEOtob/Cwa3g1+WMqfG+qBwCA5Hwkf0xdf0qYug5E609UARA164Af0zhYsu/UF5JsBVYAAJB/d2r08zHAIT4mIDkHSNABBOJ9OmYAAJJhu0PwXTlAgg4gYKtSBQAAJGE1qgAgQQcQrr4ac1ENAAAkYU7v+wGQoAMIEE/SAQBIy+pUAUCCDoAEHQAA1B6ftgEk6AACxVN0AADo+wGQoAOosXk1elINAAAkxfr+XlQDQIIOICw8QQcAIE184gaQoAMIzMqBlusbjeE0DwAgcsO9TwvRKjQPQIIOgAS9EKdrzK6xoMYuGhdqvKExkSYDAARqovdVF2js7H2Y9WWnBVrelWgyIB/aUAVALnTVWCjQsj3pPz/0uNr/eUaN5X1QsazGcj74AQCg2r7TeMnjeY0XNX6Zzu97KtDyL+xjgRE0JUCCDqD2LNENcUbMzxqvN/LfbODziEe9Xn4sy3kspdGR5gUAlNEojVc9GX/Zk/HPCvx/X/e+babAjqmVxgoa99G8AAk6gNoL9duzZ6S4qeyfedzc4B61iCfry2gsrdFfox1NDgAowDiNtzRe0RjsSfk7GhNK/PMmet+2YYDHujIJOkCCDiAMoX571tKpgDaAesPjUv937TxJX3qqpL0tpwEAkIx7Ml4fb/m/L6enA03Q+Q4dIEEHEMh1vFygZXuyQgOw+oHXJQ2S9sU0ltRYwsP+uTOnBwDk0q8ab0o25dzi1Qol49Xq28phOR8TTOD0AEjQAdSOJaUhfqc92pPoarAB2WCPevZNfu+pEnb7OQ+nDABE5csGiXj9rKqPNCbVqDyDvY8Lre+18tjaLS9xygAk6ABqJ9QpbS9ojK/h328Dt/qV429p8O9n1VhcY1HJpsZb4m6r33biVAKAmrLF2971BPxtD/v194GVc7z3cWsFWIcrkqADJOgAaivU6e3PBVouG+g96lHP3rbP78l6feJui9PZG3i+bQeA8ie49gbcFmt7039aIv6p1O6teCl9XIgJ+vKcXgAJOgAS9JgS9OmZ5INFizsa/Hv7tr2vZHvML+xJ+0L+71hJHgCaZp8f2Sym9yR7G/6exwdS2xlWee7jluW0A0jQAdSOTdfuHWjC+1wO6nec/DHNsqG2Xu8Le7Lez2NBjS6clgASM9KTbov3PSm3qepDJL8Llj3vfd2fAiuX9U2zaQzntARI0AFUX6hPym264k85rnd781P/JmhqczZI1uvfvtvPebnnAoiYJdqfyx9vxD9o8OtvE6wPeyhhDyEWDbBstgXp/ZyyAAk6gOpbIdByPZdwm3zj8cRU/97euveS7O1Gb0/g639N8g4gpCTcPvcZ4gl4/ec/n0n809LL7dlAE/QVSNABEnQAtRHqG/RnaZppjPcB75Dp/Lf65H0ByRars5ivwa9novoAlMnPGp80iE/958ck4SX1dXsFWK7laBqABB1A9bWScFdrfY7mKVvybmadKmG3ZL6nZG/e7dcdqEIAbown2p83iIYJ+Q9UUdk8H2i5lvMxQh1NBJCgA6gee9vaNcBy2cI0H9M8ZfW9x8uN/Pc5GiTs8zZI3HtozCPZgkEA8uE7ja80vpDs7ffQqZLx76iiqvnI+7zQ7rE2NrDPp4bQRAAJOoDqWSbQcr1A01Tdtx6NJfDtPVnv7j/rE/f6X8/pST6A2l/L33jybTGswc/6X4+lmoLr8zYJsFxLk6ADJOgAqt/5huglmiY4Y6XpKfSmnSfp3T1h797gn+fSmFtjdg8AxfnO40tPwIf5z4b/bMn5OKoqOoMDTdDtIf5NNA9Agg6ABP1FmiZKlhjUv7Vrrt+wJH03jeOpNqBR/9K4whPzCVRHboX6HfpSNA0Qpz9RBUCUbPGXJQMs1yThDXreWaJh37+eqPEQ1QFM18MaJ/m1QnKeb9bnhbgY21I+VgBAgg6gCmyBuJkDLJdNof6J5kmCDUh3EVaEBqZm18TOwgraqbA+78MAy9VFsoXiAESGKe5AnEKduvY8TZOUryWb6n5XpOV/TLJVrztrzKgxg2R7zneUbGG9mf0n29iVl20DZusijPSfoyXbm/s3jV80fpVsJ4K1Ij2+3f3aQDqs71swwHLZTDsWigNI0AFUQagruDO9PT13a1yisWeEZbeF7zbzhLA59Yn6DJ7A1/+0xfU6NfgpnvC39V/bWyybrdZK/pj10tofBDRU/+c11PDPKbfx0znu0Z4kN2SJ80T/tSXU9lbYPmX5aTp/zijJ1jKo/1n/59X/rE/Mm2PH/XKk14NdC3dxW0iOna+7BFiuZTVuoXkAEnQAlRfqG/TBNE2SDtZYQ6NvZOXup3GpxnYF/N6xwvZW1XKpt01sPvRrAWkm6CFakqYB4sM36ECcQux07U3amzRNkuyN6fYS5xZR22rsQxMGYx9vk9jYub+DXwtIz1veBzJWAECCDiTI9qXuGmC53pZpp8ciHa9oHBNp2c+SbCooamtZb4sY2bnPDKJ0jfU+MDQ2VuhB8wAk6AAqa/GAEzSk7XSNJyMst30/fqtGN5qwZrp5G7SLsOxP+rmPtL0aaLkWo2kAEnQAlbUEgxMEyhYTs2m+30dYdls1/HrJFnBDdbX2up83wrLblmo7yh8L6SFdoT6kXoKmAUjQAVRW/0DLxfROmC8lW804xj2g19M4liasumO97mNj57jtdz6MJkTACTpv0AESdAAVFuLT8AmSLZIDmHs1zo607EdpbEoTVs2mXucxOtvPdcC86X1haBanaQASdACVY/sk9w6wXLY4DltQoaF/SpyzKmy/8ms0+tCEFdfH67pVhGUf7Oc4UM/6wHcCLJeNGTrRPAAJOoDKWFTC/Eb2dZoGU7Ftp2y7rJ8jLHsXjTskeyCGyujoddwlwrL/7Of2OJoREfSFNmZYhKYBSNABVEao35+z/zmm52ONPSMtuz0Mu5wmrJgrvY5jtLef20AsfWF/mgYgQQdQGaE+BX+DpkEjbta4JNKy21vSA2nCsjtIY+tIy27n8o00IRoR6mwy3qADJOgAKmRhEnREmpC9E2nZT9NYlSYsm9W8TmP0jp/LQGNCfYNOgg6QoANIqJO1bbV+oGnQhNEa2/jP2LTVuFVjHpqxxawOb9FowzmMnPre+0TGDgBI0IEE2GJK3QMsFwvEoRAxv32cwxPLdjRjydp5Hc4RafljngWC6gpxRtk8EueCjAAJOoCg8f05Yhfz97sraZxFE5bsLK/DGMW8jgLoE0MfQwAgQQeiFer356zgjmLEvAL2Php/pQmL9levuxjFvBMB6BNJ0AESdAAJdq7v0jQoQux7SF+osRTNWLClvM5iNM7P1Z9pRhQh1E8hFqZpABJ0AOXVL8AyTdD4gKZBkQZr/DPSsnfUuFNjNpqxWbN5XXWMtPz/9HMVKMYH3jeSoAMgQQdybqEAyzRE4n0Tito6W+OeSMveU7KV3dvSjI1q53XUM9Ly3+PnKFAs6xM/CrBcC9I0AAk6gPJpr9EjwHIxvR2lqtPYReOzSMu/usaZNGOjzvA6itFnfm7W0YwoUYjT3Hv4WAIACTqAMugd6PXKtkNoiR81tpR4Z2HspzGQZpzGQK+bGNm5uLWfm0CpQnx4/ScfSwAgQQdQBv0CLRdv0NFSr2gcHHH5bQG05WnG3y0v8S4KJ34uvkwzooVCfXjdj6YBSNABlEcfBiHIsf/TuCXSstu31rdrzEMzSnevi3aRlv8WPxeBlgr14XUfmgYgQQdQHn0DLNNEjQ9pGpTJHhLvjgDzeGLaIeH2s2O/TeJ9UPGhn4NAOXzgfSRjCQAk6EBOhbj66lBhBXeUj+01bd/+jo60/Da1+5KE2+8SiXeq/xg/99jvHOVifeMXjCUAkKADJOjV9BHNgjJ7U2PfiMu/o8bhCbbb4X7ssdpH4w0uP5TZkADLxBt0gAQdQBl00ehKgo5EXKlxWcTlP1ljo4TaayM/5lhd5uccUG4fB1imbj6mAECCDqAF5gu0XCToqBTbouvVSMveWuN6jYUSaKeF/VhbR1r+VyXe7eAQvlD7yPloGoAEHUDLzM/gA4kZK9n+6LHuRW1vqO7RmDXHbTSbxt0S79u4H/0cG8vlhgoZEmi55qdpABJ0ACToQLE+1dhJoy7S8vfWuFni3XKsKXZMN/kxxqjOz61PucxQQR8HWi4SdIAEHUAOO9NJGp/QNKiweyXu75vX0rgwh+1ykR9brE7ycwuodII+iTEFABJ0IH9C/F5smDA1FNVxjMYjEZd/oMYROWoPO5ZdIy7/QxrHclmhCsZ6X8mYAgAJOpAzIT7tZno7qmWixvYS5p7ChTpRY9MctIUdw0kRl3+oZNvBTeSyQsJ9JW/QARJ0AC3QSqNXgOUaQtOgioZrbKHxW6Tlt1XOb9RYIuI2WMKPIdZxwzg/h4ZzOSHxBL0X43+ABB1A6eaUMBeZ+pimQZW9rLFPxOXvqDFIo3uEZe/uZe8Ycf3vqzGYywgk6JPHFHPQNAAJOoDSB8Yh4g06auFyj5iv59sjS3Q7epm7R1zvV2hcyuUDEvTf9aBpABJ0AKXpyaADmIK9RX854vIvp3GNZJ+vhM7KeK2XOVZ2rvydywb0lSToAAk6gLx2oraHMFusoVbsO/QBEve3xPYtdAzbx53sdR2r4V7+37hsUCMfe5/J2AIACTpAgl4x32iMpmlQQ7Z10VYS92rctl3ZDgGXb0eJe3u4CX6ODONyQQ2N9j6TsQUAEnSABL1ihtIsCMCTGodEfgz2bfQqAZZrVYn7W39zqJ8jQK2FuEUkCTpAgg4gR50ob6QQinM1ro64/Laa8h0avQMqk5Xldglz94hCXe3nBkCCToIOkKADKKsQV07mDTpC8jeJe/us2TTu95+UpeUG+zkB0GfGNbYAQIIOBM9WUA5xr9IvaBoEZIzGXyTuRePsrXWt9xmv36e9d8T1ONzPhTFcFqDPbNIcEsdOEgAJOoCg2FustgGWizfoCI19dmEro4+L+BiW17hRo3UN/u7W/ncvH3H9WdtvKXyCA/rMQtjYYlaaBiBBB1CcOQItF2/QEaKnNQ6O/Bg21Ti/Bn/v+f53x8wWDHyKywD0mQWbk6YBSNAB5KPz5A0VQvV/Ev/q4/b9dDW3NztC4v9m21bD/y+nP0jQizIHTQOQoAMozlwBlmmSxnc0DQL2d8nepsfsZI3NqvD3bOd/V8yeERaFQ9iGe98ZmrlpGoAEHUBxQnyDbgONCTQNAmbfItv36J9HfAy2eNMNUtlvwu3PvkziXijK2niAxL32APJvgoS5iCVv0AESdAA5SNC/plkQARsMb6IxKuJjqOSq6iGsGt9So7yNh3O6IwIh9p1z0SwACTqA4sweYJm+pVkQibc0dtCoi/gYKrEveR72Oq/ztn2L0xyRCLHvnI1mAUjQARQnxC1QvqJZEJG7NY6O/BjK+bY7D3udi7fp3ZzeiEiIfScJOkCCDqBI3QIs0zc0CyLzH8m+545ZOfZIz8Ne5+Jt+R9Oa0QmxDfoXWkWgAQdQPydJ1PcERubDr2HxouRH0dL90jPw17nL3pb1nFaIzIhPtzuRrMAJOgAihPiFPfvaRZEaLTGlhrDIj8O207shBL+v5Mk/q3IhnkbjuZ0RoRC7DtnpVkAEnQAhWunMVOA5WLFZMSc4G2RgwTv6CKTbfu9R0Z+zKO97YZxGoMEvWxsjNGWpgFI0AEUJtRvw0bQNIjYSxq7S/xTpAudrt7SafEhqPM2e4nTFxH7IdByMc0dIEEHEHmC/gNNg8jZQmmxLzJWv+Dbmk38njWl5QvLheBkPw4gZqE+3GahOIAEHUCBZg60XN/RNMiBPGzTZVum3anRfzr/rb//t46RH+NdGv/idEUOhNp3zkzTACToAAoT4vfnv2mMommQAzZtegeNtyI/ji4aD8iU+5r39n/XJfJje8vbiBXbkQe/eh/KWAMACTpAgl42fH+OPLGHTRtK/AuPza1xv8bsHvf7v4vZMG8bVmxHnoTYh5KgAyToACLuNH+iWZAzlghulINE0N6aP+LRO/JjGS35eHACTO1nxhoASNABEvS8Dy6AlnpTYzuNiZEfR3+Z/vfoMZnobfEWpyVyKMSH3CToAAk6ABJ0IDj3aOxHNdTcft4WQB7xBh0ACTpAgl5WTHFHnl0o8e8ZHrPzvQ0AEnQSdIAEHUBw2jO4AKruIOENbi3c43UPkKAz1gBI0KkCIEghbpFEgo68q/8G+iWqompelnysAQA0h2/QAZCgAxFrE2CZxtAsSICtIr6FsIp4NVgdDxC2U0MaQuxD29AsAAk6gMJ0CrBMfIOOlBLHDTnnK34/YTs1pCTEWWidaRaABB1AYUL8Lmw8zYKE2FZfWwtTryvB6nQbYTs1pCXEPnQGmgUgQQcQb6fJNFSk5iFh+7VKsDp9kGpAYkYFWCYWiQNI0AEUKMRpZ3yDjhTZ1l+nUA1lc4qwnRrSNDbAMnWiWQASdACFaR1gmcbRLEjUkRrXUw0tdr3XJZCi3wIsE4vEASToACL2C1WARNVpDNR4jKoo2WNeh3VUBRL1K1UAgAQdiFfHAMs0iWZBwmwGiW0JxsJmxXvL645ZOEhZiAtOskgcQIIOoEBtqQIgOGwNVjy2rAPCxSJxAAk6AAAknInggQYAACToACo42AbAlO1C8EkAMCW+QQdAgg4AQIWw6FnjWFQPmNZEqgAACToAAJVj24YdRjVM41BhWzoAAEjQAQCosjM1TqEafmd1cRbVAAAACToAALVwpPDGWLwOjqQaAAAgQQcAoFbqv7kelHAd3CN8kw8AAAk6AAABsFXLt9V4McFjt2PeTljVHgAAEnQAVdOeKgCaNFpjE413Ejrmt/2YR9P8QJM6UAUASNCBeIW4X+oMNAvQrOEa62t8msCxfqKxgR8zgKa1C7BMv9AsAAk6gMKEuF9qa5oFKMgwjXU1vsnxMdqxrefHCiDOPnQSzQKQoAMoTIhv0DvTLEDBPvIkfWQOj22kH9tHNDMQdR86gWYBSNABFCbEN+itaBagKG9pHJrD4zrUjw1A3H3oKJoFIEEHEG+nORPNAhRleY0zcnhcZ/ixAYi7Dx1DswAk6AAKMz7AMnWkWYCCraLxkMbMOTy2mf3YVqGZgaj70N9oFoAEHUBhfg6wTGyzBhRmTY0HJN+zTmbyY1yT5gYKEuI2az/TLAAJOoDCsEgcECdb2fx/Gp0SONZOfqzr0exAlH0o26wBJOgAIk7QZ6ZZgCZtrHG3pPU5SEc/5o1pfqBJXRhrACBBB0jQ8z64AEKxncbtGjMkeOwz+LFvy2kAkKADIEEHSNBJ0IFa2lvjOo12CddBO6+DvTkdABJ0ACToQN78GGCZutIswDSO1LiQ/nSy1l4XR1IVQBR96I80C0CCDiDeTnNWmgX4XSuNMzVOoiqmYXVyhtcRgHD7UBJ0gAQdQMSd5pw0CzCZvSm+XONgqqJRh2hc5nUFQGR2xhoASNCBeI0IsEy2RQx7oSN1tiDaLRq7UhXNGuh1NQNVgcRZ3zkTCToAEnSABL3c5qBpkDB7SHWvxgCqomADvM46UxVIWKh95wiaBiBBB1CY4YGWa3aaBonqpvGoxtpURdGszh4RFppEukLtO4fTNAAJOoDCjJEwtz/hDTpSNLfGUxrLURUlW97rcG6qAgmaLcAy/eJjDQAk6AAK9A2DDKDm+mo8q7EwVdFii3hd9qUqkJgQH25/Q7MAJOgAivNtgGXqQbMgIfbW9zmNXlRF2fTyOl2eqkBCugdYpu9oFoAEHUD8Cfp8NAsSsbHGY5J9e47yqv+ef2OqAomYnzEGABJ0IH5fBVimXjQLErCbxp0aHamKiunkdbwbVYEEhNh3fkWzACToAIozjEEGUHX/0rhUow1VUXFtvK7/TVWABJ0xBgASdIAEvXjdSVyQ42TxMo3jNVpRHVVjdX2c1z33FuT13hLiN+hf0DQACTqA+DvPUAcaQEvMqPE/Ybp1Le3mbTAjVYGcCfXBNgk6QIIOICedZy+aBjlSv8f5elRFza0n7JWO/Am1z2SKO0CCDqCEznNigOXqTdMgJxbVeEFjCaoiGNYWz3vbAHnQJ8AyTSBBB0jQARRvvIT5Fr0fTYMc2EDjGY0eVEVwenrbrE9VIAcWDLBMX/gYAwAJOoAifRxgmRaiWRC5fTUGaXShKoJlbfM/bysgZiH2mZ/QLAAJOoD8JOgL0yyIlC3UdKHG+RqtqY7gtfa2ulBY4R3xCrHP/JhmAUjQAZQmxKfc8worLSM+s2jcq7F3To/vSY882tvbbhZOY0RmRu8zGVsAIEEHcmJIgGWyfYsXo2kQkQU0ntNYN6fH96jGhh6P5vQY1/U2XIDTGRFZ3PvM0HxI0wAk6ABK816g5SJBRyxW13hR8ru44YMam2iM9tjU/10e9fO2XJ3TGpHoH2i53qdpABJ0AKX5SLLtUEKzNE2DCOyq8ZBGt5we352ekI9p8O8sSd/M/1sedfM2HcjpjQiE2FeO97EFABJ0ADnqSEnQEXrfdprGFRrtcnqMV2lspTFuOv/tN/9vV+X02K1NL/c2ZhyDkC0TYJk+ErZYA0jQAbRIiFPRFtXoSNMgQLY9110ah+X4GM+V7A3yxCZ+z0T/PefmuB4O87ZmuzyEyPrIRQIs13s0DUCCDqBl3gywTLbl0ZI0DQJj2xm9JNk32Xl1nMaBGnUF/N46/73H5bg+NvE2Z/tHhGYpCXN7wLdpGoAEHUDLvBFouVamaRCQARovaPTN6fFZsn2QxrEl/L/H+v9bl9O66ettP4DLAPSR0Y4pAJCgAyToLbQKTYMAtNY4SeM2yfYczqP66erntODPOEeanxYfsxn9HDjJzwmABJ0EHSBBB1ARn2j8Eujgg3sIamkWjUEaR0qYew2Xgy0Ct7WUZ8G3q/zPGpfTumrl58IgPzeAWo6vQ0zQf/ExBQASdAAtYNNSXw+wXF2F/dBRO3buvayxQY6PcZTGxhp3lPHPvMP/zFE5rrcN/Nzg/oRa3p+6Bliu1yW/n7oAJOgAqurlQMu1Nk2DGthG4zmNBXJ8jD9qrKPxcAX+bPsz1/W/I6/s3HjWzxWAvjHssQQAEnSABL1M1qJpUEX2bfHpGjdqdMrxcX6jsabG8xX8O57zv+PbHNdjZz9XThO+Swd9Iwk6QIIOoIxeCrRcNsDvQPOgCubReEzjUMnv9+bGvg9dVaqzkJP9HatIvr9JtXPF9kt/2M8hoNI6eN9Igg6ABB3I+aB9eKADkdVoHlSYTcd+LYFz7VXJFpb6qIp/50f+d76W87pd049xXS4nVNiqEuaDaxtDfEzzACToAMrnxUDLtSFNgwqxacnHa9yvMVvOj/VRjTUkm95ebfZ3ru5lyLPZ/Fw6XpjyjsrZiDEEABJ0IA1PBVquzSXfU45RGzYd+XGNfyXQV90s2YOuWm6n+IuX4eYExj12Tj0iTHlH+bXyPpExBAASdCABTwdarp4aS9M8KKP6Ke2rJnCs52psL2HsTT7Oy3J+AvW+hjDlHeW3tPeJjCEAkKADCXhFY3SgZRtA86AM2kg6U9ptL+LDNQ7UmBRQuaws+3vZ8r5fMlPekUpfaGOHV2kegAQdQHmN13gh0LLZXsNMc0dL1K/SnsKU9t80tpVsy7hQWdm287LmfRxk59yjwpR3tEwr7wtDZGOHcTQRQIIOoPweCbRc82usQPOgRPbNZipT2n+UbFr1LRGU9WYv648JtMvqfg5uxuWIEq3gfSFjBwAk6AAJehC2p3lQpM4al2rcKfmf0m4+k2zf8ZgWa3rKy/x5Au1j5+BdGpf4uQkUYwfGDgBI0IH02DdkIwJO0GegiVAge9v0usbuiRyvrSGxosa7EZb9XS97Kt+w7iHZ23RmBaFQ7SXch9Qj/P4DgAQdQAVMlGzrqRB1FRaLQ/NsIbhjJVtReIFEjtlmCNgU6m8iPoavNVbzY0lBbz9Hj/FzFmiK9X2zBFo2W9tjEk0EkKADqJwHAi7bnjQPmkl6nkks6bHF1rbUGJWDYxnlx3J6Im3X8GFSby5fNGEPxgwASNCBdA2ScJ+Gr6GxCE2ERgawNqV9+USOd7wf8+GSr7dXk/yY9vBjTIFNdX8t8CQMtbOI932hXq+DaCKABB1AZX2r8XLA5TuAJkIDs2vcLdnCW50SOWb75nMdjctyfIx2bOtJuGtilFtnP4fv8nMaiKHPs7HCdzQRQIIOoPLuDbhsO2rMRRNBsj2B39HYNKFjHiLZG9cnEzjWx/1YhyTUvrYN29saW3N5w/u6HRkrACBBB3B3wGXroHEITZS0OTRu07hJY9aEjvvJBBPWlB5I1LPt2G72c5y36Wk7xPu8UN1JEwEk6ACq402NDwMu316JJWb4w3aSvWHcIrHjtinf60o6U74bGuHHfkVix23nuM0Q2ZbLPkmzel8Xqvf9XgyABB1AldwacNnse82DaKKkdNe4R+MGSevhTMNF08Yl3P527LtJ/hbFKyRJu1GyWU3duQ0k5SDv6xgjACBBBzDZbYGXbx8Jd19YlLcfsba2N4mbJHbsqW07Vog8bStXjE39GtiHsVUSZva2ZowAgAQdwO9sy6r3Ay5fF42jaKZcW1jjKY3/asyU2LF/orGS8I3n9FidrOx1lJKZ/Fp4yq8N5NfR3seF6j3JPoUDQIIOoMquDbx8+2v0o5lyxxZF+o9ke0OvnODxP6SxLAPgJr2hsZzGwwke+8p+bfxHwl5ADKXp531byK6jmQASdAC1cb2E/b1nW42zaaZc2VjjXY0jNNoldux1GqdpbChpLgZXrB80NvA6q0vs2Nv5NfKuXzPIj7O8bwvVJBJ0gAQdQO18Ltl0ypCtr7ERTRW9npJNXR6k0SvB47dvqm2F+n9oTOR0KNhEr7PtJL3v0sWvlUF+7fTkdIie9WUbBF5G2/JwKE0FkKADqJ0rIyijvUVvT1NFyabo/luy9Q42T7QO6r83v5nToWQ3ex1+kujxb+7X0L+Fae+xai9xzAi7mqYCSNAB1JZtpfJj4GXso3ESTRWdv3hScVzCSQXfm5fPm16XDyV6/B38WnrXry3E5QTvy0L2k7C9GkCCDqDmxmhcE0E5D5DsDRrCt6TG4xp3SLrTcvnevDJGeJ2m+F16vV5+bdmDisU5JaJgfddBEZTT1qUZTXMBJOgAau/SCMrYWrKFa7rQXMGaS+NyjcEaayRcD3xvXlmpf5debx2NV/2am4vTIlhdvO9qHUFZL6C5ABJ0AGF4R+OJCMo5n8aFNFdwbOqt7Vn/ocbAxPuGIcL35tVS/136kMTHYQP92rNrsCOnRXAu9L4rdE/4WAAACTqAQJwTSTntrdn+NFcQ2mjsrfGxxokanROvj7s0lhG+N6+mN73O70y8Hjr7NfiRX5NtODWCsK/3WYwBAJCgAyjaIB/cxeB0jbVosppppbGNxnuSvR1KfXrteI2DNQZo/MzpUXVW51t4G4xPvC7m8mvyPb9GW3F61Iz1UWdGUtaPfAwAgAQdQEAmaZwXSVnbSbZIUn+areqJ+SaSffd6k0ZvqkS+9IG4bZ9UR3XUTJ23wZreJqnr7dfoK37NkqhXV3/vo9pFUt7zfAwAgAQdQGCu0Pg+krLawjs2pbg7zVYVG2u8pHGPxhJUx2S2iratWP8MVRGMZ71NHqIqJlvSr9mX/BpG5c3jyXksC5p+730/ABJ0AAGyFZHPjqi88/tAfDaariLq35jb4N6mPy5DlUw2QbIFuTbQGE51BGe4t81R3lbIrt1Bfi3zRr1yrC96WOKaXXS2pL0bAkCCDiB4/6cxMqLyLqTxqMYcNF3Z2AJT22u8Idnbt2Wpkt8NlWxK+8nClNCQTfI2WsvbDJll/Zp+w69xFpMrH+uDHvE+KRbW17O1GkCCDiBwP2mcH1mZ7Xu/JzV60nwtYls0/U3jA43rhW/8p2ZvIJfSeJqqiMbT3mYsgDXtPfN6v9b/JmzP1lI9vQ9aLLJy/1fieiAPgAQdSJatPDsisjIvqPG8xtI0X9Fs5eeTJHvTaG9T5qdKpvCbxkEam2n8QHVE5wdvu4O8LfGH+f2aH+r3gLmokqIt5X3PgpGV2/r4M2g+gAQdQBzsLfqpEZZ7bo0nJNtyCc1bTuNqjc80jtToRpVM4x2vJ9sjmFXa41Xnbbictymm1M3vAZ/5PWE5qqQgtrXik973xOZ07+sBkKADiIRNffs6wnJ31rhV4yyNtjTjNGwq624agzVe1PirxLMVUC0SOltc602qIzfe9DY9V3jgMj3t/J7wot8jdhOmv09PW+9jbvM+JzbWt59HMwIk6ADiMlrj35GW3VYotumsNu1wYZpyMpv6b2sL2B7RlwmfAjQ3eF3fz6GxVEfuWJse6G38NdXR5D3jMr9nnM8943fWpzzn94dYV8P/t/fxAEjQAUTG9kZ9PfIBpr0FsqmbKb4lnt0HkW96PeyrMTOndZNs/2Jb6Il9tPPvIW/rO6iKJs3s947Bfi85yO8tqbE+5J9eDzFvOWl9+pWc1gAJOoA42VZFB0Z+DB0kW/zIthXaOIE266Kxs8YDGl9JNg2T1dib96vG7pKtX/A91ZGM773Nd/dzAE3r7/eUr/wes7Pfc/JuY+9DTvY+JWb2gGUipzJAgg4gXrYAzi05OI5+km21ZNsurZyzNrIFnnbRuFPjG42rNNbTaM3pW5AXNJbUuJyqSJa1/RJ+LqB5rf0ec5Xfc+70e1DeFppcTeMZ7zv65eB4rC9/gtMXyLdWdXXprbEycMgEWh6pmUfjXY2ZcnRMNug6W+NuifNtwkKSfUO7qcaqJOMlsZu5vRE7wX8NtNH4l2SfxbShOopm91J7CHqPZG/Y34v0HPiLZG+aV8xR2/ws2ffzX3KaIiVX9EnvVk6CDqRjH8lWds+bTzWu0bhO46OAy2n7E9vbnD97Yt6dU7JFLHHYVbLVqoGpLS/Zd7oLURUtMswT9Uc0npKwF+Wztt5BslXse+SwLfbLaR8OkKCToJOgI1n2hvZZH7jmlU1vvUvjPo23algO28LH3nTYQkSrePTmFCwLe8Nn39DaKsas0I6mtNc4XuNgYYZKudhD0Gc8bLE1m5k1voZ9mu33voFk35gvmeN6tweRKwvfnoMEnQSdBB3InUV8UNU+gWO17yqf9YHNS5KtfPtTBf6enpJ922gJub3Bse9gF0ukjqvtfcnemvOdMYph05yvkHx8gxwae0j2pt9f3/OE3a7ToRX4u2bVWMqT8uU8Ye2aSB3bw953ON1Agk6CToIO5NOhGqcneuzfSfYGaIjGt/7Ptgr0KI2R/ntGeXJtb2dsj1zbomgmHwjaAHEOT8ptinoPEvGqsJv2OZK9NR9DdaAEtnK3rVVwoPA2vVpJ5ReSTZEf6vdbu9eOkOxbarvf2gDU3gj/ptHR/z+733bWmE1jTsm2g+ur0UdjlkTr8jCNMzilQIJOgk6CDuSXDU5tZfeVqQpEwN7O7SbZzA+gpexNpK34vhhVgQjYLLDVhantIEFPCtusAemxjn5H+eONMRAiewN3lCdUJOcol8F+Th0trGGAsFkfvRPJOZAeEnQgTZ9p7EE1IFC2AJV9y29bqI2nOlBmdk6d5OfYM1QHAmV99KdUA0CCDiAdt2lcQDUgIPZ96p6SbUf3AdWBCvvAz7U9/dwDQnGR99EASNABJMa2H3qJakCN2WIotpe9rbJ9qf8zUK1z71I/967h3EMArE8+iGoASNABpMlWz91CshV2gVqwt5hra+ysMZzqQI0M93Pwz8LsDdTOt94nsz4CQIIOIGG2Dc6WGuOoClTRr5ItAmeraT9OdSAQj/k5aYvIjaI6UEXjvC8eRlUAJOgAYAslDRSmd6I6btVYRLJF4HgwhBATJVtEbmE/V4FKq/M+mEULAZCgA/jd9RpHUg2ooHclm86+tcZQqgOBG+rn6tp+7gKVcqT3wQBAgg5gCqdoXEk1oMxsP99DNRaXbAoxEJPH/Nw91M9loJyu8b4XAEjQAUyX7b3K9i4ohwmSbeXXR+NM/2cg1nP5TD+XL+BcRpncLtnUdgAgQQfQqIkaO2jcR1WgBR6Q7K3jPhrfUx3Iie/9nF7cz3GgVNbHbu99LgCQoANoki2StJXGw1QFivSaxnoaGwjf7SK/3vVzfH0/54FiPOJ9LItkAiBBB1Cw0RqbavyPqkABPpNs5sUyGg9RHUjEg37O7+DXANAcuz9u5n0sAJCgAyjKWI0tNO6gKtAIm/J7kMaCGjdoTKJKkJhJfu7bNXCw8EkHGnenZA++Sc4BkKADKJlNwbOthi6nKtCArWZ9jMb8GucIUzUBuwbO1lhA41hhxXdMyfpQm9b+G1UBgAQdQEvZIjZ7+KCzjupI2q8aJ3tifrzGL1QJMIWfNY7za+Rkv2aQrjo/H/YQFoQDQIIOoAKDjJ0km/qOtIySbJspSzqO0viRKgGa9KNfK/P7tTOKKknOWO8zjxUebgMgQQdQIddrrKoxjKpIgr0hP1VjPo1DNYZTJUBRhvu1M59fS8w6ScMw7yuvpyoAkKADqLTBkq1c/DRVkVv29s+msPfSOILEHChLon6EX1PHC7NQ8uxp7yMHUxUASNABVMu3GmtpnCCs3J0nX2oc5kmELQI3gioBymqEX1u9/Fr7kirJjUneJ67lfSQAkKADqKoJGv/W+LPG11RH1N7R2EWy72XPkGyhKwCV87Nfa/P7tfcOVRI16wPX8T5xAtUBgAQdQC09rrGIxnVURVRs0aKHNTbS6K9xtbBdGlBt4/za6+/X4sPCgmKxsb5vUY3HqAoAJOgAQmHfU9pqtZsJb9NDZ6tJXyTZQ5V1Ne4jIQBqrs6vxXX92rxIWPk9dNbXbe59H58DASBBBxCkezQW1jhPmOYXmg8lW026u8bfNN6jSoAgvefXqF2rh/m1i3BY33a+93V3Ux0ASNABhG6kxgEay2k8S3XUlE2fvVljbY1+ku3HPJJqAaK5l57h1+7afi3zGUptPe992/7cSwGQoAOIzWsaq0g27Z0FkKrL3sD9Q6OHxraSfRvJNHYgTnV+DW/r17Rd2+9TLVX1rmTT2Vfyvg0ASNABRMumvS8m2UrFQ6mOirFvIP8r2f67NvXyNI3vqBYgV77za3shv9b/K3z/XEnWZ+0q2SJ+TGcHQIIOIDdsf1hbqbiPxn4an1MlZWGLSN2kMUBjbq/bV6gWIAmv+DU/t98D7F4wmmopC+ujbBp7X42rvA8DgIprVVeX3ozHgUNYtwoIQBuN7TQO1FiK6ijKWI37NW7RGCSs9AzgD500NtHYWmMDjfZUSVFe1zhb40aN8VQHUFtX9GlDgk6CDqAG7Js+e1Nh3/fNQHVMl01hvVeyKZYPkJQDKDBZtyR9U8n2WO9KlUzXbxp3afyfxtNUB0CCToJOgg4gY4PHHST7Vp236iJveTJ+vw8auXkBKJWNclfV2FBjPcm+qU6dLfZ2jQff8QMk6CToJOgAmmDf/dkUeFsBfgm7XyVwzN9oPKHxoMZDGl9xGgCokHk01vFkfQ2NORM57jc07pTse/0POA0AEnQSdBJ0AMWbS7Lpmev7YLJzTo7LFiGyN+NP/j97d88SRxQFYPiiYmERtYiCBBEVbAIpgkEJJH/eQhJIE7VQMY1ggoWKIloEPIc9okRYIoj79TxwmK1k3YFh3pmdvbV1sgj0ylrMl0ezOCT/13UdY/OiZ64ocmRXg0AX6AIdeDmTMZsxX2M+x2zEvBmA951LI/2I+R7zrbZ/7E6gT83HrMd8qm0+djQ3AO/7MmY7ZqvCPF/f2p0g0AW6QAdeRy4XmV+H/xjzoXWeq8w1wHtx9ycPqMetc4fmIGan5mezHjkw+ObqGPu+JpfNXI5513rzGFKuUb5Xx9icvPC53yyJBgJdoAt0oO/k0kKrj04e39bJ5UK9zslfOJ6KGW/d78KfxVzUnNfk8+G/K8jzTvivCvMbHz0wgsfblZil1rnznsfcfKY9n3Ofjpmpbc5sl79zUXGdX0vPlSpOW+fi5kltT9vDRdBDx1sQ6MNowm4HhlSeuN3fwX6OPIH8G3PlIwT47+Ptbs1z5O+JjFeYAyDQAZ5wogjwOlwIBfjHSH7FHQAAAPrNmI8AAAAABDoAAAAg0AEAAECgAwAAAAIdAAAABDoAAAAg0AEAAECgAwAAAAIdAAAABDoAAAAg0AEAAECgAwAAAAIdAAAABDoAAAAg0AEAAECgAwAAAAIdAAAABDoAAAAg0AEAAECgAwAAAAIdAAAABDoAAAAg0AEAAECgAwAAAAIdAAAABDoAAAAg0AEAAECgAwAAAAIdAAAABDoAAAAg0AEAAECgAwAAAAIdAAAABDoAAAAg0AEAAECgAwAAAAIdAAAABDoAAAAg0AEAAECgAwAAAAIdAAAABDoAAAAg0AEAAECgAwAAAAIdAAAABDoAAAAg0AEAAECgAwAAAAIdAAAABDoAAAAg0AEAAECgAwAAAAIdAAAABDoAAAAg0AEAAECgAwAAAAIdAAAABDoAAAAg0AEAAECgAwAAAAIdAAAABDoAAAAg0AEAAECgAwAAAAIdAAAAEOgAAAAg0AEAAACBDgAAAAIdAAAAEOgAAAAg0AEAAACBDgAAAAIdAAAAEOgAAAAg0AEAAACBDgAAAAIdAAAAEOgAAAAg0AEAAACBDgAAAAIdAAAAEOgAAAAg0AEAAACBDgAAAAIdAAAAEOgAAAAg0AEAAACBDgAAAAIdAAAAEOgAAAAg0AEAAACBDgAAAAIdAAAAEOgAAAAg0AEAAACBDgAAAAIdAAAAEOgAAAAg0AEAAACBDgAAAAIdAAAAEOgAAAAg0AEAAACBDgAAAAIdAAAAEOgAAAAg0AEAAACBDgAAAAIdAAAAEOgAAAAg0AEAAACBDgAAAAIdAAAAEOgAAAAg0AEAAACBDgAAAAIdAAAAEOgAAAAg0AEAAACBDgAAAAIdAAAAEOgAAAAwgu4EGADs7jy8XSeuWwAAAABJRU5ErkJggg==" alt="reactjs logo" width="200">
</div>
</div>
<div class="imageblock text-center">
<div class="content">
<img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAZAAAAGQCAYAAACAvzbMAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyNpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuNS1jMDE0IDc5LjE1MTQ4MSwgMjAxMy8wMy8xMy0xMjowOToxNSAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENDIChNYWNpbnRvc2gpIiB4bXBNTTpJbnN0YW5jZUlEPSJ4bXAuaWlkOjY1NkExMjc5NzY5MjExRTM5MTg5OEQ5MEJGOENFNDc2IiB4bXBNTTpEb2N1bWVudElEPSJ4bXAuZGlkOjY1NkExMjdBNzY5MjExRTM5MTg5OEQ5MEJGOENFNDc2Ij4gPHhtcE1NOkRlcml2ZWRGcm9tIHN0UmVmOmluc3RhbmNlSUQ9InhtcC5paWQ6NjU2QTEyNzc3NjkyMTFFMzkxODk4RDkwQkY4Q0U0NzYiIHN0UmVmOmRvY3VtZW50SUQ9InhtcC5kaWQ6NjU2QTEyNzg3NjkyMTFFMzkxODk4RDkwQkY4Q0U0NzYiLz4gPC9yZGY6RGVzY3JpcHRpb24+IDwvcmRmOlJERj4gPC94OnhtcG1ldGE+IDw/eHBhY2tldCBlbmQ9InIiPz6FxXliAAApN0lEQVR42uyde4xd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" alt="vuejs logo" width="200">
</div>
</div>
<div class="imageblock text-center">
<div class="content">
<img src="data:image/png;base64,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" alt="svelte logo" width="200">
</div>
</div>
<div class="paragraph">
<p>Angular n&#8217;est donc pas le seul sur le sujet,
mais il est parmi les premiers (ou le premier&#160;?)
à considérer sérieusement l&#8217;intégration des Web Components (ceux du standard officiel).
Mais écartons ce sujet, trop avancé pour le moment.</p>
</div>
<div class="paragraph">
<p>Tes composants seront organisés de façon hiérarchique, comme le DOM&#160;:
un composant racine aura des composants enfants, qui auront chacun des composants enfants, etc.
Si tu veux afficher une course de poneys (qui ne voudrait pas&#160;?),
tu auras probablement une application (<code>Ponyracer</code>),
affichant un menu (<code>Menu</code>) avec l&#8217;utilisateur connecté (<code>User</code>)
et une vue enfant (<code>Race</code>),
affichant, évidemment, les poneys (<code>Pony</code>) en course&#160;:</p>
</div>
<div class="imageblock text-center">
<div class="content">
<img src="data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0nMS4wJyBlbmNvZGluZz0nVVRGLTgnPz48c3ZnIGhlaWdodD0nMjk0JyBwcmVzZXJ2ZUFzcGVjdFJhdGlvPSd4TWlkWU1pZCBtZWV0JyBzaGFwZS1yZW5kZXJpbmc9J2dlb21ldHJpY1ByZWNpc2lvbicgdmVyc2lvbj0nMS4wJyB2aWV3Qm94PScwIDAgNDIwIDI5NCcgd2lkdGg9JzQyMCcgeG1sbnM9J2h0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnJz48ZGVmcz48ZmlsdGVyIGhlaWdodD0nMjAwJScgaWQ9J3NoYWRvd0JsdXInIHdpZHRoPScyMDAlJyB4PScwJyB5PScwJz48ZmVPZmZzZXQgZHg9JzMuMDAwMzAwMicgZHk9JzMuMDAwMzAwMicgaW49J1NvdXJjZUdyYXBoaWMnIHJlc3VsdD0nb2ZmT3V0Jy8+PGZlR2F1c3NpYW5CbHVyIGluPSdvZmZPdXQnIHN0ZERldmlhdGlvbj0nMycvPjwvZmlsdGVyPjwvZGVmcz48ZyBzdHJva2UtbGluZWNhcD0nc3F1YXJlJyBzdHJva2UtbGluZWpvaW49J3JvdW5kJyBzdHJva2Utd2lkdGg9JzEnPjxyZWN0IGhlaWdodD0nMjk0JyBzdHlsZT0nZmlsbDogI2ZmZmZmZicgd2lkdGg9JzQyMCcgeD0nMCcgeT0nMCcvPjxwYXRoIGQ9J00xMTUuMCAzNS4wIEwyMzUuMCAzNS4wIEwyMzUuMCA2My4wIEwxMTUuMCA2My4wIHonIGZpbGw9JyM5Njk2OTYnIGZpbHRlcj0ndXJsKCNzaGFkb3dCbHVyKScgc3Ryb2tlPScjOTY5Njk2Jy8+PHBhdGggZD0nTTQ1LjAgMTMzLjAgTDExNS4wIDEzMy4wIEwxMTUuMCAxNjEuMCBMNDUuMCAxNjEuMCB6JyBmaWxsPScjOTY5Njk2JyBmaWx0ZXI9J3VybCgjc2hhZG93Qmx1ciknIHN0cm9rZT0nIzk2OTY5NicvPjxwYXRoIGQ9J00yMjUuMCAxMzMuMCBMMjk1LjAgMTMzLjAgTDI5NS4wIDE2MS4wIEwyMjUuMCAxNjEuMCB6JyBmaWxsPScjOTY5Njk2JyBmaWx0ZXI9J3VybCgjc2hhZG93Qmx1ciknIHN0cm9rZT0nIzk2OTY5NicvPjxwYXRoIGQ9J000NS4wIDIzMS4wIEwxMTUuMCAyMzEuMCBMMTE1LjAgMjU5LjAgTDQ1LjAgMjU5LjAgeicgZmlsbD0nIzk2OTY5NicgZmlsdGVyPSd1cmwoI3NoYWRvd0JsdXIpJyBzdHJva2U9JyM5Njk2OTYnLz48cGF0aCBkPSdNMTQ1LjAgMjMxLjAgTDIxNS4wIDIzMS4wIEwyMTUuMCAyNTkuMCBMMTQ1LjAgMjU5LjAgeicgZmlsbD0nIzk2OTY5NicgZmlsdGVyPSd1cmwoI3NoYWRvd0JsdXIpJyBzdHJva2U9JyM5Njk2OTYnLz48cGF0aCBkPSdNMjM1LjAgMjMxLjAgTDMwNS4wIDIzMS4wIEwzMDUuMCAyNTkuMCBMMjM1LjAgMjU5LjAgeicgZmlsbD0nIzk2OTY5NicgZmlsdGVyPSd1cmwoI3NoYWRvd0JsdXIpJyBzdHJva2U9JyM5Njk2OTYnLz48cGF0aCBkPSdNMzI1LjAgMjMxLjAgTDM5NS4wIDIzMS4wIEwzOTUuMCAyNTkuMCBMMzI1LjAgMjU5LjAgeicgZmlsbD0nIzk2OTY5NicgZmlsdGVyPSd1cmwoI3NoYWRvd0JsdXIpJyBzdHJva2U9JyM5Njk2OTYnLz48cGF0aCBkPSdNMTE1LjAgMzUuMCBMMjM1LjAgMzUuMCBMMjM1LjAgNjMuMCBMMTE1LjAgNjMuMCB6JyBmaWxsPSd3aGl0ZScgc3Ryb2tlPScjMDAwMDAwJyBzdHJva2UtbGluZWNhcD0ncm91bmQnIHN0cm9rZS1saW5lam9pbj0ncm91bmQnIHN0cm9rZS13aWR0aD0nMS4wJy8+PHBhdGggZD0nTTQ1LjAgMTMzLjAgTDExNS4wIDEzMy4wIEwxMTUuMCAxNjEuMCBMNDUuMCAxNjEuMCB6JyBmaWxsPSd3aGl0ZScgc3Ryb2tlPScjMDAwMDAwJyBzdHJva2UtbGluZWNhcD0ncm91bmQnIHN0cm9rZS1saW5lam9pbj0ncm91bmQnIHN0cm9rZS13aWR0aD0nMS4wJy8+PHBhdGggZD0nTTIyNS4wIDEzMy4wIEwyOTUuMCAxMzMuMCBMMjk1LjAgMTYxLjAgTDIyNS4wIDE2MS4wIHonIGZpbGw9J3doaXRlJyBzdHJva2U9JyMwMDAwMDAnIHN0cm9rZS1saW5lY2FwPSdyb3VuZCcgc3Ryb2tlLWxpbmVqb2luPSdyb3VuZCcgc3Ryb2tlLXdpZHRoPScxLjAnLz48cGF0aCBkPSdNNDUuMCAyMzEuMCBMMTE1LjAgMjMxLjAgTDExNS4wIDI1OS4wIEw0NS4wIDI1OS4wIHonIGZpbGw9J3doaXRlJyBzdHJva2U9JyMwMDAwMDAnIHN0cm9rZS1saW5lY2FwPSdyb3VuZCcgc3Ryb2tlLWxpbmVqb2luPSdyb3VuZCcgc3Ryb2tlLXdpZHRoPScxLjAnLz48cGF0aCBkPSdNMTQ1LjAgMjMxLjAgTDIxNS4wIDIzMS4wIEwyMTUuMCAyNTkuMCBMMTQ1LjAgMjU5LjAgeicgZmlsbD0nd2hpdGUnIHN0cm9rZT0nIzAwMDAwMCcgc3Ryb2tlLWxpbmVjYXA9J3JvdW5kJyBzdHJva2UtbGluZWpvaW49J3JvdW5kJyBzdHJva2Utd2lkdGg9JzEuMCcvPjxwYXRoIGQ9J00yMzUuMCAyMzEuMCBMMzA1LjAgMjMxLjAgTDMwNS4wIDI1OS4wIEwyMzUuMCAyNTkuMCB6JyBmaWxsPSd3aGl0ZScgc3Ryb2tlPScjMDAwMDAwJyBzdHJva2UtbGluZWNhcD0ncm91bmQnIHN0cm9rZS1saW5lam9pbj0ncm91bmQnIHN0cm9rZS13aWR0aD0nMS4wJy8+PHBhdGggZD0nTTMyNS4wIDIzMS4wIEwzOTUuMCAyMzEuMCBMMzk1LjAgMjU5LjAgTDMyNS4wIDI1OS4wIHonIGZpbGw9J3doaXRlJyBzdHJva2U9JyMwMDAwMDAnIHN0cm9rZS1saW5lY2FwPSdyb3VuZCcgc3Ryb2tlLWxpbmVqb2luPSdyb3VuZCcgc3Ryb2tlLXdpZHRoPScxLjAnLz48cGF0aCBkPSdNMTc1LjAgOTEuMCBMODUuMCA5MS4wIEw4NS4wIDExOS4wICcgZmlsbD0nbm9uZScgc3Ryb2tlPScjMDAwMDAwJyBzdHJva2UtbGluZWNhcD0ncm91bmQnIHN0cm9rZS1saW5lam9pbj0ncm91bmQnIHN0cm9rZS13aWR0aD0nMS4wJy8+PHBhdGggZD0nTTE3NS4wIDkxLjAgTDI2NS4wIDkxLjAgTDI2NS4wIDExOS4wICcgZmlsbD0nbm9uZScgc3Ryb2tlPScjMDAwMDAwJyBzdHJva2UtbGluZWNhcD0ncm91bmQnIHN0cm9rZS1saW5lam9pbj0ncm91bmQnIHN0cm9rZS13aWR0aD0nMS4wJy8+PHBhdGggZD0nTTI2NS4wIDE4OS4wIEwxNzUuMCAxODkuMCBMMTc1LjAgMjE3LjAgJyBmaWxsPSdub25lJyBzdHJva2U9JyMwMDAwMDAnIHN0cm9rZS1saW5lY2FwPSdyb3VuZCcgc3Ryb2tlLWxpbmVqb2luPSdyb3VuZCcgc3Ryb2tlLXdpZHRoPScxLjAnLz48cGF0aCBkPSdNMjY1LjAgMTg5LjAgTDM1NS4wIDE4OS4wIEwzNTUuMCAyMTcuMCAnIGZpbGw9J25vbmUnIHN0cm9rZT0nIzAwMDAwMCcgc3Ryb2tlLWxpbmVjYXA9J3JvdW5kJyBzdHJva2UtbGluZWpvaW49J3JvdW5kJyBzdHJva2Utd2lkdGg9JzEuMCcvPjxwYXRoIGQ9J004MC4wIDExMi4wIEw4NS4wIDEyNi4wIEw5MC4wIDExMi4wIHonIGZpbGw9JyMwMDAwMDAnIHN0cm9rZT0nbm9uZScgc3Ryb2tlLWxpbmVjYXA9J3JvdW5kJyBzdHJva2UtbGluZWpvaW49J3JvdW5kJyBzdHJva2Utd2lkdGg9JzEuMCcvPjxwYXRoIGQ9J00yNjAuMCAxMTIuMCBMMjY1LjAgMTI2LjAgTDI3MC4wIDExMi4wIHonIGZpbGw9JyMwMDAwMDAnIHN0cm9rZT0nbm9uZScgc3Ryb2tlLWxpbmVjYXA9J3JvdW5kJyBzdHJva2UtbGluZWpvaW49J3JvdW5kJyBzdHJva2Utd2lkdGg9JzEuMCcvPjxwYXRoIGQ9J004MC4wIDIxMC4wIEw4NS4wIDIyNC4wIEw5MC4wIDIxMC4wIHonIGZpbGw9JyMwMDAwMDAnIHN0cm9rZT0nbm9uZScgc3Ryb2tlLWxpbmVjYXA9J3JvdW5kJyBzdHJva2UtbGluZWpvaW49J3JvdW5kJyBzdHJva2Utd2lkdGg9JzEuMCcvPjxwYXRoIGQ9J00xNzAuMCAyMTAuMCBMMTc1LjAgMjI0LjAgTDE4MC4wIDIxMC4wIHonIGZpbGw9JyMwMDAwMDAnIHN0cm9rZT0nbm9uZScgc3Ryb2tlLWxpbmVjYXA9J3JvdW5kJyBzdHJva2UtbGluZWpvaW49J3JvdW5kJyBzdHJva2Utd2lkdGg9JzEuMCcvPjxwYXRoIGQ9J00yNzAuMCAyMTAuMCBMMjc1LjAgMjI0LjAgTDI4MC4wIDIxMC4wIHonIGZpbGw9JyMwMDAwMDAnIHN0cm9rZT0nbm9uZScgc3Ryb2tlLWxpbmVjYXA9J3JvdW5kJyBzdHJva2UtbGluZWpvaW49J3JvdW5kJyBzdHJva2Utd2lkdGg9JzEuMCcvPjxwYXRoIGQ9J00zNTAuMCAyMTAuMCBMMzU1LjAgMjI0LjAgTDM2MC4wIDIxMC4wIHonIGZpbGw9JyMwMDAwMDAnIHN0cm9rZT0nbm9uZScgc3Ryb2tlLWxpbmVjYXA9J3JvdW5kJyBzdHJva2UtbGluZWpvaW49J3JvdW5kJyBzdHJva2Utd2lkdGg9JzEuMCcvPjxwYXRoIGQ9J00yNzUuMCAxOTYuMCBMMjc1LjAgMjE3LjAgJyBmaWxsPSdub25lJyBzdHJva2U9JyMwMDAwMDAnIHN0cm9rZS1saW5lY2FwPSdyb3VuZCcgc3Ryb2tlLWxpbmVqb2luPSdyb3VuZCcgc3Ryb2tlLXdpZHRoPScxLjAnLz48cGF0aCBkPSdNMTc1LjAgNjMuMCBMMTc1LjAgOTEuMCAnIGZpbGw9J25vbmUnIHN0cm9rZT0nIzAwMDAwMCcgc3Ryb2tlLWxpbmVjYXA9J3JvdW5kJyBzdHJva2UtbGluZWpvaW49J3JvdW5kJyBzdHJva2Utd2lkdGg9JzEuMCcvPjxwYXRoIGQ9J004NS4wIDE2MS4wIEw4NS4wIDIxNy4wICcgZmlsbD0nbm9uZScgc3Ryb2tlPScjMDAwMDAwJyBzdHJva2UtbGluZWNhcD0ncm91bmQnIHN0cm9rZS1saW5lam9pbj0ncm91bmQnIHN0cm9rZS13aWR0aD0nMS4wJy8+PHBhdGggZD0nTTI2NS4wIDE2MS4wIEwyNjUuMCAxODkuMCAnIGZpbGw9J25vbmUnIHN0cm9rZT0nIzAwMDAwMCcgc3Ryb2tlLWxpbmVjYXA9J3JvdW5kJyBzdHJva2UtbGluZWpvaW49J3JvdW5kJyBzdHJva2Utd2lkdGg9JzEuMCcvPjx0ZXh0IGZpbGw9JyMwMDAwMDAnIGZvbnQtZmFtaWx5PSdzYW5zLXNlcmlmJyBmb250LXNpemU9JzE1JyBzdHJva2U9J25vbmUnIHg9JzEzMycgeT0nNTQnPjwhW0NEQVRBW1BvbnlyYWNlcl1dPjwvdGV4dD48dGV4dCBmaWxsPScjMDAwMDAwJyBmb250LWZhbWlseT0nc2Fucy1zZXJpZicgZm9udC1zaXplPScxMycgc3Ryb2tlPSdub25lJyB4PSc2MCcgeT0nMTUyJz48IVtDREFUQVtNZW51XV0+PC90ZXh0Pjx0ZXh0IGZpbGw9JyMwMDAwMDAnIGZvbnQtZmFtaWx5PSdzYW5zLXNlcmlmJyBmb250LXNpemU9JzE1JyBzdHJva2U9J25vbmUnIHg9JzI0MCcgeT0nMTUyJz48IVtDREFUQVtSYWNlXV0+PC90ZXh0Pjx0ZXh0IGZpbGw9JyMwMDAwMDAnIGZvbnQtZmFtaWx5PSdzYW5zLXNlcmlmJyBmb250LXNpemU9JzE1JyBzdHJva2U9J25vbmUnIHg9JzYxJyB5PScyNTAnPjwhW0NEQVRBW1VzZXJdXT48L3RleHQ+PHRleHQgZmlsbD0nIzAwMDAwMCcgZm9udC1mYW1pbHk9J3NhbnMtc2VyaWYnIGZvbnQtc2l6ZT0nMTQnIHN0cm9rZT0nbm9uZScgeD0nMTYxJyB5PScyNTAnPjwhW0NEQVRBW1BvbnldXT48L3RleHQ+PHRleHQgZmlsbD0nIzAwMDAwMCcgZm9udC1mYW1pbHk9J3NhbnMtc2VyaWYnIGZvbnQtc2l6ZT0nMTQnIHN0cm9rZT0nbm9uZScgeD0nMjUxJyB5PScyNTAnPjwhW0NEQVRBW1BvbnldXT48L3RleHQ+PHRleHQgZmlsbD0nIzAwMDAwMCcgZm9udC1mYW1pbHk9J3NhbnMtc2VyaWYnIGZvbnQtc2l6ZT0nMTQnIHN0cm9rZT0nbm9uZScgeD0nMzQxJyB5PScyNTAnPjwhW0NEQVRBW1BvbnldXT48L3RleHQ+PC9nPjwvc3ZnPg==" alt="philosophy tree" width="420" height="294">
</div>
</div>
<div class="paragraph">
<p>Comme tu vas écrire des composants tous les jours (de la semaine au moins),
regardons de plus près à quoi ça ressemble.
L&#8217;équipe Angular voulait aussi bénéficier d&#8217;une autre pépite du développement web moderne&#160;:
ES2015+.
Ainsi tu peux écrire tes composants en ES5 (pas cool&#160;!) ou en ES2015+ (super cool&#160;!).
Mais cela ne leur suffisait pas,
ils voulaient utiliser une fonctionnalité qui n&#8217;est pas encore standard&#160;: les décorateurs.
Alors ils ont travaillé étroitement avec les équipes de transpileurs (Traceur et Babel)
et l&#8217;équipe Microsoft du projet TypeScript,
pour nous permettre d&#8217;utiliser des décorateurs dans nos applications Angular.
Quelques décorateurs sont disponibles,
permettant de déclarer facilement un composant et sa vue.
J&#8217;espère que tu es au courant,
parce que je viens de consacrer deux chapitres à ces sujets&#160;!</p>
</div>
<div class="paragraph">
<p>Par exemple, en simplifiant, le composant <code>Race</code> pourrait ressembler à ça&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="javascript">import { Component, inject, signal } from '@angular/core';
import { RaceService } from './services';
import { PonyComponent } from './components';

@Component({
  selector: 'ns-race',
  templateUrl: './race.component.html',
  imports: [PonyComponent]
})
export class RaceComponent {
  private readonly raceService = inject(RaceService);
  readonly race = signal(this.raceService.get());
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Et le template pourrait ressembler à ça&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="html">&lt;div&gt;
  &lt;h2&gt;{{ race().name }}&lt;/h2&gt;
  &lt;div&gt;{{ race().status }}&lt;/div&gt;
  @for (pony of race().ponies; track pony.id) {
    &lt;div&gt;
      &lt;ns-pony [ponyModel]="pony" /&gt;
    &lt;/div&gt;
  }
&lt;/div&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>Le template doit être assez intuitif à comprendre.
C&#8217;est du HTML avec des expressions entre accolades <code>{{ }}</code>,
qui seront évaluées et remplacées par les valeurs correspondantes.
Je ne veux pas aller trop loin pour le moment,
juste te donner un aperçu du code.</p>
</div>
<div class="paragraph">
<p>Un composant est une partie complètement isolée de ton application.
Ton application <em>est</em> un composant comme les autres.</p>
</div>
<div class="paragraph">
<p>Tu regrouperas tes composants au sein d&#8217;une ou plusieurs entités cohérentes,
appelées des modules (des modules Angular, pas des modules ES2015), ou bien tu
apprendras à te passer de ces modules en faisant de tes composants des composants
<em>standalone</em>.</p>
</div>
<div class="paragraph">
<p>Tu pourras aussi prendre des bibliothèques fournies par la communauté,
et les utiliser simplement dans ton application pour bénéficier de leurs fonctionnalités.</p>
</div>
<div class="paragraph">
<p>De telles bibliothèques fournissent des composants d&#8217;IHM,
ou la gestion du glisser-déposer,
ou des validations spécifiques pour tes formulaires,
et tout ce que tu peux imaginer d&#8217;autre.</p>
</div>
<div class="paragraph">
<p>Dans les chapitres suivants,
on explorera quoi mettre en place,
comment construire un petit composant,
ta première application, et la syntaxe des templates.</p>
</div>
<div class="paragraph">
<p>Il y a un autre concept au cœur d&#8217;Angular&#160;:
l&#8217;injection de dépendance (<em>Dependency Injection</em>, DI).
C&#8217;est un pattern très puissant,
et tu seras très rapidement séduit après la lecture du chapitre qui lui sera consacré.
C&#8217;est particulièrement utile pour tester ton application,
et j&#8217;adore faire des tests,
et voir la barre de progression devenir entièrement verte dans mon IDE.
Ça me donne l&#8217;impression de faire du bon boulot.
Il y aura ainsi un chapitre entier consacré à tout tester&#160;:
tes composants, tes services, ton interface&#8230;&#8203;</p>
</div>
<div class="paragraph">
<p>Angular a toujours cette sensation magique de la v1,
où les modifications sont automatiquement détectées par le framework et appliquées au modèle et à la vue.
Mais c&#8217;est fait d&#8217;une façon très différente&#160;:
la détection de changement utilise désormais un concept nommé <code>zones</code>.
On étudiera évidemment tout ça.</p>
</div>
<div class="paragraph">
<p>Angular est aussi un framework complet,
avec plein d&#8217;outils pour faciliter les tâches classiques du développement web.
Construire des formulaires, appeler un serveur HTTP, du routage d&#8217;URL,
interagir avec d&#8217;autres bibliothèques, des animations, tout ce que tu veux&#160;:
c&#8217;est possible&#160;!</p>
</div>
<div class="paragraph">
<p>Voilà, ça fait pas mal de trucs à apprendre&#160;!
Alors commençons par le commencement&#160;:
initialiser une application et construire notre premier composant.</p>
</div>
<div style="page-break-after: always;"></div>
</div>
</div>
<div class="sect1">
<h2 id="zero-to-something">8. Commencer de zéro</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Commençons par créer notre première application Angular et notre premier composant, avec un minimum d&#8217;outillage.</p>
</div>
<div class="sect2">
<h3 id="_node_js_et_npm">8.1. Node.js et NPM</h3>
<div class="paragraph">
<p>Aujourd&#8217;hui, pratiquement tous les outils JavaScript modernes sont faits pour Node.js et NPM.
Tu devras installer Node.js et NPM sur ton système.
Comme la meilleure façon de le faire dépend de ton système d&#8217;exploitation,
le mieux est d&#8217;aller voir le <a href="https://nodejs.org/">site officiel</a>.
Assure-toi d&#8217;avoir une version suffisamment récente de Node.js
(en exécutant <code>node --version</code>).</p>
</div>
</div>
<div class="sect2">
<h3 id="_angular_cli">8.2. Angular CLI</h3>
<div class="paragraph">
<p>Nous <em>pourrions</em> tout installer à la main par nous-même, en commençant avec un projet TypeScript,
puis installer toutes les dépendances nécessaires, etc.</p>
</div>
<div class="paragraph">
<p>Dans un vrai projet, il te faudra probablement mettre en place d&#8217;autres choses comme&#160;:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>des tests pour vérifier que tu n&#8217;as pas introduit de régressions&#160;;</p>
</li>
<li>
<p>peut-être un <em>linter</em> pour vérifier la qualité du code&#160;;</p>
</li>
<li>
<p>peut-être un pré-processeur CSS&#160;;</p>
</li>
<li>
<p>un outil de construction, pour orchestrer différentes tâches (compiler, tester, packager, etc.).</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Mais c&#8217;est un peu pénible à faire soi-même,
surtout quand il y a teeeeeeellement d&#8217;outils à apprendre auparavant.</p>
</div>
<div class="paragraph">
<p>Ces dernières années, plusieurs petits projets ont vu le jour,
tous basés sur le formidable <a href="http://yeoman.io/">Yeoman</a>.
C&#8217;était déjà le cas avec AngularJS&#160;1.x,
et il y a déjà eu plusieurs tentatives avec Angular.</p>
</div>
<div class="paragraph">
<p>Mais cette fois-ci, l&#8217;équipe Google a travaillé sur le sujet,
et ils en ont sorti ceci&#160;: <a href="https://github.com/angular/angular-cli"><code>Angular CLI</code></a>.</p>
</div>
<div class="imageblock text-center">
<div class="content">
<img src="data:image/png;base64,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" alt="Angular CLI">
</div>
</div>
<div class="paragraph">
<p><code>Angular CLI</code> est un outil en ligne de commande pour démarrer rapidement un projet,
déjà configuré avec Webpack comme un outil de construction, des tests, du packaging, etc.</p>
</div>
<div class="paragraph">
<p>Cette idée n&#8217;est pas nouvelle, et est d&#8217;ailleurs piquée d&#8217;un autre framework populaire&#160;:
EmberJS et son <a href="https://cli.emberjs.com/release/"><code>ember-cli</code></a> largement plébiscité.</p>
</div>
<div class="paragraph">
<p>L&#8217;outil est en évolution continue,
avec une équipe Google dédiée travaillant dessus, et l&#8217;améliorant chaque jour.
C&#8217;est maintenant la façon recommandée et le standard <em>de facto</em> pour créer et construire des applications Angular.
Alors essayons cette CLI, et découvrons la tonne de fonctionnalités qu&#8217;elle embarque&#160;!</p>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<i class="fa icon-tip" title="Mise en pratique"></i>
</td>
<td class="content">
<div class="paragraph">
<p>Si tu veux, tu peux suivre notre exercice en ligne
<a href="https://angular-exercises.ninja-squad.com/exercises/0/getting-started">Getting Started</a> <span class="image"><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAIgAAACACAMAAADnN9ENAAACN1BMVEVMaXF1aF51aF51aF51aF51aF51aF51aF51aF51aF51aF51aF51aF51aF6CcGNyZVxFQz9FQz9FQz9FQz+OeGi4kni0j3ZjWlJIRUFFQz9FQz+ghHC6lHqxj3eYfmx5a2BFQz9FQz9FQz9gWFGXfWtnXVROSkVsYVitjHV1aF5FQz9oW1GbfmqqiHFMSENRTEeKeGv0zK/wyKvPqI1TTUZbUkpdVk+finr81LbTrJFFQz9mXFS5nor40LLCnIJ+bmJyZlzSspvsxKdFQz9LSEPauaDLpIm2kXhFQz9XUUvnwKOPeWlgWFCGdmm+mH6khnFFQz9FQz+Xg3TfuJzJrJWGc2VaU01PSUNmWU51YlRdU0qwl4VKRkFrXFCRdWGUd2OmhW63knhiV05qXFGdgGvjvKDbtJhFQz9YUEiIb12OdmRxYVWLdmejg2xTTEWDbFuZe2ayjnWkhW94ZllvY1qWeWRUTUarinN+aVmef2mVe2iTe2pwX1Kohm+piXNaUkqMcl+tinKAbF1eVEpiVkyRdWG1kHeRdWGRdWGHcWCRdWGzj3aRdWGRdWGggWyXe2ePdGNAPDhCQ0NWV1c5OTmRdWF1YlUvLy+/w8PJzc22ubmGbl6RdWGph3FMTU2RdWFsW1CGiIiriHFSSEJaT0aRdWGggWp9aFmRdWE4NTSxjnWRdWGRdWGRdWGRdWGwjHSbfWd/aFhIQTxaTkU7ODVsW055ZFVORT9BPDhyX1GLcV5USUI1MzK6wa3dAAAAr3RSTlMAYIBAj/+/EJ/PcO8wUP/fYIBwMP///////9///////yBQv3D//////9/P////////////////////7///////////EP////+f/////////0Cv////////////////////////////j////////////////////////////////////2D/YP8w7/8g/xDP/////////5////////9w//9Q//////+v//+A//9Av9+PTccICgAABmhJREFUeAHs1YVC5ToUheEgC5cTfB827u4Q3N3d3e8dg3F796nQCe7t2Pme4G+brIqA31dAQEBAQFBwcIj4DYTCEBYuHOERACKjwoXXomGKjhFnwmCJjhUeA+JgiPdJmZAo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" alt="Free" width="18"></span>!
Il est gratuit et fait partie de notre Pack pro,
où tu apprends à construire une application complète étape par étape.
Le premier exercice est consacré à démarrer une application avec Angular CLI,
et va plus loin que ce que nous voyons dans ce chapitre.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Commençons par installer Angular CLI,
et générons une nouvelle application avec la commande <code>ng new</code>.
Si tu veux utiliser exactement la même version de la CLI que nous (<code>19.2.9</code>),
tu peux utiliser <code>npm install -g @angular/cli@19.2.9</code> à la place.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="bash">npm install -g @angular/cli</code></pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="bash">ng new ponyracer --defaults --no-routing --prefix ns</code></pre>
</div>
</div>
<div class="paragraph">
<p>Cela va créer un squelette de projet dans un nouveau dossier nommé <code>ponyracer</code>.
Depuis ce répertoire, tu peux démarrer l&#8217;application avec&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="bash">ng serve</code></pre>
</div>
</div>
<div class="paragraph">
<p>Cela va démarrer un petit serveur HTTP localement, avec rechargement à chaud.
Ainsi, à chaque modification de fichier,
l&#8217;application sera reconstruite
et le navigateur se rechargera automatiquement.</p>
</div>
<div class="paragraph">
<p>Tada&#160;! Tu as ta première application qui tourne&#160;! 🎉</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
Dans sa version 15, Angular a introduit une nouvelle fonctionnalité appelée <em>standalone components</em>,
qui est maintenant le mode par défaut quand on crée une nouvelle application depuis Angular v17.
Jusque-là, les composants devaient être déclarés dans des modules Angular, qui constituent
un concept assez complexe à comprendre et utiliser correctement, surtout quand on démarre avec Angular.
Utiliser des composants <em>standalone</em> nous permet d&#8217;éviter d&#8217;avoir à créer des modules Angular
et rend les choses plus simples, particulièrement pour les débutants.
Les composants <em>standalones</em> se sont rapidement imposés comme la manière standard
d&#8217;écrire des applications Angular, nous avons donc choisi d&#8217;utiliser cette option.
Nous expliquerons néanmoins les modules Angular plus en détails dans un prochain chapitre,
parce que, à défaut d&#8217;en créer vous-mêmes, vous aurez très certainement besoin de comprendre
leur fonctionnement et d&#8217;en utiliser dans votre travail quotidien. Pour l&#8217;instant en tout cas,
nul besoin de trop s&#8217;en préoccuper.
</td>
</tr>
</table>
</div>
</div>
<div class="sect2">
<h3 id="_structure_de_lapplication">8.3. Structure de l&#8217;application</h3>
<div class="paragraph">
<p>Plongeons-nous dans le code généré.</p>
</div>
<div class="paragraph">
<p>Tu peux ouvrir le projet dans ton IDE préféré. Tu peux utiliser à peu près ce que tu veux,
mais tu devrais y activer le support de TypeScript pour plus de confort.
Choisis ton favori&#160;: Webstorm, Visual Studio Code&#8230;&#8203;
Ils ont tous un bon support de TypeScript.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
Si ton IDE le supporte,
la complétion de code devrait fonctionner car la dépendance Angular a ses propres fichiers <code>d.ts</code> dans le répertoire <code>node_modules</code>,
et TypeScript est capable de le détecter.
Tu peux même naviguer vers les définitions de type si tu le souhaites.
TypeScript apporte sa vérification de types,
donc tu verras les erreurs dès que tu les tapes.
Comme nous utilisons des <em>source maps</em>,
tu peux voir le code TypeScript directement dans ton navigateur,
et même débugger ton application en positionnant des points d&#8217;arrêt directement dedans.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Tu devrais voir tout un tas de fichiers de configuration dans le répertoire racine&#160;:
bienvenue dans le JavaScript Moderne&#160;!</p>
</div>
<div class="paragraph">
<p>Le premier que tu reconnais peut-être est le fichier <code>package.json</code>&#160;:
C&#8217;est là que sont définies les dépendances de l&#8217;application.
Tu peux regarder à l&#8217;intérieur,
il devrait contenir les dépendances suivantes (entre autres)&#160;:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>les différents packages <code>@angular</code>.</p>
</li>
<li>
<p><code>rxjs</code>, une bibliothèque vraiment cool pour la programmation réactive. On consacrera un chapitre entier à ce sujet,
et à <a href="https://github.com/ReactiveX/RxJS">RxJS</a> en particulier.</p>
</li>
<li>
<p><code>zone.js</code>, qui assure la plomberie pour détecter les changements (on y reviendra aussi plus tard).</p>
</li>
<li>
<p>quelques dépendances pour développer l&#8217;application, comme la CLI, TypeScript, des bibliothèques de tests, des <em>typings</em>&#8230;&#8203;</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>TypeScript lui-même a un fichier de configuration <code>tsconfig.json</code>
(et un autre appelé <code>tsconfig.app.json</code>),
qui stocke les options de compilation.
Comme on l&#8217;a vu dans les chapitres précédents,
on va utiliser TypeScript avec des décorateurs (d&#8217;où les deux options dont le nom contient <em>decorator</em>).
L&#8217;option <code>sourceMap</code> permet de générer les <em>source maps</em> ("dictionnaires de code source"),
c&#8217;est-à-dire des fichiers assurant le lien entre le code JavaScript généré et le code TypeScript originel.
Ces <em>source maps</em> sont utilisés par le navigateur pour te permettre de débugger le code JavaScript qu&#8217;il exécute
en parcourant le code TypeScript originel que tu as écrit.</p>
</div>
<div class="paragraph">
<p>Les projets TypeScript sont fréquemment utilisés avec ESLint
(qu&#8217;il faut ajouter à un nouveau projet, comme on le montre dans l&#8217;exercice 0 du Pack Pro),
un <em>linter</em>, pratique pour vérifier si ton code suit un ensemble de bonnes pratiques.
ESLint a ses propres options, stockées dans <code>.eslintrc.json</code>,
où tu peux ajouter/supprimer certaines règles.</p>
</div>
<div class="paragraph">
<p>Angular CLI a lui-même son fichier de configuration <code>angular.json</code> si tu veux changer quelques-unes des options par défaut.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
L&#8217;ebook utilise Angular version <code>19.2.8</code> pour les exemples.
Angular CLI va probablement installer la version la plus récente, qui peut ne pas être exactement la même.
Pour utiliser la même version que nous,
tu peux remplacer la version dans le <code>package.json</code> par <code>19.2.8</code> pour chacun des packages Angular.
Cela peut t&#8217;épargner quelques maux de tête&#160;!
Ou, encore mieux, suis notre exercice en ligne gratuit
<a href="https://angular-exercises.ninja-squad.com/exercises/0/getting-started">Getting Started</a> <span class="image"><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAIgAAACACAMAAADnN9ENAAACN1BMVEVMaXF1aF51aF51aF51aF51aF51aF51aF51aF51aF51aF51aF51aF51aF6CcGNyZVxFQz9FQz9FQz9FQz+OeGi4kni0j3ZjWlJIRUFFQz9FQz+ghHC6lHqxj3eYfmx5a2BFQz9FQz9FQz9gWFGXfWtnXVROSkVsYVitjHV1aF5FQz9oW1GbfmqqiHFMSENRTEeKeGv0zK/wyKvPqI1TTUZbUkpdVk+finr81LbTrJFFQz9mXFS5nor40LLCnIJ+bmJyZlzSspvsxKdFQz9LSEPauaDLpIm2kXhFQz9XUUvnwKOPeWlgWFCGdmm+mH6khnFFQz9FQz+Xg3TfuJzJrJWGc2VaU01PSUNmWU51YlRdU0qwl4VKRkFrXFCRdWGUd2OmhW63knhiV05qXFGdgGvjvKDbtJhFQz9YUEiIb12OdmRxYVWLdmejg2xTTEWDbFuZe2ayjnWkhW94ZllvY1qWeWRUTUarinN+aVmef2mVe2iTe2pwX1Kohm+piXNaUkqMcl+tinKAbF1eVEpiVkyRdWG1kHeRdWGRdWGHcWCRdWGzj3aRdWGRdWGggWyXe2ePdGNAPDhCQ0NWV1c5OTmRdWF1YlUvLy+/w8PJzc22ubmGbl6RdWGph3FMTU2RdWFsW1CGiIiriHFSSEJaT0aRdWGggWp9aFmRdWE4NTSxjnWRdWGRdWGRdWGRdWGwjHSbfWd/aFhIQTxaTkU7ODVsW055ZFVORT9BPDhyX1GLcV5USUI1MzK6wa3dAAAAr3RSTlMAYIBAj/+/EJ/PcO8wUP/fYIBwMP///////9///////yBQv3D//////9/P////////////////////7///////////EP////+f/////////0Cv////////////////////////////j////////////////////////////////////2D/YP8w7/8g/xDP/////////5////////9w//9Q//////+v//+A//9Av9+PTccICgAABmhJREFUeAHs1YVC5ToUheEgC5cTfB827u4Q3N3d3e8dg3F796nQCe7t2Pme4G+brIqA31dAQEBAQFBwcIj4DYTCEBYuHOERACKjwoXXomGKjhFnwmCJjhUeA+JgiPdJmZAo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" alt="Free" width="18"></span>!
qui est toujours à jour et à l&#8217;épreuve du feu&#160;!
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Maintenant que nous avons parcouru la configuration, regardons le code applicatif.</p>
</div>
</div>
<div class="sect2">
<h3 id="_notre_premier_composant_standalone">8.4. Notre premier composant <em>standalone</em></h3>
<div class="paragraph">
<p>Comme on l&#8217;a vu dans le chapitre précédent, un composant est la combinaison d&#8217;une vue
(le template) et de logique (notre classe TS).
La CLI a d&#8217;ores et déjà créé un composant pour nous <code>src/app/app.component.ts</code>.
Jetons-y un œil&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="javascript">import { Component } from '@angular/core';

@Component({
  selector: 'ns-root',
  templateUrl: './app.component.html',
  styleUrl: './app.component.css'
})
export class AppComponent {
  title = 'ponyracer';
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Notre application elle-même est un simple composant.
Pour l&#8217;indiquer à Angular,
on utilise le décorateur <code>@Component</code>.
Et pour pouvoir l&#8217;utiliser, il nous faut l&#8217;importer comme tu peux le voir en haut du fichier.</p>
</div>
<div class="paragraph">
<p>Quand tu écris de nouveaux composants,
n&#8217;oublie pas d&#8217;importer ce décorateur <code>Component</code>.
Tu l&#8217;oublieras peut-être au début,
mais tu t&#8217;y feras vite, parce que le compilateur ne va cesser de t&#8217;insulter&#160;! ;)</p>
</div>
<div class="paragraph">
<p>Tu verras que l&#8217;essentiel de nos besoins se situe dans le module <code>@angular/core</code>,
mais ce n&#8217;est pas toujours le cas.
Par exemple, quand on fera du HTTP, on utilisera des imports de <code>@angular/common/http</code>,
ou quand on utilisera le routeur, on importera depuis <code>@angular/router</code>, etc.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="javascript">import { Component } from '@angular/core';

@Component({
})
export class AppComponent {
  title = 'ponyracer';
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Le décorateur <code>@Component</code> attend un objet de configuration.
On verra plus tard en détails ce qu&#8217;on peut y configurer,
mais pour le moment commençons par expliquer la propriété <code>selector</code>.
Elle indique à Angular ce qu&#8217;il faudra chercher dans nos pages HTML.
À chaque fois que Angular trouve un élément dans notre HTML
qui correspond au sélecteur défini dans notre composant,
Angular crée une instance de ce composant,
et remplace le contenu de l&#8217;élément par le template de notre composant.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="javascript">import { Component } from '@angular/core';

@Component({
  selector: 'ns-root',
})
export class AppComponent {
  title = 'ponyracer';
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Donc ici, chaque fois que notre HTML contiendra un élément <code>&lt;ns-root /&gt;</code>,
Angular créera une nouvelle instance de notre classe <code>AppComponent</code>.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
Il y a une convention de nommage clairement établie,
et appliquée par Angular CLI.
Les classes de composant se terminent par <code>Component</code>,
et sont définies dans des fichiers dont le nom se terminent en <code>.component.ts</code>.
Angular recommande aussi d&#8217;utiliser un préfixe dans les sélecteurs des composants,
pour éviter un conflit de nom avec des composants externes.
Par exemple, comme notre société se nomme <strong>N</strong>inja <strong>S</strong>quad,
on a choisi comme préfixe <code>ns</code>.
Notre composant poney aura donc comme sélecteur <code>ns-pony</code>.
Tu peux configurer Angular CLI pour qu&#8217;il ajoute un préfixe automatiquement à chaque composant généré.
Si tu te rappelles bien, lorsqu&#8217;on a créé le projet avec <code>ng new</code>, on a passé l&#8217;option
<code>--prefix ns</code>. C&#8217;est ce que cette option permet&#160;: elle configure le projet afin que les composants
soient générés avec le préfixe <code>ns</code>.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Un composant doit aussi avoir un template.
On peut avoir un template <em>inline</em> (directement dans le décorateur)
ou dans un autre fichier comme le fait la CLI&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="javascript">import { Component } from '@angular/core';

@Component({
  selector: 'ns-root',
  templateUrl: './app.component.html',
  styleUrl: './app.component.css'
})
export class AppComponent {
  title = 'ponyracer';
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Le HTML correspondant est défini dans <code>app.component.html</code>,
avec tout un tas d&#8217;éléments statiques,
à l&#8217;exception du premier <code>h1</code>&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="html">&lt;h1&gt;Hello, {{ title }}&lt;/h1&gt;
&lt;p&gt;Congratulations! Your app is running. 🎉&lt;/p&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>Enfin, tu peux voir dans le code généré que le composant a une option supplémentaire <code>imports</code>&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="javascript">import { Component } from '@angular/core';

@Component({
  selector: 'ns-root',
  imports: [],
  templateUrl: './app.component.html',
  styleUrl: './app.component.css'
})
export class AppComponent {
  title = 'ponyracer';
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Notre composant est <em>standalone</em> (la propriété <code>standalone: true</code> est par défaut depuis Angular&#160;v19).
Cela signifie que nous n&#8217;aurons pas besoin de le déclarer dans un module Angular pour pouvoir l&#8217;utiliser.</p>
</div>
<div class="paragraph">
<p>La propriété <code>imports: []</code> n&#8217;est pas toujours nécessaire. Son rôle est de donner à Angular
la liste des autres composants, directives et pipes qui peuvent être utilisés à l&#8217;intérieur du template
de notre composant. La plupart des composants que nous créons utilisent des pipes et des directives
fournies par Angular. Ces pipes et directives communément utilisés sont déclarés dans le module Angular <code>CommonModule</code>.
Utiliser <code>imports: [CommonModule]</code> dans la configuration rend ainsi possible l&#8217;utilisation de tous ces pipes
et directives de <code>CommonModule</code> dans le template de notre composant,
ou vous pouvez seulement importer ceux qui sont nécessaires.</p>
</div>
<div class="paragraph">
<p>Nous avons expliqué le principe des modules ES2015+ et TS dans les premiers chapitres, qui permettent de
définir des imports et des exports.
Le compilateur TypeScript, lorsqu&#8217;il voit une interface <code>Race</code> utilisée dans le code source d&#8217;un fichier TypeScript,
doit savoir où trouver la définition de cette interface <code>Race</code>. C&#8217;est la raison pour laquelle on doit l&#8217;importer.</p>
</div>
<div class="paragraph">
<p>Et bien la propriété <code>imports</code> du décorateur <code>@Component</code> joue un rôle similaire&#160;: si Angular rencontrait
une balise <code>&lt;ns-race&gt;</code> dans le template de <code>AppComponent</code>, il faudrait qu&#8217;il sache où et comment est défini
le composant correspondant, <code>RaceComponent</code>. Pour lui indiquer où trouver la définition du composant, nous
devons ajouter <code>RaceComponent</code> aux imports du décorateur de <code>AppComponent</code>.</p>
</div>
</div>
<div class="sect2">
<h3 id="_démarrer_lapplication">8.5. Démarrer l&#8217;application</h3>
<div class="paragraph">
<p>Enfin, on doit démarrer l&#8217;application, avec la fonction <code>bootstrapApplication</code>.
Angular CLI génère par défaut un fichier séparé contenant cette logique de démarrage&#160;: <code>main.ts</code>.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="javascript">import { bootstrapApplication } from '@angular/platform-browser';
import { appConfig } from './app/app.config';
import { AppComponent } from './app/app.component';

bootstrapApplication(AppComponent, appConfig)
  .catch((err) =&gt; console.error(err));</code></pre>
</div>
</div>
<div class="paragraph">
<p>Comme tu peux le voir, elle prend en argument le composant racine de l&#8217;application&#160;: <code>AppComponent</code>.</p>
</div>
<div class="paragraph">
<p>Youpi&#160;! Mais attends voir. On doit bien servir un fichier HTML à nos utilisateurs, non&#160;?</p>
</div>
<div class="paragraph">
<p>La CLI a créé un fichier <code>index.html</code> pour nous,
qui est la seule page de notre application (d&#8217;où le nom <em>SPA</em>, <em>single page application</em>).
Tu te demandes peut-être comment cela peut fonctionner,
car il ne contient aucun élément <code>script</code>.</p>
</div>
<div class="paragraph">
<p>Quand on lance <code>ng serve</code>, la CLI appelle le compilateur TypeScript.
Le compilateur génère des fichiers JavaScript.
La CLI va alors les assembler (<em>bundle</em>) et ajouter les éléments <code>script</code> nécessaires au fichier <code>index.html</code>
(en utilisant pour cela <a href="https://vite.dev/">Vite</a>).</p>
</div>
<div class="paragraph">
<p>Tu devrais maintenant avoir une meilleure compréhension
des différentes parties de cette première application Angular.
Elle n&#8217;est pas encore réellement dynamique,
et on aurait pu faire la même chose en une seconde dans une page HTML statique,
je te l&#8217;accorde.
Alors, jetons-nous sur les chapitres suivants, et apprenons tout
des signaux et du système de templates.</p>
</div>
<div style="page-break-after: always;"></div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="signals-basics">9. Les signaux&#160;: les briques de base de l&#8217;état de l&#8217;application</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Les applications web traditionnelles utilisent JavaScript pour modifier ce que la page HTML affiche en modifiant le DOM.</p>
</div>
<div class="paragraph">
<p>Une application Angular fait la même chose, mais le framework est conçu pour qu&#8217;on n&#8217;ait presque
jamais besoin d&#8217;interroger ou de modifier le DOM dans notre code.
Au lieu de cela, on écrit des <em>templates</em> HTML qui affichent des données contenues dans des propriétés de composants.
La magie d&#8217;Angular réside dans le fait que modifier les données
dans les composants suffit à mettre à jour le DOM.
Angular détecte les changements et applique les modifications nécessaires au DOM.</p>
</div>
<div class="paragraph">
<p>Ce mécanisme est appelé <em>Détection de Changements</em> (<em>Change Detection</em>).
Nous examinerons comment il fonctionne en détails plus tard.</p>
</div>
<div class="paragraph">
<p>Angular a toujours permis aux développeurs d&#8217;utiliser de bons vieux objets et tableaux JavaScript
pour stocker les données que le template affiche.
Angular est capable de détecter les modifications
et les remplacements effectués sur ces bons vieux objets JavaScript.
Ce mécanisme, en revanche, est assez brutal.
Il a un coût non négligeable en termes de performances,
et comporte plusieurs inconvénients.</p>
</div>
<div class="paragraph">
<p>Depuis Angular 16, une révolution a démarré.
Tout en supportant toujours ce mécanisme,
Angular promeut maintenant un nouveau moyen de gérer l&#8217;état de l&#8217;application.
Ce nouveau moyen élimine les inconvénients de l&#8217;approche brutale actuelle.
Il rend la détection de changements plus efficace.
Mais il impose aux développeurs d&#8217;utiliser des objets particuliers pour stocker l&#8217;état de leur application&#160;: des <strong>signaux</strong>.</p>
</div>
<div class="sect2">
<h3 id="_quest_ce_quun_signal">9.1. Qu&#8217;est-ce qu&#8217;un signal&#160;?</h3>
<div class="paragraph">
<p>Un signal est une boîte qui contient toujours une valeur.
On peut obtenir la valeur qui est dans la boîte en <em>lisant</em> le signal.
Et si le signal est <em>writable</em>, on peut placer une autre valeur dans la boîte en <em>écrivant</em> dans le signal.
La valeur dans la boîte peut être n&#8217;importe quoi&#160;: un nombre, une chaîne de caractère, un objet, un tableau, ou même <code>null</code> ou <code>undefined</code>.</p>
</div>
<div class="paragraph">
<p>Ces boîtes ont des super-pouvoirs. Lorsque le template d&#8217;un composant lit un signal pour afficher sa valeur,
Angular sait que ce template dépend de ce signal.
Par conséquent, chaque fois qu&#8217;on place une nouvelle valeur dans le signal,
Angular sait qu&#8217;il doit mettre à jour le DOM généré par ce template.</p>
</div>
<div class="paragraph">
<p>Tel est le principe de ce nouveau mécanisme de détection de changements utilisé par Angular.
Si tous les composants utilisent des signaux pour stocker les données affichées par leur template,
alors le mécanisme "brutal" utilisé jusque-là n&#8217;est plus nécessaire.</p>
</div>
<div class="paragraph">
<p>Cette révolution qui a démarré avec Angular 16 n&#8217;est pas encore terminée.
Mais les fonctionnalités liées aux signaux qui ont été introduites depuis lors
sont à présent suffisamment stables pour pouvoir les utiliser dans nos applications.</p>
</div>
<div class="paragraph">
<p>Ce livre décrira comment utiliser Angular en s&#8217;appuyant sur les signaux.
Nous mentionnerons néanmoins les alternatives qui étaient utilisées auparavant,
parce qu&#8217;il y a de bonnes chances que les applications sur lesquelles tu vas travailler les utilisent toujours.
La façon moderne de coder les composants et la façon <em>"legacy"</em> peuvent coexister
au sein d&#8217;une même application, mais nous te conseillons de ne pas tarder à mettre en œuvre
les nouvelles bonnes pratiques.</p>
</div>
</div>
<div class="sect2">
<h3 id="_créer_lire_et_écrire_un_signal">9.2. Créer, lire et écrire un signal</h3>
<div class="paragraph">
<p>Voyons maintenant comment on peut créer un signal <em>writable</em>, lire sa valeur, et la modifier.
Nous parlerons des autres types de signaux et de leurs autres fonctionnalités dans les chapitres ultérieurs
du livre, au moment où nous en aurons besoin.</p>
</div>
<div class="paragraph">
<p>Pour créer un signal <em>writable</em>, il faut appeler la fonction <code>signal()</code> (importée depuis <code>@angular/core</code>)
avec la valeur initiale que le signal doit contenir.
Tous les exemples qui suivent créent une instance de <code>WritableSignal</code> qui, comme tu le constates,
est un type générique spécifiant le type de la valeur que peut contenir le signal.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="typescript">// this signal can contain a number, and initially contains 42
const count = signal(42);

// this signal can contain a PonyModel, and initially contains Rainbow Dash
const rainbowDash = signal&lt;PonyModel&gt;({
  name: 'Rainbow Dash',
  color: 'blue'
});

// this signal can contain a PonyModel, and initially contains Pinkie Pie
const pinkiePie: WritableSignal&lt;PonyModel&gt; = signal({
  name: 'Pinkie Pie',
  color: 'red'
});

// this signal can contain a PonyModel or undefined, and initially contains undefined
const unknownPony = signal&lt;PonyModel | undefined&gt;(undefined);</code></pre>
</div>
</div>
<div class="paragraph">
<p>Un signal est à la fois un objet et une fonction.
Pour obtenir la valeur contenue dans le signal, on <em>appelle</em> le signal.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="typescript">// let's read the value of the rainbowDash signal
const value: PonyModel = rainbowDash();
// and print it in the console as JSON
console.log(JSON.stringify(value));</code></pre>
</div>
</div>
<div class="paragraph">
<p>Pour placer une nouvelle valeur dans le signal (et donc notifier Angular que ce signal a changé),
on appelle sa méthode <code>set()</code>&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="typescript">rainbowDash.set({
  name: 'Rainbow Dash',
  color: 'yellow'
});</code></pre>
</div>
</div>
<div class="paragraph">
<p>Supposons que tu veuilles seulement changer la couleur de Rainbow Dash.
Tu pourrais être tenté de lire sa valeur, puis de la modifier.
Ou même de la modifier, puis de la replacer dans le signal une nouvelle fois.
C&#8217;est quelque chose qu&#8217;il faut absolument éviter&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="typescript">// ❌ Don't do this!
rainbowDash().color = 'yellow';
// ❌ Don't do this!
const pony = rainbowDash();
pony.color = 'yellow';
rainbowDash.set(pony);</code></pre>
</div>
</div>
<div class="paragraph">
<p>Si tu <em>mutes</em> un objet contenu dans un signal, ou que tu écris dans le signal l&#8217;objet qu&#8217;il contient déjà,
Angular considérera que la valeur du signal n&#8217;a pas changé, ce qui causera un bug.</p>
</div>
<div class="paragraph">
<p>Au lieu de cela, traite le contenu du signal comme une valeur immuable, et remplace l&#8217;ancienne valeur
par une nouvelle. La méthode <code>update()</code>, combinée à l&#8217;opérateur de déstructuration, peut être
utilisée pour remplacer la valeur de signal par une autre&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="typescript">// ✅ Do this!
rainbowDash.update(pony =&gt; ({ ...pony, color: 'yellow' }));</code></pre>
</div>
</div>
<div class="paragraph">
<p>Mais c&#8217;est juste un autre moyen d&#8217;écrire&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="typescript">rainbowDash.set({ ...rainbowDash(), color: 'yellow' });</code></pre>
</div>
</div>
<div class="paragraph">
<p>Découvrons à présent comment on peut afficher l&#8217;état de nos composants dans leur template&#160;!</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
Angular n&#8217;est pas le premier framework à utiliser des signaux.
Knockout.js, par exemple, utilisait des signaux il y a déjà longtemps.
Plus récemment, Solid.js, Vue et Svelte ont également adopté les signaux
comme les briques de base de leur gestion de l&#8217;état.
Les signaux sont tellement populaires
que les équipes de ces frameworks tentent même de les <a href="https://github.com/tc39/proposal-signals">standardiser</a>
dans le langage JavaScript lui-même&#160;!
</td>
</tr>
</table>
</div>
<div style="page-break-after: always;"></div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="templates">10. La syntaxe des templates</h2>
<div class="sectionbody">
<div class="paragraph">
<p>On a vu qu&#8217;un composant a besoin de sa vue. Pour définir une vue, tu peux
définir un template <em>inline</em> (dans le code du composant), ou dans un fichier
séparé. Tu es probablement familier avec une syntaxe de template, peut-être
même avec celle d&#8217;AngularJS&#160;1.x. Pour simplifier, un template nous permet de
rendre du HTML avec quelques parties dynamiques dépendant de tes données.</p>
</div>
<div class="paragraph">
<p>Angular a sa propre syntaxe de template que nous devons donc apprendre avant
d&#8217;aller plus loin.</p>
</div>
<div class="imageblock text-center">
<div class="content">
<img src="data:image/png;base64,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" alt="Templates">
</div>
</div>
<div class="paragraph">
<p>Prenons un exemple en simplifiant notre premier composant&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="javascript">import { Component } from '@angular/core';

@Component({
  selector: 'ns-root',
  template: '&lt;h1&gt;PonyRacer&lt;/h1&gt;'
})
export class AppComponent {}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Supposons qu&#8217;on veuille afficher des données dynamiques dans notre première
page, par exemple le nombre d&#8217;utilisateurs enregistrés dans notre application.
Plus tard nous verrons comment récupérer des données depuis un serveur, mais
pour le moment ce nombre d&#8217;utilisateurs sera directement hardcodé
dans notre classe&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="javascript">@Component({
  selector: 'ns-root',
  template: '&lt;h1&gt;PonyRacer&lt;/h1&gt;'
})
export class AppComponent {
  readonly numberOfUsers = 146;
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Maintenant, comment doit-on modifier notre template pour afficher cette
variable&#160;? Grâce à l&#8217;interpolation&#160;!</p>
</div>
<div class="sect2">
<h3 id="_interpolation">10.1. Interpolation</h3>
<div class="paragraph">
<p>L&#8217;interpolation est un bien grand mot pour un concept simple.</p>
</div>
<div class="paragraph">
<p>Un exemple rapide&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="javascript">@Component({
  selector: 'ns-root',
  template: `
    &lt;h1&gt;PonyRacer&lt;/h1&gt;
    &lt;h2&gt;{{ numberOfUsers }} users&lt;/h2&gt;
  `
})
export class AppComponent {
  readonly numberOfUsers = 146;
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Nous avons un composant <code>AppComponent</code>, qui sera activé dès qu&#8217;Angular tombera sur
une balise <code>&lt;ns-root&gt;</code>. La classe <code>AppComponent</code> a une propriété,
<code>numberOfUsers</code>. Et le template a été enrichi avec une balise <code>&lt;h2&gt;</code>, utilisant
la fameuse notation avec double-accolades (les "moustaches") pour indiquer que
cette expression doit être évaluée. Ce type de templating est de
l&#8217;interpolation.</p>
</div>
<div class="paragraph">
<p>On devrait maintenant voir dans le navigateur&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="html">&lt;ns-root&gt;
  &lt;h1&gt;PonyRacer&lt;/h1&gt;
  &lt;h2&gt;146 users&lt;/h2&gt;
&lt;/ns-root&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>car <code>{{ numberOfUsers }}</code> a été remplacé par sa valeur.</p>
</div>
<div class="paragraph">
<p>Quand Angular détecte un élément <code>&lt;ns-root&gt;</code> dans une page, il crée une
instance de la classe <code>AppComponent</code>, et cette instance sera le contexte
d&#8217;évaluation des expressions dans le template. Ici la classe <code>AppComponent</code>
affecte <code>146</code> à la propriété <code>numberOfUsers</code>, donc nous voyons '146' affiché à
l&#8217;écran.</p>
</div>
<div class="paragraph">
<p>La magie opère quand la valeur de <code>numberOfUsers</code> est modifiée dans notre
objet, et que la page est alors automatiquement mise à jour&#160;!
Ou plutôt, c&#8217;est ainsi que ça fonctionne maintenant,
avec la détection de changements "brutale" qu&#8217;Angular utilise pour l&#8217;instant.
Mais nous avons vu dans le précédent chapitre qu&#8217;Angular promeut l&#8217;utilisation de signaux
pour l&#8217;aider à détecter les changements de manière plus précise.
Si le nombre d&#8217;utilisateurs est amené à changer au fil du temps,
nous devrions plutôt le stocker dans un signal, et appeler le signal depuis le template&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="javascript">@Component({
  selector: 'ns-root',
  template: `
    &lt;h1&gt;PonyRacer&lt;/h1&gt;
    &lt;h2&gt;{{ numberOfUsers() }} users&lt;/h2&gt;
  `
})
export class AppComponent {
  readonly numberOfUsers = signal(146);
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Il faut cependant se rappeler une chose importante&#160;: si on essaye
d&#8217;afficher une variable qui n&#8217;est pas initialisée, au lieu d&#8217;afficher <code>undefined</code>,
Angular affichera une chaîne vide.
Et de même pour une variable <code>null</code>.</p>
</div>
<div class="paragraph">
<p>Maintenant, au lieu d&#8217;une valeur simple, disons que notre composant a un objet
<code>user</code> plus complexe, décrivant l&#8217;utilisateur courant.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="javascript">@Component({
  selector: 'ns-root',
  template: `
    &lt;h1&gt;PonyRacer&lt;/h1&gt;
    &lt;h2&gt;Welcome {{ user().name }}&lt;/h2&gt;
  `
})
export class AppComponent {
  readonly user = signal({ name: 'Cédric' });
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Comme tu le vois, on peut interpoler des expressions plus complexes, y
compris accéder à des propriétés dans un objet.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="html">&lt;ns-root&gt;
  &lt;h1&gt;PonyRacer&lt;/h1&gt;
  &lt;h2&gt;Welcome Cédric&lt;/h2&gt;
&lt;/ns-root&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>Que se passe-t-il si on a une faute de frappe dans notre template, avec une
propriété qui n&#8217;existe pas dans la classe&#160;?</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="javascript">@Component({
  selector: 'ns-root',
  // typo: users is not user!
  template: `
    &lt;h1&gt;PonyRacer&lt;/h1&gt;
    &lt;h2&gt;Welcome {{ users().name }}&lt;/h2&gt;
  `
})
export class AppComponent {
  readonly user = signal({ name: 'Cédric' });
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>En compilant l&#8217;application, tu auras une erreur, indiquant que cette propriété
n&#8217;existe pas&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="bash">error TS2339: Property 'users' does not exist on type 'AppComponent'</code></pre>
</div>
</div>
<div class="paragraph">
<p>C&#8217;est plutôt cool, parce que tu peux être sûr que tes templates sont corrects.</p>
</div>
<div class="paragraph">
<p>Dernière petite fonctionnalité&#160;: que se passe-t-il si mon objet <code>user</code> est en fait récupéré depuis le serveur,
et donc indéfini dans mon composant au début&#160;?
Que pouvons-nous faire pour éviter les erreurs quand le template est compilé&#160;?</p>
</div>
<div class="paragraph">
<p>Facile&#160;: plutôt que d&#8217;écrire <code>user().name</code>, nous écrirons <code>user()?.name</code>&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="javascript">@Component({
  selector: 'ns-root',
  // the value of the user signal is undefined
  // but the ?. will avoid the error
  template: `
    &lt;h1&gt;PonyRacer&lt;/h1&gt;
    &lt;h2&gt;Welcome {{ user()?.name }}&lt;/h2&gt;
  `
})
export class AppComponent {
  readonly user = signal&lt;{ name: string } | undefined&gt;(undefined);
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Et nous n&#8217;avons plus d&#8217;erreur&#160;!
Le <code>?.</code> est appelé "<em>optional chaining operator</em>" (opérateur de chaînage optionnel).
Il était utilisable dans les expressions Angular avant même qu&#8217;il devienne standard en JavaScript et en TypeScript.</p>
</div>
<div class="paragraph">
<p>Retournons à notre exemple. On affiche désormais un message de bienvenue. Allons
un peu plus loin, et essayons d&#8217;afficher une liste des courses de poneys à
venir.</p>
</div>
<div class="paragraph">
<p>Cela nous amène à écrire notre deuxième composant. Pour le moment, faisons
simple&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="javascript">// in another file, races.component.ts
import { Component } from '@angular/core';

@Component({
  selector: 'ns-races',
  template: `&lt;h2&gt;Races&lt;/h2&gt;`
})
export class RacesComponent {}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Rien d&#8217;extraordinaire&#160;: une simple classe, décorée avec <code>@Component</code> pour
indiquer un <code>selector</code> d&#8217;ancrage et un template
<em>inline</em>.</p>
</div>
<div class="paragraph">
<p>Si on veut maintenant inclure ce composant dans le template de <code>AppComponent</code>,
comment faire&#160;?</p>
</div>
</div>
<div class="sect2">
<h3 id="_utiliser_dautres_composants_dans_nos_templates">10.2. Utiliser d&#8217;autres composants dans nos templates</h3>
<div class="paragraph">
<p>On a notre composant application, <code>AppComponent</code>, où on veut afficher le
composant listant les courses de poneys, <code>RacesComponent</code>.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="javascript">// in app.component.ts
import { Component } from '@angular/core';

@Component({
  selector: 'ns-root',
  // added the RacesComponent component
  template: `
    &lt;h1&gt;PonyRacer&lt;/h1&gt;
    &lt;ns-races /&gt;
  `
})
export class AppComponent {}</code></pre>
</div>
</div>
<div class="paragraph">
<p>On a donc ajouté le composant <code>RacesComponent</code> dans le template, en incluant une
balise dont le nom correspond au <code>selector</code> défini dans le composant.</p>
</div>
<div class="paragraph">
<p>Maaaaais, ça ne fonctionnera pas&#160;: le navigateur n&#8217;affichera pas ce
composant listant les courses.</p>
</div>
<div class="paragraph">
<p>Pourquoi cela&#160;? Angular ne connaît pas encore ce composant <code>RacesComponent</code>.</p>
</div>
<div class="paragraph">
<p>La solution est simple&#160;: il faut ajouter le <code>RacesComponent</code> aux <code>imports</code> du décorateur de <code>AppComponent</code>.
De cette manière, lorsque Angular compilera le template de <code>AppComponent</code>, il recherchera un composant ayant le
sélecteur <code>ns-races</code> parmi la liste des composants importés, il y trouvera le <code>RacesComponent</code>,
et saura que c&#8217;est ce composant qu&#8217;il faut instancier et afficher.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="javascript">import { Component } from '@angular/core';
// do not forget to import the component
import { RacesComponent } from './races.component';

@Component({
  selector: 'ns-root',
  template: `
    &lt;h1&gt;PonyRacer&lt;/h1&gt;
    &lt;ns-races /&gt;
  `,
  // add RacesComponent to the imports of AppComponent
  imports: [RacesComponent]
})
export class AppComponent {}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Note aussi que comme tu passes directement la classe, il te
faudra l&#8217;importer préalablement.</p>
</div>
<div class="paragraph">
<p>Pour importer <code>RacesComponent</code> dans la classe <code>AppComponent</code>, tu dois exporter la
classe <code>RacesComponent</code> dans son fichier source <code>races.component.ts</code> (relis le chapitre
<a href="#modules">modules ES2015</a>
si ce n&#8217;est pas clair). Ainsi <code>RacesComponent</code> va ressembler
à&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="javascript">// in another file, races.component.ts
import { Component } from '@angular/core';

@Component({
  selector: 'ns-races',
  template: `&lt;h2&gt;Races&lt;/h2&gt;`
})
export class RacesComponent {}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Désormais, notre composant listant les courses sera fièrement affiché dans le navigateur&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="html">&lt;ns-root&gt;
  &lt;h1&gt;PonyRacer&lt;/h1&gt;
  &lt;ns-races&gt;
    &lt;h2&gt;Races&lt;/h2&gt;
  &lt;/ns-races&gt;
&lt;/ns-root&gt;</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_binding_de_propriété">10.3. <em>Binding</em> de propriété</h3>
<div class="paragraph">
<p>L&#8217;interpolation n&#8217;est qu&#8217;une des façons d&#8217;avoir des morceaux dynamiques dans nos
templates.</p>
</div>
<div class="paragraph">
<p>En fait, l&#8217;interpolation n&#8217;est qu&#8217;une simplification du concept au cœur du
moteur de template d&#8217;Angular&#160;: le <em>binding</em> de propriété.</p>
</div>
<div class="paragraph">
<p>En Angular, on peut écrire dans toutes les propriétés du DOM via des attributs
spéciaux sur les éléments HTML, entourés de crochets <code>[]</code>. Ça fait bizarre au
premier abord, mais en fait c&#8217;est du HTML valide (et ça m&#8217;a aussi surpris). Un
nom d&#8217;attribut HTML peut commencer par n&#8217;importe quoi, à l&#8217;exception de quelques
caractères comme un guillemet <code>"</code>, une apostrophe <code>'</code>, un slash <code>/</code>, un égal <code>=</code>, un espace&#8230;&#8203;</p>
</div>
<div class="paragraph">
<p>Je mentionne les propriétés du DOM, mais peut-être n&#8217;est-ce pas clair pour toi.
On écrit en général dans des attributs HTML, n&#8217;est-ce pas&#160;? Tout à fait, en
général c&#8217;est ce qu&#8217;on fait. Prenons ce simple morceau d&#8217;HTML&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="html">&lt;input type="text" value="hello"&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>La balise <code>input</code> ci-dessus a deux <em>attributs</em>&#160;: un attribut <code>type</code> et un
attribut <code>value</code>. Quand le navigateur rencontre cette balise, il crée un nœud
correspondant dans le DOM (un HTMLInputElement si on veut être précis), qui a
les <em>propriétés</em> correspondantes <code>type</code> et <code>value</code>. Chaque attribut HTML
standard a une propriété correspondante dans un nœud du DOM. Mais un nœud du DOM
a aussi d&#8217;autres propriétés, qui ne correspondent à aucun attribut HTML. Par
exemple&#160;: <code>childElementCount</code>, <code>innerHTML</code> ou <code>textContent</code>.</p>
</div>
<div class="paragraph">
<p>L&#8217;interpolation que nous utilisions plus haut pour afficher le nom de
l&#8217;utilisateur&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="html">&lt;p&gt;{{ user().name }}&lt;/p&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>est juste du sucre syntaxique pour l&#8217;écriture suivante&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="html">&lt;p [textContent]="user().name"&gt;&lt;/p&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>La syntaxe à base de crochets permet de modifier la propriété <code>textContent</code> du
DOM, et nous lui donnons la valeur <code>user.name</code> qui sera évaluée dans le
contexte du composant courant, comme pour l&#8217;interpolation.</p>
</div>
<div class="paragraph">
<p>Note que l&#8217;analyseur est sensible à la casse, ce qui veut dire que la propriété doit être écrite avec la bonne casse.
<code>textcontent</code> ou <code>TEXTCONTENT</code> ne fonctionneront pas, il faut écrire <code>textContent</code>.</p>
</div>
<div class="paragraph">
<p>Les propriétés du DOM ont un avantage sur les attributs HTML&#160;: leurs valeurs
sont forcément à jour. Dans mon exemple, l'<em>attribut</em> <code>value</code> contiendra
toujours "hello", alors que la <em>propriété</em> <code>value</code> du DOM sera modifiée
dynamiquement par le navigateur, et contiendra ainsi la valeur entrée par
l&#8217;utilisateur dans le champ de saisie.</p>
</div>
<div class="paragraph">
<p>Enfin, les propriétés peuvent avoir des valeurs booléennes, alors que certains
attributs n&#8217;agissent que par leur simple présence ou absence sur la balise HTML.
Par exemple, il existe l&#8217;attribut <code>selected</code> sur la balise <code>&lt;option&gt;</code>&#160;:
quelle que soit la valeur que tu lui donnes, il sélectionnera l&#8217;option, dès qu&#8217;il
y est présent.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="html">&lt;option selected&gt;Rainbow Dash&lt;/option&gt;
&lt;option selected="false"&gt;Rainbow Dash&lt;/option&gt; &lt;!-- still selected --&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>Avec l&#8217;accès aux propriétés que nous offre Angular, tu peux écrire&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="html">&lt;option [selected]="isPonySelected()" value="Rainbow Dash"&gt;Rainbow Dash&lt;/option&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>Et le poney sera sélectionné si <code>isPonySelected</code> retourne <code>true</code>, et ne sera pas
sélectionné s&#8217;il retourne <code>false</code>. Et à chaque fois que la valeur de
<code>isPonySelected</code> changera, la propriété <code>selected</code> sera mise à jour.</p>
</div>
<div class="paragraph">
<p>Tu peux aussi accéder à des propriétés comme l&#8217;attribut <code>color</code> de la
propriété <code>style</code>.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="html">&lt;p [style.color]="foreground()"&gt;Friendship is Magic&lt;/p&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>Si la valeur du signal <code>foreground</code> est modifiée à <code>green</code>, le texte
deviendra vert aussi&#160;!</p>
</div>
<div class="paragraph">
<p>Ainsi Angular utilise les propriétés. Quelles valeurs pouvons-nous leur
donner&#160;? Nous avions déjà vu que l&#8217;interpolation
<code>property="{{ expression }}"</code>&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="html">&lt;ns-pony name="{{ pony().name }}" /&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>est la même chose que <code>[property]="expression"</code> (que l&#8217;on préfère généralement)&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="html">&lt;ns-pony [name]="pony().name" /&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>Si tu veux plutôt afficher 'Pony ' suivi du nom du poney, tu as deux
options&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="html">&lt;ns-pony name="Pony {{ pony().name }}" /&gt;
&lt;ns-pony [name]="'Pony ' + pony().name" /&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>Si ta valeur n&#8217;est pas dynamique, tu peux simplement écrire
<code>property="value"</code>&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="html">&lt;ns-pony name="Rainbow Dash" /&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>Toutes ces notations sont équivalentes.
If faut retenir que si un attribut HTML n&#8217;est pas entre crochets (<code>name="&#8230;&#8203;"</code>),
alors la valeur est une chaîne de caractères.
En revanche, s&#8217;il est entre crochets (<code>[name]="&#8230;&#8203;"</code>), alors la valeur est une expression
évaluée par Angular.</p>
</div>
</div>
<div class="sect2">
<h3 id="_événements">10.4. Événements</h3>
<div class="paragraph">
<p>Si tu développes une application web, tu sais qu&#8217;afficher des données n&#8217;est
qu&#8217;une partie du travail&#160;: il te faut aussi réagir aux interactions de
l&#8217;utilisateur.</p>
</div>
<div class="paragraph">
<p>Pour cela, le navigateur déclenche des événements, que tu peux
écouter&#160;: <code>click</code>, <code>keyup</code>, <code>mousemove</code>, etc.</p>
</div>
<div class="paragraph">
<p>Si on retourne à notre composant <code>RacesComponent</code>, nous aimerions maintenant un bouton
qui affichera les courses de poneys quand il est cliqué.</p>
</div>
<div class="paragraph">
<p>Réagir à un événement peut être fait comme suit&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="html">&lt;button (click)="onButtonClick()"&gt;Click me!&lt;/button&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>Un clic sur le bouton de l&#8217;exemple ci-dessus déclenchera un appel à la méthode
<code>onButtonClick()</code> du composant.</p>
</div>
<div class="paragraph">
<p>Ajoutons ceci à notre composant&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="javascript">@Component({
  selector: 'ns-races',
  template: `
    &lt;h2&gt;Races&lt;/h2&gt;
    &lt;button (click)="refreshRaces()"&gt;Refresh the races list&lt;/button&gt;
    &lt;p&gt;{{ races().length }} races&lt;/p&gt;
  `
})
export class RacesComponent {
  readonly races = signal&lt;Array&lt;RaceModel&gt;&gt;([]);

  refreshRaces(): void {
    this.races.set([{ name: 'London' }, { name: 'Lyon' }]);
  }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Si tu testes ça dans notre navigateur, au départ tu devrais voir '0 races'.
Et après le clic, '0 races' doit devenir '2 races'. Hourra \o/</p>
</div>
<div class="paragraph">
<p>L&#8217;instruction peut être un appel de fonction, mais ça peut être aussi n&#8217;importe
quelle instruction exécutable, ou même une séquence d&#8217;instructions, comme&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="html">&lt;button (click)="firstName.set('Cédric'); lastName.set('Exbrayat')"&gt;
  Click to change name to Cédric Exbrayat
&lt;/button&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>Mais bon je ne te conseille pas de faire ça. Utiliser des méthodes est une
bien meilleure façon d&#8217;encapsuler le comportement. Elles rendront ton code plus
facile à tester et à maintenir, et rendront la vue plus simple.</p>
</div>
<div class="paragraph">
<p>Le truc cool c&#8217;est que ça fonctionne avec les événements standards du DOM, mais
aussi avec tous les événements spécifiques déclenchés par tes composants
Angular, ou par des <em>Web Components</em>. On verra plus tard comment déclencher des
événements spécifiques.</p>
</div>
<div class="paragraph">
<p>Pour le moment, disons que le composant <code>RacesComponent</code> déclenche un événement
spécifique pour indiquer la disponibilité d&#8217;une nouvelle course de poneys.</p>
</div>
<div class="paragraph">
<p>Notre template dans le composant <code>AppComponent</code> ressemblera alors à&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="javascript">@Component({
  selector: 'ns-root',
  template: `
    &lt;h1&gt;PonyRacer&lt;/h1&gt;
    &lt;ns-races (newRaceAvailable)="onNewRace()" /&gt;
  `,
  imports: [RacesComponent]
})
export class AppComponent {
  onNewRace(): void {
    // add a flashy message for the user.
  }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Sans trop d&#8217;effort, on peut imaginer que le composant <code>&lt;ns-races&gt;</code> peut
déclencher un événement spécifique <code>newRaceAvailable</code>, et que quand cet
événement est déclenché, la méthode <code>onNewRace()</code> de notre <code>AppComponent</code> sera
appelée.</p>
</div>
<div class="paragraph">
<p>Angular écoute les événements de l&#8217;élément et ceux de ses enfants,
il va donc aussi réagir sur les événements "bouillonnants" ("bubbling up",
i.e. les événements qui se propagent vers le haut depuis le fond des composants enfants).
Considérons le template suivant&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="html">&lt;div (click)="onButtonClick()"&gt;
  &lt;button&gt;Click me!&lt;/button&gt;
&lt;/div&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>Même si l&#8217;utilisateur clique sur le bouton dans la div,
la méthode <code>onButtonClick()</code> sera appelée, car l&#8217;événement se propage vers le haut.</p>
</div>
<div class="paragraph">
<p>Et tu peux accéder à l&#8217;événement en question depuis la méthode
appelée&#160;! Pour cela, tu dois simplement passer <code>$event</code> à ta
méthode&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="html">&lt;div (click)="onButtonClick($event)"&gt;
  &lt;button&gt;Click me!&lt;/button&gt;
&lt;/div&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>Et ensuite tu peux gérer cet événement dans la classe du composant&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="javascript">onButtonClick(event: Event) {
  console.log(event);
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Par défaut, l&#8217;événement va continuer à "bouillonner", déclenchant
potentiellement d&#8217;autres <em>handlers</em> plus haut dans la hiérarchie de composants.</p>
</div>
<div class="paragraph">
<p>Tu peux agir sur l&#8217;événement pour empêcher ce comportement par défaut, et/ou
annuler la propagation si tu le souhaites&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="javascript">onButtonClick(event: Event) {
  event.preventDefault();
  event.stopPropagation();
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Une autre fonctionnalité sympa réside dans la gestion des événements du clavier:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="javascript">&lt;textarea (keydown.space)="onSpacePress()"&gt;Press space!&lt;/textarea&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>Chaque fois que tu appuies sur la touche <kbd>space</kbd>, la méthode <code>onSpacePress()</code> sera appelée.
Et on peut faire des combos, comme <code>(keydown.alt.space)</code>, etc.</p>
</div>
<div class="paragraph">
<p>Pour conclure cette partie, je voudrais t&#8217;indiquer une différence
fondamentale entre&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="html">&lt;component [property]="doSomething()"&gt;&lt;/component&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>et</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="html">&lt;component (event)="doSomething()"&gt;&lt;/component&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>Dans le premier cas de <em>binding</em> de propriété, la valeur <code>doSomething()</code> est une
expression, et sera évaluée à chaque cycle de détection de changement pour
déterminer si la propriété doit être modifiée.</p>
</div>
<div class="paragraph">
<p>Dans le second cas de <em>binding</em> d&#8217;événement, la valeur <code>doSomething()</code> est une
instruction (<em>statement</em>), et ne sera évaluée <strong>que lorsque l&#8217;événement est
déclenché</strong>.</p>
</div>
<div class="paragraph">
<p>Par définition, ces deux <em>bindings</em> ont des objectifs complètement différents,
et comme tu t&#8217;en doutes, des restrictions d&#8217;usage différentes.</p>
</div>
</div>
<div class="sect2">
<h3 id="_expressions_vs_instructions">10.5. Expressions vs instructions</h3>
<div class="paragraph">
<p>Les expressions et les instructions (<em>statements</em>) présentent des différences.</p>
</div>
<div class="paragraph">
<p>Une expression sera évaluée plusieurs fois, par le mécanisme de détection de
changement. Elle doit ainsi être la plus performante possible. Pour faire
simple, une expression Angular est une version simplifiée d&#8217;une expression
JavaScript.</p>
</div>
<div class="paragraph">
<p>Si tu utilises <code>user.name</code> comme expression, <code>user</code> doit être défini, sinon
Angular va lever une erreur.</p>
</div>
<div class="paragraph">
<p>Une expression doit être unique&#160;: tu ne peux pas en enchaîner plusieurs
séparées par des points-virgules.</p>
</div>
<div class="paragraph">
<p>Une expression ne doit pas avoir d&#8217;effets de bord. Par exemple, une affectation est interdite.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="html">&lt;!-- forbidden, as the expression is an assignment --&gt;
&lt;!-- this will throw an error --&gt;
&lt;component [property]="user = 'Cédric'"&gt;&lt;/component&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>Elle ne doit pas contenir de mot-clés comme <code>if</code>, <code>var</code>, etc.</p>
</div>
<div class="paragraph">
<p>De son côté, une instruction est déclenchée par l&#8217;événement correspondant. Si
tu essayes d&#8217;utiliser une instruction comme <code>race.show()</code> où <code>race</code> serait
<code>undefined</code>, tu auras une erreur. Tu peux enchaîner plusieurs
instructions, séparées par un point-virgule. Une instruction peut avoir des
effets de bord, et doit généralement en avoir&#160;: c&#8217;est l&#8217;effet voulu quand
on réagit à un événement, on veut que des choses se produisent. Une instruction
peut contenir des affectations de variables, et peut contenir des mot-clés.</p>
</div>
</div>
<div class="sect2">
<h3 id="local-variables">10.6. Variables locales</h3>
<div class="paragraph">
<p>Quand j&#8217;explique qu&#8217;Angular va regarder dans l&#8217;instance du composant pour
trouver une variable, ce n&#8217;est pas tout à fait exact. En fait, il va regarder
dans l&#8217;instance du composant et dans les variables locales. Les variables
locales sont des variables que tu peux déclarer dynamiquement dans ton
template avec la notation <code>#</code>.</p>
</div>
<div class="paragraph">
<p>Supposons que tu veuilles afficher la valeur d&#8217;un input&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="html">&lt;input type="text" #name&gt;
{{ name.value }}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Avec la notation <code>#</code>, on crée une variable locale <code>name</code> qui référence l&#8217;objet
<code>HTMLInputElement</code> du DOM. Cette variable locale peut être utilisée n&#8217;importe où
dans le template. Comme <code>HTMLInputElement</code> a une propriété <code>value</code>, on peut l&#8217;afficher
dans une expression interpolée. Je reviendrai sur cet exemple plus tard.</p>
</div>
<div class="paragraph">
<p>Un autre cas d&#8217;usage des variables locales est l&#8217;exécution d&#8217;une
action sur un autre élément.</p>
</div>
<div class="paragraph">
<p>Par exemple, tu peux vouloir donner le focus à un élément quand on clique
sur un bouton. C&#8217;était un peu pénible à réaliser en AngularJS&#160;1.x, il te
fallait créer une directive et tout le tralala.</p>
</div>
<div class="paragraph">
<p>La méthode <code>focus()</code> est standard dans l&#8217;API DOM, et on peut maintenant en
bénéficier. Avec une variable locale en Angular, c&#8217;est super simple&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="html">&lt;input type="text" #name&gt;
&lt;button (click)="name.focus()"&gt;Focus the input&lt;/button&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>Ça peut aussi être utilisé avec un composant spécifique, créé dans notre
application, ou importé d&#8217;un autre projet, ou même un véritable <em>Web
Component</em>&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="html">&lt;google-youtube #player&gt;&lt;/google-youtube&gt;

&lt;button (click)="player.play()"&gt;Play!&lt;/button&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>Ici le bouton peut lancer la lecture de la vidéo sur le composant
<code>&lt;google-youtube&gt;</code>. C&#8217;est bien un
<a href="http://googlewebcomponents.github.io/google-youtube/components/google-youtube/">véritable Web Component</a>
écrit en <a href="https://www.polymer-project.org/1.0/">Polymer</a>&#160;! Ce composant a
une méthode <code>play()</code> qu&#8217;Angular peut appeler quand on clique sur le
bouton&#160;: la classe&#160;!</p>
</div>
<div class="paragraph">
<p>Les variables locales ont quelques cas d&#8217;utilisations spécifiques, et on va
progressivement les découvrir. L&#8217;un d&#8217;entre eux est expliqué dans la section
juste ci-dessous.</p>
</div>
</div>
<div class="sect2">
<h3 id="_if_for_et_switch_avec_la_syntaxe_control_flow">10.7. If, For et Switch avec la syntaxe <em>control flow</em></h3>
<div class="paragraph">
<p>Pour le moment, notre <code>RacesComponent</code> n&#8217;affiche toujours aucune course de poneys :)
La façon "canonique" en Angular serait de créer un autre composant <code>RaceComponent</code>
pour afficher chaque course. On va faire quelque chose de plus simple, et
utiliser une simple liste <code>&lt;ul&gt;&lt;li&gt;</code>.</p>
</div>
<div class="paragraph">
<p>Le <em>binding</em> de propriété et d&#8217;événement est formidable,
mais il ne nous permet pas de modifier la structure du DOM,
comme pour itérer sur une collection et ajouter un nœud par élément.</p>
</div>
<div class="paragraph">
<p>Pour cela, nous allons utiliser des instructions spéciales dans le template,
qui ont été introduites dans Angular v18, sous le nom de <em>Built-in control flow</em>.</p>
</div>
<div class="paragraph">
<p>Auparavant, nous devions utiliser des directives spéciales, appelées directives structurelles,
comme <code>ngIf</code>, <code>ngFor</code>, <code>ngSwitch</code> pour gérer ces cas.
Une directive en Angular est très proche d&#8217;un composant, mais n&#8217;a pas de template.
Elle est utilisée pour ajouter un comportement à un élément.
Les directives structurelles sont un sous-ensemble des directives qui peuvent changer la structure du DOM.
Elles existent toujours, donc tu peux toujours utiliser <code>ngIf</code>, <code>ngFor</code>, <code>ngSwitch</code>, etc. dans tes templates,
mais la syntaxe recommandée est d&#8217;utiliser la nouvelle syntaxe de <em>control flow</em>.
Si tu es intéressé par l&#8217;ancienne méthode, tu peux lire le chapitre sur les directives structurelles plus tard dans ce livre.</p>
</div>
<div class="paragraph">
<p>Voyons comment nous pouvons utiliser la syntaxe de <em>control flow</em>.</p>
</div>
<div class="sect3">
<h4 id="_if">10.7.1. <code>@if</code></h4>
<div class="paragraph">
<p>Disons que nous voulons afficher un titre dans le template uniquement si <code>races</code> n&#8217;a pas d&#8217;élément.
Nous pouvons utiliser l&#8217;instruction <code>@if</code>&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="html">&lt;div&gt;
  @if (races().length === 0) {
    &lt;h2&gt;No races to come&lt;/h2&gt;
  }
&lt;/div&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>Si nous voulons afficher autre chose s&#8217;il y a des courses,
nous pouvons utiliser <code>@else</code>&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="html">&lt;div&gt;
  @if (races().length === 0) {
    &lt;h2&gt;No races to come&lt;/h2&gt;
  } @else {
    &lt;h2&gt;Some races to come&lt;/h2&gt;
  }
&lt;/div&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>Il est aussi possible d&#8217;utiliser <code>@else if</code>&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="html">&lt;div&gt;
  @if (races().length === 0) {
    &lt;h2&gt;No races to come&lt;/h2&gt;
  } @else if (races().length === 1) {
    &lt;h2&gt;Only one race to come&lt;/h2&gt;
  } @else {
    &lt;h2&gt;Some races to come&lt;/h2&gt;
  }
&lt;/div&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>Tu peux aussi donner un alias au résultat de la condition dans une variable locale,
ce qui peut être utile si tu veux l&#8217;utiliser plusieurs fois.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="html">@if (races().length; as raceCount) {
  &lt;h2&gt;{{ raceCount }} races to come&lt;/h2&gt;
  &lt;!-- displays "2 races to come" --&gt;
}</code></pre>
</div>
</div>
<div class="sect4">
<h5 id="_astuce_pour_la_nullabilité_des_signaux">Astuce pour la nullabilité des signaux</h5>
<div class="paragraph">
<p>Les signaux peuvent parfois contenir des valeurs <code>null</code> ou <code>undefined</code>.
C&#8217;est notamment le cas quand ils sont utilisés pour stocker une entité qui sera récupérée depuis un serveur par exemple.
Nous pouvons ainsi avoir un signal <code>race</code> qui contient une course ou <code>undefined</code>&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="typescript">readonly race = signal&lt;RaceModel | undefined&gt;(undefined);</code></pre>
</div>
</div>
<div class="paragraph">
<p>Dans le template, si nous utilisons <code>race().name</code>, nous obtenons une erreur TypeScript
nous indiquant que <code>race()</code> peut être <code>undefined</code>&#160;: logique.</p>
</div>
<div class="paragraph">
<p>Avec une propriété classique qui ne serait pas un signal,
il suffirait de n&#8217;afficher le nom que si la propriété n&#8217;est pas <code>undefined</code>,
grâce à un <code>@if</code>.
Mais ici cela ne suffira pas à faire disparaître l&#8217;erreur de compilation.</p>
</div>
<div class="paragraph">
<p>En effet, comme un signal est une fonction,
TypeScript ne peut pas savoir si la valeur renvoyée est <em>toujours</em> définie à l&#8217;intérieur du <code>if</code>.</p>
</div>
<div class="paragraph">
<p>Dans ce cas-là, il est pratique d&#8217;utiliser un alias afin de stocker la valeur du signal.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="html">@if (race(); as raceValue) {
  &lt;h1&gt;{{ raceValue.name }}&lt;/h1&gt;
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>On peut aussi utiliser <code>@let</code> pour résoudre ce problème. Nous en parlerons dans quelques secondes.</p>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_for">10.7.2. <code>@for</code></h4>
<div class="paragraph">
<p>Travailler avec de vraies données te mènera inévitablement à afficher une liste de quelque chose.
C&#8217;est là que <code>@for</code> est très utile&#160;:
il permet d&#8217;afficher un template pour chaque élément d&#8217;une collection.
Notre <code>RacesComponent</code> contient un champ <code>races</code> qui,
comme tu peux probablement le deviner, est un tableau de courses à afficher.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="typescript">import { Component, signal } from '@angular/core';
import { RaceModel } from './race.model';

@Component({
  selector: 'ns-races',
  templateUrl: './for.component.html'
})
export class RacesComponent {
  readonly races = signal&lt;Array&lt;RaceModel&gt;&gt;([
    { id: 1, name: 'London' },
    { id: 2, name: 'Lyon' }
  ]);
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Le template utilise <code>@for</code> pour répéter la balise <code>li</code> pour chaque élément du tableau <code>races</code>,
et nous avons choisi de nommer l&#8217;élément courant <code>race</code>&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="html">&lt;div&gt;
  &lt;h2&gt;Races&lt;/h2&gt;
  &lt;ul&gt;
    @for (race of races(); track race.id) {
      &lt;li&gt;{{ race.name }}&lt;/li&gt;
    }
  &lt;/ul&gt;
&lt;/div&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>Et nous avons une belle liste, avec une balise <code>li</code> par élément de notre collection&#160;!</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="html">&lt;ul&gt;
  &lt;li&gt;London&lt;/li&gt;
  &lt;li&gt;Lyon&lt;/li&gt;
&lt;/ul&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>Tu noteras que <code>@for</code> nécessite de fournir un paramètre <code>track</code>.
C&#8217;est principalement pour des raisons de performance,
car cela aide Angular à suivre les éléments de la collection et à mettre à jour le DOM uniquement si nécessaire
(on creusera ça dans un chapitre ultérieur).
On utilise généralement un identifiant unique pour chaque élément, comme <code>track race.id</code>,
mais cela peut être l&#8217;élément lui-même (<code>track race</code>) si tu n&#8217;as pas de meilleure option.</p>
</div>
<div class="paragraph">
<p><code>@for</code> peut être utilisé avec <code>@empty</code> pour afficher quelque chose lorsque la collection est vide
(ou <code>null</code> ou `undefined)&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="html">&lt;div&gt;
  &lt;h2&gt;Races&lt;/h2&gt;
  &lt;ul&gt;
    @for (race of races(); track race.id) {
      &lt;li&gt;{{ race.name }}&lt;/li&gt;
    } @empty {
      &lt;li&gt;No races&lt;/li&gt;
    }
  &lt;/ul&gt;
&lt;/div&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p><code>@for</code> expose également quelques variables qui peuvent être utiles&#160;:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>$index</code>, l&#8217;index de l&#8217;élément courant, commençant à zéro</p>
</li>
<li>
<p><code>$first</code>, un booléen qui est vrai si l&#8217;élément est le premier de la collection</p>
</li>
<li>
<p><code>$last</code>, un booléen qui est vrai si l&#8217;élément est le dernier de la collection</p>
</li>
<li>
<p><code>$even</code>, un booléen qui est vrai si l&#8217;élément a un index pair</p>
</li>
<li>
<p><code>$odd</code>, un booléen qui est vrai si l&#8217;élément a un index impair</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Par exemple, tu peux utiliser <code>$even</code> pour ajouter une classe CSS <code>"grey"</code> aux éléments pairs&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="html">&lt;ul&gt;
  @for (race of races(); track race.id) {
    &lt;li [class.grey]="$even"&gt;{{ race.name }}&lt;/li&gt;
  }</code></pre>
</div>
</div>
<div class="paragraph">
<p>Tu peux renommer ces variables dans une variable locale si besoin,
ce qui peut être utile si tu as des boucles imbriquées&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="html">&lt;ul&gt;
  @for (race of races(); track race.id; let isEven = $even) {
    &lt;li [class.grey]="isEven"&gt;{{ race.name }}&lt;/li&gt;
  }</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_switch">10.7.3. <code>@switch</code></h4>
<div class="paragraph">
<p>Comme tu l&#8217;as probablement deviné, cette instruction permet de basculer entre différents templates
en fonction de la valeur d&#8217;une expression.</p>
</div>
<div class="paragraph">
<p>Prenons notre exemple <code>@if/@else if/@else</code> et réécrivons-le en utilisant <code>@switch</code>&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="html">&lt;div&gt;
  @switch (races().length) {
    @case (0) {
      &lt;h2&gt;No races to come&lt;/h2&gt;
    }
    @case (1) {
      &lt;h2&gt;Only one race to come&lt;/h2&gt;
    }
    @default {
      &lt;h2&gt;Races to come&lt;/h2&gt;
    }
  }
&lt;/div&gt;</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_migration_des_directives_structurelles">10.7.4. Migration des directives structurelles</h4>
<div class="paragraph">
<p>Si tu as du code existant utilisant des directives structurelles,
tu peux migrer vers la syntaxe <em>control flow</em> en utilisant une migration automatisée,
en exécutant la commande suivante&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="bash">ng g @angular/core:control-flow</code></pre>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_variable_de_template_avec_let">10.8. Variable de template avec <code>@let</code></h3>
<div class="paragraph">
<p>Angular v18.1 a ajouté une nouvelle fonctionnalité à la syntaxe des templates&#160;: les variables de template.
Il est désormais possible de définir une variable dans le template, en utilisant l&#8217;instruction <code>@let</code>,
sans avoir à la déclarer dans la classe du composant.</p>
</div>
<div class="paragraph">
<p>La syntaxe est simple&#160;: <code>@let variableName = expression;</code>.
Admettons que notre composant a un champ <code>count</code> défini dans sa classe,
on peut alors définir une variable dans le template comme ceci&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="html">@let countPlusTwo = count() + 2;
&lt;p&gt;{{ countPlusTwo }}&lt;/p&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>Cela peut être pratique lorsque tu veux utiliser une valeur à plusieurs endroits dans ton template,
particulièrement si c&#8217;est une expression complexe.
Parfois, tu peux créer un champ dédié dans la classe du composant,
mais parfois, tu ne peux pas, par exemple dans une boucle for&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="html">@for (user of users(); track user.id) {
  &lt;div class="name"&gt;{{ user.lastName }} {{ user.firstName }}&lt;/div&gt;
  &lt;div class="address"&gt;
    &lt;span&gt;{{ user.shippingAddress.default.number }}&amp;nbsp;&lt;/span&gt;
    &lt;span&gt;{{ user.shippingAddress.default.street }}&amp;nbsp;&lt;/span&gt;
    &lt;span&gt;{{ user.shippingAddress.default.zipcode }}&amp;nbsp;&lt;/span&gt;
    &lt;span&gt;{{ user.shippingAddress.default.city }}&lt;/span&gt;
  &lt;/div&gt;
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Cela peut alors être écrit de manière plus élégante en utilisant <code>@let</code>:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="html">@for (user of users(); track user.id) {
  &lt;div class="name"&gt;{{ user.lastName }} {{ user.firstName }}&lt;/div&gt;
  &lt;div class="address"&gt;
    @let address = user.shippingAddress.default;
    &lt;span&gt;{{ address.number }}&amp;nbsp;&lt;/span&gt;
    &lt;span&gt;{{ address.street }}&amp;nbsp;&lt;/span&gt;
    &lt;span&gt;{{ address.zipcode }}&amp;nbsp;&lt;/span&gt;
    &lt;span&gt;{{ address.city }}&lt;/span&gt;
  &lt;/div&gt;
}</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_directives_structurelles">10.9. Directives structurelles</h3>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
Tu peux sauter cette section si tu utilises Angular v18 ou plus récent. Elle est toujours valable, mais la nouvelle syntaxe est recommandée.
Nous avons choisi des exemples similaires pour la syntaxe <em>control flow</em>, pour que tu puisses les comparer.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Les directives structurelles fournies par Angular s&#8217;appuient sur l&#8217;élément <code>&lt;ng-template&gt;</code>,
inspirée de la balise standard <code>template</code>
de la <a href="https://developer.mozilla.org/en-US/docs/Web/HTML/Element/template">specification</a> HTML.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="html">&lt;ng-template&gt;
  &lt;div&gt;Races list&lt;/div&gt;
&lt;/ng-template&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>Ici, nous avons défini un template, affichant une simple <code>&lt;div&gt;</code>.
Seul, il n&#8217;est pas très utile, car le navigateur ne va pas l&#8217;afficher.
Mais si nous ajoutons un élément <code>template</code> dans l&#8217;une de nos vues,
alors Angular pourra utiliser son contenu.
Les directives structurelles ont justement la capacité d&#8217;utiliser ce contenu,
pour l&#8217;afficher ou non, le répéter, etc.</p>
</div>
<div class="paragraph">
<p>Examinons ces fameuses directives&#160;!</p>
</div>
<div class="sect3">
<h4 id="_ngif">10.9.1. NgIf</h4>
<div class="paragraph">
<p>Si nous voulons instancier le template seulement lorsqu&#8217;une condition est réalisée,
alors nous utiliserons la directive <code>ngIf</code>&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="html">&lt;ng-template [ngIf]="races().length &gt; 0"&gt;
  &lt;div&gt;&lt;h2&gt;Races&lt;/h2&gt;&lt;/div&gt;
&lt;/ng-template&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>Le framework propose quelques directives, comme <code>ngIf</code>.
Elles viennent du module dont nous avons discuté un peu plus tôt&#160;: <code>CommonModule</code>.
Si besoin, tu peux aussi définir tes propres directives&#160;; on y reviendra.</p>
</div>
<div class="paragraph">
<p>Ici, le template ne sera instancié que si <code>races</code> a au moins un élément, donc
s&#8217;il existe des courses de poneys. Comme cette syntaxe est un peu longue, il y a
une version raccourcie&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="html">&lt;div *ngIf="races().length &gt; 0"&gt;&lt;h2&gt;Races&lt;/h2&gt;&lt;/div&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>Et tu utiliseras toujours cette version courte.</p>
</div>
<div class="paragraph">
<p>La notation utilise <code>*</code> pour montrer que c&#8217;est une instantiation de template. La
directive <code>ngIf</code> va maintenant prendre en charge l&#8217;affichage ou non de la <code>div</code>
à chaque fois que la valeur de <code>races</code> va changer&#160;: s&#8217;il n&#8217;y a plus de
course, la <code>div</code> va disparaître.</p>
</div>
<div class="paragraph">
<p>Les directives fournies par le framework ne font pas l&#8217;objet d&#8217;un traitement de faveur&#160;:
pour pouvoir les utiliser, un composant standalone doit les importer.
L&#8217;exemple suivant importe explicitement <code>NgIf</code>. Tu pourrais choisir d&#8217;importer
plutôt le <code>CommonModule</code> tout entier&#160;: cela permettrait au template d&#8217;utiliser
toutes les directives et tous les pipes qu&#8217;il fournit.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="javascript">import { Component, signal } from '@angular/core';
import { NgIf } from '@angular/common';
import { RaceModel } from './race.model';

@Component({
  selector: 'ns-races',
  template: `&lt;div *ngIf="races().length &gt; 0"&gt;&lt;h2&gt;Races&lt;/h2&gt;&lt;/div&gt;`,
  imports: [NgIf]
})
export class RacesComponent {
  readonly races = signal&lt;Array&lt;RaceModel&gt;&gt;([]);
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Il existe aussi une possibilité d&#8217;utiliser <code>else</code>&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="javascript">import { Component, signal } from '@angular/core';
import { NgIf } from '@angular/common';
import { RaceModel } from './race.model';

@Component({
  selector: 'ns-races',
  template: `
    &lt;div *ngIf="races().length &gt; 0; else empty"&gt;&lt;h2&gt;Races&lt;/h2&gt;&lt;/div&gt;
    &lt;ng-template #empty&gt;&lt;h2&gt;No races.&lt;/h2&gt;&lt;/ng-template&gt;
  `,
  imports: [NgIf]
})
export class RacesComponent {
  readonly races = signal&lt;Array&lt;RaceModel&gt;&gt;([]);
}</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_ngfor">10.9.2. NgFor</h4>
<div class="paragraph">
<p>Travailler avec de vraies données te conduira indubitablement à afficher une
liste d&#8217;éléments. <code>ngFor</code> est alors très utile&#160;: elle permet d&#8217;instancier un
template par élément d&#8217;une collection. Notre composant <code>RacesComponent</code> possède un
attribut <code>races</code>, qui est, comme tu peux le deviner, un tableau des courses
de poneys disponibles.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="javascript">import { Component, signal } from '@angular/core';
import { CommonModule } from '@angular/common';
import { RaceModel } from './race.model';

@Component({
  selector: 'ns-races',
  template: `
    &lt;div *ngIf="races().length &gt; 0"&gt;
      &lt;h2&gt;Races&lt;/h2&gt;
      &lt;ul&gt;
        &lt;li *ngFor="let race of races()"&gt;{{ race.name }}&lt;/li&gt;
      &lt;/ul&gt;
    &lt;/div&gt;
  `,
  imports: [CommonModule]
})
export class RacesComponent {
  readonly races = signal&lt;Array&lt;RaceModel&gt;&gt;([{ name: 'London' }, { name: 'Lyon' }]);
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Et ainsi nous avons une magnifique liste, avec une balise <code>li</code> par élément de
notre collection&#160;!</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="html">&lt;ul&gt;
  &lt;li&gt;London&lt;/li&gt;
  &lt;li&gt;Lyon&lt;/li&gt;
&lt;/ul&gt;</code></pre>
</div>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
dans l&#8217;exemple ci-dessus, qui utilise à la fois <code>NgIf</code> and <code>NgFor</code>, nous avons choisi d&#8217;importer
<code>CommonModule</code>. Si tu préfères être plus explicite, tu peux à la place ajouter <code>NgIf</code> et <code>NgFor</code> au
tableau <code>imports</code>. C&#8217;est principalement une question de préférence.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p><code>NgFor</code> utilise une syntaxe particulière, dite "microsyntaxe"
(<em>microsyntax</em>).</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="html">&lt;ul&gt;
  &lt;li *ngFor="let race of races()"&gt;{{ race.name }}&lt;/li&gt;
&lt;/ul&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>C&#8217;est aussi possible de déclarer une autre variable locale, associée à l&#8217;indice
de l&#8217;élément courant dans la collection&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="html">&lt;ul&gt;
  &lt;li *ngFor="let race of races(); index as i"&gt;{{ i }} - {{ race.name }}&lt;/li&gt;
&lt;/ul&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>La variable locale <code>i</code> recevra l&#8217;indice de l&#8217;élément courant,
commençant à zéro.</p>
</div>
<div class="paragraph">
<p><code>index</code> est une <strong>variable exportée</strong>.
Certaines directives exportent des variables que l&#8217;on peut affecter à une variable locale
afin de pouvoir les utiliser dans notre template&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="html">&lt;ul&gt;
  &lt;li&gt;0 - London&lt;/li&gt;
  &lt;li&gt;1 - Lyon&lt;/li&gt;
&lt;/ul&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>Il y aussi quelques autres variables exportées qui peuvent être utiles&#160;:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>even</code>, un booléen qui sera vrai si l&#8217;élément a un index pair</p>
</li>
<li>
<p><code>odd</code>, un booléen qui sera vrai si l&#8217;élément a un index impair</p>
</li>
<li>
<p><code>first</code>, un booléen qui sera vrai si l&#8217;élément est le premier de la collection</p>
</li>
<li>
<p><code>last</code>, un booléen qui sera vrai si l&#8217;élément est le dernier de la collection</p>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="_ngswitch">10.9.3. NgSwitch</h4>
<div class="paragraph">
<p>Comme tu peux le deviner par son nom, celle-ci permet de switcher entre
plusieurs templates selon une condition.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="html">&lt;div [ngSwitch]="messageCount()"&gt;
  &lt;p *ngSwitchCase="0"&gt;You have no message&lt;/p&gt;
  &lt;p *ngSwitchCase="1"&gt;You have a message&lt;/p&gt;
  &lt;p *ngSwitchDefault&gt;You have some messages&lt;/p&gt;
&lt;/div&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>Comme tu peux le voir, <code>ngSwitch</code> prend une condition et les <code>*ngSwitchCase</code> attendent les différents cas possibles.
Tu as aussi <code>*ngSwitchDefault</code>, qui sera affiché si aucune des autres possibilités n&#8217;est remplie.</p>
</div>
</div>
<div class="sect3">
<h4 id="_comprendre_les_directives_structurelles_et_leurs_limites">10.9.4. Comprendre les directives structurelles et leurs limites</h4>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
Ce contenu est vraiment avancé, tu peux le sauter si tu veux.
Il s&#8217;adresse à ceux qui veulent comprendre pourquoi la nouvelle syntaxe a été introduite,
et qui ont déjà une bonne compréhension d&#8217;Angular.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>En Angular v18, la syntaxe <em>built-in control flow</em> (<code>@if</code>, <code>@for</code>, <code>@switch</code>)
a été promue comme remplacement des vénérables directives structurelles.</p>
</div>
<div class="paragraph">
<p>Pour comprendre pourquoi cette fonctionnalité a été introduite,
voyons comment les directives structurelles fonctionnent dans Angular.</p>
</div>
<div class="sect4">
<h5 id="_les_directives_structurelles_sous_le_capot">Les directives structurelles sous le capot</h5>
<div class="paragraph">
<p>Les directives structurelles sont des directives qui changent la structure du DOM en ajoutant, supprimant ou manipulant des éléments.
Elles sont faciles à reconnaître dans Angular car elles commencent par un astérisque <code>*</code>.</p>
</div>
<div class="paragraph">
<p>Mais comment fonctionnent-elles <em>vraiment</em>&#160;?</p>
</div>
<div class="paragraph">
<p>Prenons un exemple simple avec les directives <code>ngIf</code> et <code>ngFor</code>&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="html">&lt;h1&gt;Ninja Squad&lt;/h1&gt;
&lt;ul *ngIf="condition()"&gt;
  &lt;li *ngFor="let user of users()"&gt;{{ user.name }}&lt;/li&gt;
&lt;/ul&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>Si tu as lu notre chapitre sur le compilateur Angular,
tu sais que le framework génère du code JavaScript à partir de ce template.
Et peut-être que tu imagines que <code>*ngIf</code> est converti en un <code>if</code> JavaScript
et <code>*ngFor</code> en une boucle <code>for</code> comme ceci&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="javascript">createElement('h1');
if (condition()) {
  createElement('ul');
  for (user of users()) {
    createElement('li');
  }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Mais Angular ne fonctionne pas exactement comme ça&#160;:
le framework décompose le template du composant en "vues".
Une vue est un fragment du template qui a un contenu HTML statique.
Elle peut avoir des attributs et des textes dynamiques, mais les éléments HTML sont stables.</p>
</div>
<div class="paragraph">
<p>Donc notre exemple génère en fait trois vues,
correspondant à trois parties du template&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="html">&lt;h1&gt;Ninja Squad&lt;/h1&gt;
&lt;!-- special comment --&gt;</code></pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="html">&lt;ul&gt;
  &lt;!-- special comment --&gt;
&lt;/ul&gt;</code></pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="html">&lt;li&gt;{{ user.name }}&lt;/li&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>C&#8217;est parce que la syntaxe <code>*</code> est juste du sucre syntaxique
permettant d&#8217;appliquer une directive via un attribut à un élément <code>ng-template</code>.
Donc notre exemple est le même que&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="html">&lt;h1&gt;Ninja Squad&lt;/h1&gt;
&lt;ng-template [ngIf]="condition()"&gt;
  &lt;ul&gt;
    &lt;ng-template ngFor [ngForOf]="users()" let-user&gt;
      &lt;li&gt;{{ user.name }}&lt;/li&gt;
    &lt;/ng-template&gt;
  &lt;/ul&gt;
&lt;/ng-template&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>Ici <code>ngIf</code> et <code>ngFor</code> sont des directives simples.
Chaque <code>ng-template</code> génère ensuite une "vue".
Chaque vue a une structure statique qui ne change jamais.
Mais ces vues doivent être insérées dynamiquement à un moment donné.
Et c&#8217;est là que le <code>&lt;!-- special comment --&gt;</code> entre en jeu.</p>
</div>
<div class="paragraph">
<p>Angular a le concept de <code>ViewContainer</code>.
Un <code>ViewContainer</code> est comme une boîte dans laquelle tu peux insérer/supprimer des vues enfants.
Pour marquer l&#8217;emplacement de ces conteneurs, Angular utilise un commentaire HTML spécial dans le DOM créé.</p>
</div>
<div class="paragraph">
<p>C&#8217;est ce que <code>ngIf</code> fait en réalité sous le capot&#160;:
elle crée un <code>ViewContainer</code>, et ensuite, lorsque la condition donnée en entrée change,
elle insère ou supprime la vue enfant à l&#8217;emplacement du commentaire spécial.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
Ce concept de vue est assez intéressant car il permettra à Angular
de ne mettre à jour que les vues qui consomment un signal à l&#8217;avenir, et pas tout le template d&#8217;un composant&#160;!
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Tu peux d&#8217;ailleurs créer tes propres directives structurelles si tu le souhaites.
Disons que tu veux écrire une directive <code>*customNgIf</code>.
Tu peux créer une directive qui prend une condition en entrée et
s&#8217;injecte un <code>ViewContainerRef</code> (le service qui permet de créer la vue)
et un <code>TemplateRef</code> (le <code>ng-template</code> sur lequel la directive est appliquée).
Ensuite, lorsque la condition change, tu peux insérer ou supprimer la vue.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="typescript">import {
  Directive,
  DoCheck,
  EmbeddedViewRef,
  inject,
  input,
  signal,
  TemplateRef,
  ViewContainerRef
} from '@angular/core';

@Directive({
  // eslint-disable-next-line @angular-eslint/directive-selector
  selector: '[customNgIf]'
})
export class CustomNgIfDirective implements DoCheck {
  /**
   * The container where the view will be inserted
   */
  private readonly vcr = inject(ViewContainerRef);

  /**
   * The template to render
   */
  private readonly tpl = inject&lt;TemplateRef&lt;unknown&gt;&gt;(TemplateRef);

  /**
   * The condition to check
   */
  readonly condition = input.required&lt;boolean&gt;({ alias: 'customNgIf' });

  /**
   * The view created by the directive
   */
  readonly conditionalView = signal&lt;EmbeddedViewRef&lt;unknown&gt; | null&gt;(null);

  /**
   * This method is called every time the change detection runs
   */
  ngDoCheck() {
    // if the condition is true and the view is not created yet
    const conditionalView = this.conditionalView();
    if (this.condition() &amp;&amp; !conditionalView) {
      // create the view and insert it in the container
      this.conditionalView.set(this.vcr.createEmbeddedView(this.tpl));
    } else if (!this.condition() &amp;&amp; conditionalView) {
      // if the condition is false and the view is created
      // destroy the view
      conditionalView.destroy();
      this.conditionalView.set(null);
    }
  }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Cela fonctionne très bien&#160;!
Et comme tu peux le voir, cela permet aux développeurs comme nous de créer des directives structurelles puissantes si nous le souhaitons.
Les directives fournies par Angular ne bénéficient d&#8217;aucun traitement de faveur&#160;: on aurait pu les écrire nous-mêmes.</p>
</div>
<div class="paragraph">
<p>Mais cette approche a quelques inconvénients&#160;:
par exemple, c&#8217;est un peu lourd d&#8217;avoir une alternative <code>else</code> avec <code>*ngIf</code>&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="html">&lt;div *ngIf="condition(); else elseBlock"&gt;If&lt;/div&gt;
&lt;ng-template #elseBlock&gt;&lt;div&gt;Else&lt;/div&gt;&lt;/ng-template&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p><code>elseBlock</code> est un autre <em>input</em> de la directive <code>NgIf</code>,
de type <code>TemplateRef</code>, que la directive affichera si la condition est fausse.
Mais ce n&#8217;est pas très intuitif à utiliser, donc on voit souvent ceci à la place&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="html">&lt;div *ngIf="condition()"&gt;If&lt;/div&gt;
&lt;div *ngIf="!condition()"&gt;Else&lt;/div&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>Les directives structurelles ne sont pas non plus parfaites en termes de vérification des types.
Même si Angular fait un peu de magie (avec des champs spéciaux appelés <code>ngTemplateGuard</code> dans les directives pour aider le compilateur),
certains cas sont trop complexes à gérer.
Par exemple, l&#8217;alternative "else" de <code>*ngIf</code> n&#8217;est pas correctement comprise par le compilateur&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="html">&lt;div *ngIf="!adminUser; else userNotNullBlock"&gt;No user&lt;/div&gt;
&lt;ng-template #userNotNullBlock&gt;
  &lt;div&gt;
    &lt;!-- should compile as adminUser is not null here --&gt;
    &lt;!-- but it doesn't --&gt;
    {{ adminUser.name }}
  &lt;/div&gt;
&lt;/ng-template&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p><code>NgSwitch</code> est encore pire, car il se compose de 3 directives distinctes
<code>NgSwitch</code>, <code>NgSwitchCase</code> et <code>NgSwitchDefault</code>.
Le compilateur n&#8217;a aucune idée si le <code>NgSwitchCase</code> est utilisé dans le bon contexte.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="html">&lt;!-- user.type can be `'user' | 'anonymous'` --&gt;
&lt;ng-container [ngSwitch]="user().type"&gt;
  &lt;div *ngSwitchCase="'user'"&gt;User&lt;/div&gt;
  &lt;!-- compiles even if user.type can't be 'admin' --&gt;
  &lt;div *ngSwitchCase="'admin'"&gt;Admin&lt;/div&gt;
  &lt;div *ngSwitchDefault&gt;Unknown&lt;/div&gt;
&lt;/ng-container&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>Il est également intéressant de noter que la syntaxe <code>*</code> n&#8217;est pas très intuitive pour les débutants.
Donc, pour résumer, les directives structurelles sont puissantes mais ont quelques inconvénients.
Corriger ces inconvénients nécessiterait beaucoup de travail dans le compilateur et le framework.</p>
</div>
<div class="paragraph">
<p>C&#8217;est pourquoi l&#8217;équipe Angular a décidé d&#8217;introduire une nouvelle syntaxe pour écrire les structures de contrôle dans les templates&#160;!</p>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_directives_de_templating">10.10. Directives de templating</h3>
<div class="paragraph">
<p>Angular propose de nombreuses autres directives utiles,
mais qui ne sont pas structurelles.
Nous en utiliserons plusieurs pour écrire des formulaires, par exemple.
Mais deux d&#8217;entre elles sont couramment utilisées pour agir sur les styles CSS des éléments.</p>
</div>
<div class="sect3">
<h4 id="_ngstyle">10.10.1. NgStyle</h4>
<div class="paragraph">
<p>La première est <code>ngStyle</code>.
Nous avons déjà vu que nous pouvions agir sur le style d&#8217;un élément en utilisant&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="html">&lt;p [style.color]="foreground()"&gt;Friendship is Magic&lt;/p&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>Si tu veux changer plusieurs styles en même temps,
tu peux utiliser la directive <code>ngStyle</code>&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="html">&lt;div [ngStyle]="{ fontWeight: fontWeight(), color: color() }"&gt;I've got style&lt;/div&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>Note que la directive attend un objet dont les clés sont les styles à définir.
La clé peut être en <strong>camelCase</strong> (<code>fontWeight</code>) ou en <strong>dash-case</strong> (<code>'font-weight'</code>).</p>
</div>
</div>
<div class="sect3">
<h4 id="_ngclass">10.10.2. NgClass</h4>
<div class="paragraph">
<p>Dans le même esprit, la directive <code>ngClass</code> permet
d&#8217;ajouter ou d&#8217;enlever dynamiquement des classes sur un élément.</p>
</div>
<div class="paragraph">
<p>Comme pour le style, on peut soit définir une classe avec le binding de propriété&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="html">&lt;div [class.awesome-div]="isAnAwesomeDiv()"&gt;I've got style&lt;/div&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>Ou plusieurs&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="html">&lt;div [class.awesome-div]="isAnAwesomeDiv()" [class.wonderful-div]="isAWonderfulDiv()"&gt;I've got style&lt;/div&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>Tu peux également utiliser <code>ngClass</code>&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="html">&lt;div [ngClass]="{ 'awesome-div': isAnAwesomeDiv(), 'wonderful-div': isAWonderfulDiv() }"&gt;I've got style&lt;/div&gt;</code></pre>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_résumé">10.11. Résumé</h3>
<div class="paragraph">
<p>Le système de template d&#8217;Angular nous propose une syntaxe puissante pour
exprimer les parties dynamiques de notre HTML. Elle nous permet d&#8217;exprimer du
<em>binding</em> de données, de propriétés, d&#8217;événements, et des considérations de
templating, d&#8217;une façon claire, avec des symboles propres&#160;:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>{{}}</code> pour l&#8217;interpolation,</p>
</li>
<li>
<p><code>[]</code> pour le <em>binding</em> de propriété,</p>
</li>
<li>
<p><code>()</code> pour le <em>binding</em> d&#8217;événement,</p>
</li>
<li>
<p><code>#</code> pour la déclaration de variable,</p>
</li>
<li>
<p><code>@if/@for/@switch</code> pour les opérations de contrôle.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Tu auras certainement besoin de temps pour utiliser intuitivement cette syntaxe,
mais tu gagneras rapidement en dextérité, et elle deviendra ensuite facile à
lire et à écrire.</p>
</div>
<div class="paragraph">
<p>Avant de passer à la suite, essayons de voir un exemple complet.</p>
</div>
<div class="paragraph">
<p>Je veux écrire un composant <code>PoniesComponent</code>, affichant une liste de poneys.
Chacun de ces poneys devrait être représenté par son propre composant <code>PonyComponent</code>,
mais nous n&#8217;avons pas encore vu comment passer des paramètres à un composant.
Donc, pour l&#8217;instant, nous allons nous contenter d&#8217;afficher une simple liste.
La liste devra s&#8217;afficher seulement si elle n&#8217;est pas vide,
et j&#8217;aimerais avoir un peu de couleur sur les lignes paires.
Et nous voulons pouvoir rafraîchir cette liste d&#8217;un simple clic sur un bouton.</p>
</div>
<div class="paragraph">
<p>Prêt&#160;?</p>
</div>
<div class="paragraph">
<p>On commence par écrire notre composant, dans son propre fichier&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="javascript">import { Component } from '@angular/core';

@Component({
  selector: 'ns-ponies',
  template: ``,
  imports: []
})
export class PoniesComponent {}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Tu peux l&#8217;ajouter au composant <code>AppComponent</code> écrit au chapitre précédent
pour le tester. Tu devras l&#8217;importer et insérer la
balise <code>&lt;ns-ponies /&gt;</code> dans le template.</p>
</div>
<div class="paragraph">
<p>Notre nouveau composant a une liste de poneys, enveloppée dans un signal&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="javascript">import { Component, signal } from '@angular/core';
import { PonyModel } from '../pony.model';

@Component({
  selector: 'ns-ponies',
  template: ``,
  imports: []
})
export class PoniesComponent {
  readonly ponies = signal&lt;Array&lt;PonyModel&gt;&gt;([
    { id: 1, name: 'Rainbow Dash' },
    { id: 2, name: 'Pinkie Pie' }
  ]);
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>On va afficher cette liste, en utilisant <code>@for</code>&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="javascript">import { Component, signal } from '@angular/core';
import { PonyModel } from '../pony.model';

@Component({
  selector: 'ns-ponies',
  template: `
    &lt;ul&gt;
      @for (pony of ponies(); track pony.id) {
        &lt;li&gt;{{ pony.name }}&lt;/li&gt;
      }
    &lt;/ul&gt;
  `,
  imports: []
})
export class PoniesComponent {
  readonly ponies = signal&lt;Array&lt;PonyModel&gt;&gt;([
    { id: 1, name: 'Rainbow Dash' },
    { id: 2, name: 'Pinkie Pie' }
  ]);
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Il manque un dernier truc, le bouton qui rafraîchit la liste&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="javascript">import { Component, signal } from '@angular/core';
import { PonyModel } from '../pony.model';

@Component({
  selector: 'ns-ponies',
  template: `
    &lt;button (click)="refreshPonies()"&gt;Refresh&lt;/button&gt;
    &lt;ul&gt;
      @for (pony of ponies(); track pony.id) {
        &lt;li&gt;{{ pony.name }}&lt;/li&gt;
      }
    &lt;/ul&gt;
  `,
  imports: []
})
export class PoniesComponent {
  readonly ponies = signal&lt;Array&lt;PonyModel&gt;&gt;([
    { id: 1, name: 'Rainbow Dash' },
    { id: 2, name: 'Pinkie Pie' }
  ]);

  refreshPonies(): void {
    this.ponies.set([
      { id: 3, name: 'Fluttershy' },
      { id: 4, name: 'Rarity' }
    ]);
  }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Et bien sûr, une touche de couleur pour finir,
avec l&#8217;utilisation de <code>[style.color]</code> et de la variable <code>$even</code>&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="javascript">import { Component, signal } from '@angular/core';
import { PonyModel } from '../pony.model';

@Component({
  selector: 'ns-ponies',
  template: `
    &lt;button (click)="refreshPonies()"&gt;Refresh&lt;/button&gt;
    &lt;ul&gt;
      @for (pony of ponies(); track pony.id) {
        &lt;li [style.color]="$even ? 'green' : 'black'"&gt;
          {{ pony.name }}
        &lt;/li&gt;
      }
    &lt;/ul&gt;
  `,
  imports: []
})
export class PoniesComponent {
  readonly ponies = signal&lt;Array&lt;PonyModel&gt;&gt;([
    { id: 1, name: 'Rainbow Dash' },
    { id: 2, name: 'Pinkie Pie' }
  ]);

  refreshPonies(): void {
    this.ponies.set([
      { id: 3, name: 'Fluttershy' },
      { id: 4, name: 'Rarity' }
    ]);
  }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Et voilà, on a mis en œuvre toute la syntaxe de templating, et on a un composant
parfaitement fonctionnel.</p>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<i class="fa icon-tip" title="Mise en pratique"></i>
</td>
<td class="content">
<div class="paragraph">
<p>Essaye notre
<a href="https://angular-exercises.ninja-squad.com/exercises/1/quiz-templates">quiz</a> <span class="image"><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAIgAAACACAMAAADnN9ENAAACN1BMVEVMaXF1aF51aF51aF51aF51aF51aF51aF51aF51aF51aF51aF51aF51aF6CcGNyZVxFQz9FQz9FQz9FQz+OeGi4kni0j3ZjWlJIRUFFQz9FQz+ghHC6lHqxj3eYfmx5a2BFQz9FQz9FQz9gWFGXfWtnXVROSkVsYVitjHV1aF5FQz9oW1GbfmqqiHFMSENRTEeKeGv0zK/wyKvPqI1TTUZbUkpdVk+finr81LbTrJFFQz9mXFS5nor40LLCnIJ+bmJyZlzSspvsxKdFQz9LSEPauaDLpIm2kXhFQz9XUUvnwKOPeWlgWFCGdmm+mH6khnFFQz9FQz+Xg3TfuJzJrJWGc2VaU01PSUNmWU51YlRdU0qwl4VKRkFrXFCRdWGUd2OmhW63knhiV05qXFGdgGvjvKDbtJhFQz9YUEiIb12OdmRxYVWLdmejg2xTTEWDbFuZe2ayjnWkhW94ZllvY1qWeWRUTUarinN+aVmef2mVe2iTe2pwX1Kohm+piXNaUkqMcl+tinKAbF1eVEpiVkyRdWG1kHeRdWGRdWGHcWCRdWGzj3aRdWGRdWGggWyXe2ePdGNAPDhCQ0NWV1c5OTmRdWF1YlUvLy+/w8PJzc22ubmGbl6RdWGph3FMTU2RdWFsW1CGiIiriHFSSEJaT0aRdWGggWp9aFmRdWE4NTSxjnWRdWGRdWGRdWGRdWGwjHSbfWd/aFhIQTxaTkU7ODVsW055ZFVORT9BPDhyX1GLcV5USUI1MzK6wa3dAAAAr3RSTlMAYIBAj/+/EJ/PcO8wUP/fYIBwMP///////9///////yBQv3D//////9/P////////////////////7///////////EP////+f/////////0Cv////////////////////////////j////////////////////////////////////2D/YP8w7/8g/xDP/////////5////////9w//9Q//////+v//+A//9Av9+PTccICgAABmhJREFUeAHs1YVC5ToUheEgC5cTfB827u4Q3N3d3e8dg3F796nQCe7t2Pme4G+brIqA31dAQEBAQFBwcIj4DYTCEBYuHOERACKjwoXXomGKjhFnwmCJjhUeA+JgiPdJmZAo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" alt="Free" width="18"></span>
et nos deux exercices
<a href="https://angular-exercises.ninja-squad.com/exercises/2/templates">Templates</a> <span class="image"><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAIgAAACACAMAAADnN9ENAAACN1BMVEVMaXF1aF51aF51aF51aF51aF51aF51aF51aF51aF51aF51aF51aF51aF6CcGNyZVxFQz9FQz9FQz9FQz+OeGi4kni0j3ZjWlJIRUFFQz9FQz+ghHC6lHqxj3eYfmx5a2BFQz9FQz9FQz9gWFGXfWtnXVROSkVsYVitjHV1aF5FQz9oW1GbfmqqiHFMSENRTEeKeGv0zK/wyKvPqI1TTUZbUkpdVk+finr81LbTrJFFQz9mXFS5nor40LLCnIJ+bmJyZlzSspvsxKdFQz9LSEPauaDLpIm2kXhFQz9XUUvnwKOPeWlgWFCGdmm+mH6khnFFQz9FQz+Xg3TfuJzJrJWGc2VaU01PSUNmWU51YlRdU0qwl4VKRkFrXFCRdWGUd2OmhW63knhiV05qXFGdgGvjvKDbtJhFQz9YUEiIb12OdmRxYVWLdmejg2xTTEWDbFuZe2ayjnWkhW94ZllvY1qWeWRUTUarinN+aVmef2mVe2iTe2pwX1Kohm+piXNaUkqMcl+tinKAbF1eVEpiVkyRdWG1kHeRdWGRdWGHcWCRdWGzj3aRdWGRdWGggWyXe2ePdGNAPDhCQ0NWV1c5OTmRdWF1YlUvLy+/w8PJzc22ubmGbl6RdWGph3FMTU2RdWFsW1CGiIiriHFSSEJaT0aRdWGggWp9aFmRdWE4NTSxjnWRdWGRdWGRdWGRdWGwjHSbfWd/aFhIQTxaTkU7ODVsW055ZFVORT9BPDhyX1GLcV5USUI1MzK6wa3dAAAAr3RSTlMAYIBAj/+/EJ/PcO8wUP/fYIBwMP///////9///////yBQv3D//////9/P////////////////////7///////////EP////+f/////////0Cv////////////////////////////j////////////////////////////////////2D/YP8w7/8g/xDP/////////5////////9w//9Q//////+v//+A//9Av9+PTccICgAABmhJREFUeAHs1YVC5ToUheEgC5cTfB827u4Q3N3d3e8dg3F796nQCe7t2Pme4G+brIqA31dAQEBAQFBwcIj4DYTCEBYuHOERACKjwoXXomGKjhFnwmCJjhUeA+JgiPdJmZAo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" alt="Free" width="18"></span>
et
<a href="https://angular-exercises.ninja-squad.com/exercises/3/races-list">Liste de courses</a> <span class="image"><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAIgAAACACAMAAADnN9ENAAACN1BMVEVMaXF1aF51aF51aF51aF51aF51aF51aF51aF51aF51aF51aF51aF51aF6CcGNyZVxFQz9FQz9FQz9FQz+OeGi4kni0j3ZjWlJIRUFFQz9FQz+ghHC6lHqxj3eYfmx5a2BFQz9FQz9FQz9gWFGXfWtnXVROSkVsYVitjHV1aF5FQz9oW1GbfmqqiHFMSENRTEeKeGv0zK/wyKvPqI1TTUZbUkpdVk+finr81LbTrJFFQz9mXFS5nor40LLCnIJ+bmJyZlzSspvsxKdFQz9LSEPauaDLpIm2kXhFQz9XUUvnwKOPeWlgWFCGdmm+mH6khnFFQz9FQz+Xg3TfuJzJrJWGc2VaU01PSUNmWU51YlRdU0qwl4VKRkFrXFCRdWGUd2OmhW63knhiV05qXFGdgGvjvKDbtJhFQz9YUEiIb12OdmRxYVWLdmejg2xTTEWDbFuZe2ayjnWkhW94ZllvY1qWeWRUTUarinN+aVmef2mVe2iTe2pwX1Kohm+piXNaUkqMcl+tinKAbF1eVEpiVkyRdWG1kHeRdWGRdWGHcWCRdWGzj3aRdWGRdWGggWyXe2ePdGNAPDhCQ0NWV1c5OTmRdWF1YlUvLy+/w8PJzc22ubmGbl6RdWGph3FMTU2RdWFsW1CGiIiriHFSSEJaT0aRdWGggWp9aFmRdWE4NTSxjnWRdWGRdWGRdWGRdWGwjHSbfWd/aFhIQTxaTkU7ODVsW055ZFVORT9BPDhyX1GLcV5USUI1MzK6wa3dAAAAr3RSTlMAYIBAj/+/EJ/PcO8wUP/fYIBwMP///////9///////yBQv3D//////9/P////////////////////7///////////EP////+f/////////0Cv////////////////////////////j////////////////////////////////////2D/YP8w7/8g/xDP/////////5////////9w//9Q//////+v//+A//9Av9+PTccICgAABmhJREFUeAHs1YVC5ToUheEgC5cTfB827u4Q3N3d3e8dg3F796nQCe7t2Pme4G+brIqA31dAQEBAQFBwcIj4DYTCEBYuHOERACKjwoXXomGKjhFnwmCJjhUeA+JgiPdJmZAo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" alt="Free" width="18"></span>&#160;!
Ils sont gratuits et font partie de notre Pack pro,
où tu apprends à construire une application complète étape par étape.
Le premier consiste à construire un petit composant,
un menu "responsive", et jouer avec son template.
Le second te guide pour construire un autre composant&#160;:
la liste des courses.</p>
</div>
</td>
</tr>
</table>
</div>
<div style="page-break-after: always;"></div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="building-components">11. Créer des composants et directives</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_introduction">11.1. Introduction</h3>
<div class="paragraph">
<p>Jusque-là, on a surtout vu des petits composants.
Et bien sûr, tu peux imaginer que dans la vraie vie,
comme ils sont la structure de nos applications, ils seront bien plus complexes que ceux qu&#8217;on a croisés.
Comment leur fournir des données&#160;? Comment gérer leur cycle de vie&#160;?
Quelles sont les bonnes pratiques pour construire ses composants&#160;?</p>
</div>
<div class="paragraph">
<p>Et les directives&#160;: c&#8217;est quoi, pourquoi, comment&#160;?</p>
</div>
</div>
<div class="sect2">
<h3 id="_directives">11.2. Directives</h3>
<div class="paragraph">
<p>Une directive est très semblable à un composant, sauf qu&#8217;elle n&#8217;a pas de template.
Le but d&#8217;un composant est d&#8217;enrichir le HTML en utilisant des éléments HTML personnalisés
comme <code>&lt;ns-pony /&gt;</code> pour afficher un poney.
Les directives enrichissent aussi le HTML en te permettant d&#8217;attacher un comportement personnalisé à des éléments
HTML existants. Par exemple, tu pourrais attacher une directive de glisser-déposer à une <code>&lt;div&gt;</code>, ou une
<code>&lt;section&gt;</code>, ou même un élément <code>&lt;ns-pony&gt;</code> pour le rendre déplaçable.</p>
</div>
<div class="paragraph">
<p>Nous avons déjà vu la directive <code>ngClass</code>&#160;:
elle permet d&#8217;ajouter ou de retirer des classes CSS aux éléments HTML.
Tu peux attacher plusieurs directives au même élément.
Par exemple, une <code>&lt;div&gt;</code> pourrait avoir besoin de classes CSS ajoutées par <code>ngClass</code>,
et pourrait aussi être rendue déplaçable par la directive de glisser-déposer.</p>
</div>
<div class="paragraph">
<p>La façon de déclarer une directive est similaire à celle de déclarer un composant.
Nous créons une classe. Nous décorons cette classe avec un décorateur <code>@Directive</code>.
Et nous passons des métadonnées à ce décorateur comme nous l&#8217;avons fait pour le décorateur <code>@Component</code>
En fait, les composants sont des directives. Toutes les métadonnées que nous
spécifions sur une directive, nous pouvons aussi les passer à un composant.
Leurs cycles de vie sont aussi pratiquement identiques.</p>
</div>
<div class="paragraph">
<p>Même si les directives sont une grande partie de ce qui rend Angular extrêmement puissant,
elles sont plus couramment utilisées dans des parties bas-niveaux de bibliothèques,
ou du framework lui-même.
Un développeur d&#8217;application web typique crée rarement des directives,
et crée plus couramment des composants.</p>
</div>
<div class="paragraph">
<p>Voyons donc les choses les plus courantes que nous pouvons définir sur les composants et les directives.
Nous verrons les sujets plus avancés un peu plus loin.</p>
</div>
</div>
<div class="sect2">
<h3 id="_sélecteurs">11.3. Sélecteurs</h3>
<div class="paragraph">
<p>Le sélecteur est ce qui permet à Angular d&#8217;identifier un composant ou une directive dans les templates HTML.</p>
</div>
<div class="paragraph">
<p>Les sélecteurs peuvent être de différents types&#160;:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>un élément, comme c&#8217;est généralement le cas pour les composants&#160;: <code>ns-pony</code>.</p>
</li>
<li>
<p>une classe, mais c&#8217;est plutôt rare&#160;: <code>.alert</code>.</p>
</li>
<li>
<p>un attribut, ce qui est le plus fréquent pour une directive&#160;: <code>[color]</code>.</p>
</li>
<li>
<p>un attribut avec une valeur spécifique&#160;: <code>[color=red]</code>.</p>
</li>
<li>
<p>une combinaison de ceux précédents&#160;:
<code>footer[color=red]</code> désignera un élément <code>footer</code> avec un attribut <code>color</code> à la valeur <code>red</code>.
<code>[color], footer.alert</code> désignera n&#8217;importe quel élément avec un attribut <code>color</code>, ou (<code>,</code>) un élément <code>footer</code> portant la classe CSS <code>alert</code>.
<code>footer:not(.alert)</code> désignera un élément <code>footer</code> qui ne porte pas (<code>:not()</code>) la classe CSS <code>alert</code>.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Par exemple, voici une directive très simple qui ne fait rien mais est activée
si un élément possède l&#8217;attribut <code>doNothing</code>&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="javascript">@Directive({
  selector: '[doNothing]'
})
export class DoNothingDirective {
  constructor() {
    console.log('Do nothing directive');
  }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Cette directive sera activée sur un composant comme <code>TestComponent</code>&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="javascript">@Component({
  selector: 'ns-test',
  template: '&lt;div doNothing&gt;Click me&lt;/div&gt;',
  imports: [DoNothingDirective]
})
export class TestComponent {}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Un sélecteur plus complexe pourrait ressembler à&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="javascript">@Directive({
  selector: 'div.loggable[logText]:not([notLoggable=true])'
})
export class ComplexSelectorDirective {
  constructor() {
    console.log('Complex selector directive');
  }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Celui-là désignera tous les éléments <code>div</code> portant la class <code>loggable</code> et un
attribut <code>logText</code>, mais n&#8217;ayant pas d&#8217;attribut <code>notLoggable</code> avec la valeur <code>true</code>.</p>
</div>
<div class="paragraph">
<p>Ainsi, ce template déclenchera la directive&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="html">&lt;div class="loggable" logText="text"&gt;Hello&lt;/div&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>Mais celui-là, non&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="html">&lt;div class="loggable" logText="text" notLoggable="true"&gt;Hello&lt;/div&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>Mais pour être honnête, si tu en es à écrire quelque chose comme cela, c&#8217;est
qu&#8217;il y a un truc qui ne va pas&#160;! 😊</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
Les sélecteurs CSS à base de descendants, de frères, ou d&#8217;identifiants,
et les pseudo-sélecteurs (autres que <code>:not</code>) ne sont pas supportés.
</td>
</tr>
</table>
</div>
</div>
<div class="sect2">
<h3 id="_inputs_avec_input">11.4. Inputs avec <code>input()</code></h3>
<div class="paragraph">
<p>Les <em>inputs</em> sont ce qui permet à un composant ou une directive de recevoir des informations de son composant parent.
Tu peux les voir comme des paramètres d&#8217;une fonction&#160;:
la fonction appelante utilise des paramètres pour passer des données à la fonction appelée.</p>
</div>
<div class="paragraph">
<p>Pour passer un <em>input</em> à un composant ou une directive,
on utilise la syntaxe de <em>binding</em> de propriétés que nous avons décrite dans le chapitre précédent.
Par exemple, si nous voulions passer une couleur au composant <code>pony</code>, nous utiliserions&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="html">&lt;ns-pony color="blue" /&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>pour passer la chaîne de caractères <code>'blue'</code> ou&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="html">&lt;ns-pony [color]="selectedColor()" /&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>pour passer la valeur de l&#8217;expression Angular <code>selectedColor()</code>.</p>
</div>
<div class="paragraph">
<p>Pour qu&#8217;une directive ou un composant accepte des informations de son parent,
il doit définir des <em>inputs</em>.</p>
</div>
<div class="paragraph">
<p>Voici comment le composant <code>PonyComponent</code> peut recevoir une couleur de son composant parent&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="javascript">@Component({
  selector: 'ns-pony',
  template: 'My color is {{ color() }}'
})
export class PonyComponent {
  readonly color = input&lt;string&gt;();
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>La propriété <code>color</code> est un signal particulier&#160;: un <code>InputSignal</code>.
Un tel signal n&#8217;est pas modifiable. Le <code>PonyComponent</code> ne peut pas changer sa couleur.
La seule façon de changer sa valeur est de lier une autre valeur depuis le composant parent.</p>
</div>
<div class="paragraph">
<p>L'<em>input</em> dans l&#8217;exemple ci-dessus est optionnel.
Cela signifie que le composant parent peut ne pas passer de couleur au composant <code>&lt;ns-pony /&gt;</code>.
Mais l'<em>input</em> est typé, donc si une valeur est passée, elle doit être une chaîne de caractères.
Si le parent ne passe pas de couleur, le signal <code>color</code> contiendra <code>undefined</code>.
Le type de <code>color</code> est <code>InputSignal&lt;string | undefined&gt;</code>.</p>
</div>
<div class="paragraph">
<p>Le composant pourrait choisir d&#8217;utiliser une valeur par défaut pour la couleur,
dans le cas où le parent n&#8217;en passerait pas.
Le type de <code>color</code> serait alors <code>InputSignal&lt;string&gt;</code>&#160;: il a toujours une valeur de type chaîne de caractères.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="javascript">readonly color = input('red');</code></pre>
</div>
</div>
<div class="paragraph">
<p>Ou il pourrait forcer le parent à passer une valeur en rendant l'<em>input</em> obligatoire.
Dans ce cas, le template du composant parent ne compilerait pas si aucune valeur n&#8217;était passée.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="javascript">readonly color = input.required&lt;string&gt;();</code></pre>
</div>
</div>
<div class="paragraph">
<p>Si tu veux utiliser <code>color</code> comme nom de propriété, mais préfères utiliser un autre nom dans
les templates pour l'<em>input</em>, tu peux choisir de lui donner un alias.</p>
</div>
<div class="paragraph">
<p>Par exemple, si l'<em>input</em> est défini de cette manière&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="javascript">readonly color = input.required&lt;string&gt;({ alias: 'c' });</code></pre>
</div>
</div>
<div class="paragraph">
<p>alors le parent utilisera <code>c</code> pour passer une valeur de couleur&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="javascript">&lt;ns-pony [c]="selectedColor()" /&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>Dans l&#8217;exemple ci-dessus, la couleur est une chaîne de caractères.
Mais on peut passer n&#8217;importe quoi comme <em>input</em>.
Il est très courant de passer des objets complexes en tant qu'<em>inputs</em>,
comme un objet <code>PonyModel</code> qui contiendrait un nom, une couleur, une date de naissance, etc.</p>
</div>
</div>
<div class="sect2">
<h3 id="_le_décorateur_input">11.5. Le décorateur <code>@Input</code></h3>
<div class="paragraph">
<p>Nous venons de voir comment définir des <em>inputs</em> comme des signaux. C&#8217;est la manière moderne de le faire.
Si tu travailles sur une base de code existante, les <em>inputs</em> de tes composants sont probablement définis "à l&#8217;ancienne",
en utilisant le décorateur <code>@Input</code>.</p>
</div>
<div class="paragraph">
<p>Les <em>inputs</em> définis de cette manière sont passés par le composant parent en utilisant exactement la même syntaxe de <em>binding</em> de propriétés.
La différence réside uniquement dans le composant qui définit l'<em>input</em>.
Ces <em>inputs</em> "ancienne version" sont des propriétés simples (pas des signaux), décorées avec <code>@Input()</code>.
Voici les exemples précédents réécrits avec l&#8217;ancienne méthode.</p>
</div>
<div class="paragraph">
<p>Un <em>input</em> optionnel&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="javascript">@Input() color: string | undefined;</code></pre>
</div>
</div>
<div class="paragraph">
<p>Un <em>input</em> optionnel avec une valeur par défaut&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="javascript">@Input() readonly color = 'red';</code></pre>
</div>
</div>
<div class="paragraph">
<p>Un <em>input</em> obligatoire&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="javascript">@Input({ required: true }) color!: string;</code></pre>
</div>
</div>
<div class="paragraph">
<p>Un <em>input</em> obligatoire avec un alias&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="javascript">@Input({ required: true, alias: 'c' }) color!: string;</code></pre>
</div>
</div>
<div class="paragraph">
<p>OK, et pour passer des données vers le haut&#160;?
On ne peut pas utiliser de propriétés pour passer des données de <code>PonyComponent</code> à <code>PoniesComponent</code>.
Mais on peut utiliser des événements&#160;!</p>
</div>
</div>
<div class="sect2">
<h3 id="_outputs_avec_output">11.6. Outputs avec <code>output()</code></h3>
<div class="paragraph">
<p>Revenons à notre dernier exemple,
et disons que nous voulons pouvoir sélectionner un poney en cliquant dessus et en informer le composant parent.
Pour cela, nous allons utiliser un événement <em>custom</em>.</p>
</div>
<div class="paragraph">
<p>C&#8217;est une des choses les plus importantes à comprendre en Angular&#160;:
les données circulent dans un composant via des propriétés,
et en sortent via des événements.</p>
</div>
<div class="imageblock text-center">
<div class="content">
<img src="data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0nMS4wJyBlbmNvZGluZz0nVVRGLTgnPz48c3ZnIGhlaWdodD0nMjUyJyBwcmVzZXJ2ZUFzcGVjdFJhdGlvPSd4TWlkWU1pZCBtZWV0JyBzaGFwZS1yZW5kZXJpbmc9J2dlb21ldHJpY1ByZWNpc2lvbicgdmVyc2lvbj0nMS4wJyB2aWV3Qm94PScwIDAgMTgwIDI1Micgd2lkdGg9JzE4MCcgeG1sbnM9J2h0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnJz48ZGVmcz48ZmlsdGVyIGhlaWdodD0nMjAwJScgaWQ9J3NoYWRvd0JsdXInIHdpZHRoPScyMDAlJyB4PScwJyB5PScwJz48ZmVPZmZzZXQgZHg9JzMuMDAwMzAwMicgZHk9JzMuMDAwMzAwMicgaW49J1NvdXJjZUdyYXBoaWMnIHJlc3VsdD0nb2ZmT3V0Jy8+PGZlR2F1c3NpYW5CbHVyIGluPSdvZmZPdXQnIHN0ZERldmlhdGlvbj0nMycvPjwvZmlsdGVyPjwvZGVmcz48ZyBzdHJva2UtbGluZWNhcD0nc3F1YXJlJyBzdHJva2UtbGluZWpvaW49J3JvdW5kJyBzdHJva2Utd2lkdGg9JzEnPjxyZWN0IGhlaWdodD0nMjUyJyBzdHlsZT0nZmlsbDogI2ZmZmZmZicgd2lkdGg9JzE4MCcgeD0nMCcgeT0nMCcvPjxwYXRoIGQ9J000NS4wIDM1LjAgTDEzNS4wIDM1LjAgTDEzNS4wIDYzLjAgTDQ1LjAgNjMuMCB6JyBmaWxsPScjOTY5Njk2JyBmaWx0ZXI9J3VybCgjc2hhZG93Qmx1ciknIHN0cm9rZT0nIzk2OTY5NicvPjxwYXRoIGQ9J000NS4wIDEwNS4wIEwxMzUuMCAxMDUuMCBMMTM1LjAgMTMzLjAgTDQ1LjAgMTMzLjAgeicgZmlsbD0nIzk2OTY5NicgZmlsdGVyPSd1cmwoI3NoYWRvd0JsdXIpJyBzdHJva2U9JyM5Njk2OTYnLz48cGF0aCBkPSdNNDUuMCAxODkuMCBMMTM1LjAgMTg5LjAgTDEzNS4wIDIxNy4wIEw0NS4wIDIxNy4wIHonIGZpbGw9JyM5Njk2OTYnIGZpbHRlcj0ndXJsKCNzaGFkb3dCbHVyKScgc3Ryb2tlPScjOTY5Njk2Jy8+PHBhdGggZD0nTTQ1LjAgMzUuMCBMMTM1LjAgMzUuMCBMMTM1LjAgNjMuMCBMNDUuMCA2My4wIHonIGZpbGw9J3doaXRlJyBzdHJva2U9JyMwMDAwMDAnIHN0cm9rZS1saW5lY2FwPSdyb3VuZCcgc3Ryb2tlLWxpbmVqb2luPSdyb3VuZCcgc3Ryb2tlLXdpZHRoPScxLjAnLz48cGF0aCBkPSdNNDUuMCAxMDUuMCBMMTM1LjAgMTA1LjAgTDEzNS4wIDEzMy4wIEw0NS4wIDEzMy4wIHonIGZpbGw9J3doaXRlJyBzdHJva2U9JyMwMDAwMDAnIHN0cm9rZS1saW5lY2FwPSdyb3VuZCcgc3Ryb2tlLWxpbmVqb2luPSdyb3VuZCcgc3Ryb2tlLXdpZHRoPScxLjAnLz48cGF0aCBkPSdNNDUuMCAxODkuMCBMMTM1LjAgMTg5LjAgTDEzNS4wIDIxNy4wIEw0NS4wIDIxNy4wIHonIGZpbGw9J3doaXRlJyBzdHJva2U9JyMwMDAwMDAnIHN0cm9rZS1saW5lY2FwPSdyb3VuZCcgc3Ryb2tlLWxpbmVqb2luPSdyb3VuZCcgc3Ryb2tlLXdpZHRoPScxLjAnLz48cGF0aCBkPSdNODAuMCA4NC4wIEw4NS4wIDk4LjAgTDkwLjAgODQuMCB6JyBmaWxsPScjMDAwMDAwJyBzdHJva2U9J25vbmUnIHN0cm9rZS1saW5lY2FwPSdyb3VuZCcgc3Ryb2tlLWxpbmVqb2luPSdyb3VuZCcgc3Ryb2tlLXdpZHRoPScxLjAnLz48cGF0aCBkPSdNODAuMCAxNjguMCBMODUuMCAxODIuMCBMOTAuMCAxNjguMCB6JyBmaWxsPScjMDAwMDAwJyBzdHJva2U9J25vbmUnIHN0cm9rZS1saW5lY2FwPSdyb3VuZCcgc3Ryb2tlLWxpbmVqb2luPSdyb3VuZCcgc3Ryb2tlLXdpZHRoPScxLjAnLz48cGF0aCBkPSdNODUuMCA2My4wIEw4NS4wIDkxLjAgJyBmaWxsPSdub25lJyBzdHJva2U9JyMwMDAwMDAnIHN0cm9rZS1saW5lY2FwPSdyb3VuZCcgc3Ryb2tlLWxpbmVqb2luPSdyb3VuZCcgc3Ryb2tlLXdpZHRoPScxLjAnLz48cGF0aCBkPSdNODUuMCAxMzMuMCBMODUuMCAxNzUuMCAnIGZpbGw9J25vbmUnIHN0cm9rZT0nIzAwMDAwMCcgc3Ryb2tlLWxpbmVjYXA9J3JvdW5kJyBzdHJva2UtbGluZWpvaW49J3JvdW5kJyBzdHJva2Utd2lkdGg9JzEuMCcvPjx0ZXh0IGZpbGw9JyMwMDAwMDAnIGZvbnQtZmFtaWx5PSdzYW5zLXNlcmlmJyBmb250LXNpemU9JzE1JyBzdHJva2U9J25vbmUnIHg9JzYxJyB5PSc1NCc+PCFbQ0RBVEFbUmFjZXNdXT48L3RleHQ+PHRleHQgZmlsbD0nIzAwMDAwMCcgZm9udC1mYW1pbHk9J3NhbnMtc2VyaWYnIGZvbnQtc2l6ZT0nMTUnIHN0cm9rZT0nbm9uZScgeD0nMTA1JyB5PSc4Mic+PCFbQ0RBVEFbW3JhY2VdXV0+PC90ZXh0Pjx0ZXh0IGZpbGw9JyMwMDAwMDAnIGZvbnQtZmFtaWx5PSdzYW5zLXNlcmlmJyBmb250LXNpemU9JzE1JyBzdHJva2U9J25vbmUnIHg9JzcwJyB5PScxMjQnPjwhW0NEQVRBW1JhY2VdXT48L3RleHQ+PHRleHQgZmlsbD0nIzAwMDAwMCcgZm9udC1mYW1pbHk9J3NhbnMtc2VyaWYnIGZvbnQtc2l6ZT0nMTUnIHN0cm9rZT0nbm9uZScgeD0nMTAzJyB5PScxNjYnPjwhW0NEQVRBW1twb255XV1dPjwvdGV4dD48dGV4dCBmaWxsPScjMDAwMDAwJyBmb250LWZhbWlseT0nc2Fucy1zZXJpZicgZm9udC1zaXplPScxNCcgc3Ryb2tlPSdub25lJyB4PSc3MScgeT0nMjA4Jz48IVtDREFUQVtQb255XV0+PC90ZXh0PjwvZz48L3N2Zz4=" alt="intro data flow" width="180" height="252">
</div>
</div>
<div class="imageblock text-center">
<div class="content">
<img src="data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0nMS4wJyBlbmNvZGluZz0nVVRGLTgnPz48c3ZnIGhlaWdodD0nMjUyJyBwcmVzZXJ2ZUFzcGVjdFJhdGlvPSd4TWlkWU1pZCBtZWV0JyBzaGFwZS1yZW5kZXJpbmc9J2dlb21ldHJpY1ByZWNpc2lvbicgdmVyc2lvbj0nMS4wJyB2aWV3Qm94PScwIDAgMjIwIDI1Micgd2lkdGg9JzIyMCcgeG1sbnM9J2h0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnJz48ZGVmcz48ZmlsdGVyIGhlaWdodD0nMjAwJScgaWQ9J3NoYWRvd0JsdXInIHdpZHRoPScyMDAlJyB4PScwJyB5PScwJz48ZmVPZmZzZXQgZHg9JzMuMDAwMzAwMicgZHk9JzMuMDAwMzAwMicgaW49J1NvdXJjZUdyYXBoaWMnIHJlc3VsdD0nb2ZmT3V0Jy8+PGZlR2F1c3NpYW5CbHVyIGluPSdvZmZPdXQnIHN0ZERldmlhdGlvbj0nMycvPjwvZmlsdGVyPjwvZGVmcz48ZyBzdHJva2UtbGluZWNhcD0nc3F1YXJlJyBzdHJva2UtbGluZWpvaW49J3JvdW5kJyBzdHJva2Utd2lkdGg9JzEnPjxyZWN0IGhlaWdodD0nMjUyJyBzdHlsZT0nZmlsbDogI2ZmZmZmZicgd2lkdGg9JzIyMCcgeD0nMCcgeT0nMCcvPjxwYXRoIGQ9J000NS4wIDM1LjAgTDEzNS4wIDM1LjAgTDEzNS4wIDYzLjAgTDQ1LjAgNjMuMCB6JyBmaWxsPScjOTY5Njk2JyBmaWx0ZXI9J3VybCgjc2hhZG93Qmx1ciknIHN0cm9rZT0nIzk2OTY5NicvPjxwYXRoIGQ9J000NS4wIDEwNS4wIEwxMzUuMCAxMDUuMCBMMTM1LjAgMTMzLjAgTDQ1LjAgMTMzLjAgeicgZmlsbD0nIzk2OTY5NicgZmlsdGVyPSd1cmwoI3NoYWRvd0JsdXIpJyBzdHJva2U9JyM5Njk2OTYnLz48cGF0aCBkPSdNNDUuMCAxODkuMCBMMTI1LjAgMTg5LjAgTDEyNS4wIDIxNy4wIEw0NS4wIDIxNy4wIHonIGZpbGw9JyM5Njk2OTYnIGZpbHRlcj0ndXJsKCNzaGFkb3dCbHVyKScgc3Ryb2tlPScjOTY5Njk2Jy8+PHBhdGggZD0nTTQ1LjAgMzUuMCBMMTM1LjAgMzUuMCBMMTM1LjAgNjMuMCBMNDUuMCA2My4wIHonIGZpbGw9J3doaXRlJyBzdHJva2U9JyMwMDAwMDAnIHN0cm9rZS1saW5lY2FwPSdyb3VuZCcgc3Ryb2tlLWxpbmVqb2luPSdyb3VuZCcgc3Ryb2tlLXdpZHRoPScxLjAnLz48cGF0aCBkPSdNNDUuMCAxMDUuMCBMMTM1LjAgMTA1LjAgTDEzNS4wIDEzMy4wIEw0NS4wIDEzMy4wIHonIGZpbGw9J3doaXRlJyBzdHJva2U9JyMwMDAwMDAnIHN0cm9rZS1saW5lY2FwPSdyb3VuZCcgc3Ryb2tlLWxpbmVqb2luPSdyb3VuZCcgc3Ryb2tlLXdpZHRoPScxLjAnLz48cGF0aCBkPSdNNDUuMCAxODkuMCBMMTI1LjAgMTg5LjAgTDEyNS4wIDIxNy4wIEw0NS4wIDIxNy4wIHonIGZpbGw9J3doaXRlJyBzdHJva2U9JyMwMDAwMDAnIHN0cm9rZS1saW5lY2FwPSdyb3VuZCcgc3Ryb2tlLWxpbmVqb2luPSdyb3VuZCcgc3Ryb2tlLXdpZHRoPScxLjAnLz48cGF0aCBkPSdNODUuMCA3MC4wIEw4MC4wIDg0LjAgTDkwLjAgODQuMCB6JyBmaWxsPScjMDAwMDAwJyBzdHJva2U9J25vbmUnIHN0cm9rZS1saW5lY2FwPSdyb3VuZCcgc3Ryb2tlLWxpbmVqb2luPSdyb3VuZCcgc3Ryb2tlLXdpZHRoPScxLjAnLz48cGF0aCBkPSdNODUuMCAxNDAuMCBMODAuMCAxNTQuMCBMOTAuMCAxNTQuMCB6JyBmaWxsPScjMDAwMDAwJyBzdHJva2U9J25vbmUnIHN0cm9rZS1saW5lY2FwPSdyb3VuZCcgc3Ryb2tlLWxpbmVqb2luPSdyb3VuZCcgc3Ryb2tlLXdpZHRoPScxLjAnLz48cGF0aCBkPSdNODUuMCA3Ny4wIEw4NS4wIDEwNS4wICcgZmlsbD0nbm9uZScgc3Ryb2tlPScjMDAwMDAwJyBzdHJva2UtbGluZWNhcD0ncm91bmQnIHN0cm9rZS1saW5lam9pbj0ncm91bmQnIHN0cm9rZS13aWR0aD0nMS4wJy8+PHBhdGggZD0nTTg1LjAgMTQ3LjAgTDg1LjAgMTg5LjAgJyBmaWxsPSdub25lJyBzdHJva2U9JyMwMDAwMDAnIHN0cm9rZS1saW5lY2FwPSdyb3VuZCcgc3Ryb2tlLWxpbmVqb2luPSdyb3VuZCcgc3Ryb2tlLXdpZHRoPScxLjAnLz48dGV4dCBmaWxsPScjMDAwMDAwJyBmb250LWZhbWlseT0nc2Fucy1zZXJpZicgZm9udC1zaXplPScxNScgc3Ryb2tlPSdub25lJyB4PSc3MScgeT0nNTQnPjwhW0NEQVRBW1JhY2VzXV0+PC90ZXh0Pjx0ZXh0IGZpbGw9JyMwMDAwMDAnIGZvbnQtZmFtaWx5PSdzYW5zLXNlcmlmJyBmb250LXNpemU9JzE1JyBzdHJva2U9J25vbmUnIHg9JzcwJyB5PScxMjQnPjwhW0NEQVRBW1JhY2VdXT48L3RleHQ+PHRleHQgZmlsbD0nIzAwMDAwMCcgZm9udC1mYW1pbHk9J3NhbnMtc2VyaWYnIGZvbnQtc2l6ZT0nMTUnIHN0cm9rZT0nbm9uZScgeD0nMTA5JyB5PScxNjYnPjwhW0NEQVRBWyhzZWxlY3RlZCldXT48L3RleHQ+PHRleHQgZmlsbD0nIzAwMDAwMCcgZm9udC1mYW1pbHk9J3NhbnMtc2VyaWYnIGZvbnQtc2l6ZT0nMTQnIHN0cm9rZT0nbm9uZScgeD0nNzEnIHk9JzIwOCc+PCFbQ0RBVEFbUG9ueV1dPjwvdGV4dD48L2c+PC9zdmc+" alt="intro event flow" width="220" height="252">
</div>
</div>
<div class="paragraph">
<p>Les événements <em>customs</em> sont émis en utilisant un <code>OutputEmitterRef</code>.
Tu n&#8217;as pas vraiment besoin d&#8217;utiliser cet horrible nom de type.
Ces objets sont créés pour toi par la fonction <code>output()</code>.</p>
</div>
<div class="paragraph">
<p>Tu peux choisir le type de l&#8217;événement que tu émets.
Cela pourrait être <code>undefined</code>, pour simplement signaler qu&#8217;un événement s&#8217;est produit.
Ou cela pourrait être un <code>PonyModel</code>,
pour passer toutes les informations sur le poney qui vient d&#8217;être sélectionné, par exemple.</p>
</div>
<div class="paragraph">
<p>Disons que nous voulons émettre un événement nommé <code>ponySelected</code>.
Nous avons deux choses à faire&#160;:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>définir une propriété <code>ponySelected</code> initialisée en appelant <code>output()</code></p>
</li>
<li>
<p>appeler <code>this.ponySelected.emit()</code> pour émettre un événement quand le poney est sélectionné</p>
</li>
</ul>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="javascript">@Component({
  selector: 'ns-pony',
  template: `
    &lt;div&gt;I'm the pony {{ ponyModel().name }}&lt;/div&gt;
    &lt;div&gt;&lt;button (click)="selectMe()"&gt;Select me&lt;/button&gt;&lt;/div&gt;
  `
})
export class PonyComponent {
  readonly ponyModel = input.required&lt;PonyModel&gt;();

  // define the output
  readonly ponySelected = output&lt;PonyModel&gt;();
  // ☝️OutputEmitterRef&lt;PonyModel&gt;

  /**
   * Selects the pony when the "Select me" button is clicked.
   * Emits a custom event of type PonyModel
   */
  selectMe() {
    this.ponySelected.emit(this.ponyModel());
  }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Pour l&#8217;utiliser dans le template du composant parent&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="html">&lt;ns-pony [ponyModel]="ponyModel()" (ponySelected)="betOnPony($event)" /&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>Dans l&#8217;exemple ci-dessus, chaque fois que l&#8217;utilisateur clique sur le bouton du composant poney,
il émet un événement <code>ponySelected</code>, avec le poney comme valeur
(le paramètre de la méthode <code>emit()</code>).
Le composant parent écoute cet événement, comme tu peux le voir dans le template,
et appellera sa méthode <code>betOnPony</code> avec la valeur de l&#8217;événement <code>$event</code>.
<code>$event</code> est la syntaxe que tu dois utiliser pour accéder à l&#8217;événement émis.
Ici, c&#8217;est l&#8217;objet <code>PonyModel</code>.</p>
</div>
<div class="paragraph">
<p>Le composant parent doit alors avoir une méthode <code>betOnPony()</code>,
qui sera appelée avec le poney sélectionné&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="javascript">betOnPony(event: PonyModel) {
  // do something with the received event
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Comme pour les <em>inputs</em>, tu peux choisir un alias pour les <em>outputs</em>.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="javascript">readonly ponySelected = output&lt;PonyModel&gt;({ alias: 'activated' });</code></pre>
</div>
</div>
<div class="paragraph">
<p>Le composant parent devra alors utiliser cet alias pour écouter l&#8217;événement&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="javascript">&lt;ns-pony [ponyModel]="ponyModel()" (activated)="betOnPony($event)" /&gt;</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_le_décorateur_output">11.7. Le décorateur <code>@Output</code></h3>
<div class="paragraph">
<p>Même si les <em>outputs</em> n&#8217;ont rien à voir avec les signaux,
la fonction <code>output()</code> décrite ci-dessus a été introduite en même temps que la fonction <code>input()</code>,
pour avoir une symétrie agréable entre les <em>inputs</em> et les <em>outputs</em>.</p>
</div>
<div class="paragraph">
<p>Avant cela, les <em>outputs</em> étaient définis en utilisant le décorateur <code>@Output</code>.
Ils utilisaient aussi une classe différente&#160;: <code>EventEmitter</code>, qui était inutilement liée
à la bibliothèque RxJS (nous en parlerons dans quelques chapitres).
Dans le cas où tu travailles sur une base de code avec des décorateurs,
voici comment un <em>output</em> est défini&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="javascript">@Output() readonly ponySelected = new EventEmitter&lt;PonyModel&gt;();</code></pre>
</div>
</div>
<div class="paragraph">
<p>et voici comment un alias peut être spécifié pour l'<em>output</em>&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="javascript">@Output('activated') ponySelected = new EventEmitter&lt;PonyModel&gt;();</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_cycle_de_vie">11.8. Cycle de vie</h3>
<div class="paragraph">
<p>Les composants et directives ont un cycle de vie. Quand Angular doit afficher un composant,
il commence par le construire et appelle donc le constructeur de la classe du composant.
Ensuite, il passera les valeurs initiales des <em>inputs</em> au composant.
Si les expressions passées en tant qu'<em>inputs</em> ont plus tard des valeurs différentes,
alors ces nouvelles valeurs sont de nouveau écrites dans les <em>inputs</em>.
Et enfin, si l&#8217;utilisateur navigue vers un autre composant, par exemple, le composant est détruit.
Normalement, le composant n&#8217;est plus accessible à partir ce moment-là,
et la machine virtuelle JavaScript peut supprimer l&#8217;objet du composant.</p>
</div>
<div class="paragraph">
<p>Angular te permet de réagir à ces différentes phases
(et d&#8217;autres plus avancées, que nous découvrirons plus tard).
Une chose est très importante à comprendre&#160;:
les <em>inputs</em> sont passés <strong>après</strong> que le composant ait été construit.
Il est donc interdit de lire les <em>inputs</em> pendant que le composant est en cours de construction.</p>
</div>
<div class="paragraph">
<p>Avec les <em>inputs</em> sous forme de signaux, essayer de le faire provoquera une exception déclenchée par le <code>InputSignal</code>.
Avec les <em>inputs</em> déclarés avec un décorateur, essayer de le faire te donnera simplement la valeur par défaut de la propriété,
plutôt que celle réellement passée par le composant parent.</p>
</div>
<div class="paragraph">
<p>Cela signifie que le composant suivant ne fonctionnera pas&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="javascript">export class PonyComponent {
  readonly color = input.required&lt;string&gt;();

  constructor() {
    // ❌ Don't do this
    console.log(`My initial color is ${this.color()}`);
  }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Si tu veux accéder à la valeur d&#8217;un <em>input</em>,
pour charger des données supplémentaires depuis le serveur, par exemple,
tu peux utiliser une méthode du cycle de vie.
Des options plus puissantes sont disponibles pour les <em>inputs</em> sous forme de signaux,
que nous découvrirons dans le prochain chapitre.</p>
</div>
<div class="paragraph">
<p>Plusieurs méthodes sont disponibles&#160;:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>la méthode <code>ngOnChanges</code> est appelée quand la valeur d&#8217;un ou plusieurs <em>inputs</em> change.
Elle recevra un dictionnaire <code>changes</code>, contenant les valeurs actuelles et précédentes des <em>inputs</em>,
enveloppées dans un <code>SimpleChange</code>.
Elle ne sera pas appelée s&#8217;il n&#8217;y a pas de changement.</p>
</li>
<li>
<p>la méthode <code>ngOnInit</code> est appelée une seule fois, après le premier changement (alors que la méthode <code>ngOnChanges</code> est appelée à chaque changement).
Elle est garantie d&#8217;être appelée même s&#8217;il n&#8217;y a pas d'<em>inputs</em>.
Mais si des <em>inputs</em> sont présents, elle est appelée après le premier appel de <code>ngOnChanges</code>.
Cela en fait la phase parfaite pour le travail d&#8217;initialisation qui dépend des valeurs des <em>inputs</em>,
comme le suggère son nom.</p>
</li>
<li>
<p>la méthode <code>ngOnDestroy</code> est appelée quand le composant est détruit.
Très utile pour nettoyer le composant.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>D&#8217;autres phases sont disponibles, mais sont pour des cas d&#8217;utilisation plus avancés.
Nous en parlerons dans le chapitre
<a href="#advanced-components">Composants et directives avancés</a>
un peu plus loin.</p>
</div>
<div class="paragraph">
<p>Nos exemples précédents fonctionneront mieux en utilisant <code>ngOnInit</code>.
Angular appelle la méthode <code>ngOnInit()</code> si elle est présente,
nous avons donc juste à l&#8217;implémenter dans notre directive/composant.
Mais la bonne pratique est d&#8217;implémenter l&#8217;interface <code>OnInit</code>.
Cela te force à implémenter la méthode, et à t&#8217;assurer que tu l&#8217;as correctement définie&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="javascript">export class PonyComponent implements OnInit {
  readonly color = input.required&lt;string&gt;();

  ngOnInit() {
    // ✅ Do this
    console.log(`My initial color is ${this.color()}`);
  }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Maintenant, nous avons accès à nos <em>inputs</em>&#160;!</p>
</div>
<div class="paragraph">
<p>Si tu veux faire quelque chose à chaque changement d'<em>input</em>, utilise <code>ngOnChanges</code>&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="javascript">export class PonyComponent implements OnChanges {
  readonly color = input.required&lt;string&gt;();

  ngOnChanges(changes: SimpleChanges): void {
    const ponyChange = changes['color'];
    console.log(`Color changed from ${ponyChange.previousValue}`);
    console.log(`to ${ponyChange.currentValue}`);
    console.log(`Is it the first change? ${ponyChange.isFirstChange()}`);

    // but you can also access the new value by reading the input
    console.log(`My new color is ${this.color()}`);
  }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Le paramètre <code>changes</code> est un dictionnaire, avec les noms des <em>inputs</em> comme clés,
et un objet <code>SimpleChange</code> avec deux attributs (la valeur précédente et la valeur actuelle) comme valeur,
ainsi qu&#8217;une méthode <code>isFirstChange()</code> pour savoir si c&#8217;est&#8230;&#8203; le premier changement.</p>
</div>
<div class="paragraph">
<p>La phase <code>ngOnDestroy</code> est conçue pour nettoyer le composant,
pour, par exemple, annuler des tâches en arrière-plan.
Ici, le <code>PonyComponent</code> affiche "hello" toutes les secondes quand elle est créée.
Quand le composant est retiré de la page, tu veux arrêter le <code>setInterval</code>
pour éviter une fuite de mémoire&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="javascript">export class PonyComponent implements OnDestroy {
  readonly color = input.required&lt;string&gt;();
  private interval: number;

  constructor() {
    this.interval = window.setInterval(() =&gt; console.log(`My color is ${this.color()}`), 1000);
  }

  ngOnDestroy(): void {
    window.clearInterval(this.interval);
  }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Si tu ne fais pas cela, JavaScript gardera l&#8217;instance du composant en mémoire,
et il affichera "hello" toutes les secondes pour toujours.</p>
</div>
</div>
<div class="sect2">
<h3 id="_métadonnées_spécifiques_des_composants">11.9. Métadonnées spécifiques des composants</h3>
<div class="paragraph">
<p>Les <em>inputs</em>, <em>outputs</em>, et les méthodes de cycle de vie que nous venons de décrire sont communs aux directives et aux composants.
Les composants, cependant, peuvent définir des styles qui s&#8217;appliqueront à leur template, et <strong>doivent</strong> avoir un template associé.</p>
</div>
</div>
<div class="sect2">
<h3 id="_template_url_de_template">11.10. Template / URL de template</h3>
<div class="paragraph">
<p>La caractéristique principale d&#8217;un <code>@Component</code> est d&#8217;avoir un template,
alors qu&#8217;une directive n&#8217;en a pas.
Tu peux soit déclarer ton template en ligne, avec l&#8217;attribut <code>template</code>, ou
utiliser une URL pour le placer dans un fichier séparé avec <code>templateUrl</code>
(mais tu ne peux pas définir les deux simultanément).</p>
</div>
<div class="paragraph">
<p>En règle générale, si ton template est petit (1-2 lignes),
c&#8217;est parfaitement acceptable de le garder en ligne.
Quand il commence à grossir, le déplacer dans son propre fichier est une bonne
façon d&#8217;éviter l&#8217;encombrement de ton composant.</p>
</div>
</div>
<div class="sect2">
<h3 id="_styles_url_de_styles">11.11. Styles / URL de styles</h3>
<div class="paragraph">
<p>Tu peux aussi définir les styles de ton composant.
C&#8217;est particulièrement utile si tu comptes faire des composants vraiment isolés.
Tu peux spécifier cela avec <code>styles</code> ou <code>styleUrl</code> (ou <code>styleUrls</code> si tu as plusieurs fichiers).</p>
</div>
<div class="paragraph">
<p>Comme tu peux le voir ci-dessous, l&#8217;attribut <code>styles</code> reçoit un tableau de règles
CSS sous forme de chaînes de caractères. Comme tu peux l&#8217;imaginer, elles deviennent
vite énormes, alors utiliser un fichier séparé et <code>styleUrl</code> est une bonne idée.
Comme le nom le laisse deviner, tu peux y indiquer un tableau d&#8217;URLs.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="javascript">@Component({
  selector: 'ns-pony',
  template: '&lt;div class="pony"&gt;My color is {{ color() }}&lt;/div&gt;',
  styles: ['.pony { background-color: lightgray; }']
})
export class PonyComponent {
  readonly color = input.required&lt;string&gt;();
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Nous avons laissé de côté deux ou trois points pour l&#8217;instant, comme les requêtes, les détections de changements,
les exports, les options d&#8217;encapsulation, etc.
Comme ce sont des options plus avancées, tu n&#8217;en auras pas besoin immédiatement,
mais ne t&#8217;inquiète pas, nous les verrons bientôt dans un chapitre dédié aux sujets avancés&#160;!</p>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<i class="fa icon-tip" title="Mise en pratique"></i>
</td>
<td class="content">
<div class="paragraph">
<p>Essaye notre exercice
<a href="https://angular-exercises.ninja-squad.com/exercises/4/race-detail">Détail d&#8217;une course</a> <span class="image"><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAIgAAACACAMAAADnN9ENAAACSVBMVEVMaXH7whr7whr7whr7whr7whr7whr7whr7whr7whr7whr7whp4o614o614o614o637whr7whp4o614o614o614o614o614o614o614o62EoKN4o614o637whqFXFKFXFKQnZm4kni0k3vA1Njr8fLd5+myytB/qLGFXFKFXFKcmY98oqp4o63V4uWFXFKFXFKoloWgmIx4o62Hpqu+nofCpI/b08yFXFKAoaaMnpzYzcSFXFKFXFKUnJaYm5O7mIDl5eOGrbaFXFKGk5Kfd2WSalyYcGClfmqhlIZ6lpx+hIWDaWOFXFKFXFJ/gICkl4nFqpeFXFKFXFKCamSDZV2EYFiDaWOCbmne2dTk7O77whqOZE6Ad3TIsJ6jwMflryWbb0h/gIDo6+rH2dz0vB58jZGIn6Cxgj17kZbOvK2FXFL7whq5iTqVt75/e3rPnC/eqSiMYk+FXFKjdkS4p6Ll6OjLtqbSwrXFubacu8PstSGynZiOsrqLZVzauj/013mrlI56mqLCtFrt69fY1dSApaTrvizz2oafgXqSb2aqxcuhrX/11GvO3uGQeHG5z9T20V7e3t7s7uX4y0P6xSjv5byYeHC+sKyli4TSzMrIzc28wcGwtLVHR0c8OztIR0c1NTWNkJEvLy+NioqTkJCHhISlqKnU2dpCQUGBhIRnZmZeYGBqbGyZnJ07Ozvf5ebLwsCmqapfYGFiYmLAw8Tw9fXs8vNqjZVBTE9PYmY4Pj9deH5mho5GU1Y9RUdhf4ZznKVKW140Njdz5u6AAAAAf3RSTlMAMIBQ7/+fEI/PYL8QcIBAIK+v/7+fz+8wUP/fYEAgEP//////////32D//yD//7///4//////UP///zDv///////P//////////+vj3Ag//+fQJ/////////fz///////////////////gHD///////+v//////////////9AWHP9fwAABxxJREFUeAHs1IVy5DAQBNBZ0DJ3mJUonGiPmZmZmZmZPv6ssb2oFFqHeYUq7LJ7mlatWhWVWDxBf4SkEHH6EwhPKk2/X0Z4sn9AknRSeJIx+u0SguXot8sLliG7QrFUKtOvUEkKVrUXpQZPT6EZrBdAX7FA0YsLX7ZCFv0w+gco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" alt="Pro" width="18"></span>&#160;!
Cet exercice va te guider dans la construction d&#8217;un composant avancé utilisant les <em>inputs</em>.</p>
</div>
</td>
</tr>
</table>
</div>
<div style="page-break-after: always;"></div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="reacting-to-signal-changes">12. Réagir aux changements des signaux</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Nous venons de découvrir comment utiliser <code>ngOnChanges</code> pour réagir aux changements de la valeur des <em>inputs</em>.
C&#8217;est très utile, mais c&#8217;est un peu lourd quand vous avez besoin de réagir uniquement aux changements de certains <em>inputs</em>.
Et bien sûr, c&#8217;est limité aux <em>inputs</em>, et uniquement aux <em>inputs</em>.</p>
</div>
<div class="paragraph">
<p>Nous avons aussi appris que les signaux ont des super-pouvoirs.
Grâce à eux, Angular sait qu&#8217;un template qui lit un signal doit être rafraîchi quand le signal change.
Nous pouvons aussi utiliser ces super-pouvoirs nous-mêmes, grâce à deux fonctions&#160;: <code>computed()</code> et <code>effect()</code>.</p>
</div>
<div class="sect2">
<h3 id="_signaux_calculés_avec_computed">12.1. Signaux calculés avec <code>computed</code></h3>
<div class="paragraph">
<p>As-tu déjà utilisé un tableur avec des formules&#160;? C&#8217;est génial, n&#8217;est-ce pas&#160;?
Tu peux additionner tous les montants d&#8217;une colonne <em>ventes</em> et stocker le résultat dans une cellule <em>total</em>.
Ensuite, tu peux utiliser une autre formule pour appliquer la TVA à ce total et stocker le résultat dans une autre cellule.
Si tu ajoutes une vente, ou si tu changes un montant, le total est automatiquement recalculé, et le total de TVA aussi.
Les signaux calculés permettent de faire la même chose.</p>
</div>
<div class="paragraph">
<p>Imaginons que notre composant poney reçoive un <code>PonyModel</code> en <em>input</em>, contenant (entre autres propriétés) un nom et une couleur.
Et disons que son template veut afficher son identité comme <code>NOM (couleur)</code> (par exemple "RAINBOW DASH (blue)").</p>
</div>
<div class="paragraph">
<p>La première chose qui vient à l&#8217;esprit est de le faire de cette façon dans le template&#160;:</p>
</div>
<div class="listingblock">
<div class="title">pony.component.html</div>
<div class="content">
<pre class="prettyprint highlight"><code data-lang="html">&lt;div&gt;{{ ponyModel().name.toUpperCase() }} ({{ ponyModel().color }})&lt;/div&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>C&#8217;est tout à fait correct.
Mais si l&#8217;application utilise la détection de changement "brute", cette transformation sera faite de nombreuses fois,
même si le poney est le même qu&#8217;avant.
Et si le template doit afficher l&#8217;identité plusieurs fois, copier-coller ce code n&#8217;est pas la meilleure idée.</p>
</div>
<div class="paragraph">
<p>Nous pourrions améliorer cela en déléguant à une méthode dans le composant&#160;:</p>
</div>
<div class="listingblock">
<div class="title">pony.component.html</div>
<div class="content">
<pre class="prettyprint highlight"><code data-lang="html">&lt;div&gt;{{ identity(ponyModel()) }}&lt;/div&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>Cela évite la duplication, mais cela invoque toujours la méthode <code>identity()</code> de nombreuses fois inutilement.</p>
</div>
<div class="paragraph">
<p>Une meilleure façon serait d&#8217;utiliser <code>ngOnChanges</code> pour calculer l&#8217;identité quand le <code>ponyModel</code> change,
et stocker le résultat dans une autre propriété&#160;:</p>
</div>
<div class="listingblock">
<div class="title">pony.component.ts</div>
<div class="content">
<pre class="prettyprint highlight"><code data-lang="typescript">readonly ponyModel = input.required&lt;PonyModel&gt;();
readonly identity = signal&lt;string&gt;('');

ngOnChanges() {
  this.identity.set(`${this.ponyModel().name.toUpperCase()} (${this.ponyModel().color})`);
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>C&#8217;est bien. Mais si nous introduisons plus tard un autre <em>input</em>, nous recalculerons l&#8217;identité chaque fois que
cet <em>input</em> non lié change, à moins que nous ne rendions notre méthode <code>ngOnChanges</code> plus complexe.
Remarque aussi comment nous sommes forcés d&#8217;initialiser le signal d&#8217;identité avec une fausse valeur par défaut.
Il doit y avoir une meilleure façon.</p>
</div>
<div class="paragraph">
<p>La meilleure façon est d&#8217;utiliser un signal <strong>computed</strong>.
Un signal <em>computed</em> est un signal en lecture seule,
dont la valeur est dérivée d&#8217;un autre (ou de plusieurs autres) signal(s)&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="typescript">readonly ponyModel = input.required&lt;PonyModel&gt;();
readonly identity = computed(() =&gt; `${this.ponyModel().name.toUpperCase()} (${this.ponyModel().color})`);</code></pre>
</div>
</div>
<div class="paragraph">
<p>La propriété <code>identity</code> est maintenant un <code>Signal&lt;string&gt;</code>,
dont la valeur contiendra toujours l&#8217;identité du poney contenu dans le signal <code>ponyModel</code>.
Il y a une dépendance qui est créée et suivie par Angular entre les deux signaux.
Dès que <code>ponyModel</code> change, <code>identity</code> change aussi.</p>
</div>
<div class="paragraph">
<p>Les signaux <em>computed</em> sont <em>mémorisés</em> et <em>calculés à la demande</em>,
ce qui les rend parfaits pour représenter un état qui peut être lu de nombreuses fois.
Cela signifie que l&#8217;identité d&#8217;un poney est <em>stockée</em> à l&#8217;intérieur du signal calculé.
Et elle n&#8217;est pas recalculée chaque fois que nous écrivons un nouveau poney,
mais seulement la prochaine fois que le signal d&#8217;identité est lu.
Tu peux essayer d&#8217;exécuter l&#8217;exemple suivant, et voir ce qui est affiché&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="typescript">const count = signal(1);
const double = computed(() =&gt; {
  console.log(`computing double of ${count()}`);
  return count() * 2;
});

console.log(double());
count.set(2);
count.set(3);
count.set(4);
console.log(double());
console.log(double());
console.log(double());</code></pre>
</div>
</div>
<div class="paragraph">
<p>Le résultat sera&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="text">'computing double of 1',
2,
'computing double of 4',
8,
8,
8</code></pre>
</div>
</div>
<div class="paragraph">
<p>Les signaux <em>computed</em> sont encore plus puissants lorsqu&#8217;ils dépendent de plusieurs signaux.
Disons que tu as un formulaire te permettant d&#8217;entrer un prix et une quantité,
et affichant un total, ainsi qu&#8217;un total avec TVA.
Programmer cela impérativement t&#8217;oblige à penser à calculer le total
et le total avec TVA chaque fois que tu changes le prix,
et aussi chaque fois que tu changes la quantité.
Les dépendances ne sont pas si évidentes, et cela peut rapidement devenir du code spaghetti.
Inclure une autre règle (comme un pourcentage de réduction) pourrait facilement introduire un bug.
Une fois que les champs du formulaire sont disponibles sous forme de signaux,
les signaux <em>computed</em> rendent la logique très facile à implémenter,
et très efficace aussi&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="typescript">const total = computed(() =&gt; price() * quantity());
const totalAfterDiscount = computed(() =&gt; total() * (1 - discountRate()));
const vatIncludedTotalAfterDiscount = computed(() =&gt; totalAfterDiscount() * vatRate());</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_effets_avec_effect">12.2. Effets avec <code>effect</code></h3>
<div class="paragraph">
<p>Les effets sont une autre façon de réagir aux changements de signaux.
Au lieu d&#8217;être utilisés pour calculer une valeur dérivée,
ils sont utilisés pour déclencher un <em>effet secondaire</em> (d&#8217;où le nom) lorsqu&#8217;un signal change.
Des exemples de tels effets secondaires sont stocker une valeur d&#8217;un signal dans le stockage local lorsqu&#8217;un signal change,
ou mettre à jour le DOM lorsqu&#8217;un signal change.
Il peut être tentant d&#8217;utiliser un effet pour mettre à jour d&#8217;autres signaux lorsqu&#8217;un signal source change.
C&#8217;est possible, mais cela peut entraîner des boucles infinies,
et les signaux <em>computed</em> sont plus adaptés à une telle tâche.</p>
</div>
<div class="paragraph">
<p>Pour illustrer comment les effets fonctionnent,
nous allons simplement utiliser un qui trace les changements d&#8217;un <em>input</em> dans la console.</p>
</div>
<div class="listingblock">
<div class="title">pony.component.ts</div>
<div class="content">
<pre class="prettyprint highlight"><code data-lang="typescript">readonly ponyModel = input.required&lt;PonyModel&gt;();

constructor() {
  effect(() =&gt; console.log(`${this.ponyModel().name} - ${this.ponyModel().color}`));
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Cet exemple affichera le nom et la couleur du poney chaque fois que le parent passe un poney en <em>input</em>.</p>
</div>
<div class="paragraph">
<p>Contrairement aux signaux <em>computed</em>,
les effets sont liés au composant (ou directive, ou service, ou pipe) dans lequel ils sont construits.
Un effet doit être créé pendant la construction du composant.
Il est possible de le faire ailleurs, mais c&#8217;est plus complexe, et nous en apprendrons davantage plus tard.
L&#8217;avantage de cette restriction est qu&#8217;Angular se charge de détruire
l&#8217;effet lorsque son composant propriétaire est détruit.</p>
</div>
<div class="paragraph">
<p>Une autre fonctionnalité qui doit être comprise est que les effets ne sont pas exécutés de manière synchrone,
chaque fois qu&#8217;un de leurs signaux source change.
Au lieu de cela, ils sont appelés de manière asynchrone, avant la détection de changement.
Cela signifie que les valeurs intermédiaires des signaux ne seront pas remarquées par les effets.</p>
</div>
<div class="paragraph">
<p>Illustrons cela en utilisant le composant suivant&#160;:</p>
</div>
<div class="listingblock">
<div class="title">score.component.ts</div>
<div class="content">
<pre class="prettyprint highlight"><code data-lang="typescript">readonly score = signal(0);

constructor() {
  effect(() =&gt; console.log(`The score is now ${this.score()}`));
}

plusOne() {
  this.score.update(s =&gt; s + 1);
}

plusTwo() {
  this.plusOne();
  this.plusOne();
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Créer le composant affichera <em>"The score is now 0"</em>, car la fonction d&#8217;effet est toujours exécutée une fois initialement
pour pouvoir savoir de quels signaux l&#8217;effet dépend.</p>
</div>
<div class="paragraph">
<p>Appeler la méthode <code>plusTwo()</code> (en réaction à un clic sur un bouton par exemple),
passera le signal de score à 1, puis à 2.
Mais seule la valeur finale du score
(c&#8217;est-à-dire la valeur qui est stockée dans le signal une fois que l&#8217;événement de clic a été géré),
sera affichée par l&#8217;effet.
Ainsi, la console affichera uniquement <em>"The score is now 2"</em>.</p>
</div>
<div class="paragraph">
<p>Il reste encore plus de choses à apprendre sur les signaux, les signaux <em>computed</em> et les effets
(comme la fonction <code>untracked</code> et la fonction d&#8217;égalité, les fonctions de nettoyage des effets),
mais nous garderons cela pour plus tard.</p>
</div>
<div class="paragraph">
<p>Tu en sais maintenant suffisamment pour commencer à utiliser les signaux.
Et espérons que
tu comprends pourquoi ils sont si formidables pour nous aider à gérer l&#8217;état de nos composants de manière simple,
expressive et concise.</p>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<i class="fa icon-tip" title="Mise en pratique"></i>
</td>
<td class="content">
<div class="paragraph">
<p>Essaye notre exercice
<a href="https://angular-exercises.ninja-squad.com/exercises/5/pony-component">Composant Pony</a> <span class="image"><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAIgAAACACAMAAADnN9ENAAACSVBMVEVMaXH7whr7whr7whr7whr7whr7whr7whr7whr7whr7whr7whp4o614o614o614o637whr7whp4o614o614o614o614o614o614o614o62EoKN4o614o637whqFXFKFXFKQnZm4kni0k3vA1Njr8fLd5+myytB/qLGFXFKFXFKcmY98oqp4o63V4uWFXFKFXFKoloWgmIx4o62Hpqu+nofCpI/b08yFXFKAoaaMnpzYzcSFXFKFXFKUnJaYm5O7mIDl5eOGrbaFXFKGk5Kfd2WSalyYcGClfmqhlIZ6lpx+hIWDaWOFXFKFXFJ/gICkl4nFqpeFXFKFXFKCamSDZV2EYFiDaWOCbmne2dTk7O77whqOZE6Ad3TIsJ6jwMflryWbb0h/gIDo6+rH2dz0vB58jZGIn6Cxgj17kZbOvK2FXFL7whq5iTqVt75/e3rPnC/eqSiMYk+FXFKjdkS4p6Ll6OjLtqbSwrXFubacu8PstSGynZiOsrqLZVzauj/013mrlI56mqLCtFrt69fY1dSApaTrvizz2oafgXqSb2aqxcuhrX/11GvO3uGQeHG5z9T20V7e3t7s7uX4y0P6xSjv5byYeHC+sKyli4TSzMrIzc28wcGwtLVHR0c8OztIR0c1NTWNkJEvLy+NioqTkJCHhISlqKnU2dpCQUGBhIRnZmZeYGBqbGyZnJ07Ozvf5ebLwsCmqapfYGFiYmLAw8Tw9fXs8vNqjZVBTE9PYmY4Pj9deH5mho5GU1Y9RUdhf4ZznKVKW140Njdz5u6AAAAAf3RSTlMAMIBQ7/+fEI/PYL8QcIBAIK+v/7+fz+8wUP/fYEAgEP//////////32D//yD//7///4//////UP///zDv///////P//////////+vj3Ag//+fQJ/////////fz///////////////////gHD///////+v//////////////9AWHP9fwAABxxJREFUeAHs1IVy5DAQBNBZ0DJ3mJUonGiPmZmZmZmZPv6ssb2oFFqHeYUq7LJ7mlatWhWVWDxBf4SkEHH6EwhPKk2/X0Z4sn9AknRSeJIx+u0SguXot8sLliG7QrFUKtOvUEkKVrUXpQZPT6EZrBdAX7FA0YsLX7ZCFv0w+gco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" alt="Pro" width="18"></span>&#160;!
Cet exercice va te guider dans la construction d&#8217;un composant avancé
avec <em>inputs</em>, <em>outputs</em> et signaux <em>computed</em>.</p>
</div>
</td>
</tr>
</table>
</div>
<div style="page-break-after: always;"></div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="styles">13. Style des composants et encapsulation</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Faisons une pause pour parler un peu style et CSS quelques instants.
Oh nooOon, mais pourquoi parler de CSS&#160;?!
Parce qu&#8217;Angular fait beaucoup pour nous sur ce sujet.</p>
</div>
<div class="paragraph">
<p>En tant que développeur web, tu ajoutes souvent des classes CSS sur tes éléments.
Et l&#8217;essence même de CSS, c&#8217;est que ce style va <em>cascader</em> (rappelons que CSS signifie <em>Cascading Style Sheet</em>).
C&#8217;est la plupart du temps un comportement voulu (pour par exemple changer la police globalement dans toute l&#8217;application),
mais des fois non.
Imaginons que tu veux ajouter un style sur l&#8217;élément sélectionné d&#8217;une liste&#160;:
tu vas probablement utiliser un sélecteur CSS très restreint, comme <code>li.selected</code>.
Ou encore plus restreint, en utilisant une convention comme <a href="https://en.bem.info/methodology/css/">BEM</a>,
parce que tu veux styler l&#8217;élément sélectionné dans une partie bien spécifique de ton application.</p>
</div>
<div class="paragraph">
<p>Et sur ce point Angular peut se rendre utile.
Les styles que tu définis dans un composant (soit dans l&#8217;attribut <code>styles</code>,
soit dans un fichier CSS dédié avec <code>styleUrl</code> ou <code>styleUrls</code>)
sont limités par Angular à ce composant et seulement celui-ci.
Cela s&#8217;appelle l&#8217;encapsulation de style (<em>style encapsulation</em>).
Mais comment est-ce possible&#160;?</p>
</div>
<div class="paragraph">
<p>Tout commence par l&#8217;écriture d&#8217;un style.
Ensuite, cela dépend de la stratégie que tu auras choisie pour l&#8217;attribut <code>encapsulation</code>
du décorateur du composant. Cet attribut peut prendre trois valeurs&#160;:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>ViewEncapsulation.Emulated</code>, qui est la valeur par défaut&#160;;</p>
</li>
<li>
<p><code>ViewEncapsulation.ShadowDom</code>, qui s&#8217;appuie sur le <em>Shadow DOM v1</em>&#160;;</p>
</li>
<li>
<p><code>ViewEncapsulation.None</code>, qui signifie que tu ne veux pas d&#8217;encapsulation.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Chaque valeur va évidemment engendrer un comportement différent.
Prenons par exemple notre composant <code>PonyComponent</code>, que tu dois commencer à bien connaître.
C&#8217;est une version simplifiée, affichant seulement le nom du poney dans une <code>div</code>.
Pour l&#8217;exemple, ajoutons une classe CSS <code>red</code> à cette <code>div</code>&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="javascript">import { Component, signal, ViewEncapsulation } from '@angular/core';

@Component({
  selector: 'ns-pony',
  template: `&lt;div class="red"&gt;{{ name() }}&lt;/div&gt;`,
  styles: [
    `
      .red {
        color: red;
      }
    `
  ],
  // that's the same as the default mode
  encapsulation: ViewEncapsulation.Emulated
})
export class PonyComponent {
  readonly name = signal('Rainbow Dash');
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Cette classe est ensuite utilisée dans les styles du composant&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="css">.red {
  color: red;
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Comme tu le vois, on veut afficher le nom du poney avec une police rouge.</p>
</div>
<div class="sect2">
<h3 id="_stratégie_shadow_dom">13.1. Stratégie <em>Shadow DOM</em></h3>
<div class="paragraph">
<p>Si tu utilises la stratégie <code>ShadowDom</code>,
tu demandes à Angular d&#8217;utiliser le <em>Shadow DOM</em> du navigateur pour assurer l&#8217;encapsulation.
Le <em>Shadow DOM</em> fait partie de la spécification des Web Component.
Cette spécification permet de créer des éléments dans un DOM spécial, parfaitement encapsulé.
Avec cette stratégie, si on inspecte le DOM généré dans notre navigateur, on y verra&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="html">&lt;ns-pony&gt;
  #shadow-root (open)
    &lt;style&gt;.red {color: red}&lt;/style&gt;
    &lt;div class="red"&gt;Rainbow Dash&lt;/div&gt;
&lt;/ns-pony&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>Tu peux y repérer <code>#shadow-root (open)</code> que Chrome affiche dans l&#8217;inspecteur&#160;:
c&#8217;est parce que notre composant a été ajouté dans un élément du <em>Shadow DOM</em>&#160;!
Et on peut aussi voir que notre style a été ajouté en tête du contenu du composant.</p>
</div>
<div class="paragraph">
<p>Avec la stratégie <code>ShadowDom</code>, tu peux être sûr que les styles de ton composant ne
vont pas "transpirer" sur tes composants enfants s&#8217;ils utilisent la stratégie <code>ShadowDom</code> eux aussi.
Mais ils <em>vont</em> transpirer sur les composants enfants sinon, ce qui est peut être pratique dans certains cas.</p>
</div>
<div class="paragraph">
<p>Mais rappelle-toi, le <em>Shadow DOM</em> est une spécification vraiment récente,
qui n&#8217;est pas encore disponible dans tous les navigateurs.
Tu peux en vérifier la disponibilité sur le merveilleux site <a href="http://caniuse.com/#feat=shadowdomv1">caniuse.com</a>.
Alors sois prudent quand tu l&#8217;utilises dans tes applications&#160;!</p>
</div>
<div class="paragraph">
<p>Détail utile à savoir&#160;: le sélecteur du composant doit être en <em>kebab-case</em> (avec des tirets),
sinon la stratégie <code>ShadowDom</code> ne fonctionnera pas.</p>
</div>
</div>
<div class="sect2">
<h3 id="_stratégie_emulated_émulée">13.2. Stratégie <em>Emulated</em> ("émulée")</h3>
<div class="paragraph">
<p>Comme je le disais précédemment, c&#8217;est la stratégie par défaut.
Et la raison en est simple&#160;:
elle émule (d&#8217;où le nom) la stratégie <code>ShadowDom</code>, mais sans utiliser le <em>Shadow DOM</em>.
Elle peut donc être utilisée partout, et les styles ne "transpireront" dans les composants enfants.</p>
</div>
<div class="paragraph">
<p>Pour y parvenir, Angular va <em>inliner</em> le CSS que nous définirons dans le <code>&lt;head&gt;</code> de la page
(et non pas dans chaque composant comme on l&#8217;a vu avec la stratégie <code>ShadowDom</code>).
Mais avant de l'<em>inliner</em>, Angular va réécrire le sélecteur CSS, pour lui ajouter un attribut identifiant unique.
Cet attribut unique sera ensuite ajouté sur tous les éléments du template du composant&#160;!
Comme ceci, le style s&#8217;appliquera sur notre composant uniquement.
Le même exemple donnerait donc ceci&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="html">&lt;html&gt;
  &lt;head&gt;
    &lt;style&gt;.red[_ngcontent-dvb-3] {color: red}&lt;/style&gt;
  &lt;/head&gt;
  &lt;body&gt;
    ...
    &lt;ns-pony _ngcontent-dvb-2="" _nghost-dvb-3=""&gt;
      &lt;div _ngcontent-dvb-3="" class="red"&gt;Rainbow Dash&lt;/div&gt;
    &lt;/ns-pony&gt;
  &lt;/body&gt;
&lt;/html&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>Le sélecteur de classe <code>red</code> a été réécrit en <code>.red[_ngcontent-dvb-3]</code>,
alors il ne s&#8217;appliquera que sur les éléments qui auront à la fois la classe <code>red</code>
et l&#8217;attribut <code>_ngcontent-dvb-3</code>.
Tu peux aussi vérifier que cet attribut a bien été ajouté automatiquement à notre <code>div</code>,
pour que tout fonctionne parfaitement.
L&#8217;élément <code>&lt;ns-pony&gt;</code> a aussi quelques attributs&#160;:
<code>_ngcontent-dvb-2</code> qui est l&#8217;identifiant unique généré pour son parent,
et <code>_nghost-dvb-3</code> qui est l&#8217;identifiant unique de l&#8217;élément hôte lui-même.
Oui, parce que l&#8217;on peut aussi ajouter des styles sur l&#8217;élément hôte, comme nous le verrons bientôt.</p>
</div>
</div>
<div class="sect2">
<h3 id="_stratégie_none_aucune">13.3. Stratégie <em>None</em> ("aucune")</h3>
<div class="paragraph">
<p>Cette stratégie ne réalise aucune encapsulation.
Les styles seront <em>inlinés</em> en haut de la page
(comme pour la stratégie <code>Emulated</code>), mais ne seront pas réécrits.
Ils se comporteront donc comme des styles "normaux", qui cascaderont sur les enfants.</p>
</div>
</div>
<div class="sect2">
<h3 id="_style_lhôte">13.4. Style l&#8217;hôte</h3>
<div class="paragraph">
<p>Un sélecteur CSS spécial existe pour styler spécifiquement l&#8217;élément hôte.
Il s&#8217;appelle <code>:host</code>, et il vient de la spécification des Web Components&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="css">:host {
  display: block;
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Il sera conservé tel quel avec la stratégie <code>ShadowDom</code>, comme dans la spécification du <em>Shadow DOM</em>,
ou sera réécrit en <code>[_nghost-xxx]</code> si tu utilises <code>Emulated</code>.</p>
</div>
<div class="paragraph">
<p>Pour conclure, il n&#8217;y a pas grand-chose à faire pour avoir des styles parfaitement encapsulés,
car la stratégie <code>Emulated</code> fait tout le boulot pour nous.
Tu peux basculer sur la stratégie <code>ShadowDom</code> si tu ne cibles que des navigateurs spécifiques,
ou sur <code>None</code> si tu n&#8217;as pas besoin d&#8217;encapsuler tes styles.
Cette stratégie peut se définir au sein de chaque composant,
ou globalement pour l&#8217;application complète dans le module racine.</p>
</div>
<div style="page-break-after: always;"></div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="pipes">14. <em>Pipes</em></h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_ceci_nest_pas_une_pipe">14.1. Ceci n&#8217;est pas une pipe</h3>
<div class="paragraph">
<p>Souvent, les données brutes n&#8217;ont pas la forme exacte que l&#8217;on voudrait afficher dans la vue.
On a envie de les transformer, les formater, les tronquer, etc.
AngularJS&#160;1.x avait une fonctionnalité bien pratique pour ça, mais mal-nommée&#160;: les filters ("filtres").
Ils en ont tiré une leçon, et ces transformateurs de données ont désormais un nom pertinent&#160;!
Non, c&#8217;est une blague&#160;: ils se nomment désormais <em>pipes</em> ("tuyaux") :).</p>
</div>
<div class="paragraph">
<p>Comme les composants, les <em>pipes</em> peuvent être <em>standalone</em> ou pas. Les <em>pipes</em> fournis par Angular et dont nous
allons discuter ici sont tous standalone, et font tous partie de <code>CommonModule</code>.
Ainsi, pour pouvoir les utiliser dans un composant, il faudra les ajouter aux <code>imports</code> de ce composant,
ou bien y ajouter le <code>CommonModule</code>.</p>
</div>
<div class="paragraph">
<p>Étudions quelques cas d&#8217;exemple.</p>
</div>
</div>
<div class="sect2">
<h3 id="_json">14.2. json</h3>
<div class="paragraph">
<p><code>json</code> est un <em>pipe</em> pas tellement utile en production, mais bien pratique pour le débug.
Ce <em>pipe</em> applique simplement <code>JSON.stringify()</code> sur tes données.
Si tu as dans tes données un signal contenant un tableau de poneys nommé <code>ponies</code>,
et que tu veux rapidement voir ce qu&#8217;il contient, tu aurais pu écrire&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="html">&lt;p&gt;{{ ponies() }}&lt;/p&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>Pas de chance, cela affichera <code>[object Object]</code>&#8230;&#8203;</p>
</div>
<div class="paragraph">
<p>Mais <code>JsonPipe</code> arrive à la rescousse.
Tu peux l&#8217;utiliser dans n&#8217;importe quelle expression, au sein de ton HTML&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="html">&lt;p&gt;{{ ponies() | json }}&lt;/p&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>Et cela affichera la représentation JSON de ton objet&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="html">&lt;p&gt;[ { "name": "Rainbow Dash" }, { "name": "Pinkie Pie" } ]&lt;/p&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>On peut aussi comprendre avec cet exemple d&#8217;où vient le nom 'pipe'. Pour utiliser un <em>pipe</em>, il faut ajouter le caractère <em>pipe</em> (<code>|</code>) après tes données, puis le nom du <em>pipe</em> à utiliser. L&#8217;expression est évaluée, et le résultat traverse le <em>pipe</em>. Et il est possible de chaîner plusieurs <em>pipes</em>, genre&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="html">&lt;p&gt;{{ ponies() | slice:0:2 | json }}&lt;/p&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>On reviendra sur le <em>pipe</em> <code>slice</code>, mais tu constates qu&#8217;on enchaîne le <em>pipe</em> <code>slice</code> et le <em>pipe</em> <code>json</code>.</p>
</div>
<div class="paragraph">
<p>Tu peux en utiliser dans une expression interpolée, ou une expression de propriété, mais <strong>pas</strong> dans une instruction d&#8217;événement.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="html">&lt;p [textContent]="ponies() | json"&gt;&lt;/p&gt;</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_slice">14.3. slice</h3>
<div class="paragraph">
<p>Si tu as envie de n&#8217;afficher qu&#8217;un sous-ensemble d&#8217;une collection, <code>slice</code> est ton ami.
Il fonctionne comme la méthode du même nom en JavaScript, et prend deux paramètres&#160;:
un indice de départ et, éventuellement, un indice de fin.
Pour passer un paramètre à un <em>pipe</em>, il faut lui ajouter un caractère <code>:</code> et le premier paramètre, puis éventuellement un autre <code>:</code> et le second argument, etc.</p>
</div>
<div class="paragraph">
<p>Cet exemple va afficher les deux premiers éléments de ma liste de poneys.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="html">&lt;p&gt;{{ ponies() | slice:0:2 | json }}&lt;/p&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p><code>slice</code> fonctionne non seulement avec des tableaux, mais aussi avec des chaînes de caractères, pour n&#8217;en afficher qu&#8217;une partie&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="html">&lt;p&gt;{{ 'Ninja Squad' | slice:0:5 }}&lt;/p&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>et cela affichera seulement 'Ninja'.</p>
</div>
<div class="paragraph">
<p>Si tu passes à <code>slice</code> seulement un entier positif N, il prendra les éléments de N à la fin.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="html">&lt;p&gt;{{ 'Ninja Squad' | slice:3 }}&lt;/p&gt;
&lt;!-- will display 'ja Squad' --&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>Si tu lui passes un entier négatif, il prendra les N <strong>derniers</strong> éléments.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="html">&lt;p&gt;{{ 'Ninja Squad' | slice:-5 }}&lt;/p&gt;
&lt;!-- will display 'Squad' --&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>Comme nous l&#8217;avons vu, tu peux aussi passer à <code>slice</code> un indice de fin&#160;:
il prendra alors les éléments de l&#8217;indice de départ jusqu&#8217;à l&#8217;indice de fin.</p>
</div>
<div class="paragraph">
<p>Si cet indice est négatif, il prendra les éléments jusqu&#8217;à cet indice, mais en partant cette fois de la fin.</p>
</div>
<div class="paragraph">
<p>Comme tu peux utiliser <code>slice</code> dans n&#8217;importe quelle expression, tu peux aussi l&#8217;utiliser avec <code>@for</code>&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="javascript">import { Component, signal } from '@angular/core';
import { SlicePipe } from '@angular/common';
import { PonyModel } from '../templates/pony.model';

@Component({
  selector: 'ns-ponies',
  template: `@for (pony of ponies() | slice: 0 : 2; track pony.id) {
    &lt;div&gt;{{ pony.name }}&lt;/div&gt;
  }`,
  imports: [SlicePipe]
})
export class PoniesComponent {
  readonly ponies = signal&lt;Array&lt;PonyModel&gt;&gt;([
    { id: 1, name: 'Rainbow Dash' },
    { id: 2, name: 'Pinkie Pie' },
    { id: 3, name: 'Fluttershy' }
  ]);
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Le composant ne créera ici que deux <code>div</code>, pour les deux premiers poneys, parce qu&#8217;on a appliqué <code>slice</code> à la collection.</p>
</div>
<div class="paragraph">
<p>Le paramètre d&#8217;un <em>pipe</em> peut bien évidemment avoir une valeur dynamique&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="javascript">import { Component, signal } from '@angular/core';
import { SlicePipe } from '@angular/common';
import { PonyModel } from '../templates/pony.model';

@Component({
  selector: 'ns-ponies',
  template: `@for (pony of ponies() | slice: 0 : size(); track pony.id) {
    &lt;div&gt;{{ pony.name }}&lt;/div&gt;
  }`,
  imports: [SlicePipe]
})
export class PoniesComponent {
  readonly size = signal(2);
  readonly ponies = signal&lt;Array&lt;PonyModel&gt;&gt;([
    { id: 1, name: 'Rainbow Dash' },
    { id: 2, name: 'Pinkie Pie' },
    { id: 3, name: 'Fluttershy' }
  ]);
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Voici l&#8217;exemple parfait d&#8217;affichage dynamique où l&#8217;utilisateur décide combien d&#8217;éléments il veut voir affichés.</p>
</div>
</div>
<div class="sect2">
<h3 id="_keyvalue_clé_valeur">14.4. keyvalue ("clé valeur")</h3>
<div class="paragraph">
<p>Ce <em>pipe</em>, introduit par Angular&#160;6.1,
permet d&#8217;itérer sur une <code>Map</code> ou un objet,
et ainsi d&#8217;afficher les couples clé/valeur dans nos templates.</p>
</div>
<div class="paragraph">
<p>A noter qu&#8217;il ordonne par défaut les clés&#160;:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>d&#8217;abord par ordre lexicographique si ce sont toutes deux des chaînes de caractères</p>
</li>
<li>
<p>puis par valeur si ce sont toutes deux des nombres</p>
</li>
<li>
<p>puis par valeur booléenne si ce sont toutes deux des booléens (<code>false</code> avant <code>true</code>)</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Et si les clés sont de type différent,
elles seront converties en chaînes de caractères
puis comparées.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="javascript">@Component({
  selector: 'ns-ponies',
  template: `
    &lt;ul&gt;
      &lt;!-- entry contains { key: number, value: PonyModel } --&gt;
      @for (entry of ponies() | keyvalue; track entry) {
        &lt;li&gt;{{ entry.key }} - {{ entry.value.name }}&lt;/li&gt;
      }
    &lt;/ul&gt;
  `,
  imports: [KeyValuePipe]
})
export class PoniesComponent {
  readonly ponies = signal(new Map&lt;number, PonyModel&gt;());

  constructor() {
    this.ponies().set(103, { name: 'Rainbow Dash' });
    this.ponies().set(56, { name: 'Pinkie Pie' });
  }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Si vous avez des clés <code>null</code> ou <code>undefined</code>,
elles seront affichées à la fin.</p>
</div>
<div class="paragraph">
<p>Il est aussi possible de définir votre propre comparateur&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="javascript">@Component({
  selector: 'ns-ponies',
  template: `
    &lt;ul&gt;
      &lt;!-- entry contains { key: PonyModel, value: number } --&gt;
      @for (entry of poniesWithScore() | keyvalue: ponyComparator; track entry) {
        &lt;li&gt;{{ entry.key.name }} - {{ entry.value }}&lt;/li&gt;
      }
    &lt;/ul&gt;
  `,
  imports: [KeyValuePipe]
})
export class PoniesComponent {
  readonly poniesWithScore = signal(new Map&lt;PonyModel, number&gt;());

  constructor() {
    this.poniesWithScore().set({ name: 'Rainbow Dash' }, 430);
    this.poniesWithScore().set({ name: 'Rainbow Dash' }, 680);
    this.poniesWithScore().set({ name: 'Pinkie Pie' }, 125);
  }

  /*
   * Defines a custom comparator to order the elements by the name of the PonyModel (the key)
   */
  ponyComparator(a: KeyValue&lt;PonyModel, number&gt;, b: KeyValue&lt;PonyModel, number&gt;): -1 | 0 | 1 {
    if (a.key.name === b.key.name) {
      return 0;
    }
    return a.key.name &lt; b.key.name ? -1 : 1;
  }
}</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_uppercase_majuscule">14.5. uppercase ("majuscule")</h3>
<div class="paragraph">
<p>Comme son nom le révèle merveilleusement aux bilingues, ce <em>pipe</em> transforme une chaîne de caractères dans sa version MAJUSCULE&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="html">&lt;p&gt;{{ 'Ninja Squad' | uppercase }}&lt;/p&gt;
&lt;!-- will display 'NINJA SQUAD' --&gt;</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_lowercase_minuscule">14.6. lowercase ("minuscule")</h3>
<div class="paragraph">
<p>Pendant du précédent, ce <em>pipe</em> transforme une chaîne de caractères dans sa version minuscule&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="html">&lt;p&gt;{{ 'Ninja Squad' | lowercase }}&lt;/p&gt;
&lt;!-- will display 'ninja squad' --&gt;</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_titlecase_titre">14.7. titlecase ("titre")</h3>
<div class="paragraph">
<p>Angular&#160;4 ajoute un nouveau pipe <code>titlecase</code>.
Celui-ci change la première lettre de chaque mot en majuscule&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="html">&lt;p&gt;{{ 'ninja squad' | titlecase }}&lt;/p&gt;
&lt;!-- will display 'Ninja Squad' --&gt;</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_number_nombre">14.8. number ("nombre")</h3>
<div class="admonitionblock warning">
<table>
<tr>
<td class="icon">
<i class="fa icon-warning" title="Attention"></i>
</td>
<td class="content">
Les <em>pipes</em> suivants (<code>number</code>, <code>percent</code>, <code>currency</code>, <code>date</code>) sont des aides à l&#8217;internationalisation.
Ils ont été complètement revus avec la version 5.0 d&#8217;Angular,
et n&#8217;utilisent plus l&#8217;API Intl des navigateurs (source de nombreux problèmes).
L&#8217;équipe Angular a donc implémenté elle-même la logique d&#8217;internationalisation.
Les exemples suivants utilisent la nouvelle implémentation des <em>pipes</em> introduite avec Angular&#160;5,
sans s&#8217;attarder sur l&#8217;aspect internationalisation,
qui est couvert dans un
<a href="#internationalisation">chapitre</a>
dédié en fin d&#8217;ouvrage.
Les exemples utilisent ici la locale par défaut d&#8217;Angular,
à savoir <code>en-US</code>.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Ce <em>pipe</em> permet de formater un nombre.</p>
</div>
<div class="paragraph">
<p>Il prend un seul paramètre, une chaîne de caractères, sous la forme <code>{integerDigits}.{minFractionDigits}-{maxFractionDigits}</code>, où chaque partie est facultative.
Ces parties indiquent:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>combien de chiffres veut-on dans la partie entière;</p>
</li>
<li>
<p>combien de chiffres de précision minimale veut-on dans la partie décimale;</p>
</li>
<li>
<p>combien de chiffres de précision maximale veut-on dans la partie décimale.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Quelques exemples, à commencer sans <em>pipe</em>&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="html">&lt;p&gt;{{ 12345 }}&lt;/p&gt;
&lt;!-- will display '12345' --&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>Utiliser le <em>pipe</em> <code>number</code> va grouper la partie entière, même sans aucun paramètre&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="html">&lt;p&gt;{{ 12345 | number }}&lt;/p&gt;
&lt;!-- will display '12,345' --&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>Le paramètre <code>integerDigits</code> va compléter à gauche avec des zéros si besoin&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="html">  &lt;p&gt;{{ 12345 | number:'6.' }}&lt;/p&gt;
  &lt;!-- will display '012,345' --&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>Le paramètre <code>minFractionDigits</code> est la précision minimale de la partie décimale, donc il complétera avec des zéros à droite&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="html">&lt;p&gt;{{ 12345 | number:'.2' }}&lt;/p&gt;
&lt;!-- will display '12,345.00' --&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>Le paramètre <code>maxFractionDigits</code> est la précision maximale de la partie décimale. Il est obligatoire de donner une valeur à <code>minFractionDigits</code>, fut-elle 0, si tu veux l&#8217;utiliser. Si le nombre a plus de décimale que cette valeur, alors il sera arrondi&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="html">&lt;p&gt;{{ 12345.13 | number:'.1-1' }}&lt;/p&gt;
&lt;!-- will display '12,345.1' --&gt;

&lt;p&gt;{{ 12345.16 | number:'.1-1' }}&lt;/p&gt;
&lt;!-- will display '12,345.2' --&gt;</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_percent_pourcent">14.9. percent ("pourcent")</h3>
<div class="paragraph">
<p>Sur le même principe, <code>percent</code> permet d&#8217;afficher&#8230;&#8203; un pourcentage&#160;!</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="html">&lt;p&gt;{{ 0.8 | percent }}&lt;/p&gt;
&lt;!-- will display '80%' --&gt;

&lt;p&gt;{{ 0.8 | percent:'.3' }}&lt;/p&gt;
&lt;!-- will display '80.000%' --&gt;</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_currency_devise_monétaire">14.10. currency ("devise monétaire")</h3>
<div class="paragraph">
<p>Comme on l&#8217;imagine, ce <em>pipe</em> permet de formater une somme d&#8217;argent dans la devise que tu veux.
Il faut lui fournir au moins un paramètre&#160;:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>le code ISO de la devise ('EUR', 'USD'&#8230;&#8203;)</p>
</li>
<li>
<p>Optionnellement, une option indiquant si l&#8217;on souhaite afficher le symbole ('€', '$', 'CA$') avec <code>'symbol'</code> ou le code ISO avec <code>'code'</code>,
voire le symbole raccourci avec <code>'symbol-narrow'</code>.
Le symbole raccourci est par exemple <code>$</code>, alors que le symbole est <code>CA$</code> pour les dollars canadiens.
Par défaut, l&#8217;option est <code>'symbol'</code>.</p>
</li>
<li>
<p>Optionnellement, une chaîne de formatage du montant, avec la même syntaxe que <code>number</code>.</p>
</li>
</ul>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="html">&lt;p&gt;{{ 10.6 | currency:'CAD' }}&lt;/p&gt;
&lt;!-- will display 'CA$10.60' --&gt;

&lt;p&gt;{{ 10.6 | currency:'CAD':'symbol-narrow' }}&lt;/p&gt;
&lt;!-- will display '$10.60' --&gt;

&lt;p&gt;{{ 10.6 | currency:'EUR':'code':'.3' }}&lt;/p&gt;
&lt;!-- will display 'EUR10.600' --&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>Si tu ne fournis pas le code ISO de la devise,
alors <code>USD</code> est utilisé,
à moins que tu ne le configures globalement (depuis Angular&#160;9).
Lis le chapitre sur
<a href="#internationalisation">l&#8217;internationalisation</a>
si tu veux savoir comment.</p>
</div>
<div class="paragraph">
<p>Ce pipe est plus puissant qu&#8217;il n&#8217;en a l&#8217;air&#160;:
il s&#8217;appuie sur la spécification ISO 4217 pour déterminer le nombre de chiffres après la virgule.
Par exemple, formater un montant en pesos chiliens donne un résultat sans décimales
(car les pesos n&#8217;ont pas de centimes),
alors que formater un montant en dinars tunisiens donne un résultat avec 3 décimales
(car les dinars ont des millimes).</p>
</div>
</div>
<div class="sect2">
<h3 id="_date">14.11. date</h3>
<div class="paragraph">
<p>Le <em>pipe</em> <code>date</code> transforme une date en chaîne de caractères au format désiré.
Cette date peut être un objet <code>Date</code>, ou un nombre de millisecondes.
Le format spécifié peut être soit un <em>pattern</em> comme <code>'dd/MM/yyyy'</code> ou <code>'MM-yy'</code>,
soit un des formats prédéfinis comme <code>'short'</code>, <code>'longDate'</code>, etc.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="html">&lt;p&gt;{{ birthday() | date:'dd/MM/yyyy' }}&lt;/p&gt;
&lt;!-- will display '16/07/1986' --&gt;

&lt;p&gt;{{ birthday() | date:'longDate' }}&lt;/p&gt;
&lt;!-- will display 'July 16, 1986' --&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>Évidemment, tu peux aussi afficher la seule partie horaire d&#8217;une date&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="html">&lt;p&gt;{{ birthday() | date:'HH:mm' }}&lt;/p&gt;
&lt;!-- will display '15:30' --&gt;

&lt;p&gt;{{ birthday() | date:'shortTime' }}&lt;/p&gt;
&lt;!-- will display '3:30 PM' --&gt;</code></pre>
</div>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
Pour plus d&#8217;informations sur l&#8217;internationalisation en général, et en particulier sur la manière
d&#8217;indiquer la langue à utiliser pour le formatage des nombres et des dates en particulier, tu peux te référer au chapitre
sur
<a href="#internationalisation">l&#8217;internationalisation</a>
.
</td>
</tr>
</table>
</div>
</div>
<div class="sect2">
<h3 id="_async">14.12. async</h3>
<div class="paragraph">
<p>Le <em>pipe</em> <code>async</code> permet d&#8217;afficher des données obtenues de manière asynchrone.
Il peut gérer des données qui viennent d&#8217;une Promise ou d&#8217;un Observable.
Si tu ne te rappelles pas ce qu&#8217;est une Promise, c&#8217;est le moment de retourner au chapitre ES2015. Et concernant l&#8217;Observable, nous y viendrons rapidement.</p>
</div>
<div class="paragraph">
<p>Un <em>pipe</em> <code>async</code> retourne <code>null</code> jusqu&#8217;à ce que les données deviennent disponibles (i.e. jusqu&#8217;à ce que la promise soit résolue, dans le cas d&#8217;une promise).
Une fois résolue, la valeur obtenue est retournée.
Et plus important, cela déclenche un cycle de détection de changement une fois la donnée obtenue.</p>
</div>
<div class="paragraph">
<p>L&#8217;exemple suivant utilise une Promise&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="javascript">import { Component } from '@angular/core';
import { AsyncPipe } from '@angular/common';

@Component({
  selector: 'ns-greeting',
  template: `&lt;div&gt;{{ asyncGreeting | async }}&lt;/div&gt;`,
  imports: [AsyncPipe]
})
export class GreetingComponent {
  readonly asyncGreeting = new Promise(resolve =&gt; {
    // after 1 second, the promise will resolve
    window.setTimeout(() =&gt; resolve('hello'), 1000);
  });
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Tu peux voir que le <em>pipe</em> <code>async</code> est appliqué à la variable <code>asyncGreeting</code>. Celle-ci est une promise, résolue après une seconde. Une fois la promise résolue, le navigateur affichera&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="html">&lt;div&gt;hello&lt;/div&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>Encore plus intéressant, si la source de données est un Observable,
alors le <em>pipe</em> se chargera de se désabonner de la source de données
à la destruction du <em>pipe</em> (quand l&#8217;utilisateur naviguera vers une autre page, par exemple,
ou s&#8217;il fait partie du <code>ngIf</code> d&#8217;un template qui devient faux).</p>
</div>
<div class="paragraph">
<p>Et pour éviter de créer de multiples souscriptions à ton Observable
ou de multiples appels à ta promesse,
tu peux stocker le résultat de l&#8217;appel avec <code>as</code>&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="javascript">import { Component } from '@angular/core';
import { AsyncPipe } from '@angular/common';

@Component({
  selector: 'ns-user',
  template: `@if (asyncUser | async; as user) {
    &lt;div&gt;{{ user.name }}&lt;/div&gt;
  }`,
  imports: [AsyncPipe]
})
export class UserComponent {
  readonly asyncUser = new Promise&lt;UserModel&gt;(resolve =&gt; {
    // after 1 second, the promise will resolve
    window.setTimeout(() =&gt; resolve({ name: 'Cédric' }), 1000);
  });
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Si tu veux en savoir plus sur ce <em>pipe</em>,
regarde le chapitre sur les
<a href="#performances">Performances</a>
vers la fin du livre.</p>
</div>
</div>
<div class="sect2">
<h3 id="_un_pipe_dans_ton_code">14.13. Un <em>pipe</em> dans ton code</h3>
<div class="paragraph">
<p>Il est aussi possible d&#8217;utiliser les fonctions de formatage offertes par le framework directement.
Par exemple pour formater un nombre,
on peut utiliser la fonction <code>formatNumber</code>&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="javascript">import { Component, computed, signal } from '@angular/core';
// you need to import the function you want to use
import { formatNumber } from '@angular/common';

@Component({
  selector: 'ns-pony',
  template: `&lt;p&gt;{{ formattedSpeed() }}&lt;/p&gt;`
})
export class PonyComponent {
  readonly pony = signal({ name: 'Rainbow Dash', speed: 15 });
  readonly formattedSpeed = computed(
    // use the format function
    () =&gt; formatNumber(this.pony().speed, 'en-US', '.2')
  );
}</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_créer_tes_propres_pipes">14.14. Créer tes propres <em>pipes</em></h3>
<div class="paragraph">
<p>On peut bien évidemment créer ses propres <em>pipes</em>.
C&#8217;est parfois très utile. En AngularJS&#160;1.x, on utilisait souvent des filtres customs. Par exemple, nous avions créé et utilisé dans plusieurs de nos applications un filtre permettant d&#8217;afficher le temps écoulé depuis une action utilisateur (genre "il y a 12 secondes", ou "il y a 3 jours").
Voyons comment faire la même chose en Angular&#160;!</p>
</div>
<div class="paragraph">
<p>Tout d&#8217;abord, nous devons créer une nouvelle classe.
Elle doit implémenter l&#8217;interface <code>PipeTransform</code>,
ce qui nous amène à écrire une méthode <code>transform()</code>, celle qui fait tout le travail.</p>
</div>
<div class="paragraph">
<p>Ça n&#8217;a pas l&#8217;air très compliqué, alors essayons&#160;!</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="javascript">import { Pipe, PipeTransform } from '@angular/core';

export class FromNowPipe implements PipeTransform {
  transform(value: string, ..._args: Array&lt;unknown&gt;): string {
    // do something here
  }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Nous utiliserons la function <code>parseISO</code>
de <a href="https://date-fns.org">date-fns</a> pour interpréter la date,
et la fonction <code>formatDistanceToNowStrict</code> pour afficher combien de temps s&#8217;est écoulé depuis.</p>
</div>
<div class="paragraph">
<p>Tu peux installer <code>date-fns</code> avec <code>NPM</code> si tu le souhaites&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="bash">npm install date-fns</code></pre>
</div>
</div>
<div class="paragraph">
<p>Les types nécessaires pour TypeScript sont déjà inclus dans la dépendance NPM,
le compilateur devrait donc être content sans action particulière de notre part.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="javascript">import { Pipe, PipeTransform } from '@angular/core';
import { formatDistanceToNowStrict, parseISO } from 'date-fns';

export class FromNowPipe implements PipeTransform {
  transform(value: string, ..._args: Array&lt;unknown&gt;): string {
    const date = parseISO(value);
    return formatDistanceToNowStrict(date, { addSuffix: true });
  }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Maintenant, nous devons dire à Angular que cette classe constitue un <em>pipe</em>.
Pour cela, il y a un décorateur particulier à utiliser: <code>@Pipe</code>.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="javascript">import { Pipe, PipeTransform } from '@angular/core';
import { formatDistanceToNowStrict, parseISO } from 'date-fns';

@Pipe({
  name: 'fromNow'
})
export class FromNowPipe implements PipeTransform {
  transform(value: string, ..._args: Array&lt;unknown&gt;): string {
    const date = parseISO(value);
    return formatDistanceToNowStrict(date, { addSuffix: true });
  }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Le nom choisi sera celui qui nous permettra d&#8217;utiliser le <em>pipe</em> dans le template.</p>
</div>
<div class="paragraph">
<p>Pour pouvoir utiliser le <em>pipe</em> dans le template, la dernière chose à faire est d&#8217;ajouter le <em>pipe</em> dans les
<code>declarations</code> du composant.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="javascript">@Component({
  selector: 'ns-race',
  template: 'The race started {{ race().startInstant | fromNow }}',
  imports: [FromNowPipe]
})
export class RaceComponent {
  readonly race = signal({
    startInstant: '2023-02-10T10:00:00.000Z'
  });
}</code></pre>
</div>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">N.B.</div>
<div class="paragraph">
<p>A sa grande déception, mais à notre soulagement, le traducteur n&#8217;a pas réussi à placer le calembour "casser ta pipe" dans le chapitre.
N&#8217;hésite toutefois pas à te manifester en cas de faute de goût qui nous aurait échappé.</p>
</div>
</div>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<i class="fa icon-tip" title="Mise en pratique"></i>
</td>
<td class="content">
<div class="paragraph">
<p>Essaye notre exercice
<a href="https://angular-exercises.ninja-squad.com/exercises/6/pipes">Pipes</a> <span class="image"><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAIgAAACACAMAAADnN9ENAAACN1BMVEVMaXF1aF51aF51aF51aF51aF51aF51aF51aF51aF51aF51aF51aF51aF6CcGNyZVxFQz9FQz9FQz9FQz+OeGi4kni0j3ZjWlJIRUFFQz9FQz+ghHC6lHqxj3eYfmx5a2BFQz9FQz9FQz9gWFGXfWtnXVROSkVsYVitjHV1aF5FQz9oW1GbfmqqiHFMSENRTEeKeGv0zK/wyKvPqI1TTUZbUkpdVk+finr81LbTrJFFQz9mXFS5nor40LLCnIJ+bmJyZlzSspvsxKdFQz9LSEPauaDLpIm2kXhFQz9XUUvnwKOPeWlgWFCGdmm+mH6khnFFQz9FQz+Xg3TfuJzJrJWGc2VaU01PSUNmWU51YlRdU0qwl4VKRkFrXFCRdWGUd2OmhW63knhiV05qXFGdgGvjvKDbtJhFQz9YUEiIb12OdmRxYVWLdmejg2xTTEWDbFuZe2ayjnWkhW94ZllvY1qWeWRUTUarinN+aVmef2mVe2iTe2pwX1Kohm+piXNaUkqMcl+tinKAbF1eVEpiVkyRdWG1kHeRdWGRdWGHcWCRdWGzj3aRdWGRdWGggWyXe2ePdGNAPDhCQ0NWV1c5OTmRdWF1YlUvLy+/w8PJzc22ubmGbl6RdWGph3FMTU2RdWFsW1CGiIiriHFSSEJaT0aRdWGggWp9aFmRdWE4NTSxjnWRdWGRdWGRdWGRdWGwjHSbfWd/aFhIQTxaTkU7ODVsW055ZFVORT9BPDhyX1GLcV5USUI1MzK6wa3dAAAAr3RSTlMAYIBAj/+/EJ/PcO8wUP/fYIBwMP///////9///////yBQv3D//////9/P////////////////////7///////////EP////+f/////////0Cv////////////////////////////j////////////////////////////////////2D/YP8w7/8g/xDP/////////5////////9w//9Q//////+v//+A//9Av9+PTccICgAABmhJREFUeAHs1YVC5ToUheEgC5cTfB827u4Q3N3d3e8dg3F796nQCe7t2Pme4G+brIqA31dAQEBAQFBwcIj4DYTCEBYuHOERACKjwoXXomGKjhFnwmCJjhUeA+JgiPdJmZAo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" alt="Free" width="18"></span>&#160;!
Il est gratuit et fait partie de notre Pack pro,
où tu apprends à construire une application complète étape par étape.
Cet exercice te fait utiliser ton premier <em>pipe</em>.
Plus tard, l&#8217;exercice
<a href="https://angular-exercises.ninja-squad.com/exercises/7/custom-pipe">Custom <em>pipe</em> avec date-fns</a> <span class="image"><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAIgAAACACAMAAADnN9ENAAACSVBMVEVMaXH7whr7whr7whr7whr7whr7whr7whr7whr7whr7whr7whp4o614o614o614o637whr7whp4o614o614o614o614o614o614o614o62EoKN4o614o637whqFXFKFXFKQnZm4kni0k3vA1Njr8fLd5+myytB/qLGFXFKFXFKcmY98oqp4o63V4uWFXFKFXFKoloWgmIx4o62Hpqu+nofCpI/b08yFXFKAoaaMnpzYzcSFXFKFXFKUnJaYm5O7mIDl5eOGrbaFXFKGk5Kfd2WSalyYcGClfmqhlIZ6lpx+hIWDaWOFXFKFXFJ/gICkl4nFqpeFXFKFXFKCamSDZV2EYFiDaWOCbmne2dTk7O77whqOZE6Ad3TIsJ6jwMflryWbb0h/gIDo6+rH2dz0vB58jZGIn6Cxgj17kZbOvK2FXFL7whq5iTqVt75/e3rPnC/eqSiMYk+FXFKjdkS4p6Ll6OjLtqbSwrXFubacu8PstSGynZiOsrqLZVzauj/013mrlI56mqLCtFrt69fY1dSApaTrvizz2oafgXqSb2aqxcuhrX/11GvO3uGQeHG5z9T20V7e3t7s7uX4y0P6xSjv5byYeHC+sKyli4TSzMrIzc28wcGwtLVHR0c8OztIR0c1NTWNkJEvLy+NioqTkJCHhISlqKnU2dpCQUGBhIRnZmZeYGBqbGyZnJ07Ozvf5ebLwsCmqapfYGFiYmLAw8Tw9fXs8vNqjZVBTE9PYmY4Pj9deH5mho5GU1Y9RUdhf4ZznKVKW140Njdz5u6AAAAAf3RSTlMAMIBQ7/+fEI/PYL8QcIBAIK+v/7+fz+8wUP/fYEAgEP//////////32D//yD//7///4//////UP///zDv///////P//////////+vj3Ag//+fQJ/////////fz///////////////////gHD///////+v//////////////9AWHP9fwAABxxJREFUeAHs1IVy5DAQBNBZ0DJ3mJUonGiPmZmZmZmZPv6ssb2oFFqHeYUq7LJ7mlatWhWVWDxBf4SkEHH6EwhPKk2/X0Z4sn9AknRSeJIx+u0SguXot8sLliG7QrFUKtOvUEkKVrUXpQZPT6EZrBdAX7FA0YsLX7ZCFv0w+gco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" alt="Pro" width="18"></span>
te fait construire ton premier <em>pipe</em> custom&#160;!</p>
</div>
</td>
</tr>
</table>
</div>
<div style="page-break-after: always;"></div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="dependency-injection">15. Injection de dépendances</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_cuisine_et_dépendances">15.1. Cuisine et Dépendances</h3>
<div class="paragraph">
<p>L&#8217;injection de dépendances est un <em>design pattern</em> bien connu.
Prenons un composant de notre application.
Il peut avoir besoin de faire appel à des fonctionnalités qui sont définies dans d&#8217;autres parties de l&#8217;application (un service, par exemple).
C&#8217;est ce que l&#8217;on appelle une dépendance&#160;: le composant dépend du service.
Au lieu de laisser au composant la charge de créer une instance du service,
l&#8217;idée est que le framework crée l&#8217;instance du service lui-même, et la fournisse au composant qui en a besoin.
Cette façon de procéder se nomme l&#8217;inversion de contrôle.</p>
</div>
<div class="imageblock text-center">
<div class="content">
<img src="data:image/png;base64,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" alt="DI">
</div>
</div>
<div class="paragraph">
<p>Cela apporte plusieurs bénéfices&#160;:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>le développement est simplifié, on exprime juste ce que l&#8217;on veut, où on le veut;</p>
</li>
<li>
<p>le test est simplifié, en permettant de remplacer les dépendances par des versions bouchonnées;</p>
</li>
<li>
<p>la configuration est simplifiée, en permettant de remplacer une implémentation d&#8217;un service par une autre.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>C&#8217;est un concept largement utilisé côté serveur, mais assez peu côté client, si ce n&#8217;est dans les applications Angular.</p>
</div>
</div>
<div class="sect2">
<h3 id="_développement_facile">15.2. Développement facile</h3>
<div class="paragraph">
<p>Pour faire de l&#8217;injection de dépendances, on a besoin&#160;:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>d&#8217;une façon d&#8217;enregistrer une dépendance, pour la rendre disponible à l&#8217;injection dans les composants (ou d&#8217;autres services, ou les <em>pipes</em>, ou les directives).</p>
</li>
<li>
<p>d&#8217;une façon de spécifier quelles dépendances sont requises dans chaque composant ou service.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Le framework se charge ensuite du reste.
Quand on demande à obtenir une dépendance dans un composant, il regarde dans le registre s&#8217;il la trouve, récupère l&#8217;instance existante ou en crée une, et réalise enfin l&#8217;injection dans notre composant.</p>
</div>
<div class="paragraph">
<p>Une dépendance peut être aussi bien un service fourni par Angular qu&#8217;un service que nous avons écrit.</p>
</div>
<div class="paragraph">
<p>Prenons un exemple avec un service <code>LoggingService</code>.
Pendant le développement, on veut utiliser une implémentation qui affiche les messages dans la console du navigateur.
Mais en production, on veut utiliser une implémentation qui envoie les messages vers un serveur distant.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="javascript">export class LoggingService {
  log(message: string): void {
    console.log(message);
  }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>C&#8217;est ultra-simple d&#8217;injecter une dépendance dans un de nos composants ou services.
Il suffit d&#8217;utiliser le système de types et la fonction <code>inject</code> d&#8217;Angular.</p>
</div>
<div class="paragraph">
<p>Disons que l&#8217;on veut écrire un <code>RaceService</code> qui utilise <code>LoggingService</code>&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="javascript">import { inject } from '@angular/core';
import { LoggingService } from './logging.service';

export class RaceService {
  private readonly loggingService = inject(LoggingService);
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>La fonction <code>ìnject</code> demande à Angular de récupérer le service <code>LoggingService</code> et le retourne.</p>
</div>
<div class="admonitionblock warning">
<table>
<tr>
<td class="icon">
<i class="fa icon-warning" title="Attention"></i>
</td>
<td class="content">
Sois prudent&#160;: cette fonction <code>inject</code> ne peut pas être appelée partout.
Elle ne peut être appelée que si on est dans un <em>contexte d&#8217;injection</em>.
L&#8217;appeler pour initialiser une propriété (comme on le fait dans l&#8217;exemple ci-dessus)
ou l&#8217;appeler au sein du constructeur est correct.
Mais l&#8217;appeler après que l&#8217;objet a été construit lèvera une exception.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>En fait, <code>inject</code> est un moyen assez récent d&#8217;injecter une dépendance.
Avant qu&#8217;elle ne soit introduite dans Angular 14, le seul moyen de s&#8217;injecter une dépendance
consistait à déclarer la dépendance sous forme d&#8217;argument du constructeur.
On pourrait donc aussi écrire notre <code>RaceService</code> de cette manière&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="javascript">import { LoggingService } from './logging.service';

export class RaceService {
  constructor(private loggingService: LoggingService) {}
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>L&#8217;injection via le constructeur est toujours supportée,
mais <code>inject</code> est maintenant généralement considérée comme une meilleure option,
et elle a ouvert la voie à des améliorations d&#8217;API intéressantes.</p>
</div>
<div class="paragraph">
<p>Maintenant, on peut ajouter une méthode <code>list()</code> à notre service,
qui appellera notre serveur et tracera un message en utilisant notre <code>LoggingService</code>&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="javascript">import { inject } from '@angular/core';
import { RaceModel } from './race.model';
import { LoggingService } from './logging.service';

export class RaceService {
  private readonly loggingService = inject(LoggingService);

  list(): Array&lt;RaceModel&gt; {
    this.loggingService.log('race-service: get races');
    // ...
  }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>En Angular, tous les services doivent être décorés avec <code>@Injectable()</code>&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="javascript">import { inject, Injectable } from '@angular/core';
import { RaceModel } from './race.model';
import { LoggingService } from './logging.service';

@Injectable()
export class RaceService {
  private readonly loggingService = inject(LoggingService);

  list(): Array&lt;RaceModel&gt; {
    this.loggingService.log('race-service: get races');
    // ...
  }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Comme nous utilisons <code>LoggingService</code>,
nous avons besoin de "l&#8217;enregistrer",
pour le rendre disponible à l&#8217;injection.</p>
</div>
<div class="paragraph">
<p>La façon la plus simple (et recommandée) est d&#8217;ajouter le décorateur <code>@Injectable</code> sur <code>LoggingService</code>
et d&#8217;ajouter <code>providedIn</code> directement à l&#8217;intérieur&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="javascript">import { Injectable } from '@angular/core';

@Injectable({
  providedIn: 'root'
})
export class LoggingService {
  log(message: string): void {
    console.log(message);
  }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Une autre façon est d&#8217;utiliser l&#8217;option <code>providers</code> de la fonction <code>bootstrapApplication()</code>
vue précédemment&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="javascript">bootstrapApplication(AppComponent, { providers: [LoggingService] }).catch(err =&gt; console.error(err));</code></pre>
</div>
</div>
<div class="paragraph">
<p>Maintenant, si on veut rendre notre <code>RaceService</code> disponible à l&#8217;injection dans d&#8217;autres services et composants, il nous faut aussi l&#8217;enregistrer&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="javascript">import { inject, Injectable } from '@angular/core';
import { RaceModel } from './race.model';
import { LoggingService } from './logging.service';

@Injectable({
  providedIn: 'root'
})
export class RaceService {
  private readonly loggingService = inject(LoggingService);

  list(): Array&lt;RaceModel&gt; {
    this.loggingService.log('race-service: get races');
    // ...
  }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Et c&#8217;est fini&#160;!</p>
</div>
<div class="paragraph">
<p>On peut désormais utiliser notre nouveau service où on le souhaite.
Testons-le dans notre composant <code>AppComponent</code>&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="javascript">export class AppComponent {
  private readonly raceService = inject(RaceService);
  readonly races: Array&lt;RaceModel&gt; = this.raceService.list();
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Comme nous voulons utiliser une API pour collecter les logs en production,
nous allons créer une implémentation différente de <code>LoggingService</code> qui envoie les messages vers un serveur distant.</p>
</div>
</div>
<div class="sect2">
<h3 id="_configuration_facile">15.3. Configuration facile</h3>
<div class="paragraph">
<p>Je reviendrai sur les bénéfices de testabilité apportés par l&#8217;injection de dépendances dans un chapitre ultérieur.
On va se concentrer sur les questions de configuration pour le moment,
et montrer comment l&#8217;injection de dépendance facilite la configuration des applications.
On voudrait appeler une API de logging en production plutôt que simplement écrire dans la console.</p>
</div>
<div class="paragraph">
<p>L&#8217;injection de dépendances permet de le faire facilement.</p>
</div>
<div class="paragraph">
<p>On peut représenter les relations entre composants et services comme ceci, si une flèche signifie "dépend de"&#160;:</p>
</div>
<div class="imageblock text-center">
<div class="content">
<img src="data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0nMS4wJyBlbmNvZGluZz0nVVRGLTgnPz48c3ZnIGhlaWdodD0nMjM4JyBwcmVzZXJ2ZUFzcGVjdFJhdGlvPSd4TWlkWU1pZCBtZWV0JyBzaGFwZS1yZW5kZXJpbmc9J2dlb21ldHJpY1ByZWNpc2lvbicgdmVyc2lvbj0nMS4wJyB2aWV3Qm94PScwIDAgMjIwIDIzOCcgd2lkdGg9JzIyMCcgeG1sbnM9J2h0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnJz48ZGVmcz48ZmlsdGVyIGhlaWdodD0nMjAwJScgaWQ9J3NoYWRvd0JsdXInIHdpZHRoPScyMDAlJyB4PScwJyB5PScwJz48ZmVPZmZzZXQgZHg9JzMuMDAwMzAwMicgZHk9JzMuMDAwMzAwMicgaW49J1NvdXJjZUdyYXBoaWMnIHJlc3VsdD0nb2ZmT3V0Jy8+PGZlR2F1c3NpYW5CbHVyIGluPSdvZmZPdXQnIHN0ZERldmlhdGlvbj0nMycvPjwvZmlsdGVyPjwvZGVmcz48ZyBzdHJva2UtbGluZWNhcD0nc3F1YXJlJyBzdHJva2UtbGluZWpvaW49J3JvdW5kJyBzdHJva2Utd2lkdGg9JzEnPjxyZWN0IGhlaWdodD0nMjM4JyBzdHlsZT0nZmlsbDogI2ZmZmZmZicgd2lkdGg9JzIyMCcgeD0nMCcgeT0nMCcvPjxwYXRoIGQ9J00yNS4wIDM1LjAgTDE5NS4wIDM1LjAgTDE5NS4wIDYzLjAgTDI1LjAgNjMuMCB6JyBmaWxsPScjOTY5Njk2JyBmaWx0ZXI9J3VybCgjc2hhZG93Qmx1ciknIHN0cm9rZT0nIzk2OTY5NicvPjxwYXRoIGQ9J00yNS4wIDEwNS4wIEwxOTUuMCAxMDUuMCBMMTk1LjAgMTMzLjAgTDI1LjAgMTMzLjAgeicgZmlsbD0nIzk2OTY5NicgZmlsdGVyPSd1cmwoI3NoYWRvd0JsdXIpJyBzdHJva2U9JyM5Njk2OTYnLz48cGF0aCBkPSdNMjUuMCAxNzUuMCBMMTk1LjAgMTc1LjAgTDE5NS4wIDIwMy4wIEwyNS4wIDIwMy4wIHonIGZpbGw9JyM5Njk2OTYnIGZpbHRlcj0ndXJsKCNzaGFkb3dCbHVyKScgc3Ryb2tlPScjOTY5Njk2Jy8+PHBhdGggZD0nTTI1LjAgMzUuMCBMMTk1LjAgMzUuMCBMMTk1LjAgNjMuMCBMMjUuMCA2My4wIHonIGZpbGw9J3doaXRlJyBzdHJva2U9JyMwMDAwMDAnIHN0cm9rZS1saW5lY2FwPSdyb3VuZCcgc3Ryb2tlLWxpbmVqb2luPSdyb3VuZCcgc3Ryb2tlLXdpZHRoPScxLjAnLz48cGF0aCBkPSdNMjUuMCAxMDUuMCBMMTk1LjAgMTA1LjAgTDE5NS4wIDEzMy4wIEwyNS4wIDEzMy4wIHonIGZpbGw9J3doaXRlJyBzdHJva2U9JyMwMDAwMDAnIHN0cm9rZS1saW5lY2FwPSdyb3VuZCcgc3Ryb2tlLWxpbmVqb2luPSdyb3VuZCcgc3Ryb2tlLXdpZHRoPScxLjAnLz48cGF0aCBkPSdNMjUuMCAxNzUuMCBMMTk1LjAgMTc1LjAgTDE5NS4wIDIwMy4wIEwyNS4wIDIwMy4wIHonIGZpbGw9J3doaXRlJyBzdHJva2U9JyMwMDAwMDAnIHN0cm9rZS1saW5lY2FwPSdyb3VuZCcgc3Ryb2tlLWxpbmVqb2luPSdyb3VuZCcgc3Ryb2tlLXdpZHRoPScxLjAnLz48cGF0aCBkPSdNMTAwLjAgODQuMCBMMTA1LjAgOTguMCBMMTEwLjAgODQuMCB6JyBmaWxsPScjMDAwMDAwJyBzdHJva2U9J25vbmUnIHN0cm9rZS1saW5lY2FwPSdyb3VuZCcgc3Ryb2tlLWxpbmVqb2luPSdyb3VuZCcgc3Ryb2tlLXdpZHRoPScxLjAnLz48cGF0aCBkPSdNMTAwLjAgMTU0LjAgTDEwNS4wIDE2OC4wIEwxMTAuMCAxNTQuMCB6JyBmaWxsPScjMDAwMDAwJyBzdHJva2U9J25vbmUnIHN0cm9rZS1saW5lY2FwPSdyb3VuZCcgc3Ryb2tlLWxpbmVqb2luPSdyb3VuZCcgc3Ryb2tlLXdpZHRoPScxLjAnLz48cGF0aCBkPSdNMTA1LjAgNjMuMCBMMTA1LjAgOTEuMCAnIGZpbGw9J25vbmUnIHN0cm9rZT0nIzAwMDAwMCcgc3Ryb2tlLWxpbmVjYXA9J3JvdW5kJyBzdHJva2UtbGluZWpvaW49J3JvdW5kJyBzdHJva2Utd2lkdGg9JzEuMCcvPjxwYXRoIGQ9J00xMDUuMCAxMzMuMCBMMTA1LjAgMTYxLjAgJyBmaWxsPSdub25lJyBzdHJva2U9JyMwMDAwMDAnIHN0cm9rZS1saW5lY2FwPSdyb3VuZCcgc3Ryb2tlLWxpbmVqb2luPSdyb3VuZCcgc3Ryb2tlLXdpZHRoPScxLjAnLz48dGV4dCBmaWxsPScjMDAwMDAwJyBmb250LWZhbWlseT0nc2Fucy1zZXJpZicgZm9udC1zaXplPScxMycgc3Ryb2tlPSdub25lJyB4PSc1MycgeT0nNTQnPjwhW0NEQVRBW0FwcENvbXBvbmVudF1dPjwvdGV4dD48dGV4dCBmaWxsPScjMDAwMDAwJyBmb250LWZhbWlseT0nc2Fucy1zZXJpZicgZm9udC1zaXplPScxNScgc3Ryb2tlPSdub25lJyB4PSc1NScgeT0nMTI0Jz48IVtDREFUQVtSYWNlU2VydmljZV1dPjwvdGV4dD48dGV4dCBmaWxsPScjMDAwMDAwJyBmb250LWZhbWlseT0nc2Fucy1zZXJpZicgZm9udC1zaXplPScxNScgc3Ryb2tlPSdub25lJyB4PSc0OCcgeT0nMTk0Jz48IVtDREFUQVtMb2dnaW5nU2VydmljZV1dPjwvdGV4dD48L2c+PC9zdmc+" alt="di intro" width="220" height="238">
</div>
</div>
<div class="paragraph">
<p>En fait, ce que l&#8217;on a écrit est la version courte de&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="javascript">bootstrapApplication(AppComponent, {
  providers: [{ provide: LoggingService, useClass: LoggingService }]
}).catch(err =&gt; console.error(err));</code></pre>
</div>
</div>
<div class="paragraph">
<p>On explique à l&#8217;injecteur qu&#8217;on veut un lien entre un token (le type <code>LoggingService</code>)
et la classe <code>LoggingService</code>.
L&#8217;injecteur (<code>Injector</code>) est un service qui maintient un registre des composants injectables,
et qui les injecte quand ils sont réclamés.
Pour le moment, vous pouvez vous représenter le registre comme un dictionnaire associant des clés,
appelées <em>tokens</em>, à des classes.
Un <em>token</em> peut être de n&#8217;importe quel type. Mais c&#8217;est généralement une référence à une classe
(comme dans l&#8217;exemple ci-dessus) ou une instance de <code>InjectionToken</code>.</p>
</div>
<div class="paragraph">
<p>Comme dans notre exemple, le token et la classe de l&#8217;objet à injecter sont les mêmes,
on peut écrire la même chose en version raccourcie&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="javascript">bootstrapApplication(AppComponent, { providers: [LoggingService] }).catch(err =&gt; console.error(err));</code></pre>
</div>
</div>
<div class="paragraph">
<p>Le token doit identifier de manière unique la dépendance.</p>
</div>
<div class="paragraph">
<p>On peut utiliser la fonction <code>inject()</code> pour tester comment fonctionne l&#8217;injecteur.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="javascript">// in our bootstrapApplication function
providers: [
  { provide: LoggingService, useClass: LoggingService },
  // let's add another provider to the same class
  // with another token
  // A token can be declared like this:
  // const token = new InjectionToken&lt;LoggingService&gt;('LoggingServiceToken');
  { provide: token, useClass: LoggingService }
]</code></pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="javascript">console.log(inject(LoggingService));
// logs "LoggingService"
console.log(inject(token));
// logs "LoggingService" again
console.log(inject(LoggingService) === inject(LoggingService));
// logs "true", as the same instance is returned every time for a token
console.log(inject(LoggingService) === inject(token));
// logs "false", as the providers are different,
// so there are two distinct instances</code></pre>
</div>
</div>
<div class="paragraph">
<p>On demande ici une dépendance à l&#8217;injecteur grâce à un token.
Comme j&#8217;ai fourni le <code>LoggingService</code> deux fois, avec deux tokens différents, on a deux providers.
L&#8217;injecteur va créer une instance de <code>LoggingService</code> à la première demande d&#8217;un token donné,
et retournera la même instance lors de chaque demande ultérieure.</p>
</div>
<div class="paragraph">
<p>Cet exemple ne servait qu&#8217;à pointer du doigt quelques détails&#160;:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>un provider associe un token à un service&#160;;</p>
</li>
<li>
<p>l&#8217;injecteur retourne la même instance chaque fois que le même token est demandé&#160;;</p>
</li>
<li>
<p>le token utilisé pour identifier un service n&#8217;est pas nécessairement la classe de ce service.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Le fait de retourner toujours la même instance chaque fois qu&#8217;on demande un service
est un <em>design pattern</em> bien connu&#160;: le <em>singleton</em>.
C&#8217;est très utile, parce que cela permet d&#8217;utiliser un service pour y stocker de l&#8217;information
que tu veux partager entre plusieurs composants.</p>
</div>
<div class="paragraph">
<p>Maintenant, retournons à notre problème de <code>LoggingService</code>.
Je peux écrire une nouvelle classe, faisant le même boulot que <code>LoggingService</code>,
mais qui cette fois appelle une API distante pour collecter les messages&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="javascript">@Injectable()
export class LoggingAPIService {
  log(message: string): void {
    // ... calls the logging API
  }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>On peut manipuler la déclaration du provider pour remplacer <code>LoggingService</code> par notre <code>LoggingAPIService</code>&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="javascript">// in our bootstrapApplication function
providers: [
  // we provide a different implementation of the service
  { provide: LoggingService, useClass: LoggingAPIService }
]</code></pre>
</div>
</div>
<div class="paragraph">
<p>Maintenant nos relations de dépendances sont devenues&#160;:</p>
</div>
<div class="imageblock text-center">
<div class="content">
<img src="data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0nMS4wJyBlbmNvZGluZz0nVVRGLTgnPz48c3ZnIGhlaWdodD0nMjM4JyBwcmVzZXJ2ZUFzcGVjdFJhdGlvPSd4TWlkWU1pZCBtZWV0JyBzaGFwZS1yZW5kZXJpbmc9J2dlb21ldHJpY1ByZWNpc2lvbicgdmVyc2lvbj0nMS4wJyB2aWV3Qm94PScwIDAgMjUwIDIzOCcgd2lkdGg9JzI1MCcgeG1sbnM9J2h0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnJz48ZGVmcz48ZmlsdGVyIGhlaWdodD0nMjAwJScgaWQ9J3NoYWRvd0JsdXInIHdpZHRoPScyMDAlJyB4PScwJyB5PScwJz48ZmVPZmZzZXQgZHg9JzMuMDAwMzAwMicgZHk9JzMuMDAwMzAwMicgaW49J1NvdXJjZUdyYXBoaWMnIHJlc3VsdD0nb2ZmT3V0Jy8+PGZlR2F1c3NpYW5CbHVyIGluPSdvZmZPdXQnIHN0ZERldmlhdGlvbj0nMycvPjwvZmlsdGVyPjwvZGVmcz48ZyBzdHJva2UtbGluZWNhcD0nc3F1YXJlJyBzdHJva2UtbGluZWpvaW49J3JvdW5kJyBzdHJva2Utd2lkdGg9JzEnPjxyZWN0IGhlaWdodD0nMjM4JyBzdHlsZT0nZmlsbDogI2ZmZmZmZicgd2lkdGg9JzI1MCcgeD0nMCcgeT0nMCcvPjxwYXRoIGQ9J00yNS4wIDE3NS4wIEwyMjUuMCAxNzUuMCBMMjI1LjAgMjAzLjAgTDI1LjAgMjAzLjAgeicgZmlsbD0nIzk2OTY5NicgZmlsdGVyPSd1cmwoI3NoYWRvd0JsdXIpJyBzdHJva2U9JyM5Njk2OTYnLz48cGF0aCBkPSdNNDUuMCAzNS4wIEwxOTUuMCAzNS4wIEwxOTUuMCA2My4wIEw0NS4wIDYzLjAgeicgZmlsbD0nIzk2OTY5NicgZmlsdGVyPSd1cmwoI3NoYWRvd0JsdXIpJyBzdHJva2U9JyM5Njk2OTYnLz48cGF0aCBkPSdNNTUuMCAxMDUuMCBMMTk1LjAgMTA1LjAgTDE5NS4wIDEzMy4wIEw1NS4wIDEzMy4wIHonIGZpbGw9JyM5Njk2OTYnIGZpbHRlcj0ndXJsKCNzaGFkb3dCbHVyKScgc3Ryb2tlPScjOTY5Njk2Jy8+PHBhdGggZD0nTTI1LjAgMTc1LjAgTDIyNS4wIDE3NS4wIEwyMjUuMCAyMDMuMCBMMjUuMCAyMDMuMCB6JyBmaWxsPSd3aGl0ZScgc3Ryb2tlPScjMDAwMDAwJyBzdHJva2UtbGluZWNhcD0ncm91bmQnIHN0cm9rZS1saW5lam9pbj0ncm91bmQnIHN0cm9rZS13aWR0aD0nMS4wJy8+PHBhdGggZD0nTTQ1LjAgMzUuMCBMMTk1LjAgMzUuMCBMMTk1LjAgNjMuMCBMNDUuMCA2My4wIHonIGZpbGw9J3doaXRlJyBzdHJva2U9JyMwMDAwMDAnIHN0cm9rZS1saW5lY2FwPSdyb3VuZCcgc3Ryb2tlLWxpbmVqb2luPSdyb3VuZCcgc3Ryb2tlLXdpZHRoPScxLjAnLz48cGF0aCBkPSdNNTUuMCAxMDUuMCBMMTk1LjAgMTA1LjAgTDE5NS4wIDEzMy4wIEw1NS4wIDEzMy4wIHonIGZpbGw9J3doaXRlJyBzdHJva2U9JyMwMDAwMDAnIHN0cm9rZS1saW5lY2FwPSdyb3VuZCcgc3Ryb2tlLWxpbmVqb2luPSdyb3VuZCcgc3Ryb2tlLXdpZHRoPScxLjAnLz48cGF0aCBkPSdNMTIwLjAgODQuMCBMMTI1LjAgOTguMCBMMTMwLjAgODQuMCB6JyBmaWxsPScjMDAwMDAwJyBzdHJva2U9J25vbmUnIHN0cm9rZS1saW5lY2FwPSdyb3VuZCcgc3Ryb2tlLWxpbmVqb2luPSdyb3VuZCcgc3Ryb2tlLXdpZHRoPScxLjAnLz48cGF0aCBkPSdNMTIwLjAgMTU0LjAgTDEyNS4wIDE2OC4wIEwxMzAuMCAxNTQuMCB6JyBmaWxsPScjMDAwMDAwJyBzdHJva2U9J25vbmUnIHN0cm9rZS1saW5lY2FwPSdyb3VuZCcgc3Ryb2tlLWxpbmVqb2luPSdyb3VuZCcgc3Ryb2tlLXdpZHRoPScxLjAnLz48cGF0aCBkPSdNMTI1LjAgNjMuMCBMMTI1LjAgOTEuMCAnIGZpbGw9J25vbmUnIHN0cm9rZT0nIzAwMDAwMCcgc3Ryb2tlLWxpbmVjYXA9J3JvdW5kJyBzdHJva2UtbGluZWpvaW49J3JvdW5kJyBzdHJva2Utd2lkdGg9JzEuMCcvPjxwYXRoIGQ9J00xMjUuMCAxMzMuMCBMMTI1LjAgMTYxLjAgJyBmaWxsPSdub25lJyBzdHJva2U9JyMwMDAwMDAnIHN0cm9rZS1saW5lY2FwPSdyb3VuZCcgc3Ryb2tlLWxpbmVqb2luPSdyb3VuZCcgc3Ryb2tlLXdpZHRoPScxLjAnLz48dGV4dCBmaWxsPScjMDAwMDAwJyBmb250LWZhbWlseT0nc2Fucy1zZXJpZicgZm9udC1zaXplPScxMycgc3Ryb2tlPSdub25lJyB4PSc2MycgeT0nNTQnPjwhW0NEQVRBW0FwcENvbXBvbmVudF1dPjwvdGV4dD48dGV4dCBmaWxsPScjMDAwMDAwJyBmb250LWZhbWlseT0nc2Fucy1zZXJpZicgZm9udC1zaXplPScxNScgc3Ryb2tlPSdub25lJyB4PSc3NScgeT0nMTI0Jz48IVtDREFUQVtSYWNlU2VydmljZV1dPjwvdGV4dD48dGV4dCBmaWxsPScjMDAwMDAwJyBmb250LWZhbWlseT0nc2Fucy1zZXJpZicgZm9udC1zaXplPScxNScgc3Ryb2tlPSdub25lJyB4PSc1MScgeT0nMTk0Jz48IVtDREFUQVtMb2dnaW5nQXBpU2VydmljZV1dPjwvdGV4dD48L2c+PC9zdmc+" alt="di fake" width="250" height="238">
</div>
</div>
<div class="paragraph">
<p>Cela peut être très utile pour remplacer une implémentation par une autre
dans certains environnements, et aussi, comme nous le verrons bientôt, quand tu écris des tests automatisés.</p>
</div>
</div>
<div class="sect2">
<h3 id="_autres_types_de_provider">15.4. Autres types de provider</h3>
<div class="paragraph">
<p>Toujours dans le cadre de cet exemple,
nous aurions probablement envie d&#8217;utiliser <code>LoggingService</code> pendant le développement, et <code>LoggingAPIService</code> en production.
Tu peux pour cela utiliser un autre type de provider&#160;: <code>useFactory</code>.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="javascript">// we just have to change this constant when going to prod
const IS_PROD = false;

  // in our bootstrapApplication function
  providers: [
    RaceService,
    // we provide a factory
    {
      provide: LoggingService,
      useFactory: () =&gt; (IS_PROD ? new LoggingAPIService() : new LoggingService())
    }
  ]</code></pre>
</div>
</div>
<div class="paragraph">
<p>Ici, on utilise <code>useFactory</code> au lieu de <code>useClass</code>.
Une <em>factory</em> est une fonction avec un seul job, créer une instance.
Notre exemple teste une constante, et retourne le service de développement ou de production en fonction de sa valeur.</p>
</div>
<div class="paragraph">
<p>Mais bon, cet exemple permettait juste de démontrer l&#8217;utilisation de <code>useFactory</code>.
En vrai, tu peux, tu devrais même, écrire&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="javascript">// in our bootstrapApplication function
providers: [RaceService, { provide: LoggingService, useClass: IS_PROD ? LoggingAPIService : LoggingService }]</code></pre>
</div>
</div>
<div class="paragraph">
<p>Déclarer une constante <code>IS_PROD</code> est un peu pénible&#160;: et si nous utilisions aussi ici l&#8217;injection de dépendances&#160;?! Oui, je pousse le bouchon un peu loin&#160;! :)
Tu n&#8217;as certes pas besoin de tout faire rentrer dans le moule de l&#8217;injection, mais cela permet de te montrer un autre type de provider&#160;: <code>useValue</code>.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="javascript">export const IS_PROD = new InjectionToken&lt;boolean&gt;('IsProd');</code></pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="javascript">// in our bootstrapApplication function
providers: [
  { provide: IS_PROD, useValue: true },
  RaceService,
  {
    provide: LoggingService,
    useFactory: () =&gt; {
      const isProd = inject(IS_PROD);
      return isProd ? new LoggingAPIService() : new LoggingService();
    }
  }
]</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_injecteurs_hiérarchiques">15.5. Injecteurs hiérarchiques</h3>
<div class="paragraph">
<p>Un dernier point crucial à comprendre en Angular&#160;: il y a plusieurs injecteurs dans ton application.
En fait, il y a un injecteur par composant et chaque injecteur hérite de l&#8217;injecteur de son parent.</p>
</div>
<div class="paragraph">
<p>Disons qu&#8217;on a une application qui ressemble à&#160;:</p>
</div>
<div class="imageblock text-center">
<div class="content">
<img src="data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0nMS4wJyBlbmNvZGluZz0nVVRGLTgnPz48c3ZnIGhlaWdodD0nMjM4JyBwcmVzZXJ2ZUFzcGVjdFJhdGlvPSd4TWlkWU1pZCBtZWV0JyBzaGFwZS1yZW5kZXJpbmc9J2dlb21ldHJpY1ByZWNpc2lvbicgdmVyc2lvbj0nMS4wJyB2aWV3Qm94PScwIDAgMjgwIDIzOCcgd2lkdGg9JzI4MCcgeG1sbnM9J2h0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnJz48ZGVmcz48ZmlsdGVyIGhlaWdodD0nMjAwJScgaWQ9J3NoYWRvd0JsdXInIHdpZHRoPScyMDAlJyB4PScwJyB5PScwJz48ZmVPZmZzZXQgZHg9JzMuMDAwMzAwMicgZHk9JzMuMDAwMzAwMicgaW49J1NvdXJjZUdyYXBoaWMnIHJlc3VsdD0nb2ZmT3V0Jy8+PGZlR2F1c3NpYW5CbHVyIGluPSdvZmZPdXQnIHN0ZERldmlhdGlvbj0nMycvPjwvZmlsdGVyPjwvZGVmcz48ZyBzdHJva2UtbGluZWNhcD0nc3F1YXJlJyBzdHJva2UtbGluZWpvaW49J3JvdW5kJyBzdHJva2Utd2lkdGg9JzEnPjxyZWN0IGhlaWdodD0nMjM4JyBzdHlsZT0nZmlsbDogI2ZmZmZmZicgd2lkdGg9JzI4MCcgeD0nMCcgeT0nMCcvPjxwYXRoIGQ9J003NS4wIDM1LjAgTDI1NS4wIDM1LjAgTDI1NS4wIDYzLjAgTDc1LjAgNjMuMCB6JyBmaWxsPScjOTY5Njk2JyBmaWx0ZXI9J3VybCgjc2hhZG93Qmx1ciknIHN0cm9rZT0nIzk2OTY5NicvPjxwYXRoIGQ9J003NS4wIDEwNS4wIEwyNDUuMCAxMDUuMCBMMjQ1LjAgMTMzLjAgTDc1LjAgMTMzLjAgeicgZmlsbD0nIzk2OTY5NicgZmlsdGVyPSd1cmwoI3NoYWRvd0JsdXIpJyBzdHJva2U9JyM5Njk2OTYnLz48cGF0aCBkPSdNNzUuMCAxNzUuMCBMMjQ1LjAgMTc1LjAgTDI0NS4wIDIwMy4wIEw3NS4wIDIwMy4wIHonIGZpbGw9JyM5Njk2OTYnIGZpbHRlcj0ndXJsKCNzaGFkb3dCbHVyKScgc3Ryb2tlPScjOTY5Njk2Jy8+PHBhdGggZD0nTTc1LjAgMzUuMCBMMjU1LjAgMzUuMCBMMjU1LjAgNjMuMCBMNzUuMCA2My4wIHonIGZpbGw9J3doaXRlJyBzdHJva2U9JyMwMDAwMDAnIHN0cm9rZS1saW5lY2FwPSdyb3VuZCcgc3Ryb2tlLWxpbmVqb2luPSdyb3VuZCcgc3Ryb2tlLXdpZHRoPScxLjAnLz48cGF0aCBkPSdNNzUuMCAxMDUuMCBMMjQ1LjAgMTA1LjAgTDI0NS4wIDEzMy4wIEw3NS4wIDEzMy4wIHonIGZpbGw9J3doaXRlJyBzdHJva2U9JyMwMDAwMDAnIHN0cm9rZS1saW5lY2FwPSdyb3VuZCcgc3Ryb2tlLWxpbmVqb2luPSdyb3VuZCcgc3Ryb2tlLXdpZHRoPScxLjAnLz48cGF0aCBkPSdNNzUuMCAxNzUuMCBMMjQ1LjAgMTc1LjAgTDI0NS4wIDIwMy4wIEw3NS4wIDIwMy4wIHonIGZpbGw9J3doaXRlJyBzdHJva2U9JyMwMDAwMDAnIHN0cm9rZS1saW5lY2FwPSdyb3VuZCcgc3Ryb2tlLWxpbmVqb2luPSdyb3VuZCcgc3Ryb2tlLXdpZHRoPScxLjAnLz48cGF0aCBkPSdNMTUwLjAgODQuMCBMMTU1LjAgOTguMCBMMTYwLjAgODQuMCB6JyBmaWxsPScjMDAwMDAwJyBzdHJva2U9J25vbmUnIHN0cm9rZS1saW5lY2FwPSdyb3VuZCcgc3Ryb2tlLWxpbmVqb2luPSdyb3VuZCcgc3Ryb2tlLXdpZHRoPScxLjAnLz48cGF0aCBkPSdNMTUwLjAgMTU0LjAgTDE1NS4wIDE2OC4wIEwxNjAuMCAxNTQuMCB6JyBmaWxsPScjMDAwMDAwJyBzdHJva2U9J25vbmUnIHN0cm9rZS1saW5lY2FwPSdyb3VuZCcgc3Ryb2tlLWxpbmVqb2luPSdyb3VuZCcgc3Ryb2tlLXdpZHRoPScxLjAnLz48cGF0aCBkPSdNMTU1LjAgNjMuMCBMMTU1LjAgOTEuMCAnIGZpbGw9J25vbmUnIHN0cm9rZT0nIzAwMDAwMCcgc3Ryb2tlLWxpbmVjYXA9J3JvdW5kJyBzdHJva2UtbGluZWpvaW49J3JvdW5kJyBzdHJva2Utd2lkdGg9JzEuMCcvPjxwYXRoIGQ9J00xNTUuMCAxMzMuMCBMMTU1LjAgMTYxLjAgJyBmaWxsPSdub25lJyBzdHJva2U9JyMwMDAwMDAnIHN0cm9rZS1saW5lY2FwPSdyb3VuZCcgc3Ryb2tlLWxpbmVqb2luPSdyb3VuZCcgc3Ryb2tlLXdpZHRoPScxLjAnLz48dGV4dCBmaWxsPScjMDAwMDAwJyBmb250LWZhbWlseT0nc2Fucy1zZXJpZicgZm9udC1zaXplPScxNScgc3Ryb2tlPSdub25lJyB4PScxMjEnIHk9JzU0Jz48IVtDREFUQVtBcHBsaWNhdGlvbl1dPjwvdGV4dD48dGV4dCBmaWxsPScjMDAwMDAwJyBmb250LWZhbWlseT0nc2Fucy1zZXJpZicgZm9udC1zaXplPScxMycgc3Ryb2tlPSdub25lJyB4PScxMDMnIHk9JzEyNCc+PCFbQ0RBVEFbQXBwQ29tcG9uZW50XV0+PC90ZXh0Pjx0ZXh0IGZpbGw9JyMwMDAwMDAnIGZvbnQtZmFtaWx5PSdzYW5zLXNlcmlmJyBmb250LXNpemU9JzE0JyBzdHJva2U9J25vbmUnIHg9JzkxJyB5PScxOTQnPjwhW0NEQVRBW1JhY2VzQ29tcG9uZW50XV0+PC90ZXh0PjwvZz48L3N2Zz4=" alt="di hierarchical" width="280" height="238">
</div>
</div>
<div class="paragraph">
<p>On a une application avec un composant racine <code>AppComponent</code>,
qui a un composant enfant <code>RacesComponent</code>.</p>
</div>
<div class="paragraph">
<p>Quand on bootstrappe l&#8217;application, on crée un injecteur racine.
Ensuite, chaque composant va avoir son propre injecteur, héritant de celui de son parent.</p>
</div>
<div class="paragraph">
<p>Quand tu enregistres un service en utilisant la façon recommandée <code>providedIn: 'root'</code>,
tu ajoutes ces services à l&#8217;injecteur racine.</p>
</div>
<div class="imageblock text-center">
<div class="content">
<img src="data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0nMS4wJyBlbmNvZGluZz0nVVRGLTgnPz48c3ZnIGhlaWdodD0nMjM4JyBwcmVzZXJ2ZUFzcGVjdFJhdGlvPSd4TWlkWU1pZCBtZWV0JyBzaGFwZS1yZW5kZXJpbmc9J2dlb21ldHJpY1ByZWNpc2lvbicgdmVyc2lvbj0nMS4wJyB2aWV3Qm94PScwIDAgNTgwIDIzOCcgd2lkdGg9JzU4MCcgeG1sbnM9J2h0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnJz48ZGVmcz48ZmlsdGVyIGhlaWdodD0nMjAwJScgaWQ9J3NoYWRvd0JsdXInIHdpZHRoPScyMDAlJyB4PScwJyB5PScwJz48ZmVPZmZzZXQgZHg9JzMuMDAwMzAwMicgZHk9JzMuMDAwMzAwMicgaW49J1NvdXJjZUdyYXBoaWMnIHJlc3VsdD0nb2ZmT3V0Jy8+PGZlR2F1c3NpYW5CbHVyIGluPSdvZmZPdXQnIHN0ZERldmlhdGlvbj0nMycvPjwvZmlsdGVyPjwvZGVmcz48ZyBzdHJva2UtbGluZWNhcD0nc3F1YXJlJyBzdHJva2UtbGluZWpvaW49J3JvdW5kJyBzdHJva2Utd2lkdGg9JzEnPjxyZWN0IGhlaWdodD0nMjM4JyBzdHlsZT0nZmlsbDogI2ZmZmZmZicgd2lkdGg9JzU4MCcgeD0nMCcgeT0nMCcvPjxwYXRoIGQ9J000NS4wIDE3NS4wIEwzMDUuMCAxNzUuMCBMMzA1LjAgMjAzLjAgTDQ1LjAgMjAzLjAgeicgZmlsbD0nIzk2OTY5NicgZmlsdGVyPSd1cmwoI3NoYWRvd0JsdXIpJyBzdHJva2U9JyM5Njk2OTYnLz48cGF0aCBkPSdNNTUuMCAxMDUuMCBMMjk1LjAgMTA1LjAgTDI5NS4wIDEzMy4wIEw1NS4wIDEzMy4wIHonIGZpbGw9JyM5Njk2OTYnIGZpbHRlcj0ndXJsKCNzaGFkb3dCbHVyKScgc3Ryb2tlPScjOTY5Njk2Jy8+PHBhdGggZD0nTTk1LjAgMzUuMCBMMjU1LjAgMzUuMCBMMjU1LjAgNjMuMCBMOTUuMCA2My4wIHonIGZpbGw9JyM5Njk2OTYnIGZpbHRlcj0ndXJsKCNzaGFkb3dCbHVyKScgc3Ryb2tlPScjOTY5Njk2Jy8+PHBhdGggZD0nTTQ1LjAgMTc1LjAgTDMwNS4wIDE3NS4wIEwzMDUuMCAyMDMuMCBMNDUuMCAyMDMuMCB6JyBmaWxsPSd3aGl0ZScgc3Ryb2tlPScjMDAwMDAwJyBzdHJva2UtbGluZWNhcD0ncm91bmQnIHN0cm9rZS1saW5lam9pbj0ncm91bmQnIHN0cm9rZS13aWR0aD0nMS4wJy8+PHBhdGggZD0nTTU1LjAgMTA1LjAgTDI5NS4wIDEwNS4wIEwyOTUuMCAxMzMuMCBMNTUuMCAxMzMuMCB6JyBmaWxsPSd3aGl0ZScgc3Ryb2tlPScjMDAwMDAwJyBzdHJva2UtbGluZWNhcD0ncm91bmQnIHN0cm9rZS1saW5lam9pbj0ncm91bmQnIHN0cm9rZS13aWR0aD0nMS4wJy8+PHBhdGggZD0nTTk1LjAgMzUuMCBMMjU1LjAgMzUuMCBMMjU1LjAgNjMuMCBMOTUuMCA2My4wIHonIGZpbGw9J3doaXRlJyBzdHJva2U9JyMwMDAwMDAnIHN0cm9rZS1saW5lY2FwPSdyb3VuZCcgc3Ryb2tlLWxpbmVqb2luPSdyb3VuZCcgc3Ryb2tlLXdpZHRoPScxLjAnLz48cGF0aCBkPSdNMTc1LjAgNzAuMCBMMTcwLjAgODQuMCBMMTgwLjAgODQuMCB6JyBmaWxsPScjMDAwMDAwJyBzdHJva2U9J25vbmUnIHN0cm9rZS1saW5lY2FwPSdyb3VuZCcgc3Ryb2tlLWxpbmVqb2luPSdyb3VuZCcgc3Ryb2tlLXdpZHRoPScxLjAnLz48cGF0aCBkPSdNMTc1LjAgMTQwLjAgTDE3MC4wIDE1NC4wIEwxODAuMCAxNTQuMCB6JyBmaWxsPScjMDAwMDAwJyBzdHJva2U9J25vbmUnIHN0cm9rZS1saW5lY2FwPSdyb3VuZCcgc3Ryb2tlLWxpbmVqb2luPSdyb3VuZCcgc3Ryb2tlLXdpZHRoPScxLjAnLz48cGF0aCBkPSdNMTc1LjAgNzcuMCBMMTc1LjAgOTcuMCAnIGZpbGw9J25vbmUnIHN0cm9rZT0nIzAwMDAwMCcgc3Ryb2tlLWxpbmVjYXA9J3JvdW5kJyBzdHJva2UtbGluZWpvaW49J3JvdW5kJyBzdHJva2Utd2lkdGg9JzEuMCcvPjxwYXRoIGQ9J00xNzUuMCAxNDcuMCBMMTc1LjAgMTY3LjAgJyBmaWxsPSdub25lJyBzdHJva2U9JyMwMDAwMDAnIHN0cm9rZS1saW5lY2FwPSdyb3VuZCcgc3Ryb2tlLWxpbmVqb2luPSdyb3VuZCcgc3Ryb2tlLXdpZHRoPScxLjAnLz48dGV4dCBmaWxsPScjMDAwMDAwJyBmb250LWZhbWlseT0nc2Fucy1zZXJpZicgZm9udC1zaXplPScxNScgc3Ryb2tlPSdub25lJyB4PScxMjUnIHk9JzU0Jz48IVtDREFUQVtyb290IGluamVjdG9yXV0+PC90ZXh0Pjx0ZXh0IGZpbGw9JyMwMDAwMDAnIGZvbnQtZmFtaWx5PSdzYW5zLXNlcmlmJyBmb250LXNpemU9JzE1JyBzdHJva2U9J25vbmUnIHg9JzI5MScgeT0nNTQnPjwhW0NEQVRBWyhMb2dnaW5nU2VydmljZSwgUmFjZVNlcnZpY2UpXV0+PC90ZXh0Pjx0ZXh0IGZpbGw9JyMwMDAwMDAnIGZvbnQtZmFtaWx5PSdzYW5zLXNlcmlmJyBmb250LXNpemU9JzE1JyBzdHJva2U9J25vbmUnIHg9JzgwJyB5PScxMjQnPjwhW0NEQVRBW0FwcENvbXBvbmVudCBpbmplY3Rvcl1dPjwvdGV4dD48dGV4dCBmaWxsPScjMDAwMDAwJyBmb250LWZhbWlseT0nc2Fucy1zZXJpZicgZm9udC1zaXplPScxNScgc3Ryb2tlPSdub25lJyB4PSc3MScgeT0nMTk0Jz48IVtDREFUQVtSYWNlc0NvbXBvbmVudCBpbmplY3Rvcl1dPjwvdGV4dD48L2c+PC9zdmc+" alt="di root injector" width="580" height="238">
</div>
</div>
<div class="paragraph">
<p>Cela signifie que si tu injectes une dépendance dans un composant, Angular va commencer sa recherche dans l&#8217;injecteur de ce composant.
S&#8217;il y trouve la dépendance, parfait, il la retourne. Sinon, il va chercher dans l&#8217;injecteur parent, puis son parent, et tous ses ancêtres, jusqu&#8217;à ce qu&#8217;il trouve cette dépendance.
S&#8217;il ne la trouve nulle part, il lève une exception.</p>
</div>
<div class="paragraph">
<p>De cela, on peut déduire deux affirmations&#160;:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>les providers déclarés dans l&#8217;injecteur racine sont disponibles pour tous les composants et services de l&#8217;application.
Par exemple, <code>LoggingService</code> et <code>RaceService</code> peuvent être utilisés partout.</p>
</li>
<li>
<p>on peut déclarer des dépendances à d&#8217;autres niveaux que l&#8217;injecteur racine.
Comment fait-on cela&#160;?</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Le décorateur <code>@Component</code> peut recevoir une autre option de configuration, appelée <code>providers</code>.
Cet attribut <code>providers</code> référence un tableau de providers, similaire à l&#8217;option <code>providers</code> de <code>bootstrapApplication()</code>.</p>
</div>
<div class="paragraph">
<p>On peut donc imaginer un <code>RacesComponent</code> qui déclarerait son propre provider de <code>LoggingService</code>&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="javascript">@Component({
  selector: 'ns-races',
  providers: [{ provide: LoggingService, useClass: LoggingAPIService }],
  template: `&lt;strong&gt;Races&lt;/strong&gt;`
})
export class RacesComponent {
  constructor() {
    inject(LoggingService).log('RacesComponent created');
  }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Dans ce composant, le provider avec le token <code>LoggingService</code> retournera toujours une instance de <code>LoggingAPIService</code>, quel que soit le provider défini dans l&#8217;injecteur racine.
C&#8217;est vraiment pratique si tu veux utiliser une instance différente d&#8217;un service dans un composant donné.</p>
</div>
<div class="admonitionblock warning">
<table>
<tr>
<td class="icon">
<i class="fa icon-warning" title="Attention"></i>
</td>
<td class="content">
Si tu déclares une dépendance à la fois à la racine de ton application
et dans l&#8217;attribut <code>providers</code> de ton composant,
ce seront bien deux instances différentes qui seront créées et utilisées&#160;!
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Ici, nous avons&#160;:</p>
</div>
<div class="imageblock text-center">
<div class="content">
<img src="data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0nMS4wJyBlbmNvZGluZz0nVVRGLTgnPz48c3ZnIGhlaWdodD0nMjM4JyBwcmVzZXJ2ZUFzcGVjdFJhdGlvPSd4TWlkWU1pZCBtZWV0JyBzaGFwZS1yZW5kZXJpbmc9J2dlb21ldHJpY1ByZWNpc2lvbicgdmVyc2lvbj0nMS4wJyB2aWV3Qm94PScwIDAgNzEwIDIzOCcgd2lkdGg9JzcxMCcgeG1sbnM9J2h0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnJz48ZGVmcz48ZmlsdGVyIGhlaWdodD0nMjAwJScgaWQ9J3NoYWRvd0JsdXInIHdpZHRoPScyMDAlJyB4PScwJyB5PScwJz48ZmVPZmZzZXQgZHg9JzMuMDAwMzAwMicgZHk9JzMuMDAwMzAwMicgaW49J1NvdXJjZUdyYXBoaWMnIHJlc3VsdD0nb2ZmT3V0Jy8+PGZlR2F1c3NpYW5CbHVyIGluPSdvZmZPdXQnIHN0ZERldmlhdGlvbj0nMycvPjwvZmlsdGVyPjwvZGVmcz48ZyBzdHJva2UtbGluZWNhcD0nc3F1YXJlJyBzdHJva2UtbGluZWpvaW49J3JvdW5kJyBzdHJva2Utd2lkdGg9JzEnPjxyZWN0IGhlaWdodD0nMjM4JyBzdHlsZT0nZmlsbDogI2ZmZmZmZicgd2lkdGg9JzcxMCcgeD0nMCcgeT0nMCcvPjxwYXRoIGQ9J000NS4wIDE3NS4wIEwzMDUuMCAxNzUuMCBMMzA1LjAgMjAzLjAgTDQ1LjAgMjAzLjAgeicgZmlsbD0nIzk2OTY5NicgZmlsdGVyPSd1cmwoI3NoYWRvd0JsdXIpJyBzdHJva2U9JyM5Njk2OTYnLz48cGF0aCBkPSdNNTUuMCAxMDUuMCBMMjk1LjAgMTA1LjAgTDI5NS4wIDEzMy4wIEw1NS4wIDEzMy4wIHonIGZpbGw9JyM5Njk2OTYnIGZpbHRlcj0ndXJsKCNzaGFkb3dCbHVyKScgc3Ryb2tlPScjOTY5Njk2Jy8+PHBhdGggZD0nTTk1LjAgMzUuMCBMMjU1LjAgMzUuMCBMMjU1LjAgNjMuMCBMOTUuMCA2My4wIHonIGZpbGw9JyM5Njk2OTYnIGZpbHRlcj0ndXJsKCNzaGFkb3dCbHVyKScgc3Ryb2tlPScjOTY5Njk2Jy8+PHBhdGggZD0nTTQ1LjAgMTc1LjAgTDMwNS4wIDE3NS4wIEwzMDUuMCAyMDMuMCBMNDUuMCAyMDMuMCB6JyBmaWxsPSd3aGl0ZScgc3Ryb2tlPScjMDAwMDAwJyBzdHJva2UtbGluZWNhcD0ncm91bmQnIHN0cm9rZS1saW5lam9pbj0ncm91bmQnIHN0cm9rZS13aWR0aD0nMS4wJy8+PHBhdGggZD0nTTU1LjAgMTA1LjAgTDI5NS4wIDEwNS4wIEwyOTUuMCAxMzMuMCBMNTUuMCAxMzMuMCB6JyBmaWxsPSd3aGl0ZScgc3Ryb2tlPScjMDAwMDAwJyBzdHJva2UtbGluZWNhcD0ncm91bmQnIHN0cm9rZS1saW5lam9pbj0ncm91bmQnIHN0cm9rZS13aWR0aD0nMS4wJy8+PHBhdGggZD0nTTk1LjAgMzUuMCBMMjU1LjAgMzUuMCBMMjU1LjAgNjMuMCBMOTUuMCA2My4wIHonIGZpbGw9J3doaXRlJyBzdHJva2U9JyMwMDAwMDAnIHN0cm9rZS1saW5lY2FwPSdyb3VuZCcgc3Ryb2tlLWxpbmVqb2luPSdyb3VuZCcgc3Ryb2tlLXdpZHRoPScxLjAnLz48cGF0aCBkPSdNMTc1LjAgNzAuMCBMMTcwLjAgODQuMCBMMTgwLjAgODQuMCB6JyBmaWxsPScjMDAwMDAwJyBzdHJva2U9J25vbmUnIHN0cm9rZS1saW5lY2FwPSdyb3VuZCcgc3Ryb2tlLWxpbmVqb2luPSdyb3VuZCcgc3Ryb2tlLXdpZHRoPScxLjAnLz48cGF0aCBkPSdNMTc1LjAgMTQwLjAgTDE3MC4wIDE1NC4wIEwxODAuMCAxNTQuMCB6JyBmaWxsPScjMDAwMDAwJyBzdHJva2U9J25vbmUnIHN0cm9rZS1saW5lY2FwPSdyb3VuZCcgc3Ryb2tlLWxpbmVqb2luPSdyb3VuZCcgc3Ryb2tlLXdpZHRoPScxLjAnLz48cGF0aCBkPSdNNDkwLjAgMTgyLjAgTDUwMC4wIDE4OS4wIEw0OTAuMCAxOTYuMCB6JyBmaWxsPScjMDAwMDAwJyBzdHJva2U9J25vbmUnIHN0cm9rZS1saW5lY2FwPSdyb3VuZCcgc3Ryb2tlLWxpbmVqb2luPSdyb3VuZCcgc3Ryb2tlLXdpZHRoPScxLjAnLz48cGF0aCBkPSdNMTc1LjAgNzcuMCBMMTc1LjAgOTcuMCAnIGZpbGw9J25vbmUnIHN0cm9rZT0nIzAwMDAwMCcgc3Ryb2tlLWxpbmVjYXA9J3JvdW5kJyBzdHJva2UtbGluZWpvaW49J3JvdW5kJyBzdHJva2Utd2lkdGg9JzEuMCcvPjxwYXRoIGQ9J00xNzUuMCAxNDcuMCBMMTc1LjAgMTY3LjAgJyBmaWxsPSdub25lJyBzdHJva2U9JyMwMDAwMDAnIHN0cm9rZS1saW5lY2FwPSdyb3VuZCcgc3Ryb2tlLWxpbmVqb2luPSdyb3VuZCcgc3Ryb2tlLXdpZHRoPScxLjAnLz48cGF0aCBkPSdNNDgwLjAgMTg5LjAgTDQ5NS4wIDE4OS4wICcgZmlsbD0nbm9uZScgc3Ryb2tlPScjMDAwMDAwJyBzdHJva2UtbGluZWNhcD0ncm91bmQnIHN0cm9rZS1saW5lam9pbj0ncm91bmQnIHN0cm9rZS13aWR0aD0nMS4wJy8+PHRleHQgZmlsbD0nIzAwMDAwMCcgZm9udC1mYW1pbHk9J3NhbnMtc2VyaWYnIGZvbnQtc2l6ZT0nMTUnIHN0cm9rZT0nbm9uZScgeD0nMTI1JyB5PSc1NCc+PCFbQ0RBVEFbcm9vdCBpbmplY3Rvcl1dPjwvdGV4dD48dGV4dCBmaWxsPScjMDAwMDAwJyBmb250LWZhbWlseT0nc2Fucy1zZXJpZicgZm9udC1zaXplPScxNScgc3Ryb2tlPSdub25lJyB4PScyOTEnIHk9JzU0Jz48IVtDREFUQVsoTG9nZ2luZ1NlcnZpY2UsIFJhY2VTZXJ2aWNlKV1dPjwvdGV4dD48dGV4dCBmaWxsPScjMDAwMDAwJyBmb250LWZhbWlseT0nc2Fucy1zZXJpZicgZm9udC1zaXplPScxNScgc3Ryb2tlPSdub25lJyB4PSc4MCcgeT0nMTI0Jz48IVtDREFUQVtBcHBDb21wb25lbnQgaW5qZWN0b3JdXT48L3RleHQ+PHRleHQgZmlsbD0nIzAwMDAwMCcgZm9udC1mYW1pbHk9J3NhbnMtc2VyaWYnIGZvbnQtc2l6ZT0nMTUnIHN0cm9rZT0nbm9uZScgeD0nNzEnIHk9JzE5NCc+PCFbQ0RBVEFbUmFjZXNDb21wb25lbnQgaW5qZWN0b3JdXT48L3RleHQ+PHRleHQgZmlsbD0nIzAwMDAwMCcgZm9udC1mYW1pbHk9J3NhbnMtc2VyaWYnIGZvbnQtc2l6ZT0nMTUnIHN0cm9rZT0nbm9uZScgeD0nMzMwJyB5PScxOTQnPjwhW0NEQVRBWyhMb2dnaW5nU2VydmljZV1dPjwvdGV4dD48dGV4dCBmaWxsPScjMDAwMDAwJyBmb250LWZhbWlseT0nc2Fucy1zZXJpZicgZm9udC1zaXplPScxNScgc3Ryb2tlPSdub25lJyB4PSc1MjEnIHk9JzE5NCc+PCFbQ0RBVEFbTG9nZ2luZ0FQSVNlcnZpY2UpXV0+PC90ZXh0PjwvZz48L3N2Zz4=" alt="di component" width="710" height="238">
</div>
</div>
<div class="paragraph">
<p>L&#8217;injection sera alors résolue en&#160;:</p>
</div>
<div class="imageblock text-center">
<div class="content">
<img src="data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0nMS4wJyBlbmNvZGluZz0nVVRGLTgnPz48c3ZnIGhlaWdodD0nMjM4JyBwcmVzZXJ2ZUFzcGVjdFJhdGlvPSd4TWlkWU1pZCBtZWV0JyBzaGFwZS1yZW5kZXJpbmc9J2dlb21ldHJpY1ByZWNpc2lvbicgdmVyc2lvbj0nMS4wJyB2aWV3Qm94PScwIDAgNTQwIDIzOCcgd2lkdGg9JzU0MCcgeG1sbnM9J2h0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnJz48ZGVmcz48ZmlsdGVyIGhlaWdodD0nMjAwJScgaWQ9J3NoYWRvd0JsdXInIHdpZHRoPScyMDAlJyB4PScwJyB5PScwJz48ZmVPZmZzZXQgZHg9JzMuMDAwMzAwMicgZHk9JzMuMDAwMzAwMicgaW49J1NvdXJjZUdyYXBoaWMnIHJlc3VsdD0nb2ZmT3V0Jy8+PGZlR2F1c3NpYW5CbHVyIGluPSdvZmZPdXQnIHN0ZERldmlhdGlvbj0nMycvPjwvZmlsdGVyPjwvZGVmcz48ZyBzdHJva2UtbGluZWNhcD0nc3F1YXJlJyBzdHJva2UtbGluZWpvaW49J3JvdW5kJyBzdHJva2Utd2lkdGg9JzEnPjxyZWN0IGhlaWdodD0nMjM4JyBzdHlsZT0nZmlsbDogI2ZmZmZmZicgd2lkdGg9JzU0MCcgeD0nMCcgeT0nMCcvPjxwYXRoIGQ9J000NS4wIDEwNS4wIEwyNTUuMCAxMDUuMCBMMjU1LjAgMTMzLjAgTDQ1LjAgMTMzLjAgeicgZmlsbD0nIzk2OTY5NicgZmlsdGVyPSd1cmwoI3NoYWRvd0JsdXIpJyBzdHJva2U9JyM5Njk2OTYnLz48cGF0aCBkPSdNMzI1LjAgMTc1LjAgTDUwNS4wIDE3NS4wIEw1MDUuMCAyMDMuMCBMMzI1LjAgMjAzLjAgeicgZmlsbD0nIzk2OTY5NicgZmlsdGVyPSd1cmwoI3NoYWRvd0JsdXIpJyBzdHJva2U9JyM5Njk2OTYnLz48cGF0aCBkPSdNMzQ1LjAgMzUuMCBMNTE1LjAgMzUuMCBMNTE1LjAgNjMuMCBMMzQ1LjAgNjMuMCB6JyBmaWxsPScjOTY5Njk2JyBmaWx0ZXI9J3VybCgjc2hhZG93Qmx1ciknIHN0cm9rZT0nIzk2OTY5NicvPjxwYXRoIGQ9J000NS4wIDE3NS4wIEwyMTUuMCAxNzUuMCBMMjE1LjAgMjAzLjAgTDQ1LjAgMjAzLjAgeicgZmlsbD0nIzk2OTY5NicgZmlsdGVyPSd1cmwoI3NoYWRvd0JsdXIpJyBzdHJva2U9JyM5Njk2OTYnLz48cGF0aCBkPSdNNzUuMCAzNS4wIEwyMTUuMCAzNS4wIEwyMTUuMCA2My4wIEw3NS4wIDYzLjAgeicgZmlsbD0nIzk2OTY5NicgZmlsdGVyPSd1cmwoI3NoYWRvd0JsdXIpJyBzdHJva2U9JyM5Njk2OTYnLz48cGF0aCBkPSdNNDUuMCAxMDUuMCBMMjU1LjAgMTA1LjAgTDI1NS4wIDEzMy4wIEw0NS4wIDEzMy4wIHonIGZpbGw9J3doaXRlJyBzdHJva2U9JyMwMDAwMDAnIHN0cm9rZS1saW5lY2FwPSdyb3VuZCcgc3Ryb2tlLWxpbmVqb2luPSdyb3VuZCcgc3Ryb2tlLXdpZHRoPScxLjAnLz48cGF0aCBkPSdNMzI1LjAgMTc1LjAgTDUwNS4wIDE3NS4wIEw1MDUuMCAyMDMuMCBMMzI1LjAgMjAzLjAgeicgZmlsbD0nd2hpdGUnIHN0cm9rZT0nIzAwMDAwMCcgc3Ryb2tlLWxpbmVjYXA9J3JvdW5kJyBzdHJva2UtbGluZWpvaW49J3JvdW5kJyBzdHJva2Utd2lkdGg9JzEuMCcvPjxwYXRoIGQ9J00zNDUuMCAzNS4wIEw1MTUuMCAzNS4wIEw1MTUuMCA2My4wIEwzNDUuMCA2My4wIHonIGZpbGw9J3doaXRlJyBzdHJva2U9JyMwMDAwMDAnIHN0cm9rZS1saW5lY2FwPSdyb3VuZCcgc3Ryb2tlLWxpbmVqb2luPSdyb3VuZCcgc3Ryb2tlLXdpZHRoPScxLjAnLz48cGF0aCBkPSdNNDUuMCAxNzUuMCBMMjE1LjAgMTc1LjAgTDIxNS4wIDIwMy4wIEw0NS4wIDIwMy4wIHonIGZpbGw9J3doaXRlJyBzdHJva2U9JyMwMDAwMDAnIHN0cm9rZS1saW5lY2FwPSdyb3VuZCcgc3Ryb2tlLWxpbmVqb2luPSdyb3VuZCcgc3Ryb2tlLXdpZHRoPScxLjAnLz48cGF0aCBkPSdNNzUuMCAzNS4wIEwyMTUuMCAzNS4wIEwyMTUuMCA2My4wIEw3NS4wIDYzLjAgeicgZmlsbD0nd2hpdGUnIHN0cm9rZT0nIzAwMDAwMCcgc3Ryb2tlLWxpbmVjYXA9J3JvdW5kJyBzdHJva2UtbGluZWpvaW49J3JvdW5kJyBzdHJva2Utd2lkdGg9JzEuMCcvPjxwYXRoIGQ9J000MjUuMCA3Ny4wIEw0MjUuMCAxMTkuMCBMMjY1LjAgMTE5LjAgJyBmaWxsPSdub25lJyBzdHJva2U9JyMwMDAwMDAnIHN0cm9rZS1kYXNoYXJyYXk9JzUuMCw1LjAnIHN0cm9rZS1saW5lY2FwPSdidXR0JyBzdHJva2UtbGluZWpvaW49J3JvdW5kJyBzdHJva2UtbWl0ZXJsaW1pdD0nMCcgc3Ryb2tlLXdpZHRoPScxLjAnLz48cGF0aCBkPSdNMzMwLjAgNDIuMCBMMzQwLjAgNDkuMCBMMzMwLjAgNTYuMCB6JyBmaWxsPScjMDAwMDAwJyBzdHJva2U9J25vbmUnIHN0cm9rZS1saW5lY2FwPSdyb3VuZCcgc3Ryb2tlLWxpbmVqb2luPSdyb3VuZCcgc3Ryb2tlLXdpZHRoPScxLjAnLz48cGF0aCBkPSdNNDI1LjAgNzAuMCBMNDIwLjAgODQuMCBMNDMwLjAgODQuMCB6JyBmaWxsPScjMDAwMDAwJyBzdHJva2U9J25vbmUnIHN0cm9rZS1saW5lY2FwPSdyb3VuZCcgc3Ryb2tlLWxpbmVqb2luPSdyb3VuZCcgc3Ryb2tlLXdpZHRoPScxLjAnLz48cGF0aCBkPSdNMTMwLjAgODQuMCBMMTM1LjAgOTguMCBMMTQwLjAgODQuMCB6JyBmaWxsPScjMDAwMDAwJyBzdHJva2U9J25vbmUnIHN0cm9rZS1saW5lY2FwPSdyb3VuZCcgc3Ryb2tlLWxpbmVqb2luPSdyb3VuZCcgc3Ryb2tlLXdpZHRoPScxLjAnLz48cGF0aCBkPSdNMTMwLjAgMTU0LjAgTDEzNS4wIDE2OC4wIEwxNDAuMCAxNTQuMCB6JyBmaWxsPScjMDAwMDAwJyBzdHJva2U9J25vbmUnIHN0cm9rZS1saW5lY2FwPSdyb3VuZCcgc3Ryb2tlLWxpbmVqb2luPSdyb3VuZCcgc3Ryb2tlLXdpZHRoPScxLjAnLz48cGF0aCBkPSdNMzEwLjAgMTgyLjAgTDMyMC4wIDE4OS4wIEwzMTAuMCAxOTYuMCB6JyBmaWxsPScjMDAwMDAwJyBzdHJva2U9J25vbmUnIHN0cm9rZS1saW5lY2FwPSdyb3VuZCcgc3Ryb2tlLWxpbmVqb2luPSdyb3VuZCcgc3Ryb2tlLXdpZHRoPScxLjAnLz48cGF0aCBkPSdNMTM1LjAgNzAuMCBMMTM1LjAgOTEuMCAnIGZpbGw9J25vbmUnIHN0cm9rZT0nIzAwMDAwMCcgc3Ryb2tlLWxpbmVjYXA9J3JvdW5kJyBzdHJva2UtbGluZWpvaW49J3JvdW5kJyBzdHJva2Utd2lkdGg9JzEuMCcvPjxwYXRoIGQ9J00xMzUuMCAxNDAuMCBMMTM1LjAgMTYxLjAgJyBmaWxsPSdub25lJyBzdHJva2U9JyMwMDAwMDAnIHN0cm9rZS1saW5lY2FwPSdyb3VuZCcgc3Ryb2tlLWxpbmVqb2luPSdyb3VuZCcgc3Ryb2tlLXdpZHRoPScxLjAnLz48cGF0aCBkPSdNMjI1LjAgNDkuMCBMMzM1LjAgNDkuMCAnIGZpbGw9J25vbmUnIHN0cm9rZT0nIzAwMDAwMCcgc3Ryb2tlLWRhc2hhcnJheT0nNS4wLDUuMCcgc3Ryb2tlLWxpbmVjYXA9J2J1dHQnIHN0cm9rZS1saW5lam9pbj0ncm91bmQnIHN0cm9rZS1taXRlcmxpbWl0PScwJyBzdHJva2Utd2lkdGg9JzEuMCcvPjxwYXRoIGQ9J00yMjUuMCAxODkuMCBMMzE1LjAgMTg5LjAgJyBmaWxsPSdub25lJyBzdHJva2U9JyMwMDAwMDAnIHN0cm9rZS1kYXNoYXJyYXk9JzUuMCw1LjAnIHN0cm9rZS1saW5lY2FwPSdidXR0JyBzdHJva2UtbGluZWpvaW49J3JvdW5kJyBzdHJva2UtbWl0ZXJsaW1pdD0nMCcgc3Ryb2tlLXdpZHRoPScxLjAnLz48dGV4dCBmaWxsPScjMDAwMDAwJyBmb250LWZhbWlseT0nc2Fucy1zZXJpZicgZm9udC1zaXplPScxNScgc3Ryb2tlPSdub25lJyB4PScxMDEnIHk9JzU0Jz48IVtDREFUQVtBcHBsaWNhdGlvbl1dPjwvdGV4dD48dGV4dCBmaWxsPScjMDAwMDAwJyBmb250LWZhbWlseT0nc2Fucy1zZXJpZicgZm9udC1zaXplPScxNScgc3Ryb2tlPSdub25lJyB4PSczNjgnIHk9JzU0Jz48IVtDREFUQVtMb2dnaW5nU2VydmljZV1dPjwvdGV4dD48dGV4dCBmaWxsPScjMDAwMDAwJyBmb250LWZhbWlseT0nc2Fucy1zZXJpZicgZm9udC1zaXplPScxMycgc3Ryb2tlPSdub25lJyB4PSc5MycgeT0nMTI0Jz48IVtDREFUQVtBcHBDb21wb25lbnRdXT48L3RleHQ+PHRleHQgZmlsbD0nIzAwMDAwMCcgZm9udC1mYW1pbHk9J3NhbnMtc2VyaWYnIGZvbnQtc2l6ZT0nMTQnIHN0cm9rZT0nbm9uZScgeD0nNjEnIHk9JzE5NCc+PCFbQ0RBVEFbUmFjZXNDb21wb25lbnRdXT48L3RleHQ+PHRleHQgZmlsbD0nIzAwMDAwMCcgZm9udC1mYW1pbHk9J3NhbnMtc2VyaWYnIGZvbnQtc2l6ZT0nMTUnIHN0cm9rZT0nbm9uZScgeD0nMzM5JyB5PScxOTQnPjwhW0NEQVRBW0xvZ2dpbmdBUElTZXJ2aWNlXV0+PC90ZXh0PjwvZz48L3N2Zz4=" alt="di component resolution" width="540" height="238">
</div>
</div>
<div class="paragraph">
<p>Si le service contient un état propre à une instance de composant,
alors il doit être fourni par ce composant.
Pour les services sans état, ou qui contiennent un état global,
ils doivent être fournis à la racine.</p>
</div>
</div>
<div class="sect2">
<h3 id="_injection_sans_types">15.6. Injection sans types</h3>
<div class="paragraph">
<p>Nous avons appris qu&#8217;on pouvait définir des tokens pour identifier des services.
Nous avons aussi appris qu&#8217;il y a deux moyens d&#8217;obtenir une dépendance&#160;:
appeler la fonction <code>inject</code>, ou déclarer la dépendance sous forme d&#8217;argument du constructeur.</p>
</div>
<div class="paragraph">
<p>Quand un token est utilisé pour identifier un service, on peut passer ce token
à la fonction <code>inject</code> pour obtenir le service associé.</p>
</div>
<div class="paragraph">
<p>C&#8217;est aussi possible d&#8217;obtenir le service associé au token quand on utilise l&#8217;injection via le constructeur,
grâce au décorateur <code>@Inject()</code>.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="javascript">import { Inject, Injectable } from '@angular/core';
import { BACKEND_URL } from './tokens';

@Injectable({
  providedIn: 'root'
})
export class RaceService {
  constructor(@Inject(BACKEND_URL) private url: string) {}
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>L&#8217;exemple ci-dessus utilise un token <code>BACKEND_URL</code> qui identifie une simple valeur stockée dans l&#8217;injecteur.
Ce token est défini ainsi&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="javascript">import { InjectionToken } from '@angular/core';

export const BACKEND_URL = new InjectionToken&lt;string&gt;('API URL');</code></pre>
</div>
</div>
<div class="paragraph">
<p>On utilise ensuite ce token dans les providers de l&#8217;application pour définir sa valeur,
par exemple&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="javascript">{ provide: BACKEND_URL, useValue: 'http://localhost:8080' }</code></pre>
</div>
</div>
<div class="paragraph">
<p>Ou on peut l&#8217;enregistrer directement avec <code>providedIn</code>&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="javascript">export const BACKEND_URL_PROVIDED = new InjectionToken&lt;string&gt;('API URL', {
  providedIn: 'root',
  factory: () =&gt; 'http://localhost:8080'
});</code></pre>
</div>
</div>
<div class="paragraph">
<p>Angular utilise ce mécanisme de token également,
et nous permet par exemple de définir la <em>locale</em> de l&#8217;application
grâce au token <code>LOCALE_ID</code>&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="javascript">bootstrapApplication(AppComponent, {
  providers: [
    { provide: LOCALE_ID, useValue: 'fr-FR' }
  ]
}).catch(err =&gt; console.error(err));

@Component({
  selector: 'ns-locale',
  template: `
    &lt;p&gt;The locale is {{ locale }}&lt;/p&gt;
    &lt;!-- will display 'fr-FR' --&gt;

    &lt;p&gt;{{ 1234.56 | number }}&lt;/p&gt;
    &lt;!-- will display '1 234,56' --&gt;
  `,
  imports: [DecimalPipe]
})
export class CustomLocaleComponent {
  readonly locale = inject(LOCALE_ID);
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Mais on en reparlera plus loin lorsque l&#8217;on abordera l&#8217;internationalisation&#160;!</p>
</div>
</div>
<div class="sect2">
<h3 id="_services_fournis_par_le_framework">15.7. Services fournis par le framework</h3>
<div class="paragraph">
<p>Angular fournit quelques services. Certains d&#8217;entre eux seront décrits dans des chapitres dédiés.
Pour l&#8217;instant, parlons seulement de deux services très simples.</p>
</div>
<div class="sect3">
<h4 id="_service_title">15.7.1. Service Title</h4>
<div class="paragraph">
<p>Une question qui revient souvent est&#160;: comment modifier le titre de ma page&#160;?
Facile&#160;! Il y a un service <code>Title</code> que tu peux t&#8217;injecter,
et il propose un getter et un setter&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="javascript">import { Component, inject } from '@angular/core';

@Component({
  selector: 'ns-root',
  template: `&lt;h1&gt;PonyRacer&lt;/h1&gt;`
})
export class AppComponent {
  constructor() {
    inject(Title).setTitle('PonyRacer - Bet on ponies');
  }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Le service créera automatiquement l&#8217;élément <code>title</code> dans la section <code>head</code> si besoin
et positionnera correctement la valeur&#160;!</p>
</div>
</div>
<div class="sect3">
<h4 id="_service_meta">15.7.2. Service Meta</h4>
<div class="paragraph">
<p>L&#8217;autre service est sensiblement équivalent&#160;:
il permet de récupérer et mettre à jour les valeurs "meta" de la page.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="javascript">import { Component, inject } from '@angular/core';

@Component({
  selector: 'ns-root',
  template: `&lt;h1&gt;PonyRacer&lt;/h1&gt;`
})
export class AppComponent {
  constructor() {
    inject(Meta).addTag({ name: 'author', content: 'Ninja Squad' });
  }
}</code></pre>
</div>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<i class="fa icon-tip" title="Mise en pratique"></i>
</td>
<td class="content">
<div class="paragraph">
<p>Essaye notre exercice
<a href="https://angular-exercises.ninja-squad.com/exercises/8/race-service">Race service</a> <span class="image"><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAIgAAACACAMAAADnN9ENAAACSVBMVEVMaXH7whr7whr7whr7whr7whr7whr7whr7whr7whr7whr7whp4o614o614o614o637whr7whp4o614o614o614o614o614o614o614o62EoKN4o614o637whqFXFKFXFKQnZm4kni0k3vA1Njr8fLd5+myytB/qLGFXFKFXFKcmY98oqp4o63V4uWFXFKFXFKoloWgmIx4o62Hpqu+nofCpI/b08yFXFKAoaaMnpzYzcSFXFKFXFKUnJaYm5O7mIDl5eOGrbaFXFKGk5Kfd2WSalyYcGClfmqhlIZ6lpx+hIWDaWOFXFKFXFJ/gICkl4nFqpeFXFKFXFKCamSDZV2EYFiDaWOCbmne2dTk7O77whqOZE6Ad3TIsJ6jwMflryWbb0h/gIDo6+rH2dz0vB58jZGIn6Cxgj17kZbOvK2FXFL7whq5iTqVt75/e3rPnC/eqSiMYk+FXFKjdkS4p6Ll6OjLtqbSwrXFubacu8PstSGynZiOsrqLZVzauj/013mrlI56mqLCtFrt69fY1dSApaTrvizz2oafgXqSb2aqxcuhrX/11GvO3uGQeHG5z9T20V7e3t7s7uX4y0P6xSjv5byYeHC+sKyli4TSzMrIzc28wcGwtLVHR0c8OztIR0c1NTWNkJEvLy+NioqTkJCHhISlqKnU2dpCQUGBhIRnZmZeYGBqbGyZnJ07Ozvf5ebLwsCmqapfYGFiYmLAw8Tw9fXs8vNqjZVBTE9PYmY4Pj9deH5mho5GU1Y9RUdhf4ZznKVKW140Njdz5u6AAAAAf3RSTlMAMIBQ7/+fEI/PYL8QcIBAIK+v/7+fz+8wUP/fYEAgEP//////////32D//yD//7///4//////UP///zDv///////P//////////+vj3Ag//+fQJ/////////fz///////////////////gHD///////+v//////////////9AWHP9fwAABxxJREFUeAHs1IVy5DAQBNBZ0DJ3mJUonGiPmZmZmZmZPv6ssb2oFFqHeYUq7LJ7mlatWhWVWDxBf4SkEHH6EwhPKk2/X0Z4sn9AknRSeJIx+u0SguXot8sLliG7QrFUKtOvUEkKVrUXpQZPT6EZrBdAX7FA0YsLX7ZCFv0w+gco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" alt="Pro" width="18"></span>
pour construire ton premier service.</p>
</div>
</td>
</tr>
</table>
</div>
<div style="page-break-after: always;"></div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="reactive-programming">16. Programmation réactive</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_ok_on_vous_rappellera">16.1. OK, on vous rappellera</h3>
<div class="paragraph">
<p>Le principe de base de la programmation réactive est d&#8217;essayer d&#8217;implémenter la logique de manière déclarative,
en définissant des événements et en spécifiant comment y réagir, au lieu de l&#8217;implémenter de manière impérative.
Cela te semble sans doute très abstrait, et ça l&#8217;est. Alors illustrons ce principe avec un exemple basique.</p>
</div>
<div class="paragraph">
<p>Supposons que tu veuilles représenter un cercle, et y stocker son rayon et sa circonférence.
Et tu veux pouvoir changer le rayon du cercle. Bien sûr, si le rayon change, la circonférence
doit aussi changer. Un moyen (impératif) de faire cela est d&#8217;utiliser deux propriétés&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="javascript">  private radius = 0;
  private circumference = 0;

  setRadius(r: number) {
    this.radius = r;
    this.circumference = 2 * Math.PI * r;
  }</code></pre>
</div>
</div>
<div class="paragraph">
<p>Chaque fois qu&#8217;on change le rayon, il faut se rappeler de changer aussi la circonférence.</p>
</div>
<div class="paragraph">
<p>Un autre moyen d&#8217;implémenter le cercle est de se baser sur un type réactif, et de <em>déclarativement</em> spécifier
que la circonférence doit être recalculée chaque fois que le rayon change.
Un changement de rayon peut donc être vu comme un événement, et on peut réagir à cet événement en changeant la circonférence.
Le type réactif qu&#8217;on pourrait utiliser ici est un signal&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="javascript">  private readonly radius = signal(0);
  private readonly circumference = computed(() =&gt; 2 * Math.PI * this.radius());

  setRadius(r: number) {
    this.radius.set(r);
  }</code></pre>
</div>
</div>
<div class="paragraph">
<p>Considérons maintenant un composant qui prend l&#8217;identifiant d&#8217;une course en input,
et qui doit afficher le détail de cette course.
Les choses deviennent plus compliquées, parce que pour obtenir le détail d&#8217;une course,
il faut faire une opération asynchrone. On ne peut pas simplement "calculer" une course depuis
son identifiant. Par ailleurs, si l&#8217;identifiant change deux fois d&#8217;affilée, la récupération de
la première course doit être annulée avant de récupérer la seconde&#160;: on ne s&#8217;intéresse plus
à la première.</p>
</div>
<div class="paragraph">
<p>Il se peut qu&#8217;on doive envoyer deux requêtes HTTP différentes pour obtenir le détail complet
de la course, et il nous faudra donc attendre d&#8217;avoir les deux réponses avant de pouvoir l&#8217;afficher.</p>
</div>
<div class="paragraph">
<p>Être capable d&#8217;exprimer que chaque fois que l&#8217;input change, il faut faire deux opérations asynchrones,
annuler les deux éventuelles opérations précédentes, attendre que les deux opérations se terminent,
et enfin afficher la course, ce serait génial.</p>
</div>
<div class="paragraph">
<p>C&#8217;est pour ce genre de choses que <a href="https://rxjs.dev">RxJS</a> brille.
Il fournit un autre type réactif&#160;: <code>Observable</code>, qui représente un flux d&#8217;événements
synchrones ou asynchrones. Il propose aussi tout un tas de fonctions et d&#8217;opérateurs qui
permettent de transformer, filtrer, combiner ces flux d&#8217;événements.</p>
</div>
<div class="paragraph">
<p>Angular, depuis sa première version, a choisi de s&#8217;appuyer sur RxJS, et utilise des observables pour
représenter des événements ou des valeurs qui varient dans le temps. Par exemple, le résultat d&#8217;un appel
au <code>HttpClient</code> est un <code>Observable</code>. Les changements de paramètres d&#8217;une route sont représentés par un <code>Observable</code>.
Les changements de valeur d&#8217;un formulaire sont représentés par un <code>Observable</code>.</p>
</div>
<div class="paragraph">
<p>RxJS est puissant, mais est aussi complexe à apprendre et à maîtriser. Adopter les paradigmes de
la programmation réactive ne se fait pas naturellement chez la plupart des développeurs.
Et Angular utilise maintenant des signaux, un autre type réactif qui remplit certaines des fonctions
des observables.
Ainsi, Angular a décidé de suivre un nouveau cap&#160;: ne plus s&#8217;appuyer directement
sur RxJS, mais rendre son usage optionnel aussi agréable que possible, en fournissant des
fonctions d&#8217;interopérabilité.</p>
</div>
</div>
<div class="sect2">
<h3 id="_rxjs">16.2. RxJS</h3>
<div class="paragraph">
<p>Un <code>Observable</code> est un flux d&#8217;événements avec un cycle de vie strictement défini, mais flexible.</p>
</div>
<div class="paragraph">
<p>Quand on <strong>souscrit</strong> à un observable, il se met à émettre des événements. Il peut en émettre 0, 1, N ou même une infinité.
L&#8217;émission peut être synchrone ou asynchrone. Les événements peuvent être n&#8217;importe quoi (une réponse HTTP, une valeur de formulaire, etc.)&#160;: cela dépend du type de l&#8217;observable.</p>
</div>
<div class="paragraph">
<p>Un observable peut signaler sa <strong>complétion</strong>. Après la complétion, on sait qu&#8217;il
n&#8217;émettra plus d&#8217;événements. Et on est donc dé-souscrit&#160;: pourquoi continuerait-on
à écouter quelque chose si on a la garantie qu&#8217;il ne dira jamais plus rien&#160;?</p>
</div>
<div class="paragraph">
<p>Si quelque chose se passe mal (par exemple, tu as souscrit à un observable pour envoyer une requête HTTP et
obtenir une réponse HTTP mais le serveur est injoignable), un observable peut aussi signaler une <strong>erreur</strong>.
Après une erreur, tu as aussi la garantie que l&#8217;observable n&#8217;émettra plus rien (ni ne signalera sa complétion).
Et tu es donc aussi dé-souscrit.</p>
</div>
<div class="paragraph">
<p>On peut créer divers types d&#8217;observables en utilisant des fonctions de RxJS.
Beaucoup des fonctions de RxJS sont utilisées pour transformer un observable en un autre observable.
Ces fonctions sont appelées des <em>opérateurs</em>.</p>
</div>
<div class="paragraph">
<p>Par exemple&#160;:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>take(n)</code> crée un observable qui émet seulement les <code>n</code> premiers événements de l&#8217;observable source et ensuite signale sa complétion&#160;;</p>
</li>
<li>
<p><code>map(fn)</code> crée un observable qui transforme chaque événement de l&#8217;observable source (en utilisant la fonction <code>fn</code>) et émet chaque résultat&#160;;</p>
</li>
<li>
<p><code>filter(predicate)</code> crée un observable qui émet seulement les événements de l&#8217;observable source qui vérifient le prédicat.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Il y a plein d&#8217;autres opérateurs. Il nous faudrait un livre entier pour tous les expliquer.
J&#8217;espère que ces quelques exemples te permettent d&#8217;avoir une idée de ce que les opérateurs peuvent faire.
Si tu veux visualiser graphiquement le fonctionnement des fonctions et opérateurs de RxJS, tu peux consulter <a href="http://rxmarbles.com/">rxmarbles.com</a>, ou <a href="https://rxjs.dev">la documentation officielle de RxJS</a>.</p>
</div>
<div class="paragraph">
<p>Si tu as un observable de nombres et que tu veux les multiplier par 2,
puis filtrer ceux qui sont inférieurs à 5, et les afficher, tu peux écrire&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="javascript">import { filter, from, map, Observable } from 'rxjs';</code></pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="javascript">const numbers$: Observable&lt;number&gt; = from([1, 2, 3, 4, 5]).pipe(
  map(x =&gt; x * 2),
  filter(x =&gt; x &gt; 5)
);
numbers$.subscribe(x =&gt; console.log(x));
// Logs 6, 8, 10</code></pre>
</div>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
Le suffixe <code>$</code> est une convention qui permet de se souvenir que la variable référence un <code>Observable</code>.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>L&#8217;observable de l&#8217;exemple ci-dessus émet de manière synchrone&#160;: dès qu&#8217;on souscrit, les nombres sont émis l&#8217;un après l&#8217;autre.
Quand l&#8217;appel à <code>subscribe</code> retourne, tous les nombres ont déjà été affichés dans la console.</p>
</div>
<div class="paragraph">
<p>Mais les observables sont la plupart du temps asynchrones. Ils peuvent par exemple représenter des événements
du DOM qui vont se produire dans le futur&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="javascript">import { fromEvent } from 'rxjs';</code></pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="javascript">const input = document.querySelector('input')!;

fromEvent(input, 'keyup').subscribe(() =&gt; console.log('keyup!'));

input.trigger('keyup'); // Logs "keyup!"
input.trigger('keyup'); // Logs "keyup!"</code></pre>
</div>
</div>
<div class="paragraph">
<p>Quand on souscrit à un observable comme celui-là, la fonction qui est passée sera exécutée plus tard, chaque
fois que l&#8217;utilisateur relâche une touche de clavier dans le champ texte. Si tu ne t&#8217;intéresses plus à ces
événements, il faut te dé-souscrire.
Le moyen le plus simple est d&#8217;appeler la méthode <code>unsubscribe</code> de la <code>Subscription</code> retournée
par <code>subscribe</code>. Il y a d&#8217;autres techniques pour dé-souscrire, qui seront discutées plus tard.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="javascript">const subscription = fromEvent(input, 'keyup').subscribe(() =&gt; console.log('keyup!'));
// later, when not interested anymore
subscription.unsubscribe();</code></pre>
</div>
</div>
<div class="paragraph">
<p>On peut aussi avoir à gérer les erreurs.
La méthode <code>subscribe</code> accepte un objet en argument plutôt qu&#8217;une simple fonction de callback.
Cet objet peut définir un callback pour gérer les événements (appelé <code>next</code>),
et un callback pour gérer les erreurs (appelé <code>error</code>).</p>
</div>
<div class="paragraph">
<p>Ici, la  fonction de transformation lève une exception, qui sera loggée par le callback d&#8217;erreur.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="javascript">range(1, 5)
  .pipe(
    map(x =&gt; {
      if (x % 3 === 0) {
        throw new Error('something went wrong');
      } else {
        return x;
      }
    })
  )
  .subscribe({
    next: x =&gt; console.log(x),
    error: error =&gt; console.log(error)
  });
// Logs 1, 2, something went wrong</code></pre>
</div>
</div>
<div class="paragraph">
<p>Enfin, si l&#8217;observable signale sa complétion, tu peux être notifié en fournissant un troisième callback.
Ici, la fonction <code>range</code> crée un observable qui émet les événements de 1 à 5
puis signale sa complétion&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="javascript">range(1, 5)
  .pipe(
    map(x =&gt; x * 2),
    filter(x =&gt; x &gt; 5)
  )
  .subscribe({
    next: x =&gt; console.log(x),
    error: error =&gt; console.log(error),
    complete: () =&gt; console.log('done')
  });
// Logs 6, 8, 10, done</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_les_signaux_et_linteropérabilité_avec_rxjs">16.3. Les signaux et l&#8217;interopérabilité avec RxJS</h3>
<div class="paragraph">
<p>Revenons à notre problème. Comment peut-on utiliser RxJS pour, déclarativement, afficher le détail
d&#8217;une course chaque fois que son identifiant change&#160;?
L&#8217;identifiant de la course est une <em>input</em>, qui est un signal.
Mais pour utiliser RxJS, il nous faut un <code>Observable</code>, pas un signal.</p>
</div>
<div class="paragraph">
<p>Pas de problème. Angular fournit une fonction <code>toObservable()</code>, qui transforme un <code>Signal&lt;T&gt;</code> en <code>Observable&lt;T&gt;</code>.
En interne, elle utilise un <code>effect</code> pour savoir quand le signal change, et faire émettre à l&#8217;observable
sa nouvelle valeur.</p>
</div>
<div class="paragraph">
<p>Donc on peut écrire&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="javascript">import { Component, input } from '@angular/core';
import { toObservable } from '@angular/core/rxjs-interop';
import { Observable } from 'rxjs';

@Component({
  selector: 'ns-race',
  template: '...'
})
export class RaceComponent {
  readonly raceId = input.required&lt;number&gt;();
  readonly raceId$: Observable&lt;number&gt; = toObservable(this.raceId);
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>On doit maintenant récupérer le détail de la course chaque fois que l&#8217;observable émet,
et annuler l&#8217;éventuelle récupération précédente. C&#8217;est le job de l&#8217;opérateur <code>switchMap</code>.
Nous en parlerons plus en détails dans un chapitre ultérieur.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="javascript">import { Component, inject, input } from '@angular/core';
import { toObservable } from '@angular/core/rxjs-interop';
import { Observable, of, switchMap } from 'rxjs';

@Component({
  selector: 'ns-race',
  template: '...'
})
export class RaceComponent {
  private raceService = inject(RaceService);
  readonly raceId = input.required&lt;number&gt;();
  readonly race$: Observable&lt;RaceModel&gt; = toObservable(this.raceId).pipe(
    switchMap(raceId =&gt; this.raceService.get(raceId))
  );
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Parfait, mais comment afficher la course? Il faut souscrire à l&#8217;observable, et stocker les courses
qu&#8217;elle émet dans un signal afin que le template puisse y accéder. On pourrait donc écrire ceci&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="javascript">import { Component, inject, input, signal } from '@angular/core';
import { toObservable } from '@angular/core/rxjs-interop';
import { Observable, of, switchMap } from 'rxjs';

@Component({
  selector: 'ns-race',
  template: '...'
})
export class RaceComponent {
  private raceService = inject(RaceService);
  readonly raceId = input.required&lt;number&gt;();
  private race$: Observable&lt;RaceModel&gt; = toObservable(this.raceId).pipe(
    switchMap(raceId =&gt; this.raceService.get(raceId))
  );

  // ❌ don't do this
  readonly race = signal&lt;RaceModel | undefined&gt;(undefined);
  constructor() {
    this.race$.subscribe(race =&gt; this.race.set(race));
  }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Mais pour bien faire, il faut aussi dé-souscrire lorsque le composant est détruit.
Il y a un meilleur moyen. Angular fournit une fonction
pour transformer un <code>Observable&lt;T&gt;</code> en <code>Signal&lt;T | undefined&gt;</code>. Tu l&#8217;as deviné, elle s&#8217;appelle <code>toSignal</code>.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="javascript">import { Component, inject, input, Signal } from '@angular/core';
import { toObservable, toSignal } from '@angular/core/rxjs-interop';
import { Observable, of, switchMap } from 'rxjs';

@Component({
  selector: 'ns-race',
  template: '...'
})
export class RaceComponent {
  private raceService = inject(RaceService);
  readonly raceId = input.required&lt;number&gt;();
  private readonly race$: Observable&lt;RaceModel&gt; = toObservable(this.raceId).pipe(
    switchMap(raceId =&gt; this.raceService.get(raceId))
  );

  // ✅ Do this instead
  readonly race: Signal&lt;RaceModel | undefined&gt; = toSignal(this.race$);
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>En interne, <code>toSignal</code> souscrit à l&#8217;observable. Et elle dé-souscrit automatiquement à la destruction du composant.</p>
</div>
<div class="paragraph">
<p>Tu te demandes peut-être pourquoi <code>toSignal</code> retourne un <code>Signal&lt;RaceModel | undefined&gt;</code>
et pas un <code>Signal&lt;RaceModel&gt;</code>&#160;?
La réponse est logique. Un observable est généralement asynchrone. C&#8217;est le cas ici.
Donc il n&#8217;émet sa première course que lorsqu&#8217;il a reçu la réponse du serveur HTTP.
En attendant, il n&#8217;y a aucune course qui puisse être stockée dans le signal, donc sa valeur est <code>undefined</code>.
Tu peux passer une option à <code>toSignal</code> si tu préfères avoir une autre valeur par défaut que <code>undefined</code>,
ou si tu sais que l&#8217;observable émet de manière synchrone.</p>
</div>
<div class="admonitionblock warning">
<table>
<tr>
<td class="icon">
<i class="fa icon-warning" title="Attention"></i>
</td>
<td class="content">
<code>toObservable</code> et <code>toSignal</code> doivent être appelées dans un <em>contexte d&#8217;injection</em>, parce qu&#8217;elles
appellent <code>inject</code>. Donc, tout comme <code>inject</code>, tu ne peux appeler ces fonctions que pendant la construction
de l&#8217;objet.
Tu peux en réalité les appeler plus tard, mais il faudra alors passer un <code>Injector</code> en option.
Et celui-ci peut être obtenu, tu l&#8217;as deviné, grâce à l&#8217;injection de dépendance.
</td>
</tr>
</table>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<i class="fa icon-tip" title="Mise en pratique"></i>
</td>
<td class="content">
<div class="paragraph">
<p>Essaye notre
<a href="https://angular-exercises.ninja-squad.com/exercises/9/quiz-observables">quiz</a> <span class="image"><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAIgAAACACAMAAADnN9ENAAACN1BMVEVMaXF1aF51aF51aF51aF51aF51aF51aF51aF51aF51aF51aF51aF51aF6CcGNyZVxFQz9FQz9FQz9FQz+OeGi4kni0j3ZjWlJIRUFFQz9FQz+ghHC6lHqxj3eYfmx5a2BFQz9FQz9FQz9gWFGXfWtnXVROSkVsYVitjHV1aF5FQz9oW1GbfmqqiHFMSENRTEeKeGv0zK/wyKvPqI1TTUZbUkpdVk+finr81LbTrJFFQz9mXFS5nor40LLCnIJ+bmJyZlzSspvsxKdFQz9LSEPauaDLpIm2kXhFQz9XUUvnwKOPeWlgWFCGdmm+mH6khnFFQz9FQz+Xg3TfuJzJrJWGc2VaU01PSUNmWU51YlRdU0qwl4VKRkFrXFCRdWGUd2OmhW63knhiV05qXFGdgGvjvKDbtJhFQz9YUEiIb12OdmRxYVWLdmejg2xTTEWDbFuZe2ayjnWkhW94ZllvY1qWeWRUTUarinN+aVmef2mVe2iTe2pwX1Kohm+piXNaUkqMcl+tinKAbF1eVEpiVkyRdWG1kHeRdWGRdWGHcWCRdWGzj3aRdWGRdWGggWyXe2ePdGNAPDhCQ0NWV1c5OTmRdWF1YlUvLy+/w8PJzc22ubmGbl6RdWGph3FMTU2RdWFsW1CGiIiriHFSSEJaT0aRdWGggWp9aFmRdWE4NTSxjnWRdWGRdWGRdWGRdWGwjHSbfWd/aFhIQTxaTkU7ODVsW055ZFVORT9BPDhyX1GLcV5USUI1MzK6wa3dAAAAr3RSTlMAYIBAj/+/EJ/PcO8wUP/fYIBwMP///////9///////yBQv3D//////9/P////////////////////7///////////EP////+f/////////0Cv////////////////////////////j////////////////////////////////////2D/YP8w7/8g/xDP/////////5////////9w//9Q//////+v//+A//9Av9+PTccICgAABmhJREFUeAHs1YVC5ToUheEgC5cTfB827u4Q3N3d3e8dg3F796nQCe7t2Pme4G+brIqA31dAQEBAQFBwcIj4DYTCEBYuHOERACKjwoXXomGKjhFnwmCJjhUeA+JgiPdJmZAo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" alt="Free" width="18"></span>
et exercice
<a href="https://angular-exercises.ninja-squad.com/exercises/10/observables">Observables</a> <span class="image"><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAIgAAACACAMAAADnN9ENAAACN1BMVEVMaXF1aF51aF51aF51aF51aF51aF51aF51aF51aF51aF51aF51aF51aF6CcGNyZVxFQz9FQz9FQz9FQz+OeGi4kni0j3ZjWlJIRUFFQz9FQz+ghHC6lHqxj3eYfmx5a2BFQz9FQz9FQz9gWFGXfWtnXVROSkVsYVitjHV1aF5FQz9oW1GbfmqqiHFMSENRTEeKeGv0zK/wyKvPqI1TTUZbUkpdVk+finr81LbTrJFFQz9mXFS5nor40LLCnIJ+bmJyZlzSspvsxKdFQz9LSEPauaDLpIm2kXhFQz9XUUvnwKOPeWlgWFCGdmm+mH6khnFFQz9FQz+Xg3TfuJzJrJWGc2VaU01PSUNmWU51YlRdU0qwl4VKRkFrXFCRdWGUd2OmhW63knhiV05qXFGdgGvjvKDbtJhFQz9YUEiIb12OdmRxYVWLdmejg2xTTEWDbFuZe2ayjnWkhW94ZllvY1qWeWRUTUarinN+aVmef2mVe2iTe2pwX1Kohm+piXNaUkqMcl+tinKAbF1eVEpiVkyRdWG1kHeRdWGRdWGHcWCRdWGzj3aRdWGRdWGggWyXe2ePdGNAPDhCQ0NWV1c5OTmRdWF1YlUvLy+/w8PJzc22ubmGbl6RdWGph3FMTU2RdWFsW1CGiIiriHFSSEJaT0aRdWGggWp9aFmRdWE4NTSxjnWRdWGRdWGRdWGRdWGwjHSbfWd/aFhIQTxaTkU7ODVsW055ZFVORT9BPDhyX1GLcV5USUI1MzK6wa3dAAAAr3RSTlMAYIBAj/+/EJ/PcO8wUP/fYIBwMP///////9///////yBQv3D//////9/P////////////////////7///////////EP////+f/////////0Cv////////////////////////////j////////////////////////////////////2D/YP8w7/8g/xDP/////////5////////9w//9Q//////+v//+A//9Av9+PTccICgAABmhJREFUeAHs1YVC5ToUheEgC5cTfB827u4Q3N3d3e8dg3F796nQCe7t2Pme4G+brIqA31dAQEBAQFBwcIj4DYTCEBYuHOERACKjwoXXomGKjhFnwmCJjhUeA+JgiPdJmZAo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" alt="Free" width="18"></span>&#160;!
Il est gratuit et fait partie de notre Pack pro,
où tu apprends à construire une application complète étape par étape.
Dans cet exercice, tu transformeras le <code>RaceService</code> pour le rendre réactif&#160;!</p>
</div>
</td>
</tr>
</table>
</div>
<div style="page-break-after: always;"></div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="tests">17. Tester ton application</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_tester_cest_douter">17.1. Tester c&#8217;est douter</h3>
<div class="paragraph">
<p>J&#8217;adore les tests automatisés.
Ma vie professionnelle tourne autour de cette barre de progression qui devient verte dans mon IDE,
et me félicite d&#8217;avoir bien travaillé.
J&#8217;espère que les tests sont aussi importants pour toi, car ils sont le filet de sécurité ultime quand on écrit du code.
Rien n&#8217;est plus pénible que tester du code manuellement.</p>
</div>
<div class="paragraph">
<p>Angular fait du bon boulot en ce qui concerne la facilité d&#8217;écriture de tests.
AngularJS&#160;1.x était déjà très bon, et c&#8217;était une des raisons pour lesquelles j&#8217;appréciais ce framework.
Comme en AngularJS&#160;1.x, on peut écrire deux types de tests&#160;:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>tests unitaires&#160;;</p>
</li>
<li>
<p>tests <em>end-to-end</em> ("de bout en bout").</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Les premiers sont là pour affirmer qu&#8217;une petite portion de code (un composant, un service, un <em>pipe</em>) fonctionne correctement en isolation,
c&#8217;est à dire indépendamment de ses dépendances.
Écrire un tel test unitaire demande d&#8217;exécuter chacune des méthodes d&#8217;un composant/service/<em>pipe</em>,
et de vérifier que les sorties sont celles attendues pour les entrées fournies.
On peut aussi vérifier que les dépendances utilisées par cette portion sont correctement invoquées,
par exemple qu&#8217;un service fait la bonne requête HTTP.</p>
</div>
<div class="paragraph">
<p>On peut aussi écrire des tests <em>end-to-end</em> ("de bout en bout").
Ceux-ci émulent une interaction utilisateur réelle avec ton application,
en démarrant une vraie instance et en pilotant le navigateur pour saisir des valeurs dans les champs,
cliquer sur les boutons, etc.
On vérifiera ensuite que la page affichée contient ce qui est attendu, que l&#8217;URL est correcte, et tout ce que tu peux imaginer.</p>
</div>
<div class="paragraph">
<p>On va parler de tout cela, mais commençons par les tests unitaires.</p>
</div>
</div>
<div class="sect2">
<h3 id="_tests_unitaires">17.2. Tests unitaires</h3>
<div class="paragraph">
<p>Comme on l&#8217;a vu, les tests unitaires vérifient une petite portion de code en <strong>isolation</strong>.
Ces tests garantissent seulement qu&#8217;une petite partie de l&#8217;application fonctionne comme prévu,
mais ils ont de nombreux avantages&#160;:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>ils sont vraiment rapides, tu peux en exécuter plusieurs centaines en quelques secondes.</p>
</li>
<li>
<p>ils sont très efficaces pour tester (quasiment) l&#8217;intégralité de ton code, et particulièrement les cas limites,
qui peuvent être difficiles à reproduire manuellement dans l&#8217;application réelle.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>L&#8217;un des concepts au cœur d&#8217;un test unitaire est celui d&#8217;isolation&#160;:
on ne veut pas que notre test soit biaisé par ses dépendances.
Alors on utilise généralement des objets bouchonnés (<em>mock</em>) comme dépendances.
Ce sont des objets factices créés juste pour les besoins du test.</p>
</div>
<div class="paragraph">
<p>Pour tout cela, on va compter sur quelques outils.
D&#8217;abord, on a besoin d&#8217;une bibliothèque pour écrire des tests.
Une des plus populaires (sinon la plus populaire) est <a href="http://jasmine.github.io/">Jasmine</a>,
on va donc utiliser celle-ci&#160;!</p>
</div>
<div class="sect3">
<h4 id="_jasmine_karma">17.2.1. Jasmine &amp; Karma</h4>
<div class="paragraph">
<p>Jasmine nous propose plusieurs méthodes pour déclarer nos tests&#160;:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>describe()</code> déclare une suite de tests (un groupe de tests)&#160;;</p>
</li>
<li>
<p><code>it()</code> déclare un test&#160;;</p>
</li>
<li>
<p><code>expect()</code> déclare une assertion.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Un test JavaScript basique ressemble à&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="javascript">class Pony {
  constructor(
    public name: string,
    public speed: number
  ) {}

  isFasterThan(speed: number): boolean {
    return this.speed &gt; speed;
  }
}

describe('My first test suite', () =&gt; {
  it('should construct a Pony', () =&gt; {
    const pony = new Pony('Rainbow Dash', 10);
    expect(pony.name).toBe('Rainbow Dash');
    expect(pony.speed).not.toBe(1);
    expect(pony.isFasterThan(8)).toBe(true);
  });
});</code></pre>
</div>
</div>
<div class="paragraph">
<p>L&#8217;appel à <code>expect()</code> peut être chaîné avec plein de méthodes comme <code>toBe()</code>,
<code>toBeLessThan()</code>, <code>toBeUndefined()</code>, etc.
Chaque méthode peut être rendue négative avec l&#8217;attribut <code>not</code> de l&#8217;objet retourné par <code>expect()</code>.</p>
</div>
<div class="paragraph">
<p>Le fichier de test est un fichier séparé du code que tu veux tester,
en général avec une extension comme <code>.spec.ts</code>.</p>
</div>
<div class="paragraph">
<p>Le test d&#8217;une classe Pony écrite dans un fichier <code>pony.ts</code> sera normalement dans un fichier nommé <code>pony.spec.ts</code>.
Tu peux soit poser ce fichier de test juste à côté du fichier à tester,
soit dans un répertoire dédié contenant tous les tests.
J&#8217;ai tendance à placer le code et le test dans le même répertoire,
mais les deux approches sont parfaitement acceptables&#160;: choisis ton camp.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
Une astuce&#160;: si tu utilises <code>fdescribe()</code> au lieu de <code>describe()</code>
alors cette seule suite de tests sera exécutée (le "f" ajouté signifie "focus").
Même chose si tu ne veux exécuter qu&#8217;un seul test&#160;: utilise <code>fit()</code> au lieu de <code>it()</code>.
Si tu veux exclure un test, utilise <code>xit()</code>, ou <code>xdescribe()</code> pour une suite de tests.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Tu peux aussi utiliser la méthode <code>beforeEach()</code> pour initialiser un contexte avec chaque test.
Si j&#8217;ai plusieurs tests sur le même poney,
il est préférable d&#8217;utiliser <code>beforeEach()</code> pour initialiser ce poney,
plutôt que copier/coller le même morceau de code dans tous les tests.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="javascript">describe('Pony', () =&gt; {
  let pony: Pony;

  beforeEach(() =&gt; {
    pony = new Pony('Rainbow Dash', 10);
  });

  it('should have a name', () =&gt; {
    expect(pony.name).toBe('Rainbow Dash');
  });

  it('should have a speed', () =&gt; {
    expect(pony.speed).not.toBe(1);
    expect(pony.speed).toBeGreaterThan(9);
  });
});</code></pre>
</div>
</div>
<div class="paragraph">
<p>Il existe aussi une méthode <code>afterEach</code>, mais je n&#8217;en ai juste jamais eu besoin&#8230;&#8203;</p>
</div>
<div class="paragraph">
<p>Une dernière astuce&#160;: Jasmine nous permet de créer des objets factices (bouchons ou espions, comme tu veux),
ou même d&#8217;espionner une méthode d&#8217;un véritable objet.
On peut alors faire quelques assertions sur ces méthodes,
comme <code>toHaveBeenCalled()</code> qui vérifie que la méthode a bien été invoquée,
ou <code>toHaveBeenCalledWith()</code> qui vérifie les paramètres exacts utilisés lors de l&#8217;invocation de la méthode espionnée.
Tu peux aussi vérifier combien de fois la méthode a été invoquée, ou vérifier si elle ne l&#8217;a pas été, etc.</p>
</div>
<div class="paragraph">
<p>Par exemple, si l&#8217;on a une classe <code>Race</code> avec une méthode <code>start()</code>,
qui appelle <code>run()</code> sur chaque poney dans la course,
et filtre ceux qui n&#8217;ont pas commencé à courir
(<code>run()</code> renvoie un booléen)&#160;:</p>
</div>
<div class="listingblock">
<div class="title">Race.ts</div>
<div class="content">
<pre class="prettyprint highlight"><code data-lang="javascript">class Race {
  constructor(private ponies: Array&lt;Pony&gt;) {}

  start(): Array&lt;Pony&gt; {
    return (
      this.ponies
        // start every pony
        // and only keeps the ones that started running
        .filter(pony =&gt; pony.run(10))
    );
  }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Nous voulons tester la méthode <code>start()</code>,
et vérifier si elle appelle bien <code>run()</code>.
On peut donc espionner la méthode <code>run()</code> de chacun des poneys dans la course&#160;:</p>
</div>
<div class="listingblock">
<div class="title">Race.spec.ts</div>
<div class="content">
<pre class="prettyprint highlight"><code data-lang="javascript">describe('Race', () =&gt; {
  let rainbowDash: Pony;
  let pinkiePie: Pony;
  let race: Race;

  beforeEach(() =&gt; {
    rainbowDash = new Pony('Rainbow Dash');
    // first pony agrees to run
    spyOn(rainbowDash, 'run').and.returnValue(true);

    pinkiePie = new Pony('Pinkie Pie');
    // second pony refuses to run
    spyOn(pinkiePie, 'run').and.returnValue(false);

    // create a race with these two ponies
    race = new Race([rainbowDash, pinkiePie]);
  });

});</code></pre>
</div>
</div>
<div class="paragraph">
<p>et vérifier si les méthodes sont bien appelées&#160;:</p>
</div>
<div class="listingblock">
<div class="title">Race.spec.ts</div>
<div class="content">
<pre class="prettyprint highlight"><code data-lang="javascript">it('should make the ponies run when it starts', () =&gt; {
  // start the race
  const runningPonies: Array&lt;Pony&gt; = race.start();
  // should have called `run()` on the ponies
  expect(pinkiePie.run).toHaveBeenCalled();
  // with a speed of 10
  expect(rainbowDash.run).toHaveBeenCalledWith(10);
  // as one pony refused to start, the result should be an array of one pony
  expect(runningPonies).toEqual([rainbowDash]);
});</code></pre>
</div>
</div>
<div class="paragraph">
<p>Quand tu écris des tests unitaires, garde à l&#8217;esprit qu&#8217;ils doivent rester courts et lisibles.
Et n&#8217;oublie pas de les faire d&#8217;abord échouer, pour être sûr que tu testes la bonne chose.</p>
</div>
<div class="paragraph">
<p>La dernière étape est l&#8217;exécution de nos tests.
Pour cela, l&#8217;équipe Angular a développé <a href="http://karma-runner.github.io">Karma</a>,
dont le seul but est d&#8217;exécuter nos tests dans un ou plusieurs navigateurs.
Cette bibliothèque peut aussi surveiller nos fichiers pour réexécuter nos tests lors de chaque enregistrement.
Comme l&#8217;exécution est très rapide, c&#8217;est vraiment bien d&#8217;avoir ça,
pour avoir un retour instantané sur notre code.</p>
</div>
<div class="imageblock text-center">
<div class="content">
<img src="data:image/png;base64,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" alt="Karma">
</div>
</div>
<div class="paragraph">
<p>Je ne vais pas me lancer dans les détails de la mise en place de Karma,
mais c&#8217;est un projet très intéressant avec une tonne de plugins à disposition,
pour le faire fonctionner avec tes outils préférés, pour mesurer la couverture de tests, etc.
Si comme moi tu écris ton code en TypeScript,
la stratégie que tu peux adopter est de laisser le compilateur TypeScript surveiller ton code et tes tests,
et produire les fichiers compilés dans un répertoire séparé,
et avoir Karma qui surveille ce dernier répertoire.</p>
</div>
<div class="paragraph">
<p>Donc on sait maintenant comment écrire un test unitaire en JavaScript.
Ajoutons maintenant Angular à la recette.</p>
</div>
</div>
<div class="sect3">
<h4 id="_utiliser_linjection_de_dépendances">17.2.2. Utiliser l&#8217;injection de dépendances</h4>
<div class="paragraph">
<p>Disons que j&#8217;ai une application Angular avec un service simple, comme <code>RaceService</code>,
avec une méthode retournant une liste de courses codée en dur.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="javascript">@Injectable({
  providedIn: 'root'
})
export class RaceService {
  list(): Array&lt;RaceModel&gt; {
    const race1: RaceModel = { name: 'London' };
    const race2: RaceModel = { name: 'Lyon' };
    return [race1, race2];
  }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Essayons de tester cela.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="javascript">describe('RaceService', () =&gt; {
  it('should return races when list() is called', () =&gt; {
    const raceService = new RaceService();
    expect(raceService.list().length).toBe(2);
  });
});</code></pre>
</div>
</div>
<div class="paragraph">
<p>Ca fonctionne.
Mais on pourrait aussi bénéficier de l&#8217;injection de dépendances proposée par Angular pour récupérer
le RaceService et l&#8217;injecter dans notre test.
C&#8217;est d&#8217;autant plus utile que notre <code>RaceService</code> a lui aussi des dépendances&#160;:
plutôt que devoir instancier nous-même chacune des ses dépendances,
on peut compter sur l&#8217;injecteur pour le faire à notre place en lui disant
"hé, j&#8217;ai besoin de RaceService, débrouille-toi pour le créer, lui fournir ce dont il a besoin, et me le donner".</p>
</div>
<div class="paragraph">
<p>Pour utiliser le système d&#8217;injection de dépendances dans notre test,
le framework a une méthode utilitaire dans la classe <code>TestBed</code> nommée <code>inject</code>.</p>
</div>
<div class="paragraph">
<p>Cette méthode est utilisée dans notre test
pour récupérer des dépendances spécifiques.</p>
</div>
<div class="paragraph">
<p>Si on retourne à notre exemple, cette fois-ci en utilisant <code>TestBed.inject</code>&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="javascript">import { TestBed } from '@angular/core/testing';

describe('RaceService', () =&gt; {
  it('should return races when list() is called', () =&gt; {
    const raceService = TestBed.inject(RaceService);
    expect(raceService.list().length).toBe(2);
  });
});</code></pre>
</div>
</div>
<div class="paragraph">
<p>Cela va fonctionner, car le service est déclaré avec <code>providedIn: 'root'</code>,
ce qui le rend disponible dans le test.
Il sera alors instancié et injecté paresseusement quand il est demandé.</p>
</div>
<div class="paragraph">
<p>Comme on l&#8217;a fait dans l&#8217;exemple simple de Jasmine,
on devrait déplacer l&#8217;initialisation de <code>RaceService</code> dans une méthode <code>beforeEach</code>.
On peut aussi utiliser <code>TestBed.inject</code> dans un <code>beforeEach</code>&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="javascript">import { TestBed } from '@angular/core/testing';

describe('RaceService', () =&gt; {
  let service: RaceService;

  beforeEach(() =&gt; (service = TestBed.inject(RaceService)));

  it('should return races when list() is called', () =&gt; {
    expect(service.list().length).toBe(2);
  });
});</code></pre>
</div>
</div>
<div class="paragraph">
<p>On a déplacé la logique de <code>TestBed.inject</code> dans un <code>beforeEach</code>, et maintenant notre test est plutôt clair.</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_dépendances_factices">17.3. Dépendances factices</h3>
<div class="paragraph">
<p>La classe <code>TestBed</code> va nous aider à déclarer des dépendances factices si besoin.</p>
</div>
<div class="paragraph">
<p>Même si Angular nous permet maintenant de créer des applications sans définir aucun module Angular,
le design de son <code>TestBed</code> est toujours basé sur la notion de module de test (<em>testing module</em>).
Le module de test peut être configuré à peu de choses près de la même manière qu&#8217;un module Angular.
Comme nous utilisons des composants <em>standalone</em>, le but principal du module de test sera de
fournir des dépendances factices au lieu des dépendances réelles.
La méthode <code>TestBed.configureTestingModule</code> permet de spécifier pour cela un tableau de <code>providers</code>, qui
prennent le dessus sur les providers réels utilisés pour injecter les dépendances dans le service, composant,
pipe ou directive qu&#8217;on veut tester.</p>
</div>
<div class="paragraph">
<p>Illustrons cela par un exemple. Disons que mon <code>RaceService</code> utilise le <em>local storage</em> pour stocker les courses,
avec une clé <code>races</code>.
Tes collègues ont développé un service appelé <code>LocalStorageService</code> qui gère la sérialisation JSON, etc.
que notre <code>RaceService</code> utilise.
La méthode <code>list()</code> ressemble à&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="javascript">@Injectable({
  providedIn: 'root'
})
export class RaceService {
  private readonly localStorage = inject(LocalStorageService);

  list(): Array&lt;RaceModel&gt; {
    return this.localStorage.get('races');
  }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Maintenant, nous ne voulons pas vraiment tester le service <code>LocalStorageService</code>,
nous voulons juste tester notre <code>RaceService</code>.
Cela peut être fait en bénéficiant du système d&#8217;injection de dépendances pour
donner un <code>LocalStorageService</code> factice&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="javascript">export class MockLocalStorage {
  get(_key: string): Array&lt;RaceModel&gt; {
    return [{ name: 'Lyon' }, { name: 'London' }];
  }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>au <code>RaceService</code> dans notre test, en utilisant <code>provide</code>&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="javascript">import { TestBed } from '@angular/core/testing';
describe('RaceService', () =&gt; {
  beforeEach(() =&gt;
    TestBed.configureTestingModule({
      providers: [{ provide: LocalStorageService, useClass: MockLocalStorage }]
    })
  );

  it('should return 2 races from localStorage', () =&gt; {
    const service = TestBed.inject(RaceService);
    const races = service.list();
    expect(races.length).toBe(2);
  });
});</code></pre>
</div>
</div>
<div class="paragraph">
<p>Cool&#160;!
Mais je ne suis pas complètement satisfait de ce test.
Créer manuellement un service factice est laborieux,
et Jasmine peut nous aider à espionner le service et à remplacer son implémentation par une factice.
Elle permet aussi de vérifier que la méthode <code>get()</code> a été invoquée avec la bonne clé <code>'races'</code>.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="javascript">import { TestBed } from '@angular/core/testing';
describe('RaceService', () =&gt; {
  const localStorage = jasmine.createSpyObj&lt;LocalStorageService&gt;('LocalStorageService', ['get']);

  beforeEach(() =&gt;
    TestBed.configureTestingModule({
      providers: [{ provide: LocalStorageService, useValue: localStorage }]
    })
  );

  it('should return 2 races from localStorage', () =&gt; {
    localStorage.get.and.returnValue([{ name: 'Lyon' }, { name: 'London' }]);

    const service = TestBed.inject(RaceService);
    const races = service.list();

    expect(races.length).toBe(2);
    expect(localStorage.get).toHaveBeenCalledWith('races');
  });
});</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_tester_des_composants">17.4. Tester des composants</h3>
<div class="paragraph">
<p>Après avoir testé un service simple, l&#8217;étape suivante est de tester un composant.
Un test de composant est légèrement différent car il nous faut tester non seulement la partie TypeScript du composant,
mais aussi sa partie HTML.</p>
</div>
<div class="paragraph">
<p>Commençons par écrire un composant à tester.
Pourquoi pas notre composant <code>PonyComponent</code>&#160;?
Il prend un poney en entrée et émet un événement <code>ponyClicked</code> quand le composant est cliqué.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="javascript">@Component({
  selector: 'ns-pony',
  template: ` &lt;img [src]="ponyImageUrl()" [alt]="ponyModel().name" (click)="clickOnPony()" /&gt; `
})
export class PonyComponent {
  readonly ponyModel = input.required&lt;PonyModel&gt;();
  readonly running = input(false);
  readonly ponyImageUrl = computed(
    () =&gt; `/images/pony-${this.ponyModel().color.toLowerCase() + (this.running() ? '-running' : '')}.png`
  );
  readonly ponyClicked = output&lt;PonyModel&gt;();

  clickOnPony(): void {
    this.ponyClicked.emit(this.ponyModel());
  }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Il a un template plutôt simple&#160;:
une image avec une source dynamique dépendante de la couleur du poney,
et un gestionnaire de clic.</p>
</div>
<div class="paragraph">
<p>Pour tester un tel composant, tu as d&#8217;abord besoin de créer une instance.
Comme notre composant a des <em>inputs</em>, il est assez courant de créer un composant parent dans le test,
et de créer une instance de ce composant de test
(pour pouvoir facilement passer des <em>inputs</em> ou tester les <em>outputs</em>).
Pour ce faire, nous allons utiliser le <code>TestBed</code>.
Cette classe vient avec une méthode utilitaire, nommée <code>createComponent</code>, pour créer un composant.
Cette méthode retourne un <code>ComponentFixture</code>, une représentation de notre composant.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="javascript">import { TestBed } from '@angular/core/testing';
import { Component, signal } from '@angular/core';
import { PonyComponent, PonyModel } from './pony.component';

@Component({
  imports: [PonyComponent],
  template: `&lt;ns-pony [ponyModel]="ponyModel()" (ponyClicked)="betOnPony($event)" /&gt;`
})
class PonyTestComponent {
  readonly ponyModel = signal&lt;PonyModel&gt;({ id: 1, name: 'Rainbow Dash', color: 'BLUE' });
  readonly betPony = signal&lt;PonyModel | undefined&gt;(undefined);

  betOnPony(event: PonyModel) {
    this.betPony.set(event);
  }
}

describe('PonyComponent', () =&gt; {
  beforeEach(() =&gt; {
    TestBed.configureTestingModule({});
  });

  it('should have an image', () =&gt; {
    // given a pony component
    const fixture = TestBed.createComponent(PonyTestComponent);
    fixture.detectChanges();

    // when we get the image displayed
    const element = fixture.nativeElement as HTMLElement;
    const imageElement = element.querySelector('img')!;

    // then we should have an image with the correct source attribute
    // depending on the pony color
    expect(imageElement.getAttribute('src')).toContain('/images/pony-blue.png');
    expect(imageElement.getAttribute('alt')).toBe('Rainbow Dash');
  });</code></pre>
</div>
</div>
<div class="paragraph">
<p>Ici, on suit le modèle "Given/When/Then" ("soit/quand/alors") pour écrire notre test.
Tu trouveras une littérature complète sur le sujet, mais il se résume à&#160;:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>une phase "Given", où on met en place le contexte du test. On y récupère l&#8217;instance du composant de test créée qui passe un poney à notre composant.
Cela simule une entrée qui viendrait d&#8217;un composant parent dans la vraie application.
On déclenche ensuite manuellement la détection de changements, via la méthode <code>detectChanges()</code>.
Dans un test, la détection de changement est de notre responsabilité&#160;:
ce n&#8217;est pas automatique comme ça l&#8217;est dans une application.</p>
</li>
<li>
<p>une phase "When", où l&#8217;on récupère l&#8217;image affichée.</p>
</li>
<li>
<p>et une phase "Then", contenant les assertions.
On peut récupérer l&#8217;élément natif et interroger le DOM comme on le ferait dans un navigateur (avec <code>querySelector()</code> par exemple).
Ici, on teste si la source de l&#8217;image est la bonne.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>On peut également tester que le composant émet bien un événement&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="javascript">it('should emit an event on click', () =&gt; {
  // given a pony component
  const fixture = TestBed.createComponent(PonyTestComponent);
  fixture.detectChanges();

  // when we click on the pony
  const element = fixture.nativeElement as HTMLElement;
  const image = element.querySelector('img')!;
  image.dispatchEvent(new Event('click'));

  // and we trigger the change detection
  fixture.detectChanges();

  // then the event emitter should have fired an event
  expect(fixture.componentInstance.betPony()).toBe(fixture.componentInstance.ponyModel());
});</code></pre>
</div>
</div>
<div class="paragraph">
<p>Examinons un autre composant&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="javascript">@Component({
  selector: 'ns-race',
  template: `
    &lt;div&gt;
      &lt;h1&gt;{{ raceModel().name }}&lt;/h1&gt;
      @for (currentPony of raceModel().ponies; track currentPony) {
        &lt;ns-pony [ponyModel]="currentPony" /&gt;
      }
    &lt;/div&gt;
  `,
  imports: [PonyComponent]
})
export class RaceComponent {
  readonly raceModel = input.required&lt;RaceModel&gt;();
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>et son test&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="javascript">@Component({
  imports: [RaceComponent],
  template: `&lt;ns-race [raceModel]="raceModel()" /&gt;`
})
class RaceTestComponent {
  readonly raceModel = signal&lt;RaceModel&gt;({
    name: 'Paris',
    ponies: [{ id: 1, name: 'Rainbow Dash', color: 'BLUE' }]
  });
}
describe('RaceComponent', () =&gt; {
  beforeEach(() =&gt; {
    TestBed.configureTestingModule({});
  });

  it('should have a name and a list of ponies', () =&gt; {
    const fixture = TestBed.createComponent(RaceTestComponent);
    // given a component instance with a race input initialized
    fixture.componentInstance.raceModel.set({
      name: 'London',
      ponies: [{ id: 1, name: 'Rainbow Dash', color: 'BLUE' }]
    });

    // when we trigger the change detection
    fixture.detectChanges();

    // then we should have a title with the race name
    const element = fixture.nativeElement as HTMLElement;
    expect(element.querySelector('h1')!.textContent).toBe('London');

    // and a list of ponies
    const ponies = fixture.debugElement.queryAll(By.directive(PonyComponent));
    expect(ponies.length).toBe(1);
    // we can check if the pony is correctly initialized
    const rainbowDash = ponies[0].componentInstance.ponyModel();
    expect(rainbowDash.name).toBe('Rainbow Dash');
  });
});</code></pre>
</div>
</div>
<div class="paragraph">
<p>Ici, on requête toutes les directives de type <code>PonyComponent</code> et on teste si le premier poney est correctement initialisé.</p>
</div>
<div class="paragraph">
<p>Tu peux récupérer les composants au sein de ton composant avec <code>children</code>
ou les requêter avec <code>query()</code> et <code>queryAll()</code>.
Ces méthodes prennent un prédicat en argument qui peut être soit <code>By.css</code>, soit <code>By.directive</code>.
C&#8217;est ce qu&#8217;on fait pour obtenir les poneys affichés, parce qu&#8217;elles sont des instances de <code>PonyComponent</code>.
Garde à l&#8217;esprit que c&#8217;est différent d&#8217;une requête DOM avec <code>querySelector()</code>&#160;:
elle ne trouvera que les éléments gérés par Angular,
et retourne un <code>ComponentFixture</code>, pas un élément du DOM
(ce qui te donnera accès à <code>componentInstance</code> du résultat par exemple).</p>
</div>
</div>
<div class="sect2">
<h3 id="_tester_avec_des_templates_ou_providers_factices">17.5. Tester avec des templates ou providers factices</h3>
<div class="paragraph">
<p>Quand on teste un composant,
on veut parfois créer un <em>composant hôte de test</em> qui l&#8217;utilise.
Cela permet de vérifier que le <em>binding</em> d&#8217;inputs et d&#8217;outputs via le template fonctionne correctement.
Prenons en exemple le <code>PonyComponent</code> défini plus haut.
Afin de tester qu&#8217;il peut, ou pas, prendre un <em>input</em> <code>running</code>, et que le comportement est correct
dans les deux cas, il faudrait faire un premier test avec un composant parent qui ne fournit pas l'<em>input</em>, et
un deuxième test avec un composant parent qui le fournit.</p>
</div>
<div class="paragraph">
<p>Heureusement, le <code>TestBed</code> permet de redéfinir le template du composant hôte
(ou de n&#8217;importe quel autre composant d&#8217;ailleurs)&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="javascript">import { Component, signal } from '@angular/core';
import { ComponentFixture, TestBed } from '@angular/core/testing';
import { PonyComponent, PonyModel } from './pony.component';

@Component({
  selector: 'ns-test-host',
  template: '',
  imports: [PonyComponent]
})
class TestHostComponent {
  readonly pony = signal&lt;PonyModel&gt;({
    id: 1,
    name: 'Rainbow Dash',
    color: 'BLUE'
  });
}

describe('PonyComponent', () =&gt; {
  let fixture: ComponentFixture&lt;TestHostComponent&gt;;

  beforeEach(() =&gt; {
    TestBed.configureTestingModule({});
  });

  it('should display a non-running pony by default', () =&gt; {
    // given a test host component where the running input is not passed
    TestBed.overrideTemplate(TestHostComponent, '&lt;ns-pony [ponyModel]="pony()" /&gt;');
    fixture = TestBed.createComponent(TestHostComponent);

    // when we trigger the change detection
    fixture.detectChanges();

    // then we should have a not running pony
    const element = fixture.nativeElement as HTMLElement;
    expect(element.querySelector('img')!.src).toContain('/images/pony-blue.png');
  });

  it('should display a running pony if the running input is set to true', () =&gt; {
    // given a test host component where the running input is not passed
    TestBed.overrideTemplate(TestHostComponent, '&lt;ns-pony [ponyModel]="pony()" [running]="true" /&gt;');
    fixture = TestBed.createComponent(TestHostComponent);

    // when we trigger the change detection
    fixture.detectChanges();

    // then we should have a not running pony
    const element = fixture.nativeElement as HTMLElement;
    expect(element.querySelector('img')!.src).toContain('/images/pony-blue-running.png');
  });
});</code></pre>
</div>
</div>
<div class="paragraph">
<p>On peut aller plus loin que ça. Il est aussi possible d&#8217;appeler <code>TestBed.overrideComponent()</code> pour
ajouter, enlever ou remplacer n&#8217;importe quel propriété du décorateur d&#8217;un composant (<code>template</code>, <code>providers</code>, <code>imports</code>, etc.).
Cela peut être utile, par exemple, pour tester un composant parent en lui faisant utiliser un composant enfant factice
(<em>stub</em>), au lieu du composant enfant réel, afin de simplifier le test.
Nous pourrions par exemple remplacer le <code>PonyComponent</code> dans les imports de <code>RaceComponent</code> par un
<code>PonyStubComponent</code> qui aurait le même sélecteur, les mêmes inputs et les mêmes outputs,
mais qui ne ferait rien.</p>
</div>
<div class="paragraph">
<p>Maintenant tu es prêt pour tester ton application&#160;!</p>
</div>
</div>
<div class="sect2">
<h3 id="_des_tests_unitaires_plus_simples_et_plus_propres_avec_ngx_speculoos">17.6. Des tests unitaires plus simples et plus propres avec <code>ngx-speculoos</code></h3>
<div class="paragraph">
<p>Les tests Angular peuvent rapidement devenir assez verbeux.
Comme on n&#8217;aime pas trop ça,
nous avons écrit une petite bibliothèque open-source appelée
<a href="https://ngx-speculoos.ninja-squad.com/">ngx-speculoos</a>.</p>
</div>
<div class="paragraph">
<p>Au lieu d&#8217;écrire un test comme celui-ci&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="javascript">let fixture: ComponentFixture&lt;UserComponent&gt;;

beforeEach(() =&gt; {
  fixture = TestBed.createComponent(UserComponent);
  fixture.detectChanges();
});

it('should display French cities when selecting the country France', () =&gt; {
  const countrySelect = (fixture.nativeElement as HTMLElement).querySelector&lt;HTMLSelectElement&gt;('#country')!; // countrySelect is of type any
  expect(countrySelect.selectedIndex).toBe(0);
  countrySelect.selectedIndex = 2; // what is at index 2?
  countrySelect.dispatchEvent(new Event('change')); // why do I need to do that?
  fixture.detectChanges();

  const city = (fixture.nativeElement as HTMLElement).querySelector&lt;HTMLSelectElement&gt;('#city')!; // city is of type any
  expect(city).toBeTruthy();
  expect(city.options.length).toBe(3);
  expect(city.options[0].value).toBe('');
  expect(city.options[0].label).toBe('');
  expect(city.options[1].value).toBe('PARIS');
  expect(city.options[1].label).toBe('Paris');
  expect(city.options[2].value).toBe('LYON');
  expect(city.options[2].label).toBe('Lyon');
});

it('should hide cities when selecting the empty country option', () =&gt; {
  const countrySelect = (fixture.nativeElement as HTMLElement).querySelector&lt;HTMLSelectElement&gt;('#country')!; // I did that previously. What about DRY?
  countrySelect.selectedIndex = 0;
  countrySelect.dispatchEvent(new Event('change')); // why do I need to do that?
  fixture.detectChanges(); // why do I need to do that?

  expect((fixture.nativeElement as HTMLElement).querySelector('#city')).toBeFalsy(); // I did that previously. What about DRY?
});</code></pre>
</div>
</div>
<div class="paragraph">
<p>tu peux écrire un test plus propre et plus simple avec <code>ngx-speculoos</code>&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="javascript">class UserComponentTester extends ComponentTester&lt;UserComponent&gt; {
  constructor() {
    super(UserComponent);
  }

  get country(): TestSelect {
    return this.select('#country')!; // returns a TestSelect object, not any. Similar methods exist for inputs, buttons, etc.
  }

  get city(): TestSelect {
    return this.select('#city')!; // returns a TestSelect object, not any
  }
}

let tester: UserComponentTester;

beforeEach(() =&gt; {
  tester = new UserComponentTester();
  tester.detectChanges();
});

it('should display French cities when selecting the country France', async () =&gt; {
  await tester.country.selectLabel('France'); // no dispatchEvent, no detectChanges needed

  expect(tester.city.optionValues).toEqual(['', 'PARIS', 'LYON']);
  expect(tester.city.optionLabels).toEqual(['', 'Paris', 'Lyon']);
});

it('should hide cities when selecting empty country option', async () =&gt; {
  await tester.country.selectIndex(0); // no repetition of the selector, no dispatchEvent, no detectChanges needed

  expect(tester.city).toBeFalsy(); // no repetition of the selector
});</code></pre>
</div>
</div>
<div class="paragraph">
<p>Tu peux même aller un cran plus loin avec les "custom matchers" pour Jasmine que nous avons écrits&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="javascript">beforeEach(() =&gt; jasmine.addMatchers(speculoosMatchers));

it('should contain a pre-populated form', () =&gt; {
  expect(tester.informationMessage).toContainText('Please check that everything is correct');
  expect(tester.country).toHaveSelectedValue('');
  expect(tester.name).toHaveValue('Doe');
  expect(tester.newsletter).toBeChecked();
});</code></pre>
</div>
</div>
<div class="paragraph">
<p>N’hésite pas à essayer&#160;!</p>
</div>
</div>
<div class="sect2">
<h3 id="_tests_de_bout_en_bout">17.7. Tests de bout en bout</h3>
<div class="paragraph">
<p>Les tests de bout en bout (<em>end-to-end</em>, or <em>e2e</em>) sont l&#8217;autre type de tests que tu
peux écrire et exécuter.
Ils consistent à réellement lancer ton application dans un navigateur,
et à simuler un utilisateur interagissant avec l&#8217;application (en cliquant
sur des boutons, remplissant des formulaires, etc.).
Ils ont l&#8217;avantage de tester réellement l&#8217;application dans son
ensemble plutôt que des petites unités isolées, mais&#160;:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>ils sont plus lents (plusieurs secondes par test)&#160;;</p>
</li>
<li>
<p>il est plus difficile de tester les cas à la marge.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Comme tu peux le deviner, tu n&#8217;as pas à choisir entre tests unitaires et tests
e2e. Combiner les deux est l&#8217;idéal pour avoir une bonne couverture et une
assurance raisonnable du bon fonctionnement de l&#8217;application.</p>
</div>
<div class="paragraph">
<p>Angular CLI proposait auparavant une intégration par défaut avec Protractor.
Mais ce n&#8217;est plus le cas depuis la version 12,
car Protractor est peu à peu délaissé.
Il nous faut donc mettre en place une solution par nous-même.
Il y a beaucoup d&#8217;options intéressantes possible&#160;:
<a href="https://www.cypress.io/">Cypress</a>, <a href="https://playwright.dev/">Playwrigth</a>, <a href="https://pptr.dev/">Puppeteer</a>, etc.
Et je suis en pâmoison devant Cypress 😍.</p>
</div>
<div class="paragraph">
<p>Tu peux mettre en place Cypress dans un projet Angular en utilisant
<a href="https://github.com/cypress-io/cypress/tree/master/npm/cypress-schematic">cette schematic</a>.
Regarde le premier exercice de notre Pack Pro pour voir comment&#160;!</p>
</div>
<div class="paragraph">
<p>Tu peux lancer les tests e2e avec&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="bash">ng e2e</code></pre>
</div>
</div>
<div class="sect3">
<h4 id="_cypress">17.7.1. Cypress</h4>
<div class="imageblock text-center">
<div class="content">
<img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAZMAAACHCAYAAADTLLRYAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyhpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuNi1jMTExIDc5LjE1ODMyNSwgMjAxNS8wOS8xMC0wMToxMDoyMCAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENDIDIwMTUgKE1hY2ludG9zaCkiIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6NEY3QzhFRjRGMDc4MTFFNTgyMDhGMzEwRjI1QzI2RTAiIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6NEY3QzhFRjVGMDc4MTFFNTgyMDhGMzEwRjI1QzI2RTAiPiA8eG1wTU06RGVyaXZlZEZyb20gc3RSZWY6aW5zdGFuY2VJRD0ieG1wLmlpZDo0RjdDOEVGMkYwNzgxMUU1ODIwOEYzMTBGMjVDMjZFMCIgc3RSZWY6ZG9jdW1lbnRJRD0ieG1wLmRpZDo0RjdDOEVGM0YwNzgxMUU1ODIwOEYzMTBGMjVDMjZFMCIvPiA8L3JkZjpEZXNjcmlwdGlvbj4gPC9yZGY6UkRGPiA8L3g6eG1wbWV0YT4gPD94cGFja2V0IGVuZD0iciI/Ph6wb9QAACrXSURBVHja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" alt="Cypress">
</div>
</div>
<div class="paragraph">
<p>Lorsque tu exécutes les tests e2e,
Cypress lance Electron, Chrome, Firefox ou Edge.
Tu peux aussi les lancer en mode <em>headless</em> (c’est-à-dire sans afficher la moindre fenêtre) avec&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="bash">ng e2e --headless</code></pre>
</div>
</div>
<div class="paragraph">
<p>ce qui est pratique pour exécuter ces tests sur une plateforme d&#8217;intégration continue.</p>
</div>
<div class="paragraph">
<p>Cypress a plein de fonctionnalités intéressantes&#160;:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>il est facile à mettre en place&#160;;</p>
</li>
<li>
<p>il permet de <em>mocker</em> des réponses HTTP&#160;;</p>
</li>
<li>
<p>il permet de tester l&#8217;application avec différentes tailles de fenêtre (pratique pour les applications <em>responsive</em>)&#160;;</p>
</li>
<li>
<p>il offre un DSL relativement simple.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Ce qui m&#8217;a conquis cependant est ce qu&#8217;il appelle le <em>time-travel debugging</em>.
À chaque étape du test, Cypress fait un snapshot, qui permet donc
de visualiser, directement dans le navigateur, l&#8217;aspect graphique et le contenu
du DOM.
En plaçant simplement sa souris sur une étape d&#8217;un test en échec, on peut
voir le contenu de la page et interagir avec elle pour rapidement
comprendre ce qui ne va pas.</p>
</div>
<div class="paragraph">
<p>Les tests Cypress sont écrits avec Mocha. Même si c&#8217;est une bibliothèque
différente de Jasmine, tu verras qu&#8217;elle est très similaire. Ce qui importe plus,
c&#8217;est l&#8217;API spécifique de Cypress nous permettant d&#8217;interagir avec l&#8217;application.</p>
</div>
<div class="paragraph">
<p>Cypress nous met à disposition un objet <code>cy</code>,
qui nous permet par exemple d&#8217;appeler la méthode <code>visit()</code> pour&#8230;&#8203; visiter une page.
Ensuite, <code>get(selector)</code> permet de sélectionner tous les éléments qui correspondent à
un sélecteur CSS.
Ou encore <code>contains(selector, text)</code> permet de cibler les éléments contenant un texte donné.</p>
</div>
<div class="paragraph">
<p>Les objets retournés par ces méthodes offrent eux-mêmes des méthodes permettant
de vérifier leur état, comme <code>should('contain', text)</code> or <code>should('be', 'not.displayed')</code>.
Ou encore des méthodes comme <code>click()</code> et <code>type()</code> qui permettent d&#8217;interagir avec eux.</p>
</div>
<div class="paragraph">
<p>Comme je l&#8217;évoquais précédemment, tu peux aussi isoler les tests du backend,
en mockant les appels HTTP, et vérifier que les requêtes sont envoyées aux moments
opportuns.</p>
</div>
<div class="paragraph">
<p>Par exemple, supposons que la page d&#8217;accueil de l&#8217;application affiche un titre.</p>
</div>
<div class="paragraph">
<p>Un test de cette page ressemblerait à ça&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="javascript">describe('Ponyracer home page', () =&gt; {
  it('should display a headline', () =&gt; {
    cy.visit('/');
    cy.get('h1').should('contain', 'Hello, ponyracer');
    cy.get('p').should('contain', 'Congratulations! Your app is running. 🎉');
  });
});</code></pre>
</div>
</div>
<div class="paragraph">
<p>Ces tests peuvent être assez longs à écrire, mais ils sont vraiment utiles.
On peut les utiliser à d&#8217;autres fins, par exemple enregistrer
des vidéos de démonstration, prendre des copies d&#8217;écran,
les comparer au pixel prêt d&#8217;une exécution à l&#8217;autre avec <a href="https://percy.io">Percy</a>,
etc.</p>
</div>
<div class="paragraph">
<p>Avec les tests unitaires et les tests e2e, tu as toutes les clés
en main pour construire une application robuste et maintenable&#160;!</p>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<i class="fa icon-tip" title="Mise en Pratique"></i>
</td>
<td class="content">
<div class="paragraph">
<p>Tous les exercices du Pack Pro viennent avec leurs tests unitaires et e2e&#160;!
Si tu veux en apprendre plus, nous t&#8217;encourageons fortement à leur jeter un œil&#160;:
nous avons testé toutes les parties possibles de l&#8217;application (100% de couverture de code)&#160;!
À la fin, tu auras des dizaines d&#8217;exemples de test,
que tu pourras utiliser dans tes propres projets.</p>
</div>
</td>
</tr>
</table>
</div>
<div style="page-break-after: always;"></div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="http">18. Envoyer et recevoir des données par HTTP</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Ce ne sera pas une surprise, mais une grande part de notre travail consiste
à demander des données à un serveur, et à lui en envoyer d&#8217;autres.</p>
</div>
<div class="paragraph">
<p>Traditionnellement, on utilise HTTP, même si de nos jours il y a des alternatives,
comme les WebSockets.
Angular fournit un module http, mais ne te l&#8217;impose pas.
Si tu préfères, tu peux utiliser ta bibliothèque favorite pour faire des requêtes
HTTP.</p>
</div>
<div class="imageblock text-center">
<div class="content">
<img src="data:image/png;base64,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" alt="HTTP">
</div>
</div>
<div class="paragraph">
<p>Une des possibilités est l&#8217;API <a href="https://developer.mozilla.org/en-US/docs/Web/API/Fetch_API">fetch</a>,
qui est une API standard fournie par les navigateurs.
Tu peux parfaitement construire ton application en utilisant <code>fetch</code> ou une autre bibliothèque.
En fait, c&#8217;était ce que j&#8217;utilisais avant que la partie HTTP existe dans Angular.
Elle fonctionne très bien, sans besoin d&#8217;aucune plomberie pour informer le framework
de la réception de données et du besoin de déclencher le cycle de détection de changements
(contrairement à AngularJS&#160;1.x, où il fallait invoker <code>$scope.apply()</code> si tu utilisais
une bibliothèque externe&#160;: c&#8217;est la magie d&#8217;Angular et de ses zones&#160;!).</p>
</div>
<div class="paragraph">
<p>Mais la plupart des développeurs Angular utilisent un service fourni par Angular&#160;: <code>HttpClient</code>.</p>
</div>
<div class="paragraph">
<p>Si tu veux l&#8217;utiliser, il te faudra utiliser les classes et fonctions du package <code>@angular/common/http</code>.</p>
</div>
<div class="paragraph">
<p>Pourquoi préférer ce service à <code>fetch</code>&#160;?
La réponse est simple&#160;: pour les tests.
Comme on le verra, le module Http permet de bouchonner ton serveur,
et de retourner des réponses données.
C&#8217;est vraiment, vraiment très utile.</p>
</div>
<div class="paragraph">
<p>Une dernière chose avant de plonger dans l&#8217;API&#160;: le client HTTP utilise
largement le paradigme de la programmation réactive.
Alors si tu as sauté le
<a href="#reactive-programming">chapitre Programmation réactive</a>
, c&#8217;est le bon moment d&#8217;y retourner et de le lire vraiment cette fois ;).</p>
</div>
<div class="sect2">
<h3 id="_obtenir_des_données_providehttpclient">18.1. Obtenir des données (<code>provideHttpClient</code>)</h3>
<div class="paragraph">
<p>Le module <code>@angular/common/http</code> propose un service nommé <code>HttpClient</code> que tu peux t&#8217;injecter dans n&#8217;importe quel constructeur.
Ce service n&#8217;est pas disponible par défaut dans une application Angular.
Il faut configurer l&#8217;application afin de pouvoir l&#8217;utiliser, en ajoutant un <em>provider</em> au démarrage de l&#8217;application&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="javascript">import { bootstrapApplication } from '@angular/platform-browser';
import { provideHttpClient, withInterceptors } from '@angular/common/http';

bootstrapApplication(AppComponent, {
  providers: [provideHttpClient()]
}).catch(err =&gt; console.error(err));</code></pre>
</div>
</div>
<div class="paragraph">
<p>Quand cela est fait, tu peux injecter le service <code>HttpClient</code> partout où tu en as besoin&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="javascript">@Injectable({
  providedIn: 'root'
})
export class RaceService {
  private readonly http = inject(HttpClient);</code></pre>
</div>
</div>
<div class="paragraph">
<p>Par défaut, le service <code>HttpClient</code> réalise des requêtes AJAX avec <code>XMLHttpRequest</code>.</p>
</div>
<div class="paragraph">
<p>Il propose plusieurs méthodes, correspondant au verbes HTTP communs&#160;:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>get</code></p>
</li>
<li>
<p><code>post</code></p>
</li>
<li>
<p><code>put</code></p>
</li>
<li>
<p><code>delete</code></p>
</li>
<li>
<p><code>patch</code></p>
</li>
<li>
<p><code>head</code></p>
</li>
<li>
<p><code>jsonp</code></p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Si tu as déjà utilisé le service <code>$http</code> en AngularJS&#160;1.x, tu dois te rappeler
qu&#8217;il utilisait largement les promesses (<em>Promises</em>).
Mais en Angular, toutes ces méthodes retournent un objet <code>Observable</code>.</p>
</div>
<div class="paragraph">
<p>L&#8217;utilisation des Observables apporte plusieurs avantages, comme la possibilité
d&#8217;annuler une requête, de la retenter, d&#8217;en composer facilement plusieurs, etc.</p>
</div>
<div class="paragraph">
<p>Commençons par récupérer les courses disponibles dans PonyRacer.
On supposera qu&#8217;un serveur est déjà prêt et disponible,
fournissant une belle API RESTful. Pour charger les courses, on enverra une requête
GET sur une URL genre 'http://backend.url/api/races'.</p>
</div>
<div class="paragraph">
<p>Généralement, l&#8217;URL de base de tes appels HTTP sera stockée dans une variable ou
un service, que tu pourras facilement variabiliser selon ton environnement.
Ou, si l&#8217;API REST est servie par le même serveur que l&#8217;application Angular, tu
peux simplement utiliser une URL relative&#160;: '/api/races'.</p>
</div>
<div class="paragraph">
<p>Avec le service <code>HttpClient</code>, une telle requête est triviale&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="javascript">http
  .get&lt;Array&lt;RaceModel&gt;&gt;(`${baseUrl}/api/races`)</code></pre>
</div>
</div>
<div class="paragraph">
<p>Cela retourne un Observable, et tu peux donc t&#8217;y abonner pour obtenir la réponse.
Le corps de la réponse est la partie la plus intéressante,
et est directement émis par l&#8217;Observable&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="javascript">http.get&lt;Array&lt;RaceModel&gt;&gt;(`${baseUrl}/api/races`).subscribe((response: Array&lt;RaceModel&gt;) =&gt; {
  console.log(response);
  // logs the array of races
});</code></pre>
</div>
</div>
<div class="paragraph">
<p>Note que tu n&#8217;as pas besoin de dé-sérialiser le corps de la réponse
de chaîne de caractères en objet ou tableau JavaScript.
Tout est fait automatiquement par Angular.
Cependant, Angular ne vérifiera pas
si le JSON de la réponse correspond au type générique indiqué,
et si l&#8217;interface <code>RaceModel</code> décrit effectivement
le JSON renvoyé par le serveur.</p>
</div>
<div class="paragraph">
<p>Le cas d&#8217;usage le plus typique est d&#8217;avoir un service avec des méthodes qui retournent un observable&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="javascript">@Injectable({
  providedIn: 'root'
})
export class RaceService {
  private readonly http = inject(HttpClient);

  list() {
    return this.http.get&lt;Array&lt;RaceModel&gt;&gt;(`${baseUrl}/api/races`);
  }</code></pre>
</div>
</div>
<div class="paragraph">
<p>Et ensuite s&#8217;abonner à cet observable dans un composant en utilisant <code>toSignal</code>&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="javascript">readonly races = toSignal(inject(RaceService).list());</code></pre>
</div>
</div>
<div class="paragraph">
<p>Évidemment, tu peux accéder à la réponse HTTP complète.
L&#8217;objet retourné est alors une <code>HttpResponse</code>,
avec quelques champs comme le champ <code>status</code> (code de la réponse), le champ <code>headers</code>, etc.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="javascript">http
  .get&lt;Array&lt;RaceModel&gt;&gt;(`${baseUrl}/api/races`, { observe: 'response' })
  .subscribe((response: HttpResponse&lt;Array&lt;RaceModel&gt;&gt;) =&gt; {
    console.log(response.status); // logs 200
    console.log(response.headers.keys()); // logs []
  });</code></pre>
</div>
</div>
<div class="paragraph">
<p>L&#8217;observable échoue si la réponse a un statut différent de 2xx ou 3xx,
et l&#8217;erreur récupérée est alors une <code>HttpErrorResponse</code>.</p>
</div>
<div class="paragraph">
<p>Envoyer des données est aussi trivial.
Il suffit d&#8217;appeler la méthode <code>post()</code> ou <code>put()</code>,
avec l&#8217;URL et l&#8217;objet à poster&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="javascript">http
  .post&lt;RaceModel&gt;(`${baseUrl}/api/races`, newRace)</code></pre>
</div>
</div>
<div class="paragraph">
<p>Encore une fois, pas besoin de sérialiser l&#8217;objet à envoyer en JSON.
Angular le fait pour toi.
Le type générique <code>RaceModel</code> est ici,
comme pour la méthode <code>get()</code>,
le type du corps de la réponse.
Donc cette API exemple prend un <code>RaceModel</code>
comme entrée et renvoie le <code>RaceModel</code> créé.</p>
</div>
<div class="paragraph">
<p>Je ne te montrerai pas les autres méthodes, je suis sûr que tu as compris le principe.</p>
</div>
</div>
<div class="sect2">
<h3 id="_transformer_des_données">18.2. Transformer des données</h3>
<div class="paragraph">
<p>Ce genre de travail sera généralement réalisé dans un service dédié.
J&#8217;ai tendance à créer un service, genre <code>RaceService</code>, où tout le travail sera réalisé.
Ainsi, mon composant n&#8217;a qu&#8217;à s&#8217;abonner à la méthode de mon service, sans savoir
ce qui est réalisé sous le capot.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="javascript">@Injectable({
  providedIn: 'root'
})
export class RaceService {
  private readonly http = inject(HttpClient);

  list() {
    return this.http.get&lt;Array&lt;RaceModel&gt;&gt;(`${baseUrl}/api/races`);
  }</code></pre>
</div>
</div>
<div class="paragraph">
<p>Tu peux aussi bénéficier de la puissance de RxJS pour par exemple retenter
plusieurs fois une requête en échec.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="javascript">raceService
  .list()
  .pipe(
    // if the request fails, retry 3 times
    retry(3)
  )</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_options_avancées">18.3. Options avancées</h3>
<div class="paragraph">
<p>Évidemment, tu peux ajuster tes requêtes plus finement.
Chaque méthode accepte un objet <code>options</code> en paramètre optionnel,
où tu peux configurer ta requête.</p>
</div>
<div class="paragraph">
<p>L&#8217;option <code>params</code> représente les paramètres de recherche
(que l&#8217;on appelle aussi <em>query string</em>) à ajouter à l&#8217;URL.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="javascript">const params = {
  sort: 'ascending',
  page: '1'
};

http
  .get&lt;Array&lt;RaceModel&gt;&gt;(`${baseUrl}/api/races`, { params })
  // will call the URL ${baseUrl}/api/races?sort=ascending&amp;page=1
  .subscribe(response =&gt; {
    // will return the races sorted
    this.races = response;
  });</code></pre>
</div>
</div>
<div class="paragraph">
<p>L&#8217;option <code>headers</code> est pratique pour ajouter quelques headers custom à ta requête.
Cela est notamment nécessaire pour certaines techniques d&#8217;authentification,
comme par exemple JSON Web Token&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="javascript">const headers = { Authorization: `Bearer ${token}` };

http.get&lt;Array&lt;RaceModel&gt;&gt;(`${baseUrl}/api/races`, { headers }).subscribe(response =&gt; {
  // will return the races visible for the authenticated user
  this.races = response;
});</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_intercepteurs">18.4. Intercepteurs</h3>
<div class="paragraph">
<p>Les intercepteurs sont intéressants lorsque l&#8217;on veut&#8230;&#8203; intercepter des requêtes ou des réponses dans l&#8217;application.</p>
</div>
<div class="paragraph">
<p>Par exemple, si l&#8217;on veut intercepter toutes les requêtes pour ajouter un header particulier à certaines d&#8217;entre elles,
on peut écrire un intercepteur comme celui-ci&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="javascript">export const githubAPIInterceptor: HttpInterceptorFn = (
  req: HttpRequest&lt;unknown&gt;,
  next: HttpHandlerFn
): Observable&lt;HttpEvent&lt;unknown&gt;&gt; =&gt; {
  // if it is a Github API request
  if (req.url.includes('api.github.com')) {
    // we need to add an OAUTH token as a header to access the Github API
    const clone = req.clone({ setHeaders: { Authorization: `token ${OAUTH_TOKEN}` } });
    return next(clone);
  }
  // if it's not a Github API request, we just hand it to the next handler
  return next(req);
};</code></pre>
</div>
</div>
<div class="paragraph">
<p>Note que tu dois cloner la requête pour la mettre à jour (les requêtes sont immuables).</p>
</div>
<div class="paragraph">
<p>Il faut ensuite configurer le <em>provider</em> du client HTTP afin qu&#8217;il utilise l&#8217;intercepteur&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="javascript">providers: [
  provideHttpClient(withInterceptors([githubAPIInterceptor])),
]</code></pre>
</div>
</div>
<div class="paragraph">
<p>Maintenant, toute requête passera par notre intercepteur,
et recevra le header que nous avons défini si nécessaire (ici les appels à l&#8217;API Github).</p>
</div>
<div class="paragraph">
<p>Il est également possible d&#8217;intercepter la réponse,
ce qui peut être pratique pour gérer les erreurs de façon générique&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="javascript">export const errorHandlerInterceptor: HttpInterceptorFn = (
  req: HttpRequest&lt;unknown&gt;,
  next: HttpHandlerFn
): Observable&lt;HttpEvent&lt;unknown&gt;&gt; =&gt; {
  const router = inject(Router);
  const errorHandler = inject(ErrorHandler);
  return next(req).pipe(
    // we catch the error
    tap({
      error: (errorResponse: HttpErrorResponse) =&gt; {
        // if the status is 401 Unauthorized
        if (errorResponse.status === HttpStatusCode.Unauthorized) {
          // we redirect to login
          router.navigateByUrl('/login');
        } else {
          // else we notify the user
          errorHandler.handle(errorResponse);
        }
      }
    })
  );
};</code></pre>
</div>
</div>
<div class="paragraph">
<p>Ceci est l&#8217;un des cas où la fonction <code>inject()</code> doit être utilisée&#160;: comme l&#8217;intercepteur
est une fonction, il n&#8217;y a pas de constructeur qui permette d&#8217;injecter les
dépendances, mais la fonction <code>inject()</code> permet néanmoins de les obtenir.</p>
</div>
</div>
<div class="sect2">
<h3 id="_contexte">18.5. Contexte</h3>
<div class="paragraph">
<p>On veut parfois passer des informations à un intercepteur
pour lui indiquer de traiter une requête d&#8217;une façon particulière.
Depuis Angular v12, c&#8217;est possible grâce à <code>HttpContext</code>.
Le contexte utilise un token typé (<code>HttpContextToken</code>),
qui permet de définir une clé comme suit&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="javascript">export const SHOULD_NOT_HANDLE_ERROR = new HttpContextToken&lt;boolean&gt;(() =&gt; false);</code></pre>
</div>
</div>
<div class="paragraph">
<p>On peut alors modifier l&#8217;intercepteur&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="javascript">export const errorHandlerInterceptor: HttpInterceptorFn = (
  req: HttpRequest&lt;unknown&gt;,
  next: HttpHandlerFn
): Observable&lt;HttpEvent&lt;unknown&gt;&gt; =&gt; {
  const router = inject(Router);
  const errorHandler = inject(ErrorHandler);
  // if there is a context specifically asking for not handling the error, we don't handle it
  if (req.context.get(SHOULD_NOT_HANDLE_ERROR)) {
    return next(req);
  }
  return next(req).pipe(
    // ...</code></pre>
</div>
</div>
<div class="paragraph">
<p>Toutes les méthodes HTTP acceptent une option <code>context</code>,
qui est une Map que tu peux construire de façon typée en utilisant la clé précédente&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="javascript">const context = new HttpContext().set(SHOULD_NOT_HANDLE_ERROR, true);
return http.get(`${baseUrl}/api/users`, { context });</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_tests">18.6. Tests</h3>
<div class="paragraph">
<p>Nous avons maintenant un service appelant une API REST pour récupérer les courses.
Comment testons-nous ce service&#160;?</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="javascript">@Injectable({
  providedIn: 'root'
})
export class RaceService {
  private readonly http = inject(HttpClient);

  list(): Observable&lt;Array&lt;RaceModel&gt;&gt; {
    return this.http.get&lt;Array&lt;RaceModel&gt;&gt;('/api/races');
  }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Dans un test unitaire, on ne veut pas vraiment appeler le serveur HTTP&#160;: ce n&#8217;est pas ce que nous testons.
Nous voulons faire un "faux" appel HTTP pour retourner de fausses données.
Pour cela, nous pouvons remplacer la dépendance au service <code>HttpClient</code> par une implémentation bouchonnée
en important <code>HttpClientTestingModule</code>.
Nous pouvons ensuite utiliser une classe fournie par le framework appelée <code>HttpTestingController</code>
pour simuler les réponses HTTP&#160;:</p>
</div>
<div class="paragraph">
<p>Et on peut également ajouter quelques assertions sur la requête HTTP sous-jacente&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="javascript">import { TestBed } from '@angular/core/testing';
import { HttpTestingController, provideHttpClientTesting } from '@angular/common/http/testing';
import { HttpClient, provideHttpClient } from '@angular/common/http';

describe('RaceService', () =&gt; {
  let raceService: RaceService;
  let http: HttpTestingController;

  beforeEach(() =&gt;
    TestBed.configureTestingModule({
      providers: [provideHttpClient(), provideHttpClientTesting()]
    })
  );

  beforeEach(() =&gt; {
    raceService = TestBed.inject(RaceService);
    http = TestBed.inject(HttpTestingController);
  });

  afterEach(() =&gt; {
    http.verify();
  });

  it('should return an Observable of 2 races', () =&gt; {
    // fake response
    const hardcodedRaces = [{ name: 'London' }, { name: 'Lyon' }];

    // call the service
    let actualRaces: Array&lt;RaceModel&gt; = [];
    raceService.list().subscribe(races =&gt; (actualRaces = races));

    // check that the underlying HTTP request was correct
    http
      .expectOne('/api/races')
      // return the fake response when we receive a request
      .flush(hardcodedRaces);

    // check that the returned array is deserialized as expected
    expect(actualRaces.length).toBe(2);
  });
});</code></pre>
</div>
</div>
<div class="paragraph">
<p>Et le tour est joué&#160;!</p>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<i class="fa icon-tip" title="Mise en pratique"></i>
</td>
<td class="content">
<div class="paragraph">
<p>Essaye notre exercice
<a href="https://angular-exercises.ninja-squad.com/exercises/11/http">HTTP</a> <span class="image"><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAIgAAACACAMAAADnN9ENAAACSVBMVEVMaXH7whr7whr7whr7whr7whr7whr7whr7whr7whr7whr7whp4o614o614o614o637whr7whp4o614o614o614o614o614o614o614o62EoKN4o614o637whqFXFKFXFKQnZm4kni0k3vA1Njr8fLd5+myytB/qLGFXFKFXFKcmY98oqp4o63V4uWFXFKFXFKoloWgmIx4o62Hpqu+nofCpI/b08yFXFKAoaaMnpzYzcSFXFKFXFKUnJaYm5O7mIDl5eOGrbaFXFKGk5Kfd2WSalyYcGClfmqhlIZ6lpx+hIWDaWOFXFKFXFJ/gICkl4nFqpeFXFKFXFKCamSDZV2EYFiDaWOCbmne2dTk7O77whqOZE6Ad3TIsJ6jwMflryWbb0h/gIDo6+rH2dz0vB58jZGIn6Cxgj17kZbOvK2FXFL7whq5iTqVt75/e3rPnC/eqSiMYk+FXFKjdkS4p6Ll6OjLtqbSwrXFubacu8PstSGynZiOsrqLZVzauj/013mrlI56mqLCtFrt69fY1dSApaTrvizz2oafgXqSb2aqxcuhrX/11GvO3uGQeHG5z9T20V7e3t7s7uX4y0P6xSjv5byYeHC+sKyli4TSzMrIzc28wcGwtLVHR0c8OztIR0c1NTWNkJEvLy+NioqTkJCHhISlqKnU2dpCQUGBhIRnZmZeYGBqbGyZnJ07Ozvf5ebLwsCmqapfYGFiYmLAw8Tw9fXs8vNqjZVBTE9PYmY4Pj9deH5mho5GU1Y9RUdhf4ZznKVKW140Njdz5u6AAAAAf3RSTlMAMIBQ7/+fEI/PYL8QcIBAIK+v/7+fz+8wUP/fYEAgEP//////////32D//yD//7///4//////UP///zDv///////P//////////+vj3Ag//+fQJ/////////fz///////////////////gHD///////+v//////////////9AWHP9fwAABxxJREFUeAHs1IVy5DAQBNBZ0DJ3mJUonGiPmZmZmZmZPv6ssb2oFFqHeYUq7LJ7mlatWhWVWDxBf4SkEHH6EwhPKk2/X0Z4sn9AknRSeJIx+u0SguXot8sLliG7QrFUKtOvUEkKVrUXpQZPT6EZrBdAX7FA0YsLX7ZCFv0w+gco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" alt="Pro" width="18"></span>
et notre
<a href="https://angular-exercises.ninja-squad.com/exercises/19/quiz-http">quiz</a> <span class="image"><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAIgAAACACAMAAADnN9ENAAACSVBMVEVMaXH7whr7whr7whr7whr7whr7whr7whr7whr7whr7whr7whp4o614o614o614o637whr7whp4o614o614o614o614o614o614o614o62EoKN4o614o637whqFXFKFXFKQnZm4kni0k3vA1Njr8fLd5+myytB/qLGFXFKFXFKcmY98oqp4o63V4uWFXFKFXFKoloWgmIx4o62Hpqu+nofCpI/b08yFXFKAoaaMnpzYzcSFXFKFXFKUnJaYm5O7mIDl5eOGrbaFXFKGk5Kfd2WSalyYcGClfmqhlIZ6lpx+hIWDaWOFXFKFXFJ/gICkl4nFqpeFXFKFXFKCamSDZV2EYFiDaWOCbmne2dTk7O77whqOZE6Ad3TIsJ6jwMflryWbb0h/gIDo6+rH2dz0vB58jZGIn6Cxgj17kZbOvK2FXFL7whq5iTqVt75/e3rPnC/eqSiMYk+FXFKjdkS4p6Ll6OjLtqbSwrXFubacu8PstSGynZiOsrqLZVzauj/013mrlI56mqLCtFrt69fY1dSApaTrvizz2oafgXqSb2aqxcuhrX/11GvO3uGQeHG5z9T20V7e3t7s7uX4y0P6xSjv5byYeHC+sKyli4TSzMrIzc28wcGwtLVHR0c8OztIR0c1NTWNkJEvLy+NioqTkJCHhISlqKnU2dpCQUGBhIRnZmZeYGBqbGyZnJ07Ozvf5ebLwsCmqapfYGFiYmLAw8Tw9fXs8vNqjZVBTE9PYmY4Pj9deH5mho5GU1Y9RUdhf4ZznKVKW140Njdz5u6AAAAAf3RSTlMAMIBQ7/+fEI/PYL8QcIBAIK+v/7+fz+8wUP/fYEAgEP//////////32D//yD//7///4//////UP///zDv///////P//////////+vj3Ag//+fQJ/////////fz///////////////////gHD///////+v//////////////9AWHP9fwAABxxJREFUeAHs1IVy5DAQBNBZ0DJ3mJUonGiPmZmZmZmZPv6ssb2oFFqHeYUq7LJ7mlatWhWVWDxBf4SkEHH6EwhPKk2/X0Z4sn9AknRSeJIx+u0SguXot8sLliG7QrFUKtOvUEkKVrUXpQZPT6EZrBdAX7FA0YsLX7ZCFv0w+gco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" alt="Pro" width="18"></span>&#160;!
Nous avons préparé une API REST complète, prête à être utilisée.
Récupérons donc les courses avec le service <code>HttpClient</code>&#160;!
Plus tard, nous apprendrons comment appeler une API sécurisée avec un système d&#8217;authentification et des intercepteurs
dans les exercices
<a href="https://angular-exercises.ninja-squad.com/exercises/20/http-auth">HTTP avec authentification</a> <span class="image"><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAIgAAACACAMAAADnN9ENAAACSVBMVEVMaXH7whr7whr7whr7whr7whr7whr7whr7whr7whr7whr7whp4o614o614o614o637whr7whp4o614o614o614o614o614o614o614o62EoKN4o614o637whqFXFKFXFKQnZm4kni0k3vA1Njr8fLd5+myytB/qLGFXFKFXFKcmY98oqp4o63V4uWFXFKFXFKoloWgmIx4o62Hpqu+nofCpI/b08yFXFKAoaaMnpzYzcSFXFKFXFKUnJaYm5O7mIDl5eOGrbaFXFKGk5Kfd2WSalyYcGClfmqhlIZ6lpx+hIWDaWOFXFKFXFJ/gICkl4nFqpeFXFKFXFKCamSDZV2EYFiDaWOCbmne2dTk7O77whqOZE6Ad3TIsJ6jwMflryWbb0h/gIDo6+rH2dz0vB58jZGIn6Cxgj17kZbOvK2FXFL7whq5iTqVt75/e3rPnC/eqSiMYk+FXFKjdkS4p6Ll6OjLtqbSwrXFubacu8PstSGynZiOsrqLZVzauj/013mrlI56mqLCtFrt69fY1dSApaTrvizz2oafgXqSb2aqxcuhrX/11GvO3uGQeHG5z9T20V7e3t7s7uX4y0P6xSjv5byYeHC+sKyli4TSzMrIzc28wcGwtLVHR0c8OztIR0c1NTWNkJEvLy+NioqTkJCHhISlqKnU2dpCQUGBhIRnZmZeYGBqbGyZnJ07Ozvf5ebLwsCmqapfYGFiYmLAw8Tw9fXs8vNqjZVBTE9PYmY4Pj9deH5mho5GU1Y9RUdhf4ZznKVKW140Njdz5u6AAAAAf3RSTlMAMIBQ7/+fEI/PYL8QcIBAIK+v/7+fz+8wUP/fYEAgEP//////////32D//yD//7///4//////UP///zDv///////P//////////+vj3Ag//+fQJ/////////fz///////////////////gHD///////+v//////////////9AWHP9fwAABxxJREFUeAHs1IVy5DAQBNBZ0DJ3mJUonGiPmZmZmZmZPv6ssb2oFFqHeYUq7LJ7mlatWhWVWDxBf4SkEHH6EwhPKk2/X0Z4sn9AknRSeJIx+u0SguXot8sLliG7QrFUKtOvUEkKVrUXpQZPT6EZrBdAX7FA0YsLX7ZCFv0w+gco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" alt="Pro" width="18"></span>
et
<a href="https://angular-exercises.ninja-squad.com/exercises/21/bet">Parier sur un poney</a> <span class="image"><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAIgAAACACAMAAADnN9ENAAACSVBMVEVMaXH7whr7whr7whr7whr7whr7whr7whr7whr7whr7whr7whp4o614o614o614o637whr7whp4o614o614o614o614o614o614o614o62EoKN4o614o637whqFXFKFXFKQnZm4kni0k3vA1Njr8fLd5+myytB/qLGFXFKFXFKcmY98oqp4o63V4uWFXFKFXFKoloWgmIx4o62Hpqu+nofCpI/b08yFXFKAoaaMnpzYzcSFXFKFXFKUnJaYm5O7mIDl5eOGrbaFXFKGk5Kfd2WSalyYcGClfmqhlIZ6lpx+hIWDaWOFXFKFXFJ/gICkl4nFqpeFXFKFXFKCamSDZV2EYFiDaWOCbmne2dTk7O77whqOZE6Ad3TIsJ6jwMflryWbb0h/gIDo6+rH2dz0vB58jZGIn6Cxgj17kZbOvK2FXFL7whq5iTqVt75/e3rPnC/eqSiMYk+FXFKjdkS4p6Ll6OjLtqbSwrXFubacu8PstSGynZiOsrqLZVzauj/013mrlI56mqLCtFrt69fY1dSApaTrvizz2oafgXqSb2aqxcuhrX/11GvO3uGQeHG5z9T20V7e3t7s7uX4y0P6xSjv5byYeHC+sKyli4TSzMrIzc28wcGwtLVHR0c8OztIR0c1NTWNkJEvLy+NioqTkJCHhISlqKnU2dpCQUGBhIRnZmZeYGBqbGyZnJ07Ozvf5ebLwsCmqapfYGFiYmLAw8Tw9fXs8vNqjZVBTE9PYmY4Pj9deH5mho5GU1Y9RUdhf4ZznKVKW140Njdz5u6AAAAAf3RSTlMAMIBQ7/+fEI/PYL8QcIBAIK+v/7+fz+8wUP/fYEAgEP//////////32D//yD//7///4//////UP///zDv///////P//////////+vj3Ag//+fQJ/////////fz///////////////////gHD///////+v//////////////9AWHP9fwAABxxJREFUeAHs1IVy5DAQBNBZ0DJ3mJUonGiPmZmZmZmZPv6ssb2oFFqHeYUq7LJ7mlatWhWVWDxBf4SkEHH6EwhPKk2/X0Z4sn9AknRSeJIx+u0SguXot8sLliG7QrFUKtOvUEkKVrUXpQZPT6EZrBdAX7FA0YsLX7ZCFv0w+gco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" alt="Pro" width="18"></span>.
Dans le même genre, nous utiliserons aussi les
<a href="https://angular-exercises.ninja-squad.com/exercises/23/websockets">WebSockets</a> <span class="image"><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAIgAAACACAMAAADnN9ENAAACSVBMVEVMaXH7whr7whr7whr7whr7whr7whr7whr7whr7whr7whr7whp4o614o614o614o637whr7whp4o614o614o614o614o614o614o614o62EoKN4o614o637whqFXFKFXFKQnZm4kni0k3vA1Njr8fLd5+myytB/qLGFXFKFXFKcmY98oqp4o63V4uWFXFKFXFKoloWgmIx4o62Hpqu+nofCpI/b08yFXFKAoaaMnpzYzcSFXFKFXFKUnJaYm5O7mIDl5eOGrbaFXFKGk5Kfd2WSalyYcGClfmqhlIZ6lpx+hIWDaWOFXFKFXFJ/gICkl4nFqpeFXFKFXFKCamSDZV2EYFiDaWOCbmne2dTk7O77whqOZE6Ad3TIsJ6jwMflryWbb0h/gIDo6+rH2dz0vB58jZGIn6Cxgj17kZbOvK2FXFL7whq5iTqVt75/e3rPnC/eqSiMYk+FXFKjdkS4p6Ll6OjLtqbSwrXFubacu8PstSGynZiOsrqLZVzauj/013mrlI56mqLCtFrt69fY1dSApaTrvizz2oafgXqSb2aqxcuhrX/11GvO3uGQeHG5z9T20V7e3t7s7uX4y0P6xSjv5byYeHC+sKyli4TSzMrIzc28wcGwtLVHR0c8OztIR0c1NTWNkJEvLy+NioqTkJCHhISlqKnU2dpCQUGBhIRnZmZeYGBqbGyZnJ07Ozvf5ebLwsCmqapfYGFiYmLAw8Tw9fXs8vNqjZVBTE9PYmY4Pj9deH5mho5GU1Y9RUdhf4ZznKVKW140Njdz5u6AAAAAf3RSTlMAMIBQ7/+fEI/PYL8QcIBAIK+v/7+fz+8wUP/fYEAgEP//////////32D//yD//7///4//////UP///zDv///////P//////////+vj3Ag//+fQJ/////////fz///////////////////gHD///////+v//////////////9AWHP9fwAABxxJREFUeAHs1IVy5DAQBNBZ0DJ3mJUonGiPmZmZmZmZPv6ssb2oFFqHeYUq7LJ7mlatWhWVWDxBf4SkEHH6EwhPKk2/X0Z4sn9AknRSeJIx+u0SguXot8sLliG7QrFUKtOvUEkKVrUXpQZPT6EZrBdAX7FA0YsLX7ZCFv0w+gco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" alt="Pro" width="18"></span>.</p>
</div>
</td>
</tr>
</table>
</div>
<div style="page-break-after: always;"></div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="router">19. Routeur</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Il est classique de vouloir associer une URL à un état de l&#8217;application.
En effet, on veut qu&#8217;un utilisateur puisse mettre une page en favori et y revenir plus tard,
et ça donne une meilleure expérience en général.</p>
</div>
<div class="paragraph">
<p>La partie en charge de ce travail s&#8217;appelle un routeur, et chaque framework a le sien (voire même plusieurs).</p>
</div>
<div class="imageblock text-center">
<div class="content">
<img src="data:image/png;base64,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" alt="Routeur">
</div>
</div>
<div class="paragraph">
<p>Le routeur d&#8217;Angular a un objectif simple&#160;: permettre d&#8217;avoir des URLs compréhensibles qui
reflètent l&#8217;état de notre application, et déterminer pour chaque URL quels composants initialiser et insérer dans la page.
Tout cela sans rafraîchir la page et sans lancer de requête auprès de notre serveur&#160;:
c&#8217;est tout l&#8217;intérêt d&#8217;avoir une <em>Single Page Application</em>.</p>
</div>
<div class="paragraph">
<p>Tu sais probablement qu&#8217;il y a un routeur natif dans AngularJS&#160;1.x,
maintenu par l&#8217;équipe du framework, dans un module nommé <code>ngRoute</code>.
Tu sais aussi peut-être qu&#8217;il est très basique&#160;: il suffit pour des applications simples,
mais il ne permet qu&#8217;une seule vue par URL, sans imbrication possible.
C&#8217;est donc trop limité pour de grosses applications, où on a souvent des vues dans des vues.
Il y a cependant un autre module très populaire dans la communauté, nommé <code>ui-router</code>,
que beaucoup de monde utilise et qui fait du très bon boulot.</p>
</div>
<div class="paragraph">
<p>Avec Angular, l&#8217;équipe a décidé de réduire l&#8217;écart et a écrit un nouveau module <code>RouterModule</code>.
Et ce module va probablement répondre à tous tes besoins&#160;!</p>
</div>
<div class="paragraph">
<p>Quelques-unes des ses nouvelles fonctionnalités sont vraiment intéressantes.
Alors lançons-nous&#160;!</p>
</div>
<div class="sect2">
<h3 id="_en_route_providerouter">19.1. En route (<code>provideRouter</code>)</h3>
<div class="paragraph">
<p>Commençons à utiliser le routeur.
C&#8217;est un module optionnel&#160;; il n&#8217;est donc pas inclus dans le noyau du framework.
D&#8217;une manière similaire à ce que nous avons fait pour fournir le client HTTP,
tu dois fournir le routeur à l&#8217;application si tu veux l&#8217;utiliser.
Mais pour ça, nous avons besoin d&#8217;une configuration
pour définir les associations entre les URLs et les composants.
Cela peut se faire dans un fichier dédié, généralement nommé <code>app.routes.ts</code>,
et contenant un tableau représentant la configuration&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="javascript">import { Routes } from '@angular/router';
import { HomeComponent } from './home/home.component';
import { RacesComponent } from './races/races.component';

export const routes: Routes = [
  { path: '', component: HomeComponent },
  { path: 'races', component: RacesComponent }
];</code></pre>
</div>
</div>
<div class="paragraph">
<p>Ensuite nous devons fournir le routeur dans notre application,
initialisé avec la bonne configuration&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="javascript">import { bootstrapApplication } from '@angular/platform-browser';
import { provideRouter } from '@angular/router';
import { routes } from './app.routes';

bootstrapApplication(AppComponent, {
  providers: [provideRouter(routes)]
}).catch(err =&gt; console.error(err));</code></pre>
</div>
</div>
<div class="paragraph">
<p>Comme tu le vois, les <code>Routes</code> sont un tableau d&#8217;objets, chacun d&#8217;eux étant une&#8230;&#8203; route.
Une configuration de route est en général une paire&#160;:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>path</code>&#160;: quelle URL va déclencher la navigation&#160;;</p>
</li>
<li>
<p><code>component</code>&#160;: quel composant sera initialisé et affiché&#160;.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Tu te demandes peut-être où le composant sera inclus dans la page, et c&#8217;est une bonne question.
Pour qu&#8217;un composant soit inclus dans notre application, comme le <code>RacesComponent</code> de l&#8217;exemple ci-dessus,
il faut utiliser un tag spécial dans le template du composant principal&#160;: <code>&lt;router-outlet&gt;</code>.</p>
</div>
<div class="imageblock text-center">
<div class="content">
<img src="data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0nMS4wJyBlbmNvZGluZz0nVVRGLTgnPz48c3ZnIGhlaWdodD0nNDA2JyBwcmVzZXJ2ZUFzcGVjdFJhdGlvPSd4TWlkWU1pZCBtZWV0JyBzaGFwZS1yZW5kZXJpbmc9J2dlb21ldHJpY1ByZWNpc2lvbicgdmVyc2lvbj0nMS4wJyB2aWV3Qm94PScwIDAgNDcwIDQwNicgd2lkdGg9JzQ3MCcgeG1sbnM9J2h0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnJz48ZGVmcz48ZmlsdGVyIGhlaWdodD0nMjAwJScgaWQ9J3NoYWRvd0JsdXInIHdpZHRoPScyMDAlJyB4PScwJyB5PScwJz48ZmVPZmZzZXQgZHg9JzMuMDAwMzAwMicgZHk9JzMuMDAwMzAwMicgaW49J1NvdXJjZUdyYXBoaWMnIHJlc3VsdD0nb2ZmT3V0Jy8+PGZlR2F1c3NpYW5CbHVyIGluPSdvZmZPdXQnIHN0ZERldmlhdGlvbj0nMycvPjwvZmlsdGVyPjwvZGVmcz48ZyBzdHJva2UtbGluZWNhcD0nc3F1YXJlJyBzdHJva2UtbGluZWpvaW49J3JvdW5kJyBzdHJva2Utd2lkdGg9JzEnPjxyZWN0IGhlaWdodD0nNDA2JyBzdHlsZT0nZmlsbDogI2ZmZmZmZicgd2lkdGg9JzQ3MCcgeD0nMCcgeT0nMCcvPjxwYXRoIGQ9J00yNS4wIDM1LjAgTDQ0NS4wIDM1LjAgTDQ0NS4wIDM3MS4wIEwyNS4wIDM3MS4wIHonIGZpbGw9JyM5Njk2OTYnIGZpbHRlcj0ndXJsKCNzaGFkb3dCbHVyKScgc3Ryb2tlPScjOTY5Njk2Jy8+PHBhdGggZD0nTTQ1LjAgMTc1LjAgTDQyNS4wIDE3NS4wIEw0MjUuMCAyNTkuMCBMNDUuMCAyNTkuMCB6JyBmaWxsPScjOTY5Njk2JyBmaWx0ZXI9J3VybCgjc2hhZG93Qmx1ciknIHN0cm9rZT0nIzk2OTY5NicvPjxwYXRoIGQ9J000NS4wIDkxLjAgTDQyNS4wIDkxLjAgTDQyNS4wIDE0Ny4wIEw0NS4wIDE0Ny4wIHonIGZpbGw9JyM5Njk2OTYnIGZpbHRlcj0ndXJsKCNzaGFkb3dCbHVyKScgc3Ryb2tlPScjOTY5Njk2Jy8+PHBhdGggZD0nTTQ1LjAgMjg3LjAgTDQyNS4wIDI4Ny4wIEw0MjUuMCAzNDMuMCBMNDUuMCAzNDMuMCB6JyBmaWxsPScjOTY5Njk2JyBmaWx0ZXI9J3VybCgjc2hhZG93Qmx1ciknIHN0cm9rZT0nIzk2OTY5NicvPjxwYXRoIGQ9J00yNS4wIDM1LjAgTDQ0NS4wIDM1LjAgTDQ0NS4wIDM3MS4wIEwyNS4wIDM3MS4wIHonIGZpbGw9J3doaXRlJyBzdHJva2U9JyMwMDAwMDAnIHN0cm9rZS1saW5lY2FwPSdyb3VuZCcgc3Ryb2tlLWxpbmVqb2luPSdyb3VuZCcgc3Ryb2tlLXdpZHRoPScxLjAnLz48cGF0aCBkPSdNNDUuMCAxNzUuMCBMNDI1LjAgMTc1LjAgTDQyNS4wIDI1OS4wIEw0NS4wIDI1OS4wIHonIGZpbGw9J3doaXRlJyBzdHJva2U9JyMwMDAwMDAnIHN0cm9rZS1saW5lY2FwPSdyb3VuZCcgc3Ryb2tlLWxpbmVqb2luPSdyb3VuZCcgc3Ryb2tlLXdpZHRoPScxLjAnLz48cGF0aCBkPSdNNDUuMCA5MS4wIEw0MjUuMCA5MS4wIEw0MjUuMCAxNDcuMCBMNDUuMCAxNDcuMCB6JyBmaWxsPSd3aGl0ZScgc3Ryb2tlPScjMDAwMDAwJyBzdHJva2UtbGluZWNhcD0ncm91bmQnIHN0cm9rZS1saW5lam9pbj0ncm91bmQnIHN0cm9rZS13aWR0aD0nMS4wJy8+PHBhdGggZD0nTTQ1LjAgMjg3LjAgTDQyNS4wIDI4Ny4wIEw0MjUuMCAzNDMuMCBMNDUuMCAzNDMuMCB6JyBmaWxsPSd3aGl0ZScgc3Ryb2tlPScjMDAwMDAwJyBzdHJva2UtbGluZWNhcD0ncm91bmQnIHN0cm9rZS1saW5lam9pbj0ncm91bmQnIHN0cm9rZS13aWR0aD0nMS4wJy8+PHBhdGggZD0nTTkwLjAgMjI0LjAgTDEwMC4wIDIzMS4wIEw5MC4wIDIzOC4wIHonIGZpbGw9JyMwMDAwMDAnIHN0cm9rZT0nbm9uZScgc3Ryb2tlLWxpbmVjYXA9J3JvdW5kJyBzdHJva2UtbGluZWpvaW49J3JvdW5kJyBzdHJva2Utd2lkdGg9JzEuMCcvPjxwYXRoIGQ9J004MC4wIDIzMS4wIEw5NS4wIDIzMS4wICcgZmlsbD0nbm9uZScgc3Ryb2tlPScjMDAwMDAwJyBzdHJva2UtbGluZWNhcD0ncm91bmQnIHN0cm9rZS1saW5lam9pbj0ncm91bmQnIHN0cm9rZS13aWR0aD0nMS4wJy8+PHRleHQgZmlsbD0nIzAwMDAwMCcgZm9udC1mYW1pbHk9J3NhbnMtc2VyaWYnIGZvbnQtc2l6ZT0nMTMnIHN0cm9rZT0nbm9uZScgeD0nNDMnIHk9JzY4Jz48IVtDREFUQVtBcHBDb21wb25lbnRdXT48L3RleHQ+PHRleHQgZmlsbD0nIzAwMDAwMCcgZm9udC1mYW1pbHk9J3NhbnMtc2VyaWYnIGZvbnQtc2l6ZT0nMTUnIHN0cm9rZT0nbm9uZScgeD0nNjEnIHk9JzExMCc+PCFbQ0RBVEFbSGVhZGVyXV0+PC90ZXh0Pjx0ZXh0IGZpbGw9JyMwMDAwMDAnIGZvbnQtZmFtaWx5PSdzYW5zLXNlcmlmJyBmb250LXNpemU9JzE1JyBzdHJva2U9J25vbmUnIHg9JzY3JyB5PScyMDgnPjwhW0NEQVRBW1JvdXRlck91dGxldF1dPjwvdGV4dD48dGV4dCBmaWxsPScjMDAwMDAwJyBmb250LWZhbWlseT0nc2Fucy1zZXJpZicgZm9udC1zaXplPScxNScgc3Ryb2tlPSdub25lJyB4PScxMzgnIHk9JzIzNic+PCFbQ0RBVEFbbGUgY29tcG9zYW50IHNlcmEgaW5jbHVzIGljaV1dPjwvdGV4dD48dGV4dCBmaWxsPScjMDAwMDAwJyBmb250LWZhbWlseT0nc2Fucy1zZXJpZicgZm9udC1zaXplPScxNScgc3Ryb2tlPSdub25lJyB4PSc2MycgeT0nMzA2Jz48IVtDREFUQVtGb290ZXJdXT48L3RleHQ+PC9nPjwvc3ZnPg==" alt="router outlet" width="470" height="406">
</div>
</div>
<div class="paragraph">
<p>C&#8217;est évidemment une directive Angular,
dont le seul rôle est de marquer l&#8217;emplacement du template du composant de la route actuelle.
Le template de notre application ressemblera donc à&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="html">&lt;header&gt;
  &lt;nav&gt;...&lt;/nav&gt;
&lt;/header&gt;
&lt;main&gt;
  &lt;router-outlet /&gt;
  &lt;!-- the component's template will be inserted here--&gt;
&lt;/main&gt;
&lt;footer&gt;made with &amp;lt;3 by Ninja Squad&lt;/footer&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>Quand on naviguera, tout restera en place (le <em>header</em>, le <em>main</em>, et le <em>footer</em> ici),
et le composant correspondant à la route actuelle sera inséré à la suite de la directive <code>RouterOutlet</code>.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
Toutes les directives du routeur, y compris <code>RouterOutlet</code>, sont des directives <em>standalone</em>.
Afin de pouvoir les utiliser dans le template d&#8217;un composant, elles doivent figurer dans les <code>imports</code>
de son décorateur. Ou alors, tu peux ajouter le <code>RouterModule</code> aux <code>imports</code>
pour mettre à disposition du template toutes les directives du routeur d&#8217;un seul coup.
</td>
</tr>
</table>
</div>
</div>
<div class="sect2">
<h3 id="_navigation">19.2. Navigation</h3>
<div class="paragraph">
<p>Comment peut-on naviguer entre différents composants&#160;?
Bien sûr, tu peux saisir manuellement l&#8217;URL correspondante et recharger la page,
mais cela n&#8217;est pas très pratique.
On ne veut pas non plus utiliser des liens "classiques", avec <code>&lt;a href="&#8230;&#8203;"&gt;&lt;/a&gt;</code>.
En effet, un clic sur un tel lien entraîne un rechargement de la page, et redémarre donc l&#8217;application Angular toute entière.
Le but d&#8217;Angular est justement d&#8217;éviter ces rechargements&#160;: on construit une <em>Single Page Application</em>.
Bien sûr, une solution existe.</p>
</div>
<div class="paragraph">
<p>Dans un template, tu peux insérer un lien avec la directive <code>RouterLink</code> pointant sur le chemin où tu veux aller.
La directive <code>RouterLink</code> peut recevoir soit une constante représentant le chemin vers lequel tu veux naviguer,
soit un tableau de chaînes de caractères,
représentant le chemin de la route et ses paramètres.
Par exemple, dans le template de <code>RacesComponent</code>, si on veut aller sur <code>HomeComponent</code>,
on peut imaginer écrire&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="html">&lt;a routerLink="/"&gt;Home&lt;/a&gt;
&lt;!-- same as --&gt;
&lt;a [routerLink]="['/']"&gt;Home&lt;/a&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>À l&#8217;exécution, le lien <code>href</code> sera calculé par le routeur et pointera sur <code>/</code>.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
Le <em>slash</em> de début dans le chemin est nécessaire.
S&#8217;il n&#8217;est pas inclus, <code>RouterLink</code> construit une URL relativement au chemin courant
(ce qui peut être utile en cas de composants imbriqués, comme on le verra plus tard).
Ajouter un <em>slash</em> indique que l&#8217;URL doit être calculée depuis l&#8217;URL de base de l&#8217;application.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>La directive <code>RouterLink</code> peut être utilisée avec la directive <code>RouterLinkActive</code>,
qui peut ajouter une classe CSS automatiquement si le lien pointe sur la route courante.
Cela permet notamment de styler une entrée de menu comme active quand elle pointe sur la page courante.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="html">&lt;a routerLink="/" routerLinkActive="selected-menu"&gt;Home&lt;/a&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>On peut même récupérer une référence sur cette directive,
pour savoir si la route est active et s&#8217;en servir dans le template&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="html">&lt;a routerLink="/" routerLinkActive #route="routerLinkActive"&gt;Home {{ route.isActive ? '(here)' : '' }}&lt;/a&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>Il est aussi possible de naviguer depuis le code, en utilisant le service <code>Router</code> et sa méthode <code>navigate()</code>.
C&#8217;est souvent pratique quand on veut rediriger notre utilisateur suite à une action&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="javascript">export class RacesComponent {
  private readonly router = inject(Router);

  saveAndMoveBackToHome(): void {
    // ... save logic ...
    this.router.navigate(['']);
  }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>La méthode prend en paramètre un tableau dont le premier élément est le chemin
vers lequel tu souhaites rediriger l&#8217;utilisateur.</p>
</div>
<div class="paragraph">
<p>Il est également possible d&#8217;avoir des paramètres dans l&#8217;URL,
et c&#8217;est très pratique pour définir des URLs dynamiques.
Par exemple, on pourrait afficher une page de détail pour un poney,
et cette page aurait une URL significative comme <code>ponies/id-du-poney/le-nom-du-poney</code>.</p>
</div>
<div class="paragraph">
<p>Pour ce faire, rien de compliqué.
On définit une route dans la configuration avec un (ou plusieurs) paramètre(s) dynamique(s).</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="javascript">export const routes: Routes = [
  { path: '', component: HomeComponent },
  { path: 'races', component: RacesComponent },
  { path: 'races/:raceId/ponies/:ponyId', component: PonyComponent }
];</code></pre>
</div>
</div>
<div class="paragraph">
<p>On peut alors définir des liens dynamiques avec <code>routerLink</code>&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="html">&lt;a [routerLink]="['/races', raceModel().id, 'ponies', ponyModel().id]"&gt;See pony&lt;/a&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>Et bien sûr on peut récupérer ces paramètres assez facilement dans le composant cible.
Ici, grâce à l&#8217;injection de dépendances, notre composant <code>PonyComponent</code> reçoit un objet du type <code>ActivatedRoute</code>.
Cet objet a un champ bien pratique&#160;: <code>snapshot</code>.
Ce champ contient tous les paramètres de l&#8217;URL dans <code>paramMap</code>&#160;!</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="javascript">export class PonyComponent {
  readonly ponyModel: Signal&lt;PonyModel | undefined&gt;;

  constructor() {
    const route = inject(ActivatedRoute);
    const id = route.snapshot.paramMap.get('ponyId')!;
    const ponyService = inject(PonyService);
    this.ponyModel = toSignal(ponyService.get(id));
  }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Comme tu l&#8217;as peut-être remarqué, nous utilisons <code>snapshot</code>. Cela veut-il dire qu&#8217;il y a une version non instantanée&#160;?
En effet. Et cela nous donne une façon de nous abonner aux changements de paramètre, avec,
tu l&#8217;as deviné, un observable.
Cet observable est appelé <code>paramMap</code>.</p>
</div>
<div class="admonitionblock warning">
<table>
<tr>
<td class="icon">
<i class="fa icon-warning" title="Attention"></i>
</td>
<td class="content">
Très important: le routeur va réutiliser le composant s&#8217;il le peut&#160;!
Supposons que notre composant a un bouton "Suivant" pour le poney suivant.
Quand l&#8217;utilisateur cliquera sur le bouton, l&#8217;URL va changer de <code>/ponies/1</code> à <code>/ponies/2</code> par exemple.
Le routeur va alors réutiliser notre instance de composant&#160;:
cela veut dire que ni le constructeur ni le <code>ngOnInit</code> ne seront appelés à nouveau&#160;!
Si tu veux que ton composant se mette à jour pour ce genre de navigation,
il n&#8217;y a pas d&#8217;autre choix que d&#8217;utiliser l&#8217;observable <code>paramMap</code>&#160;!
</td>
</tr>
</table>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="javascript">export class PonyReusableComponent {
  readonly ponyModel: Signal&lt;PonyModel | undefined&gt;;

  constructor() {
    const route = inject(ActivatedRoute);
    const ponyService = inject(PonyService);
    this.ponyModel = toSignal(
      route.paramMap.pipe(
        map((params: ParamMap) =&gt; params.get('ponyId')!),
        switchMap(id =&gt; ponyService.get(id))
      )
    );
  }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Ici, nous nous abonnons à l&#8217;observable offert par <code>ActivatedRoute</code>.
Maintenant, à chaque fois que l&#8217;URL changera de <code>/ponies/1</code> à <code>/ponies/2</code> par exemple,
l&#8217;observable <code>paramMap</code> va émettre un événement,
et nous pourrons récupérer le bon poney à afficher à l&#8217;écran.</p>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<i class="fa icon-tip" title="Mise en pratique"></i>
</td>
<td class="content">
<div class="paragraph">
<p>Essaye notre exercice
<a href="https://angular-exercises.ninja-squad.com/exercises/12/router">Routeur</a> <span class="image"><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAIgAAACACAMAAADnN9ENAAACSVBMVEVMaXH7whr7whr7whr7whr7whr7whr7whr7whr7whr7whr7whp4o614o614o614o637whr7whp4o614o614o614o614o614o614o614o62EoKN4o614o637whqFXFKFXFKQnZm4kni0k3vA1Njr8fLd5+myytB/qLGFXFKFXFKcmY98oqp4o63V4uWFXFKFXFKoloWgmIx4o62Hpqu+nofCpI/b08yFXFKAoaaMnpzYzcSFXFKFXFKUnJaYm5O7mIDl5eOGrbaFXFKGk5Kfd2WSalyYcGClfmqhlIZ6lpx+hIWDaWOFXFKFXFJ/gICkl4nFqpeFXFKFXFKCamSDZV2EYFiDaWOCbmne2dTk7O77whqOZE6Ad3TIsJ6jwMflryWbb0h/gIDo6+rH2dz0vB58jZGIn6Cxgj17kZbOvK2FXFL7whq5iTqVt75/e3rPnC/eqSiMYk+FXFKjdkS4p6Ll6OjLtqbSwrXFubacu8PstSGynZiOsrqLZVzauj/013mrlI56mqLCtFrt69fY1dSApaTrvizz2oafgXqSb2aqxcuhrX/11GvO3uGQeHG5z9T20V7e3t7s7uX4y0P6xSjv5byYeHC+sKyli4TSzMrIzc28wcGwtLVHR0c8OztIR0c1NTWNkJEvLy+NioqTkJCHhISlqKnU2dpCQUGBhIRnZmZeYGBqbGyZnJ07Ozvf5ebLwsCmqapfYGFiYmLAw8Tw9fXs8vNqjZVBTE9PYmY4Pj9deH5mho5GU1Y9RUdhf4ZznKVKW140Njdz5u6AAAAAf3RSTlMAMIBQ7/+fEI/PYL8QcIBAIK+v/7+fz+8wUP/fYEAgEP//////////32D//yD//7///4//////UP///zDv///////P//////////+vj3Ag//+fQJ/////////fz///////////////////gHD///////+v//////////////9AWHP9fwAABxxJREFUeAHs1IVy5DAQBNBZ0DJ3mJUonGiPmZmZmZmZPv6ssb2oFFqHeYUq7LJ7mlatWhWVWDxBf4SkEHH6EwhPKk2/X0Z4sn9AknRSeJIx+u0SguXot8sLliG7QrFUKtOvUEkKVrUXpQZPT6EZrBdAX7FA0YsLX7ZCFv0w+gco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" alt="Pro" width="18"></span>
pour apprendre à configurer le routeur,
naviguer entre composants, et tester tout ça.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Ce que tu viens d&#8217;apprendre devrait couvrir tes besoins de routage les plus communs. Mais le routeur va bien plus loin
que ça, et offre de nombreuses autres fonctionnalités. Les couvrir toutes en détails n&#8217;est pas une mince affaire, et
on peut vite se sentir submergé lorsqu&#8217;on tente de tout connaître sur le routeur.</p>
</div>
<div class="paragraph">
<p>Cette section tente de présenter
la plupart des fonctionnalités additionnelles, aussi brièvement que possible,
en expliquant pourquoi elles peuvent être utiles.</p>
</div>
</div>
<div class="sect2">
<h3 id="_redirections">19.3. Redirections</h3>
<div class="paragraph">
<p>Il est assez commun de vouloir qu&#8217;une URL redirige simplement vers une autre URL dans l&#8217;application. Par exemple, un site
d&#8217;actualités pourrait rediriger l&#8217;URL racine vers <code>/breaking</code>, qui présenterait les toutes dernières nouvelles. Ou
encore, on pourrait vouloir conserver une URL utilisée avant un refactoring et la rediriger vers l&#8217;URL correspondante après
le refactoring. Cela est possible en utilisant</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="javascript">{ path: '', pathMatch: 'full', redirectTo: '/breaking' },</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_quelle_route_pour_une_url">19.4. Quelle route pour une URL&#160;?</h3>
<div class="paragraph">
<p>Dans l&#8217;exemple précédent, illustrant une redirection, j&#8217;ai appliqué une stratégie pour la sélection de la route&#160;:
<code>'full'</code>. La stratégie par défaut est <code>'prefix'</code>. Pour une URL donnée, cette stratégie choisit une route si l&#8217;URL
commence par le <em>path</em> de la route. Si j&#8217;avais utilisé cette stratégie par défaut ici, toutes les URLs
seraient redirigées vers <code>/breaking</code>, puisque toutes les URLs commencent par une chaîne vide.</p>
</div>
<div class="paragraph">
<p>La stratégie du routeur consiste à trouver la première route qui correspond à l&#8217;URL complète. Donc, par exemple,
si tu définis les routes</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="javascript">{ path: 'races/:id', component: RaceComponent },
{ path: 'races/new', component: RaceCreationComponent }</code></pre>
</div>
</div>
<div class="paragraph">
<p>et que l&#8217;URL est <code>races/new</code>, le composant activé par le routeur sera le <code>RaceComponent</code>. En effet,
<code>races/:id</code> correspond à <code>races/new</code>, et apparaît en premier dans la liste des routes. Pour résoudre ce problème, il
suffit de changer l&#8217;ordre des routes&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="javascript">{ path: 'races/new', component: RaceCreationComponent },
{ path: 'races/:id', component: RaceComponent }</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_routes_hiérarchiques">19.5. Routes hiérarchiques</h3>
<div class="paragraph">
<p>Les routes peuvent avoir des routes filles. Cela peut être utile pour plusieurs raisons&#160;:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>appliquer des <em>guards</em> à plusieurs routes à la fois (voir plus loin)&#160;;</p>
</li>
<li>
<p>appliquer des <em>resolvers</em> à plusieurs routes à la fois (voir plus loin)&#160;;</p>
</li>
<li>
<p>appliquer un <em>template</em> commun à plusieurs routes.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Nous avons expliqué au début de ce chapitre que, lorsque le routeur active une route, le composant de la route
est inséré dans la page à l&#8217;emplacement marqué par la directive <code>router-outlet</code>.</p>
</div>
<div class="paragraph">
<p>En fait, ce mécanisme peut aussi être utilisé par les composants imbriqués. Suppose que tu veuilles créer une page
complexe pour afficher le profil d&#8217;un poney. Cette page afficherait le nom et le portrait du poney dans sa partie
supérieure, et afficherait des onglets dans sa partie inférieure&#160;: un onglet pour le certificat de naissance du poney,
un autre pour son palmarès et un troisième pour les avis des journalistes. Tu veux bien sûr que chaque
onglet ait sa propre URL, afin de pouvoir créer des liens directs vers chacun d&#8217;eux.
Mais tu veux aussi éviter de recharger le poney, et de répéter son nom et son portrait sur chacun
des trois composants correspondant aux trois onglets.</p>
</div>
<div class="paragraph">
<p>La solution est d&#8217;utiliser un <code>router-outlet</code> dans le template du <code>PonyComponent</code>, et de définir une route mère pour
le poney, comme ceci&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="javascript">{
  path: 'ponies/:ponyId',
  component: PonyComponent,
  children: [
    { path: 'birth-certificate', component: BirthCertificateComponent },
    { path: 'track-record', component: TrackRecordComponent },
    { path: 'reviews', component: ReviewsComponent }
  ]
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Lorsque tu navigues vers <code>ponies/42/reviews</code>, par exemple, le routeur insère le PonyComponent à l&#8217;emplacement
marqué par le router-outlet principal, dans le composant racine. Le template du PonyComponent, en plus du nom et du
portrait du poney, contient lui aussi un router-outlet. C&#8217;est là que le composant de la route fille (<code>ReviewsComponent</code>)
est inséré.</p>
</div>
<div class="imageblock text-center">
<div class="content">
<img src="data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0nMS4wJyBlbmNvZGluZz0nVVRGLTgnPz48c3ZnIGhlaWdodD0nMzM2JyBwcmVzZXJ2ZUFzcGVjdFJhdGlvPSd4TWlkWU1pZCBtZWV0JyBzaGFwZS1yZW5kZXJpbmc9J2dlb21ldHJpY1ByZWNpc2lvbicgdmVyc2lvbj0nMS4wJyB2aWV3Qm94PScwIDAgNDUwIDMzNicgd2lkdGg9JzQ1MCcgeG1sbnM9J2h0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnJz48ZGVmcz48ZmlsdGVyIGhlaWdodD0nMjAwJScgaWQ9J3NoYWRvd0JsdXInIHdpZHRoPScyMDAlJyB4PScwJyB5PScwJz48ZmVPZmZzZXQgZHg9JzMuMDAwMzAwMicgZHk9JzMuMDAwMzAwMicgaW49J1NvdXJjZUdyYXBoaWMnIHJlc3VsdD0nb2ZmT3V0Jy8+PGZlR2F1c3NpYW5CbHVyIGluPSdvZmZPdXQnIHN0ZERldmlhdGlvbj0nMycvPjwvZmlsdGVyPjwvZGVmcz48ZyBzdHJva2UtbGluZWNhcD0nc3F1YXJlJyBzdHJva2UtbGluZWpvaW49J3JvdW5kJyBzdHJva2Utd2lkdGg9JzEnPjxyZWN0IGhlaWdodD0nMzM2JyBzdHlsZT0nZmlsbDogI2ZmZmZmZicgd2lkdGg9JzQ1MCcgeD0nMCcgeT0nMCcvPjxwYXRoIGQ9J00zNS4wIDYzLjAgTDQyNS4wIDYzLjAgTDQyNS4wIDMwMS4wIEwzNS4wIDMwMS4wIHonIGZpbGw9JyM5Njk2OTYnIGZpbHRlcj0ndXJsKCNzaGFkb3dCbHVyKScgc3Ryb2tlPScjOTY5Njk2Jy8+PHBhdGggZD0nTTY1LjAgMTE5LjAgTDQwNS4wIDExOS4wIEw0MDUuMCAyODcuMCBMNjUuMCAyODcuMCB6JyBmaWxsPScjOTY5Njk2JyBmaWx0ZXI9J3VybCgjc2hhZG93Qmx1ciknIHN0cm9rZT0nIzk2OTY5NicvPjxwYXRoIGQ9J002NS4wIDE0Ny4wIEw0MDUuMCAxNDcuMCBMNDA1LjAgMjg3LjAgTDY1LjAgMjg3LjAgeicgZmlsbD0nIzk2OTY5NicgZmlsdGVyPSd1cmwoI3NoYWRvd0JsdXIpJyBzdHJva2U9JyM5Njk2OTYnLz48cGF0aCBkPSdNOTUuMCAyMDMuMCBMMzU1LjAgMjAzLjAgTDM1NS4wIDI3My4wIEw5NS4wIDI3My4wIHonIGZpbGw9JyM5Njk2OTYnIGZpbHRlcj0ndXJsKCNzaGFkb3dCbHVyKScgc3Ryb2tlPScjOTY5Njk2Jy8+PHBhdGggZD0nTTM1LjAgMzUuMCBMNDI1LjAgMzUuMCBMNDI1LjAgNjMuMCBMMzUuMCA2My4wIHonIGZpbGw9JyM5Njk2OTYnIGZpbHRlcj0ndXJsKCNzaGFkb3dCbHVyKScgc3Ryb2tlPScjOTY5Njk2Jy8+PHBhdGggZD0nTTk1LjAgMjMxLjAgTDM1NS4wIDIzMS4wIEwzNTUuMCAyNzMuMCBMOTUuMCAyNzMuMCB6JyBmaWxsPScjOTY5Njk2JyBmaWx0ZXI9J3VybCgjc2hhZG93Qmx1ciknIHN0cm9rZT0nIzk2OTY5NicvPjxwYXRoIGQ9J002NS4wIDExOS4wIEw0MDUuMCAxMTkuMCBMNDA1LjAgMTQ3LjAgTDY1LjAgMTQ3LjAgeicgZmlsbD0nIzk2OTY5NicgZmlsdGVyPSd1cmwoI3NoYWRvd0JsdXIpJyBzdHJva2U9JyM5Njk2OTYnLz48cGF0aCBkPSdNOTUuMCAyMDMuMCBMMzU1LjAgMjAzLjAgTDM1NS4wIDIzMS4wIEw5NS4wIDIzMS4wIHonIGZpbGw9JyM5Njk2OTYnIGZpbHRlcj0ndXJsKCNzaGFkb3dCbHVyKScgc3Ryb2tlPScjOTY5Njk2Jy8+PHBhdGggZD0nTTM1LjAgNjMuMCBMNDI1LjAgNjMuMCBMNDI1LjAgMzAxLjAgTDM1LjAgMzAxLjAgeicgZmlsbD0nd2hpdGUnIHN0cm9rZT0nIzAwMDAwMCcgc3Ryb2tlLWxpbmVjYXA9J3JvdW5kJyBzdHJva2UtbGluZWpvaW49J3JvdW5kJyBzdHJva2Utd2lkdGg9JzEuMCcvPjxwYXRoIGQ9J002NS4wIDExOS4wIEw0MDUuMCAxMTkuMCBMNDA1LjAgMjg3LjAgTDY1LjAgMjg3LjAgeicgZmlsbD0nd2hpdGUnIHN0cm9rZT0nIzAwMDAwMCcgc3Ryb2tlLWxpbmVjYXA9J3JvdW5kJyBzdHJva2UtbGluZWpvaW49J3JvdW5kJyBzdHJva2Utd2lkdGg9JzEuMCcvPjxwYXRoIGQ9J002NS4wIDE0Ny4wIEw0MDUuMCAxNDcuMCBMNDA1LjAgMjg3LjAgTDY1LjAgMjg3LjAgeicgZmlsbD0nd2hpdGUnIHN0cm9rZT0nIzAwMDAwMCcgc3Ryb2tlLWxpbmVjYXA9J3JvdW5kJyBzdHJva2UtbGluZWpvaW49J3JvdW5kJyBzdHJva2Utd2lkdGg9JzEuMCcvPjxwYXRoIGQ9J005NS4wIDIwMy4wIEwzNTUuMCAyMDMuMCBMMzU1LjAgMjczLjAgTDk1LjAgMjczLjAgeicgZmlsbD0nd2hpdGUnIHN0cm9rZT0nIzAwMDAwMCcgc3Ryb2tlLWxpbmVjYXA9J3JvdW5kJyBzdHJva2UtbGluZWpvaW49J3JvdW5kJyBzdHJva2Utd2lkdGg9JzEuMCcvPjxwYXRoIGQ9J00zNS4wIDM1LjAgTDQyNS4wIDM1LjAgTDQyNS4wIDYzLjAgTDM1LjAgNjMuMCB6JyBmaWxsPSd3aGl0ZScgc3Ryb2tlPScjMDAwMDAwJyBzdHJva2UtbGluZWNhcD0ncm91bmQnIHN0cm9rZS1saW5lam9pbj0ncm91bmQnIHN0cm9rZS13aWR0aD0nMS4wJy8+PHBhdGggZD0nTTk1LjAgMjMxLjAgTDM1NS4wIDIzMS4wIEwzNTUuMCAyNzMuMCBMOTUuMCAyNzMuMCB6JyBmaWxsPSd3aGl0ZScgc3Ryb2tlPScjMDAwMDAwJyBzdHJva2UtbGluZWNhcD0ncm91bmQnIHN0cm9rZS1saW5lam9pbj0ncm91bmQnIHN0cm9rZS13aWR0aD0nMS4wJy8+PHBhdGggZD0nTTY1LjAgMTE5LjAgTDQwNS4wIDExOS4wIEw0MDUuMCAxNDcuMCBMNjUuMCAxNDcuMCB6JyBmaWxsPSd3aGl0ZScgc3Ryb2tlPScjMDAwMDAwJyBzdHJva2UtbGluZWNhcD0ncm91bmQnIHN0cm9rZS1saW5lam9pbj0ncm91bmQnIHN0cm9rZS13aWR0aD0nMS4wJy8+PHBhdGggZD0nTTk1LjAgMjAzLjAgTDM1NS4wIDIwMy4wIEwzNTUuMCAyMzEuMCBMOTUuMCAyMzEuMCB6JyBmaWxsPSd3aGl0ZScgc3Ryb2tlPScjMDAwMDAwJyBzdHJva2UtbGluZWNhcD0ncm91bmQnIHN0cm9rZS1saW5lam9pbj0ncm91bmQnIHN0cm9rZS13aWR0aD0nMS4wJy8+PHRleHQgZmlsbD0nIzAwMDAwMCcgZm9udC1mYW1pbHk9J3NhbnMtc2VyaWYnIGZvbnQtc2l6ZT0nMTUnIHN0cm9rZT0nbm9uZScgeD0nNTUnIHk9JzU0Jz48IVtDREFUQVthcHAuY29tcG9uZW50Lmh0bWxdXT48L3RleHQ+PHRleHQgZmlsbD0nIzAwMDAwMCcgZm9udC1mYW1pbHk9J3NhbnMtc2VyaWYnIGZvbnQtc2l6ZT0nMTUnIHN0cm9rZT0nbm9uZScgeD0nNTYnIHk9JzgyJz48IVtDREFUQVsuLi5dXT48L3RleHQ+PHRleHQgZmlsbD0nIzAwMDAwMCcgZm9udC1mYW1pbHk9J3NhbnMtc2VyaWYnIGZvbnQtc2l6ZT0nMTUnIHN0cm9rZT0nbm9uZScgeD0nNjMnIHk9JzExMCc+PCFbQ0RBVEFbcm91dGVyIG91dGxldF1dPjwvdGV4dD48dGV4dCBmaWxsPScjMDAwMDAwJyBmb250LWZhbWlseT0nc2Fucy1zZXJpZicgZm9udC1zaXplPScxNScgc3Ryb2tlPSdub25lJyB4PSc4NScgeT0nMTM4Jz48IVtDREFUQVtwb255LmNvbXBvbmVudC5odG1sXV0+PC90ZXh0Pjx0ZXh0IGZpbGw9JyMwMDAwMDAnIGZvbnQtZmFtaWx5PSdzYW5zLXNlcmlmJyBmb250LXNpemU9JzE1JyBzdHJva2U9J25vbmUnIHg9Jzg2JyB5PScxNjYnPjwhW0NEQVRBWy4uLl1dPjwvdGV4dD48dGV4dCBmaWxsPScjMDAwMDAwJyBmb250LWZhbWlseT0nc2Fucy1zZXJpZicgZm9udC1zaXplPScxNScgc3Ryb2tlPSdub25lJyB4PSc5MycgeT0nMTk0Jz48IVtDREFUQVtyb3V0ZXIgb3V0bGV0XV0+PC90ZXh0Pjx0ZXh0IGZpbGw9JyMwMDAwMDAnIGZvbnQtZmFtaWx5PSdzYW5zLXNlcmlmJyBmb250LXNpemU9JzE1JyBzdHJva2U9J25vbmUnIHg9JzExOCcgeT0nMjIyJz48IVtDREFUQVtyZXZpZXdzLmNvbXBvbmVudC5odG1sXV0+PC90ZXh0Pjx0ZXh0IGZpbGw9JyMwMDAwMDAnIGZvbnQtZmFtaWx5PSdzYW5zLXNlcmlmJyBmb250LXNpemU9JzE1JyBzdHJva2U9J25vbmUnIHg9JzExNicgeT0nMjUwJz48IVtDREFUQVsuLi5dXT48L3RleHQ+PC9nPjwvc3ZnPg==" alt="router outlet result" width="450" height="336">
</div>
</div>
<div class="paragraph">
<p>Si tu navigues vers <code>ponies/42</code>, le composant pony sera affiché, mais aucun des trois sous-composants ne le sera.
Tâchons d&#8217;afficher plutôt le certificat de naissance par défaut. Il suffit pour cela d&#8217;ajouter une route fille,
avec un chemin vide, et qui redirige vers la route <code>birth-certificate</code>&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="javascript">{
  path: 'ponies/:ponyId',
  component: PonyComponent,
  children: [
    { path: '', pathMatch: 'full', redirectTo: 'birth-certificate' },
    { path: 'birth-certificate', component: BirthCertificateComponent },
    { path: 'track-record', component: TrackRecordComponent },
    { path: 'reviews', component: ReviewsComponent }
  ]
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Note que, dans cet exemple, la redirection est relative à la route <code>ponies/:ponyId</code> parce qu&#8217;elle ne commence pas par
un <code>/</code>.</p>
</div>
<div class="paragraph">
<p>Au lieu de rediriger, on peut aussi afficher le certificat de naissance directement à l&#8217;adresse <code>ponies/42</code>. Là aussi,
il suffit d&#8217;utiliser un chemin vide&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="javascript">{
  path: 'ponies/:ponyId',
  component: PonyComponent,
  children: [
    { path: '', component: BirthCertificateComponent },
    { path: 'track-record', component: TrackRecordComponent },
    { path: 'reviews', component: ReviewsComponent }
  ]
}</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_guards">19.6. Guards</h3>
<div class="paragraph">
<p>Certaines routes de l&#8217;application ne devraient pas être accessibles à tous. L&#8217;utilisateur est-il authentifié&#160;?
A-t-il les permissions nécessaires&#160;? Bien sûr, il faut désactiver ou masquer les liens pointant sur ces routes
inaccessibles. Bien sûr, le backend doit aussi empêcher l&#8217;accès aux ressources interdites à l&#8217;utilisateur courant.
Mais cela n&#8217;empêchera pas l&#8217;utilisateur d&#8217;accéder aux routes qui lui sont interdites, simplement en entrant leur URL
dans la barre d&#8217;adresse du navigateur.</p>
</div>
<div class="paragraph">
<p>C&#8217;est là que les <em>guards</em> (gardes, gardiens) entrent en jeu. Il existe 4 types de <em>guards</em>&#160;:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>canActivate</code>&#160;: lorsqu&#8217;un tel <em>guard</em> est appliqué à une route, il peut empêcher l&#8217;activation de la route.
Il peut renvoyer une URL pour naviguer vers une autre route
(pour être plus précis, il peut renvoyer un type Angular appelé <code>UrlTree</code>, voir l&#8217;exemple plus loin).
C&#8217;est ce qui permet d&#8217;afficher une page d&#8217;erreur,
ou de naviguer vers la page de connexion lorsqu&#8217;un utilisateur anonyme tente
d&#8217;accéder à une page qui requiert une authentification&#160;;</p>
</li>
<li>
<p><code>canActivateChild</code>&#160;: Ce <em>guard</em> peut empêcher les activations des <em>enfants</em> de la route sur lequel il est appliqué.
Cela peut être utile, par exemple, pour empêcher l&#8217;accès à de nombreuses routes d&#8217;un seul coup, en fonction de leur URL&#160;;</p>
</li>
<li>
<p><code>canDeactivate</code>&#160;: ce <em>guard</em> est différent des trois autres. Il est utilisé pour empêcher de <em>quitter</em> la route actuelle.
Cela peut être utile pour, par exemple, demander une confirmation avant de quitter une page contenant un long
formulaire.</p>
</li>
<li>
<p><code>canMatch</code>&#160;: ajouté en Angular&#160;v14.1, ce <em>guard</em> indique au routeur si la route peut être utilisée ou non.
Si le <em>guard</em> renvoie <code>false</code>, alors la route est tout simplement ignorée et le routeur continue sa recherche.
Un usage typique de ce type de <em>guard</em> est d&#8217;avoir plusieurs routes pour le même chemin avec des composants différents,
et d&#8217;utiliser <code>canMatch</code> pour indiquer au routeur quel composant afficher en fonction du profil de l&#8217;utilisateur par exemple.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Voici comment appliquer un <em>guard</em> <code>canActivate</code> à une route. Les trois autres types sont appliqués de manière similaire&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="javascript">{ path: 'races', component: RacesComponent, canActivate: [loggedInGuard] }</code></pre>
</div>
</div>
<div class="paragraph">
<p>Dans l&#8217;exemple ci-dessus, <code>loggedInGuard</code> est une fonction.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
Dans les premières versions d&#8217;Angular (avant la version 15.2),
les <em>guards</em> étaient définis comme des services, mais cette pratique est maintenant dépréciée.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>La fonction consiste simplement à décider si la route peut être activée
ou non (en vérifiant si l&#8217;utilisateur est authentifié ou non), et à retourner un <code>boolean</code>, une <code>Promise&lt;boolean|UrlTree&gt;</code>,
un <code>Observable&lt;boolean|UrlTree&gt;</code> ou un <code>UrlTree</code>.</p>
</div>
<div class="paragraph">
<p>Le routeur naviguera vers la route si la valeur retournée est <code>true</code>, ou si la promesse retournée est résolue à <code>true</code>,
ou si l&#8217;observable retourné émet <code>true</code>.
Si la valeur retournée est un <code>UrlTree</code>, alors la navigation actuelle est annulée
et une nouvelle navigation vers cet <code>UrlTree</code> est déclenchée.</p>
</div>
<div class="paragraph">
<p>Voilà à quoi pourrait ressembler <code>loggedInGuard</code>&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="javascript">export const loggedInGuard: CanActivateFn = (
  _route: ActivatedRouteSnapshot,
  _state: RouterStateSnapshot
): boolean | UrlTree =&gt; {
  const userService = inject(UserService);
  const router = inject(Router);
  // returns `true` if the user is logged in or redirects to the login page
  // note that you can also use `router.createUrlTree()` to build a `UrlTree` with parameters
  return userService.isLoggedIn() || router.parseUrl('/login');
};</code></pre>
</div>
</div>
<div class="paragraph">
<p>Les routes hiérarchiques, combinées aux routes à chemin vide, sont très pratiques pour appliquer un <em>guard</em> sur de
nombreuses routes d&#8217;un seul coup. Par exemple, si tu veux que les routes affichant des courses et des poneys ne soient
accessibles qu&#8217;aux utilisateurs authentifiés, au lieu de</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="javascript">{ path: 'ponies/:ponyId', component: PonyComponent, canActivate: [loggedInGuard] },
{ path: 'races', component: RacesComponent, canActivate: [loggedInGuard] }</code></pre>
</div>
</div>
<div class="paragraph">
<p>tu peux introduire une route mère avec un chemin vide, et sans composant. Cette route ne consommera aucun segment d&#8217;URL,
et n&#8217;activera aucun composant, mais ses <em>guards</em> seront appelés chaque fois qu&#8217;on navigue vers l&#8217;une de ses routes filles&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="javascript">{
  path: '',
  canActivate: [loggedInGuard],
  children: [
    { path: 'ponies/:ponyId', component: PonyComponent },
    { path: 'races', component: RacesComponent }
  ]
}</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_resolvers">19.7. Resolvers</h3>
<div class="paragraph">
<p>Dans une bonne vieille application multi-pages, où les pages sont générées côté serveur, voilà ce qui se passe lorsqu&#8217;on
clique sur un lien&#160;: une requête est envoyée au serveur, le navigateur affiche une petite animation dans l&#8217;onglet,
 et quand la réponse du serveur arrive enfin, alors seulement le navigateur change l&#8217;URL dans la barre d&#8217;adresse
 et affiche le contenu de la nouvelle page téléchargée.</p>
</div>
<div class="paragraph">
<p>Dans une application Angular mono-page, ça ne marche pas vraiment comme ça. L&#8217;utilisateur clique sur un lien pour
afficher une course de poneys (par exemple). Le routeur crée une instance de <code>RaceComponent</code>, et le composant envoie
une requête AJAX pour charger la course. Le routeur insère immédiatement le template du composant à l&#8217;endroit
indiqué par le router-outlet. A cet instant, immédiatement après le clic, l&#8217;URL a déjà changé dans la barre d&#8217;adresse
et l&#8217;utilisateur voit déjà la nouvelle page, mais sans une seule course affichée. Lorsque la réponse arrive enfin
du serveur, la course est stockée dans le composant et le DOM est mis à jour pour afficher la course.</p>
</div>
<div class="paragraph">
<p>Cela a des avantages et des inconvénients&#160;:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>la navigation vers la nouvelle page a l&#8217;air plus rapide&#160;;</p>
</li>
<li>
<p>l&#8217;utilisateur peut être perturbé si le chargement de la course est trop long, parce que la page apparaît vide, ce qui
ressemble à un bug&#160;;</p>
</li>
<li>
<p>le template doit être codé avec soin, parce qu&#8217;il doit fonctionner correctement pendant la courte période où la course
est <code>null</code> ou <code>undefined</code>&#160;;</p>
</li>
<li>
<p>le template peut cependant donner un feedback immédiat en affichant un message ou une animation indiquant
que la course est en cours de chargement&#160;;</p>
</li>
<li>
<p>Même si le chargement échoue (à cause d&#8217;une perte de connexion par exemple), au lieu de rester sur la page courante,
la navigation est effectuée et l&#8217;URL change, bien que la page ne puisse afficher aucune course.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Un <em>resolver</em> permet de faire en sorte que notre application Angular se comporte pratiquement comme une application
multi-pages traditionnelle. Au lieu de charger la course depuis le composant lui-même, on applique un <em>resolver</em> à la route,
et ce <em>resolver</em> charge la course.</p>
</div>
<div class="paragraph">
<p>Comme un <em>guard</em>, un <em>resolver</em> peut retourner les données de manière synchrone (en retournant une course) ou asynchrone
(en retournant une promesse ou un observable de course). Le routeur ne navigue vers la route que lorsque la promesse
a été résolue, ou lorsque l&#8217;observable a émis une course et terminé. Voici à quoi un <em>resolver</em> ressemble:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="javascript">export const raceResolver: ResolveFn&lt;RaceModel&gt; = (route: ActivatedRouteSnapshot): Observable&lt;RaceModel&gt; =&gt; {
  const id = route.paramMap.get('raceId')!;
  const raceService = inject(RaceService);
  return raceService.get(id);
};</code></pre>
</div>
</div>
<div class="paragraph">
<p>Comme tu peux le voir, c&#8217;est une simple fonction qui utilise le snapshot de la nouvelle route, fournie par le routeur,
pour charger la course identifiée par le paramètre <code>raceId</code> et retourner un <code>Observable&lt;RaceModel&gt;</code>.</p>
</div>
<div class="paragraph">
<p>Voici comment le <em>resolver</em> est appliqué à la route&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="javascript">{
  path: 'races/:raceId',
  component: RaceComponent,
  resolve: {
    race: raceResolver
  }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Le resolver est associé à une clé que j&#8217;ai choisi de nommer <code>race</code>. Le routeur utilise cette clé pour stocker la
course chargée par le <em>resolver</em> dans une propriété éponyme des <code>data</code> de la route. Ainsi, le <code>RaceComponent</code> peut
obtenir la course de cette manière&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="javascript">export class RaceComponent {
  readonly race = signal(inject(ActivatedRoute).snapshot.data['race']);
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Note que, si tu navigues d&#8217;une route à la même route, mais avec des paramètres différents (par exemple, si ta page
contient un lien <em>Course Suivante</em>), les <em>guards</em> et les <em>resolvers</em> appliqués à la route sont appelés à nouveau.
La même instance de composant, dans ce cas, sera néanmoins réutilisée, et il te faut donc souscrire à un observable pour obtenir
la course (ou stocker l&#8217;observable dans le composant et utiliser le <em>pipe</em> <code>async</code> dans le template)&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="javascript">export class RaceComponent {
  private readonly route = inject(ActivatedRoute);
  readonly raceModel = toSignal(this.route.data.pipe(map(data =&gt; data['race'])));
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Les <em>resolvers</em> ont de nombreux avantages par rapport au chargement des données depuis le composant qui les affiche&#160;:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>ils rendent la navigation plus traditionnelle&#160;;</p>
</li>
<li>
<p>ils peuvent être partagés par plusieurs routes&#160;;</p>
</li>
<li>
<p>ils simplifient le code du composant et de son template&#160;: plus besoin de charger la donnée&#160;; plus besoin de se
préoccuper de la période pendant laquelle le modèle est absent&#160;; plus besoin d&#8217;appliquer des opérateurs RxJS
relativement complexes pour obtenir les données à partir des paramètres&#160;;</p>
</li>
<li>
<p>si la navigation échoue, la page courante reste affichée, et il suffit à l&#8217;utilisateur de recliquer sur le lien
pour refaire une tentative.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Le seul inconvénient que je peux trouver aux <em>resolvers</em> est que, dans le cas où le chargement est long,
l&#8217;application peut sembler ne pas réagir. L&#8217;utilisateur clique sur un lien, et rien de visible ne se produit
avant que les données aient été chargées par le <em>resolver</em>. Si tu sais que le chargement des données d&#8217;une page
est long (parce que le serveur doit faire des calculs complexes, ou interroger des services externes), naviguer directement
vers le composant et lui faire afficher une animation ou un message d&#8217;attente peut être plus ergonomique.
Un autre moyen de régler ce problème est de s&#8217;appuyer sur les événements de routage pour afficher ce message d&#8217;attente.</p>
</div>
</div>
<div class="sect2">
<h3 id="_événements_de_routage">19.8. Événements de routage</h3>
<div class="paragraph">
<p>Le routeur émet plusieurs événements lorsqu&#8217;on navigue vers une route. Tu peux être notifié de ces événements
en souscrivant à l&#8217;observable <code>events</code> du service <code>Router</code>. Les événements émis sont de plusieurs types,
que tu peux filtrer en utilisant <code>instanceof</code>. Par exemple&#160;: <code>event instanceof NavigationStart</code>.</p>
</div>
<div class="paragraph">
<p>Voici les différents types d&#8217;événements&#160;:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>NavigationStart</code>&#160;: émis lorsqu&#8217;une navigation est demandée. Par exemple lorsqu&#8217;on clique sur un lien. Cet événement peut être
utilisé pour afficher un indicateur animé&#160;;</p>
</li>
<li>
<p><code>NavigationEnd</code>&#160;: émis lorsque la navigation s&#8217;achève avec succès. Il peut être utilisé pour masquer l&#8217;indicateur animé.
Un autre cas d&#8217;utilisation est l&#8217;envoi d&#8217;un <em>hit</em> à un service de statistiques de consultation (comme Google Analytics par example).
Pratique pour connaître les pages populaires ou à l&#8217;inverse les fonctionnalités peu utilisées dans l&#8217;application&#160;;</p>
</li>
<li>
<p><code>NavigationError</code>&#160;: émis lorsque la navigation échoue à cause d&#8217;une erreur inattendue (comme un <em>resolver</em> retournant un
observable vide ou en erreur). Il peut être utilisé pour masquer l&#8217;indicateur animé, ou pour tenter d&#8217;envoyer une
erreur de navigation au serveur, par exemple&#160;;</p>
</li>
<li>
<p><code>NavigationCancel</code>&#160;: émis lorsqu&#8217;une navigation est annulée, parce qu&#8217;un <em>guard</em> a empêché la navigation, typiquement.
Là aussi, l&#8217;indicateur animé de navigation doit être masqué.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>D&#8217;autres événements existent pour le chargement des configurations de routes
(<code>RouteConfigLoadStart</code>, <code>RouteConfigLoadEnd</code>, <code>RoutesRecognized</code>) et,
depuis la version 4.3, pour les resolvers (<code>ResolveStart</code>, <code>ResolveEnd</code>)
et les guards (<code>GuardsCheckStart</code>, <code>GuardsCheckEnd</code>).
La version 5.0 a également introduit
des événements de navigation plus fins (<code>ChildActivationStart</code>, <code>ChildActivationEnd</code>).
La version 6.1 a elle ajouté un événement <code>Scroll</code>,
en même temps que l&#8217;option de configuration <code>scrollPositionRestoration</code> qui permet de restaurer la position de scroll
lorsque l&#8217;on navigue vers un composant précédent.</p>
</div>
</div>
<div class="sect2">
<h3 id="_paramètres_et_data">19.9. Paramètres et data</h3>
<div class="paragraph">
<p>Nous avons vu plus tôt que les routes pouvaient avoir des paramètres. Par exemple, la route <code>races/:raceId</code> a un paramètre
nommé <code>raceId</code>. La valeur de ce paramètre, lorsqu&#8217;on navigue vers <code>/races/42</code>, est la chaîne de caractères <code>'42'</code>. Mais
cette route peut en fait avoir d&#8217;autres paramètres additionnels appelés <em>matrix parameters</em>.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
Les paramètres <em>matrix</em> ne sont pas spécifiques à Angular. Bien qu&#8217;assez rarement utilisés et donc moins connus
que les paramètres de requête, ils constituent des éléments standards des URIs, qui sont supportés par plusieurs frameworks
utilisés côté serveur.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Si tu navigues vers l&#8217;URL</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code>/races/42;foo=bar;baz=wiz</code></pre>
</div>
</div>
<div class="paragraph">
<p>les propriétés <code>params</code> et <code>paramMap</code> de la route activée contiendront deux paramètres additionnels
'foo' et 'baz' ayant respectivement les valeurs 'bar' et 'wiz'.</p>
</div>
<div class="paragraph">
<p>Ces paramètres <em>matrix</em> sont spécifiques à la route. Ainsi, par exemple, si l&#8217;URL est</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code>/races/42;foo=bar;baz=wiz/ponies</code></pre>
</div>
</div>
<div class="paragraph">
<p>alors le composant associé au segment <code>ponies</code> de la route n&#8217;aura pas <code>foo</code> ni <code>bar</code> dans les paramètres de son <code>ActivatedRoute</code>.
Seul le composant associé au segment <code>races/42</code> les aura.</p>
</div>
<div class="paragraph">
<p>Pour naviguer vers cette URL, on utilise le code suivant&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="javascript">router.navigate(['/races', 42, { foo: 'bar', baz: 'wiz' }, 'ponies']);</code></pre>
</div>
</div>
<div class="paragraph">
<p>ou, depuis le template, le router link équivalent&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="html">&lt;a [routerLink]="['/races', 42, { foo: 'bar', baz: 'wiz' }, 'ponies']"&gt;Link&lt;/a&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>Les paramètres de requête (<em>query parameters</em>), en revanche, sont partagés par tous les segments de la route. Ils ressemblent
à ceci dans l&#8217;URL&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code>/races/42/ponies?foo=bar&amp;baz=wiz</code></pre>
</div>
</div>
<div class="paragraph">
<p>Ces paramètres de requête sont donc accessibles depuis n&#8217;importe quelle route, en utilisant les propriétés <code>queryParams</code>
ou <code>queryParamMap</code>.</p>
</div>
<div class="paragraph">
<p>Pour naviguer vers une URL comme celle-là, on utilise le code suivant&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="javascript">router.navigate(['/races', 42, 'ponies'], { queryParams: { foo: 'bar', baz: 'wiz' } });</code></pre>
</div>
</div>
<div class="paragraph">
<p>ou, depuis le template, le router link équivalent&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="html">&lt;a [routerLink]="['/races', 42, 'ponies']" [queryParams]="{ foo: 'bar', baz: 'wiz' }"&gt;Link&lt;/a&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>Enfin, nous avons vu que les <em>resolvers</em> permettaient d&#8217;ajouter des propriétés aux <code>data</code> de <code>ActivatedRoute</code>, avant
que la route ne soit activée. Il est aussi possible d&#8217;y ajouter des propriétés directement depuis la configuration
de la route. Cela peut être utile lorsque le même composant doit pouvoir être utilisé dans deux contextes différents,
par exemple&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="javascript">{
  path: 'races',
  component: RacesComponent,
  data: {
    allowDeletion: false
  }
}</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_lier_les_paramètres_et_data_aux_inputs_des_composants">19.10. Lier les paramètres et data aux inputs des composants</h3>
<div class="paragraph">
<p>Nous avons vu que les paramètres et les données de la route sont accessibles depuis le composant associé à la route,
via des observables sur l&#8217;objet <code>ActivatedRoute</code>.</p>
</div>
<div class="paragraph">
<p>Depuis Angular&#160;v16, il est possible de lier automatiquement les paramètres
et les données de la route aux inputs du composant.</p>
</div>
<div class="paragraph">
<p>Il suffit pour cela de configurer le router avec <code>withComponentInputBinding</code>&#160;:</p>
</div>
<div class="listingblock">
<div class="title">app.config.ts</div>
<div class="content">
<pre class="prettyprint highlight"><code data-lang="javascript">provideRouter(routes, withComponentInputBinding())</code></pre>
</div>
</div>
<div class="paragraph">
<p>Avec cette option, un composant peut déclarer un input avec le même nom qu&#8217;un paramètre ou une donnée de la route,
et Angular se chargera de lier automatiquement la valeur du paramètre ou de la donnée à cet input.</p>
</div>
<div class="listingblock">
<div class="title">race.component.ts</div>
<div class="content">
<pre class="prettyprint highlight"><code data-lang="javascript">export class RaceComponent {
  readonly raceId = input.required&lt;string&gt;();</code></pre>
</div>
</div>
<div class="paragraph">
<p>On peut ensuite utiliser cet input comme un input classique,
et réagir à son changement avec <code>toObservable</code> et <code>toSignal</code>&#160;:</p>
</div>
<div class="listingblock">
<div class="title">race.component.ts</div>
<div class="content">
<pre class="prettyprint highlight"><code data-lang="javascript">private readonly raceService = inject(RaceService);
readonly raceModel$ = toObservable(this.raceId).pipe(switchMap(id =&gt; this.raceService.get(id)));
readonly raceModel = toSignal(this.raceModel$);</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_chargement_à_la_demande">19.11. Chargement à la demande</h3>
<div class="paragraph">
<p>Cette section clôture ce long chapitre sur le routeur d&#8217;Angular.</p>
</div>
<div class="paragraph">
<p>Inévitablement, les applications s&#8217;enrichissent de plus en plus de fonctionnalités, et leur taille ne fait qu&#8217;augmenter, jusqu&#8217;au
point où ça devient un problème&#160;: le fichier JS consomme trop de bande passante et met trop longtemps
à être téléchargé et analysé, en particulier sur les téléphones mobiles et les réseaux de mauvaise qualité.
Par ailleurs, le nombre de fonctionnalités augmentant, certaines d&#8217;entre elles ne sont utilisées que par certains
utilisateurs, ou par tous, mais rarement. Charger ces fonctionnalités dès le démarrage de l&#8217;application est un
gaspillage de bande passante et une perte de temps pour l&#8217;utilisateur. C&#8217;est là que le chargement à la demande
(<em>lazy loading</em>) devient intéressant.</p>
</div>
<div class="imageblock text-center">
<div class="content">
<img src="data:image/png;base64,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" alt="Lazy loading">
</div>
</div>
<div class="paragraph">
<p>Le chargement à la demande consiste à diviser l&#8217;application en plusieurs bundles JavaScript, en chargeant
des routes filles à la demande.
Le tableau de routes de l&#8217;application, au lieu de définir toutes les routes de l&#8217;application,
contient seulement les routes chargées dès le démarrage, ainsi que des routes mères, dont les routes filles
sont inconnues au départ et chargées dynamiquement, à la demande.</p>
</div>
<div class="paragraph">
<p>Lorsque l&#8217;utilisateur navigue vers le chemin d&#8217;une route fille (encore inconnue),
le routeur télécharge le bundle JavaScript contenant les routes filles (et leurs composants et services associés),
puis ajoute ces routes, composants et services à l&#8217;application.</p>
</div>
<div class="imageblock text-center">
<div class="content">
<img src="data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0nMS4wJyBlbmNvZGluZz0nVVRGLTgnPz48c3ZnIGhlaWdodD0nMTU0JyBwcmVzZXJ2ZUFzcGVjdFJhdGlvPSd4TWlkWU1pZCBtZWV0JyBzaGFwZS1yZW5kZXJpbmc9J2dlb21ldHJpY1ByZWNpc2lvbicgdmVyc2lvbj0nMS4wJyB2aWV3Qm94PScwIDAgNjEwIDE1NCcgd2lkdGg9JzYxMCcgeG1sbnM9J2h0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnJz48ZGVmcz48ZmlsdGVyIGhlaWdodD0nMjAwJScgaWQ9J3NoYWRvd0JsdXInIHdpZHRoPScyMDAlJyB4PScwJyB5PScwJz48ZmVPZmZzZXQgZHg9JzMuMDAwMzAwMicgZHk9JzMuMDAwMzAwMicgaW49J1NvdXJjZUdyYXBoaWMnIHJlc3VsdD0nb2ZmT3V0Jy8+PGZlR2F1c3NpYW5CbHVyIGluPSdvZmZPdXQnIHN0ZERldmlhdGlvbj0nMycvPjwvZmlsdGVyPjwvZGVmcz48ZyBzdHJva2UtbGluZWNhcD0nc3F1YXJlJyBzdHJva2UtbGluZWpvaW49J3JvdW5kJyBzdHJva2Utd2lkdGg9JzEnPjxyZWN0IGhlaWdodD0nMTU0JyBzdHlsZT0nZmlsbDogI2ZmZmZmZicgd2lkdGg9JzYxMCcgeD0nMCcgeT0nMCcvPjxwYXRoIGQ9J00zNS4wIDM1LjAgTDI4NS4wIDM1LjAgTDI4NS4wIDYzLjAgTDM1LjAgNjMuMCB6JyBmaWxsPScjOTY5Njk2JyBmaWx0ZXI9J3VybCgjc2hhZG93Qmx1ciknIHN0cm9rZT0nIzk2OTY5NicvPjxwYXRoIGQ9J00zNS4wIDYzLjAgTDI4NS4wIDYzLjAgTDI4NS4wIDkxLjAgTDM1LjAgOTEuMCB6JyBmaWxsPScjOTY5Njk2JyBmaWx0ZXI9J3VybCgjc2hhZG93Qmx1ciknIHN0cm9rZT0nIzk2OTY5NicvPjxwYXRoIGQ9J00zNjUuMCA2My4wIEw1ODUuMCA2My4wIEw1ODUuMCA5MS4wIEwzNjUuMCA5MS4wIHonIGZpbGw9JyM5Njk2OTYnIGZpbHRlcj0ndXJsKCNzaGFkb3dCbHVyKScgc3Ryb2tlPScjOTY5Njk2Jy8+PHBhdGggZD0nTTM2NS4wIDkxLjAgTDU4NS4wIDkxLjAgTDU4NS4wIDExOS4wIEwzNjUuMCAxMTkuMCB6JyBmaWxsPScjOTY5Njk2JyBmaWx0ZXI9J3VybCgjc2hhZG93Qmx1ciknIHN0cm9rZT0nIzk2OTY5NicvPjxwYXRoIGQ9J00zNS4wIDM1LjAgTDI4NS4wIDM1LjAgTDI4NS4wIDYzLjAgTDM1LjAgNjMuMCB6JyBmaWxsPSd3aGl0ZScgc3Ryb2tlPScjMDAwMDAwJyBzdHJva2UtbGluZWNhcD0ncm91bmQnIHN0cm9rZS1saW5lam9pbj0ncm91bmQnIHN0cm9rZS13aWR0aD0nMS4wJy8+PHBhdGggZD0nTTM1LjAgNjMuMCBMMjg1LjAgNjMuMCBMMjg1LjAgOTEuMCBMMzUuMCA5MS4wIHonIGZpbGw9J3doaXRlJyBzdHJva2U9JyMwMDAwMDAnIHN0cm9rZS1saW5lY2FwPSdyb3VuZCcgc3Ryb2tlLWxpbmVqb2luPSdyb3VuZCcgc3Ryb2tlLXdpZHRoPScxLjAnLz48cGF0aCBkPSdNMzY1LjAgNjMuMCBMNTg1LjAgNjMuMCBMNTg1LjAgOTEuMCBMMzY1LjAgOTEuMCB6JyBmaWxsPSd3aGl0ZScgc3Ryb2tlPScjMDAwMDAwJyBzdHJva2UtbGluZWNhcD0ncm91bmQnIHN0cm9rZS1saW5lam9pbj0ncm91bmQnIHN0cm9rZS13aWR0aD0nMS4wJy8+PHBhdGggZD0nTTM2NS4wIDkxLjAgTDU4NS4wIDkxLjAgTDU4NS4wIDExOS4wIEwzNjUuMCAxMTkuMCB6JyBmaWxsPSd3aGl0ZScgc3Ryb2tlPScjMDAwMDAwJyBzdHJva2UtbGluZWNhcD0ncm91bmQnIHN0cm9rZS1saW5lam9pbj0ncm91bmQnIHN0cm9rZS13aWR0aD0nMS4wJy8+PHBhdGggZD0nTTM1MC4wIDcwLjAgTDM2MC4wIDc3LjAgTDM1MC4wIDg0LjAgeicgZmlsbD0nIzAwMDAwMCcgc3Ryb2tlPSdub25lJyBzdHJva2UtbGluZWNhcD0ncm91bmQnIHN0cm9rZS1saW5lam9pbj0ncm91bmQnIHN0cm9rZS13aWR0aD0nMS4wJy8+PHBhdGggZD0nTTIwMC4wIDQ5LjAgTDIwOS4wIDQ5LjAgJyBmaWxsPSdub25lJyBzdHJva2U9JyMwMDAwMDAnIHN0cm9rZS1saW5lY2FwPSdyb3VuZCcgc3Ryb2tlLWxpbmVqb2luPSdyb3VuZCcgc3Ryb2tlLXdpZHRoPScxLjAnLz48cGF0aCBkPSdNNDkwLjAgNzcuMCBMNDk5LjAgNzcuMCAnIGZpbGw9J25vbmUnIHN0cm9rZT0nIzAwMDAwMCcgc3Ryb2tlLWxpbmVjYXA9J3JvdW5kJyBzdHJva2UtbGluZWpvaW49J3JvdW5kJyBzdHJva2Utd2lkdGg9JzEuMCcvPjxwYXRoIGQ9J00yOTUuMCA3Ny4wIEwzNTUuMCA3Ny4wICcgZmlsbD0nbm9uZScgc3Ryb2tlPScjMDAwMDAwJyBzdHJva2UtbGluZWNhcD0ncm91bmQnIHN0cm9rZS1saW5lam9pbj0ncm91bmQnIHN0cm9rZS13aWR0aD0nMS4wJy8+PHRleHQgZmlsbD0nIzAwMDAwMCcgZm9udC1mYW1pbHk9J3NhbnMtc2VyaWYnIGZvbnQtc2l6ZT0nMTUnIHN0cm9rZT0nbm9uZScgeD0nNjEnIHk9JzU0Jz48IVtDREFUQVttYWluLmJ1bmRsZS5qc11dPjwvdGV4dD48dGV4dCBmaWxsPScjMDAwMDAwJyBmb250LWZhbWlseT0nc2Fucy1zZXJpZicgZm9udC1zaXplPScxMycgc3Ryb2tlPSdub25lJyB4PScyMjInIHk9JzU0Jz48IVtDREFUQVsxMDBLQl1dPjwvdGV4dD48dGV4dCBmaWxsPScjMDAwMDAwJyBmb250LWZhbWlseT0nc2Fucy1zZXJpZicgZm9udC1zaXplPScxNScgc3Ryb2tlPSdub25lJyB4PSc2MCcgeT0nODInPjwhW0NEQVRBW2FwcC5yb3V0ZXMudHNdXT48L3RleHQ+PHRleHQgZmlsbD0nIzAwMDAwMCcgZm9udC1mYW1pbHk9J3NhbnMtc2VyaWYnIGZvbnQtc2l6ZT0nMTUnIHN0cm9rZT0nbm9uZScgeD0nMzg4JyB5PSc4Mic+PCFbQ0RBVEFbMC5jaHVuay5qc11dPjwvdGV4dD48dGV4dCBmaWxsPScjMDAwMDAwJyBmb250LWZhbWlseT0nc2Fucy1zZXJpZicgZm9udC1zaXplPScxMycgc3Ryb2tlPSdub25lJyB4PSc1MTEnIHk9JzgyJz48IVtDREFUQVs1MEtCXV0+PC90ZXh0Pjx0ZXh0IGZpbGw9JyMwMDAwMDAnIGZvbnQtZmFtaWx5PSdzYW5zLXNlcmlmJyBmb250LXNpemU9JzE1JyBzdHJva2U9J25vbmUnIHg9JzM5MCcgeT0nMTEwJz48IVtDREFUQVthZG1pbi5yb3V0ZXMudHNdXT48L3RleHQ+PC9nPjwvc3ZnPg==" alt="router lazy bundles" width="610" height="154">
</div>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
Il est en réalité possible de pré-charger les bundles en tâche de fond, après que l&#8217;application ait démarré,
sans attendre que l&#8217;utilisateur ait navigué vers une route <em>lazy</em>, grâce à une <code>preloadingStrategy</code>
alternative.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Pour illustrer comment configurer concrètement un chargement à la demande, nous allons supposer que tu veux définir
une section dédiée aux administrateurs de l&#8217;application, qui doit être chargée à la demande.</p>
</div>
<div class="paragraph">
<p>La première étape consiste à définir un composant <code>admin</code>, et au moins une route pour ce composant dans un ficher <code>admin.routes.ts</code>&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="javascript">export const adminRoutes: Routes = [{ path: '', component: AdminComponent }];</code></pre>
</div>
</div>
<div class="paragraph">
<p>L&#8217;étape finale (et oui, c&#8217;est tout ce qu&#8217;il y a à faire) est d&#8217;ajouter une route dans le fichier de configuration des routes
principales (<code>app.routes.ts</code>), et
d&#8217;indiquer au routeur qu&#8217;il faut charger les routes d&#8217;administration lorsqu&#8217;on navigue vers cette route (ou une des
routes filles qu&#8217;il pourrait avoir)&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="javascript">{ path: 'admin', loadChildren: () =&gt; import('./admin/admin.routes').then(m =&gt; m.adminRoutes) }</code></pre>
</div>
</div>
<div class="paragraph">
<p>Comme tu le constates, ceci est réalisé grâce à la propriété <code>loadChildren</code> de la route d&#8217;administration
et à la fonction d&#8217;import dynamique de TypeScript.</p>
</div>
<div class="paragraph">
<p>Lorsque l&#8217;application est construite, Angular CLI analyse la configuration des routes et détecte que le module
d&#8217;administration doit être chargé à la demande. Sans aucune autre configuration nécessaire, il génère un bundle JavaScript
supplémentaire (nommé <code>0.chunk.js</code>), et génère le code JavaScript nécessaire pour télécharger ce fichier lorsque le routeur
requiert le chargement de <code>'./admin/admin.routes'</code>.</p>
</div>
<div class="paragraph">
<p>Il est même possible de simplifier un peu l&#8217;import
si tu utilises un export <code>default</code> pour le module&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="javascript">const defaultAdminRoutes: Routes = [{ path: '', component: AdminComponent }];
export default defaultAdminRoutes;</code></pre>
</div>
</div>
<div class="paragraph">
<p>Le routeur va alors "désenvelopper" l&#8217;import automatiquement&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="javascript">{ path: 'admin', loadChildren: () =&gt; import('./admin/admin.routes') }</code></pre>
</div>
</div>
<div class="paragraph">
<p>Enfin, si comme dans l&#8217;exemple ci-dessus, il n&#8217;y a qu&#8217;un composant à charger à la demande plutôt qu&#8217;un
ensemble de routes, alors c&#8217;est encore plus simple&#160;:
il n&#8217;y a pas besoin de définir de fichier de routes supplémentaire. Tu peux charger à la demande le composant
lui-même&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="javascript">{ path: 'admin', loadComponent: () =&gt; import('./admin/admin.component').then(m =&gt; m.AdminComponent) }</code></pre>
</div>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<i class="fa icon-tip" title="Mise en pratique"></i>
</td>
<td class="content">
<div class="paragraph">
<p>Essaye notre
<a href="https://angular-exercises.ninja-squad.com/exercises/27/quiz-router">quiz</a> <span class="image"><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAIgAAACACAMAAADnN9ENAAACSVBMVEVMaXH7whr7whr7whr7whr7whr7whr7whr7whr7whr7whr7whp4o614o614o614o637whr7whp4o614o614o614o614o614o614o614o62EoKN4o614o637whqFXFKFXFKQnZm4kni0k3vA1Njr8fLd5+myytB/qLGFXFKFXFKcmY98oqp4o63V4uWFXFKFXFKoloWgmIx4o62Hpqu+nofCpI/b08yFXFKAoaaMnpzYzcSFXFKFXFKUnJaYm5O7mIDl5eOGrbaFXFKGk5Kfd2WSalyYcGClfmqhlIZ6lpx+hIWDaWOFXFKFXFJ/gICkl4nFqpeFXFKFXFKCamSDZV2EYFiDaWOCbmne2dTk7O77whqOZE6Ad3TIsJ6jwMflryWbb0h/gIDo6+rH2dz0vB58jZGIn6Cxgj17kZbOvK2FXFL7whq5iTqVt75/e3rPnC/eqSiMYk+FXFKjdkS4p6Ll6OjLtqbSwrXFubacu8PstSGynZiOsrqLZVzauj/013mrlI56mqLCtFrt69fY1dSApaTrvizz2oafgXqSb2aqxcuhrX/11GvO3uGQeHG5z9T20V7e3t7s7uX4y0P6xSjv5byYeHC+sKyli4TSzMrIzc28wcGwtLVHR0c8OztIR0c1NTWNkJEvLy+NioqTkJCHhISlqKnU2dpCQUGBhIRnZmZeYGBqbGyZnJ07Ozvf5ebLwsCmqapfYGFiYmLAw8Tw9fXs8vNqjZVBTE9PYmY4Pj9deH5mho5GU1Y9RUdhf4ZznKVKW140Njdz5u6AAAAAf3RSTlMAMIBQ7/+fEI/PYL8QcIBAIK+v/7+fz+8wUP/fYEAgEP//////////32D//yD//7///4//////UP///zDv///////P//////////+vj3Ag//+fQJ/////////fz///////////////////gHD///////+v//////////////9AWHP9fwAABxxJREFUeAHs1IVy5DAQBNBZ0DJ3mJUonGiPmZmZmZmZPv6ssb2oFFqHeYUq7LJ7mlatWhWVWDxBf4SkEHH6EwhPKk2/X0Z4sn9AknRSeJIx+u0SguXot8sLliG7QrFUKtOvUEkKVrUXpQZPT6EZrBdAX7FA0YsLX7ZCFv0w+gco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" alt="Pro" width="18"></span>
et nos exercices
<a href="https://angular-exercises.ninja-squad.com/exercises/28/router-guards">Protected routes with guards</a> <span class="image"><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAIgAAACACAMAAADnN9ENAAACSVBMVEVMaXH7whr7whr7whr7whr7whr7whr7whr7whr7whr7whr7whp4o614o614o614o637whr7whp4o614o614o614o614o614o614o614o62EoKN4o614o637whqFXFKFXFKQnZm4kni0k3vA1Njr8fLd5+myytB/qLGFXFKFXFKcmY98oqp4o63V4uWFXFKFXFKoloWgmIx4o62Hpqu+nofCpI/b08yFXFKAoaaMnpzYzcSFXFKFXFKUnJaYm5O7mIDl5eOGrbaFXFKGk5Kfd2WSalyYcGClfmqhlIZ6lpx+hIWDaWOFXFKFXFJ/gICkl4nFqpeFXFKFXFKCamSDZV2EYFiDaWOCbmne2dTk7O77whqOZE6Ad3TIsJ6jwMflryWbb0h/gIDo6+rH2dz0vB58jZGIn6Cxgj17kZbOvK2FXFL7whq5iTqVt75/e3rPnC/eqSiMYk+FXFKjdkS4p6Ll6OjLtqbSwrXFubacu8PstSGynZiOsrqLZVzauj/013mrlI56mqLCtFrt69fY1dSApaTrvizz2oafgXqSb2aqxcuhrX/11GvO3uGQeHG5z9T20V7e3t7s7uX4y0P6xSjv5byYeHC+sKyli4TSzMrIzc28wcGwtLVHR0c8OztIR0c1NTWNkJEvLy+NioqTkJCHhISlqKnU2dpCQUGBhIRnZmZeYGBqbGyZnJ07Ozvf5ebLwsCmqapfYGFiYmLAw8Tw9fXs8vNqjZVBTE9PYmY4Pj9deH5mho5GU1Y9RUdhf4ZznKVKW140Njdz5u6AAAAAf3RSTlMAMIBQ7/+fEI/PYL8QcIBAIK+v/7+fz+8wUP/fYEAgEP//////////32D//yD//7///4//////UP///zDv///////P//////////+vj3Ag//+fQJ/////////fz///////////////////gHD///////+v//////////////9AWHP9fwAABxxJREFUeAHs1IVy5DAQBNBZ0DJ3mJUonGiPmZmZmZmZPv6ssb2oFFqHeYUq7LJ7mlatWhWVWDxBf4SkEHH6EwhPKk2/X0Z4sn9AknRSeJIx+u0SguXot8sLliG7QrFUKtOvUEkKVrUXpQZPT6EZrBdAX7FA0YsLX7ZCFv0w+gco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" alt="Pro" width="18"></span>
,
<a href="https://angular-exercises.ninja-squad.com/exercises/29/router-advanced">Nested routes and redirections</a> <span class="image"><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAIgAAACACAMAAADnN9ENAAACSVBMVEVMaXH7whr7whr7whr7whr7whr7whr7whr7whr7whr7whr7whp4o614o614o614o637whr7whp4o614o614o614o614o614o614o614o62EoKN4o614o637whqFXFKFXFKQnZm4kni0k3vA1Njr8fLd5+myytB/qLGFXFKFXFKcmY98oqp4o63V4uWFXFKFXFKoloWgmIx4o62Hpqu+nofCpI/b08yFXFKAoaaMnpzYzcSFXFKFXFKUnJaYm5O7mIDl5eOGrbaFXFKGk5Kfd2WSalyYcGClfmqhlIZ6lpx+hIWDaWOFXFKFXFJ/gICkl4nFqpeFXFKFXFKCamSDZV2EYFiDaWOCbmne2dTk7O77whqOZE6Ad3TIsJ6jwMflryWbb0h/gIDo6+rH2dz0vB58jZGIn6Cxgj17kZbOvK2FXFL7whq5iTqVt75/e3rPnC/eqSiMYk+FXFKjdkS4p6Ll6OjLtqbSwrXFubacu8PstSGynZiOsrqLZVzauj/013mrlI56mqLCtFrt69fY1dSApaTrvizz2oafgXqSb2aqxcuhrX/11GvO3uGQeHG5z9T20V7e3t7s7uX4y0P6xSjv5byYeHC+sKyli4TSzMrIzc28wcGwtLVHR0c8OztIR0c1NTWNkJEvLy+NioqTkJCHhISlqKnU2dpCQUGBhIRnZmZeYGBqbGyZnJ07Ozvf5ebLwsCmqapfYGFiYmLAw8Tw9fXs8vNqjZVBTE9PYmY4Pj9deH5mho5GU1Y9RUdhf4ZznKVKW140Njdz5u6AAAAAf3RSTlMAMIBQ7/+fEI/PYL8QcIBAIK+v/7+fz+8wUP/fYEAgEP//////////32D//yD//7///4//////UP///zDv///////P//////////+vj3Ag//+fQJ/////////fz///////////////////gHD///////+v//////////////9AWHP9fwAABxxJREFUeAHs1IVy5DAQBNBZ0DJ3mJUonGiPmZmZmZmZPv6ssb2oFFqHeYUq7LJ7mlatWhWVWDxBf4SkEHH6EwhPKk2/X0Z4sn9AknRSeJIx+u0SguXot8sLliG7QrFUKtOvUEkKVrUXpQZPT6EZrBdAX7FA0YsLX7ZCFv0w+gco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" alt="Pro" width="18"></span>
et
<a href="https://angular-exercises.ninja-squad.com/exercises/30/lazy-loading">Lazy loading</a> <span class="image"><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAIgAAACACAMAAADnN9ENAAACSVBMVEVMaXH7whr7whr7whr7whr7whr7whr7whr7whr7whr7whr7whp4o614o614o614o637whr7whp4o614o614o614o614o614o614o614o62EoKN4o614o637whqFXFKFXFKQnZm4kni0k3vA1Njr8fLd5+myytB/qLGFXFKFXFKcmY98oqp4o63V4uWFXFKFXFKoloWgmIx4o62Hpqu+nofCpI/b08yFXFKAoaaMnpzYzcSFXFKFXFKUnJaYm5O7mIDl5eOGrbaFXFKGk5Kfd2WSalyYcGClfmqhlIZ6lpx+hIWDaWOFXFKFXFJ/gICkl4nFqpeFXFKFXFKCamSDZV2EYFiDaWOCbmne2dTk7O77whqOZE6Ad3TIsJ6jwMflryWbb0h/gIDo6+rH2dz0vB58jZGIn6Cxgj17kZbOvK2FXFL7whq5iTqVt75/e3rPnC/eqSiMYk+FXFKjdkS4p6Ll6OjLtqbSwrXFubacu8PstSGynZiOsrqLZVzauj/013mrlI56mqLCtFrt69fY1dSApaTrvizz2oafgXqSb2aqxcuhrX/11GvO3uGQeHG5z9T20V7e3t7s7uX4y0P6xSjv5byYeHC+sKyli4TSzMrIzc28wcGwtLVHR0c8OztIR0c1NTWNkJEvLy+NioqTkJCHhISlqKnU2dpCQUGBhIRnZmZeYGBqbGyZnJ07Ozvf5ebLwsCmqapfYGFiYmLAw8Tw9fXs8vNqjZVBTE9PYmY4Pj9deH5mho5GU1Y9RUdhf4ZznKVKW140Njdz5u6AAAAAf3RSTlMAMIBQ7/+fEI/PYL8QcIBAIK+v/7+fz+8wUP/fYEAgEP//////////32D//yD//7///4//////UP///zDv///////P//////////+vj3Ag//+fQJ/////////fz///////////////////gHD///////+v//////////////9AWHP9fwAABxxJREFUeAHs1IVy5DAQBNBZ0DJ3mJUonGiPmZmZmZmZPv6ssb2oFFqHeYUq7LJ7mlatWhWVWDxBf4SkEHH6EwhPKk2/X0Z4sn9AknRSeJIx+u0SguXot8sLliG7QrFUKtOvUEkKVrUXpQZPT6EZrBdAX7FA0YsLX7ZCFv0w+gco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" alt="Pro" width="18"></span>
pour apprendre les fonctionnalités avancées du routeur.</p>
</div>
</td>
</tr>
</table>
</div>
<div style="page-break-after: always;"></div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="forms">20. Formulaires</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_form_form_form_idable">20.1. Form, form, form-idable&#160;!</h3>
<div class="paragraph">
<p>La gestion des formulaires a toujours été super soignée en Angular.
C&#8217;était une des fonctionnalités les plus mises en avant en 1.x,
et, comme toute application inclut en général des formulaires, elle a gagné le cœur de beaucoup de développeurs.</p>
</div>
<div class="imageblock text-center">
<div class="content">
<img src="data:image/png;base64,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" alt="Formulaires">
</div>
</div>
<div class="paragraph">
<p>Les formulaires, c&#8217;est compliqué&#160;: tu dois valider les saisies de l&#8217;utilisateur,
afficher les erreurs correspondantes, tu peux avoir des champs obligatoires ou non,
ou qui dépendent d&#8217;un autre champ, tu veux pouvoir réagir sur les changements de certains, etc.
On a aussi besoin de tester ces formulaires, et c&#8217;était impossible dans un test unitaire en AngularJS&#160;1.x.
C&#8217;était seulement possible avec un test end-to-end, ce qui peut être lent.</p>
</div>
<div class="paragraph">
<p>En Angular, le même soin a été appliqué aux formulaires,
et le framework nous propose une façon élégante d&#8217;écrire nos formulaires.
En fait, il en propose même deux&#160;!</p>
</div>
<div class="paragraph">
<p>Tu peux écrire ton formulaire en utilisant seulement des directives dans ton template&#160;:
c&#8217;est la façon "pilotée par le template".
D&#8217;après notre expérience, c&#8217;est particulièrement utile pour des formulaires simples, sans trop de validation.</p>
</div>
<div class="paragraph">
<p>L&#8217;autre façon de procéder est la façon "pilotée par le code", où tu écris une description du formulaire
dans ton composant, puis utilises ensuite des directives pour lier ce formulaire aux inputs/textareas/selects de ton template.
C&#8217;est plus verbeux, mais aussi plus puissant, notamment pour faire de la validation custom,
ou pour générer des formulaires dynamiquement.</p>
</div>
<div class="paragraph">
<p>Alors prenons un cas d&#8217;utilisation, codons-le de chacune des deux façons, et étudions les différences.</p>
</div>
<div class="paragraph">
<p>On va écrire un formulaire simple, pour enregistrer de nouveaux utilisateurs dans
notre merveilleuse application PonyRacer. Comme on a besoin d&#8217;un composant de base
pour chacun des cas d&#8217;utilisation, commençons par celui-ci&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="javascript">import { Component } from '@angular/core';

@Component({
  selector: 'ns-register',
  template: `
    &lt;h2&gt;Sign up&lt;/h2&gt;
    &lt;form&gt;&lt;/form&gt;
  `
})
export class RegisterFormComponent {}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Rien d&#8217;extraordinaire&#160;: un composant avec un simple template contenant un formulaire.
Dans les minutes qui viennent, on y ajoutera les champs permettant d&#8217;enregistrer un utilisateur
avec un nom et un mot de passe.</p>
</div>
<div class="paragraph">
<p>Quelque soit la méthode choisie (piloté par le template ou par le code),
Angular crée une représentation de notre formulaire.</p>
</div>
<div class="paragraph">
<p>Dans la méthode "pilotée par le template", c&#8217;est automatique&#160;:
on a juste besoin d&#8217;ajouter les bonnes directives dans le template
et le framework s&#8217;occupe de créer la représentation du formulaire.</p>
</div>
<div class="paragraph">
<p>Dans la méthode "pilotée par le code", on crée cette représentation manuellement,
et on lie ensuite la représentation du formulaire aux inputs en utilisant des directives.</p>
</div>
<div class="paragraph">
<p>Sous le capot, un champ du formulaire, comme un <code>input</code> ou un <code>select</code>, sera représenté par un <code>FormControl</code> en Angular.
C&#8217;est la plus petite partie d&#8217;un formulaire, et il encapsule l&#8217;état du champ et sa valeur.</p>
</div>
<div class="paragraph">
<p>Un <code>FormControl</code> a plusieurs attributs&#160;:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>valid</code>&#160;: si le champ est valide, au regard des contraintes et des validations qui lui sont appliquées.</p>
</li>
<li>
<p><code>invalid</code>&#160;: si le champ est invalide, au regard des contraintes et des validations qui lui sont appliquées.</p>
</li>
<li>
<p><code>errors</code>&#160;: un objet contenant les erreurs du champ.</p>
</li>
<li>
<p><code>dirty</code>&#160;: <code>false</code> jusqu&#8217;à ce que l&#8217;utilisateur modifie la valeur du champ.</p>
</li>
<li>
<p><code>pristine</code>&#160;: l&#8217;opposé de <code>dirty</code>.</p>
</li>
<li>
<p><code>touched</code>&#160;: <code>false</code> jusqu&#8217;à ce que l&#8217;utilisateur soit entré dans le champ.</p>
</li>
<li>
<p><code>untouched</code>&#160;: l&#8217;opposé de <code>touched</code>.</p>
</li>
<li>
<p><code>value</code>&#160;: la valeur du champ.</p>
</li>
<li>
<p><code>valueChanges</code>&#160;: un <em>Observable</em> qui émet à chaque changement de valeur du contrôle.</p>
</li>
<li>
<p><code>statusChanges</code>: un <em>Observable</em> qui émet à chaque changement de statut du contrôle.</p>
</li>
<li>
<p><code>events</code>: un <em>Observable</em> qui émet à chaque changement de valeur ou d&#8217;état du contrôle.
C&#8217;est un ajout d&#8217;Angular&#160;v18 et permet de gérer les changements de valeur, de statut, de <em>pristine</em>, de <em>touched</em>
ou de savoir si le formulaire a été remis à zéro ou soumis.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Il propose aussi quelques méthodes comme <code>hasError()</code> pour savoir si le contrôle a une erreur donnée.</p>
</div>
<div class="paragraph">
<p>Tu peux ainsi écrire des trucs comme&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="javascript">const password = new FormControl('');
console.log(password.dirty); // false until the user enters a value
console.log(password.value); // '' until the user enters a value
console.log(password.hasError('required')); // false
password.disable(); // disables the control
password.reset(); // resets the value</code></pre>
</div>
</div>
<div class="paragraph">
<p>Note que tu peux passer un paramètre au constructeur, qui deviendra sa valeur initiale.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="javascript">const password = new FormControl('Cédric');
console.log(password.value); // logs "Cédric"</code></pre>
</div>
</div>
<div class="paragraph">
<p>Ces contrôles peuvent être regroupés dans un <code>FormGroup</code> ("groupe de formulaire") pour constituer une partie du formulaire
qui a des règles de validation communes. Un formulaire lui-même est un groupe de contrôle.</p>
</div>
<div class="paragraph">
<p>Un <code>FormGroup</code> a les mêmes propriétés qu&#8217;un <code>FormControl</code>, avec quelques différences&#160;:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>valid</code>&#160;: si tous les champs sont valides, alors le groupe est valide.</p>
</li>
<li>
<p><code>invalid</code>&#160;: si l&#8217;un des champs est invalide, alors le groupe est invalide.</p>
</li>
<li>
<p><code>errors</code>&#160;: un objet contenant les erreurs du groupe, ou <code>null</code> si le groupe est entièrement valide.
Chaque erreur en constitue la clé, et la valeur associée est un tableau contenant chaque contrôle affecté par cette erreur.</p>
</li>
<li>
<p><code>dirty</code>&#160;: <code>false</code> jusqu&#8217;à ce qu&#8217;un des contrôles devienne "dirty".</p>
</li>
<li>
<p><code>pristine</code>&#160;: l&#8217;opposé de <code>dirty</code>.</p>
</li>
<li>
<p><code>touched</code>&#160;: <code>false</code> jusqu&#8217;à ce qu&#8217;un des contrôles devienne "touched".</p>
</li>
<li>
<p><code>untouched</code>&#160;: l&#8217;opposé de <code>touched</code>.</p>
</li>
<li>
<p><code>value</code>&#160;: la valeur du groupe. Pour être plus précis, c&#8217;est un objet dont les clé/valeurs sont les contrôles et leur valeur respective.</p>
</li>
<li>
<p><code>valueChanges</code>&#160;: un <code>Observable</code> qui émet à chaque changement sur un contrôle du groupe.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Un groupe propose les mêmes méthodes qu&#8217;un <code>FormControl</code>, comme <code>hasError()</code>.
Il a aussi une méthode <code>get()</code> pour récupérer un contrôle dans le groupe.</p>
</div>
<div class="paragraph">
<p>Tu peux en créer un comme cela&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="javascript">const form = new FormGroup({
  username: new FormControl('Cédric'),
  password: new FormControl('')
});
console.log(form.dirty); // logs false until the user enters a value
console.log(form.value); // logs Object {username: "Cédric", password: ''}
console.log(form.controls.username); // logs the Control</code></pre>
</div>
</div>
<div class="paragraph">
<p>Commençons avec un formulaire piloté par le template&#160;!</p>
</div>
</div>
<div class="sect2">
<h3 id="_formulaire_piloté_par_le_template">20.2. Formulaire piloté par le template</h3>
<div class="paragraph">
<p>Dans cette méthode, on va mettre en œuvre un paquet de directives dans notre formulaire,
et laisser le framework construire les instances de <code>FormControl</code> et <code>FormGroup</code> nécessaires.
Par exemple, la directive <code>NgForm</code> qui transforme l&#8217;élément <code>&lt;form&gt;</code> en sa
version Angular super-puissante&#160;: tu peux le voir comme la différence entre Bruce Wayne et Batman.</p>
</div>
<div class="paragraph">
<p>Toutes ces directives sont incluses dans le module <code>FormsModule</code>.
Nous devons donc l&#8217;importer dans chaque composant qui utilise un formulaire piloté par le template.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
Au contraire des directives de <code>CommonModule</code> et <code>RouterModule</code>, qui sont <em>standalone</em>, les directives
de <code>FormsModule</code> ne le sont pas. Donc on ne peut pas les importer une par une dans les composants.
Le module <code>FormsModule</code> tout entier doit être importé.
</td>
</tr>
</table>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="html">import { Component } from '@angular/core';
import { FormsModule } from '@angular/forms';

@Component({
  selector: 'ns-register',
  template: `
    &lt;h2&gt;Sign up&lt;/h2&gt;
    &lt;form&gt;&lt;/form&gt;
  `,
  imports: [FormsModule]
})
export class RegisterFormComponent {}</code></pre>
</div>
</div>
<div class="paragraph">
<p><code>FormsModule</code> contient les directives pour la façon "pilotée par le template".
Nous verrons plus tard qu&#8217;il existe un autre module, <code>ReactiveFormsModule</code>,
dans le même package <code>@angular/forms</code>, qui est nécessaire pour la façon "pilotée par le code".</p>
</div>
<div class="paragraph">
<p>Ajoutons un bouton <em>submit</em>&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="javascript">import { Component } from '@angular/core';
import { FormsModule } from '@angular/forms';

@Component({
  selector: 'ns-register',
  template: `
    &lt;h2&gt;Sign up&lt;/h2&gt;
    &lt;form (ngSubmit)="register()"&gt;
      &lt;button type="submit"&gt;Register&lt;/button&gt;
    &lt;/form&gt;
  `,
  imports: [FormsModule]
})
export class RegisterFormComponent {
  register(): void {
    // we will have to handle the submission
  }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>J&#8217;ai ajouté un bouton, et défini un handler d&#8217;événement <code>ngSubmit</code> sur l&#8217;élément <code>&lt;form&gt;</code>.
L&#8217;événement <code>ngSubmit</code> est émis par la directive <code>form</code> lors de la soumission du formulaire.
Cela invoquera la méthode <code>register()</code> de notre composant, qu&#8217;on implémentera plus tard.</p>
</div>
<div class="paragraph">
<p>Tu te demandes peut-être pourquoi il y a une directive <code>NgForm</code> sur l&#8217;élément <code>form</code>,
alors qu&#8217;il ne porte aucun attribut particulier. C&#8217;est simplement parce que le sélecteur
de la directive <code>NgForm</code> est <code>form</code> (il est en fait un peu plus spécifique que cela),
ce qui signifie que chaque élément HTML <code>&lt;form&gt;</code> déclenche la création d&#8217;une directive
<code>NgForm</code>, pour autant que le <code>FormsModule</code> ait été importé.</p>
</div>
<div class="paragraph">
<p>Une dernière chose&#160;: comme notre template va rapidement grossir, extrayons-le
tout de suite dans un fichier dédié, grâce à <code>templateUrl</code>&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="javascript">import { Component } from '@angular/core';
import { FormsModule } from '@angular/forms';

@Component({
  selector: 'ns-register',
  templateUrl: './register-form.component.html',
  imports: [FormsModule]
})
export class RegisterFormComponent {
  register(): void {
    // we will have to handle the submission
  }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Dans la façon "pilotée par le template", tu écris tes formulaires à peu près comme tu l&#8217;aurais fait en AngularJS&#160;1.x,
avec beaucoup de trucs dans ton template et peu dans ton composant.</p>
</div>
<div class="paragraph">
<p>Dans sa forme la plus simple, tu ajoutes simplement les directives <code>ngModel</code> dans le template, et c&#8217;est tout.
La directive <code>ngModel</code> crée le <code>FormControl</code> pour toi,
et le <code>&lt;form&gt;</code> crée automatiquement le <code>FormGroup</code>.
Note que tu dois donner un <code>name</code> à l&#8217;input,
qui sera utilisé par le framework pour construire le <code>FormGroup</code>.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="html">&lt;h2&gt;Sign up&lt;/h2&gt;
&lt;form (ngSubmit)="register()"&gt;
  &lt;div&gt;
    &lt;label&gt;Username&lt;/label&gt;&lt;input name="username" ngModel&gt;
  &lt;/div&gt;
  &lt;div&gt;
    &lt;label&gt;Password&lt;/label&gt;&lt;input type="password" name="password" ngModel&gt;
  &lt;/div&gt;
  &lt;button type="submit"&gt;Register&lt;/button&gt;
&lt;/form&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>Maintenant, on doit évidemment faire quelque-chose pour la soumission, et récupérer les valeurs saisies.
Pour cela, on va utiliser une variable locale et lui assigner l&#8217;objet <code>NgForm</code> créé par Angular pour le formulaire.
Tu te rappelles le chapitre
<a href="#local-variables">Template</a>
&#160;?
On va définir une variable, <code>userForm</code>, qui référencera le formulaire.
C&#8217;est possible parce que la directive exporte l&#8217;instance de la directive <code>NgForm</code>,
qui a les mêmes méthodes que la classe <code>FormGroup</code>.
On verra comment exporter des données plus en détail quand on étudiera comment construire des directives.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="html">&lt;h2&gt;Sign up&lt;/h2&gt;
&lt;!-- we use a local variable #userForm --&gt;
&lt;!-- and give its value to the register method --&gt;
&lt;form (ngSubmit)="register(userForm.value)" #userForm="ngForm"&gt;
  &lt;div&gt;
    &lt;label&gt;Username&lt;/label&gt;&lt;input name="username" ngModel&gt;
  &lt;/div&gt;
  &lt;div&gt;
    &lt;label&gt;Password&lt;/label&gt;&lt;input type="password" name="password" ngModel&gt;
  &lt;/div&gt;
  &lt;button type="submit"&gt;Register&lt;/button&gt;
&lt;/form&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>Notre méthode <code>register</code> est désormais appelée avec la valeur du formulaire en paramètre&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="javascript">import { Component } from '@angular/core';
import { FormsModule } from '@angular/forms';
import { UserModel } from './user.model';

@Component({
  selector: 'ns-register',
  templateUrl: '../code/register-form.component.html',
  imports: [FormsModule]
})
export class RegisterFormComponent {
  register(user: UserModel): void {
    console.log(user);
  }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>C&#8217;est seulement du binding uni-directionnel cependant.
Si tu mets à jour le champ, le modèle sera mis à jour,
mais mettre à jour le modèle ne mettra pas à jour la valeur du champ.
Mais <code>ngModel</code> est plus puissant qu&#8217;on ne le croit&#160;!</p>
</div>
<div class="sect3">
<h4 id="_binding_bi_directionnel">20.2.1. Binding bi-directionnel</h4>
<div class="paragraph">
<p>Si tu as utilisé AngularJS&#160;1.x, ou même juste lu un article dessus,
tu as du voir le fameux exemple avec un champ et une expression affichant la valeur de celui-ci,
qui se mettait à jour toute seule dès que l&#8217;utilisateur entrait une valeur dans le champ,
et le champ se mettant à jour automatiquement dès que le modèle changeait.
Le fameux "Binding Bi-directionnel", quelque chose comme&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="html">&lt;!-- AngularJS 1.x code example --&gt;
&lt;input type="text" ng-model="username"&gt;
&lt;p&gt;{{ username }}&lt;/p&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>On peut faire quelque chose de similaire en Angular.</p>
</div>
<div class="paragraph">
<p>Tu commences par définir un modèle de ce qui sera saisi dans le formulaire.
On va faire cela dans une interface <code>UserModel</code>&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="javascript">export interface UserModel {
  username: string;
  password: string;
}</code></pre>
</div>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
Nous n&#8217;utilisons pas de signaux dans ces exemples,
car chaque propriété de <code>UserModel</code> devrait être un signal,
ce qui n&#8217;est pas super ergonomique (mais faisable).
On peut imaginer que la situation s&#8217;améliorera
quand les formulaires seront retravaillés dans Angular pour mieux gérer les signaux.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Notre <code>RegisterFormComponent</code> doit avoir un attribut <code>user</code> de type <code>UserModel</code>&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="javascript">@Component({
  selector: 'ns-register',
  templateUrl: './register-form.component.html',
  imports: [FormsModule]
})
export class RegisterFormComponent {
  readonly user: UserModel = {
    username: '',
    password: ''
  };

  register(): void {
    console.log(this.user);
  }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Comme tu peux le voir, la méthode <code>register()</code> trace désormais directement l&#8217;objet <code>user</code>.</p>
</div>
<div class="paragraph">
<p>On est donc prêt à ajouter les champs dans notre formulaire.
Il nous faut lier les champs au modèle défini.
Et pour cela, il y a donc la directive <code>ngModel</code>&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="html">&lt;h2&gt;Sign up&lt;/h2&gt;
&lt;form (ngSubmit)="register()"&gt;
  &lt;div&gt;
    &lt;label&gt;Username&lt;/label&gt;&lt;input name="username" [(ngModel)]="user.username"&gt;
  &lt;/div&gt;
  &lt;div&gt;
    &lt;label&gt;Password&lt;/label&gt;&lt;input type="password" name="password" [(ngModel)]="user.password"&gt;
  &lt;/div&gt;
  &lt;button type="submit"&gt;Register&lt;/button&gt;
&lt;/form&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>Wow&#160;! <code>[(ngModel)]</code>&#160;? Qu&#8217;est-ce que c&#8217;est que ce truc&#160;?!
Ce n&#8217;est que du sucre syntaxique ajouté pour exprimer la même chose que&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="html">&lt;input name="username" [ngModel]="user.username" (ngModelChange)="user.username = $event"&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>La directive <code>NgModel</code> met à jour la valeur de l'<code>input</code> à chaque changement du modèle lié <code>user.username</code>,
d&#8217;où la partie <code>[ngModel]="user.username"</code>.
Et elle génère un événement depuis un output nommé <code>ngModelChange</code> à chaque fois que l'<code>input</code> est modifié par l&#8217;utilisateur,
où l&#8217;événement est la nouvelle valeur,
d&#8217;où la partie <code>(ngModelChange)="user.username = $event"</code>,
qui met donc à jour le modèle <code>user.username</code> avec la valeur saisie.</p>
</div>
<div class="paragraph">
<p>Au lieu d&#8217;écrire cette forme verbeuse, on peut donc utiliser la syntaxe raccourcie <code>[()]</code>.
Si, comme moi, tu as du mal à te rappeler si c&#8217;est <code>[()]</code> ou <code>([])</code>,
il y a un très bon moyen mnémotechnique : c&#8217;est une boîte de bananes&#160;!
Mais si, regarde&#160;: le <code>[]</code> est une boîte, et, dedans, il y a deux bananes qui se regardent <code>()</code>&#160;!</p>
</div>
<div class="paragraph">
<p>Maintenant chaque fois qu&#8217;on tapera quelque chose dans le champ,
le modèle sera mis à jour.
Et si le modèle est mis à jour dans notre composant,
le champ affichera automatiquement la nouvelle valeur&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="html">&lt;h2&gt;Sign up&lt;/h2&gt;
&lt;form (ngSubmit)="register()"&gt;
  &lt;div&gt;
    &lt;label&gt;Username&lt;/label&gt;&lt;input name="username" [(ngModel)]="user.username"&gt;
    &lt;small&gt;{{ user.username }} is an awesome username!&lt;/small&gt;
  &lt;/div&gt;
  &lt;div&gt;
    &lt;label&gt;Password&lt;/label&gt;&lt;input type="password" name="password" [(ngModel)]="user.password"&gt;
  &lt;/div&gt;
  &lt;button type="submit"&gt;Register&lt;/button&gt;
&lt;/form&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>Si tu essayes l&#8217;exemple ci-dessus, tu verras que le binding bi-directionnel fonctionne.
Et notre formulaire aussi&#160;: si on le soumet, le composant tracera notre objet <code>user</code>&#160;!</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_formulaire_piloté_par_le_code">20.3. Formulaire piloté par le code</h3>
<div class="paragraph">
<p>En AngularJS&#160;1.x, tu devais essentiellement construire tes formulaires dans tes templates.
Angular introduit une déclaration impérative, qui permet de construire les formulaires programmatiquement.</p>
</div>
<div class="paragraph">
<p>Désormais, on peut manipuler les formulaires directement depuis le code.
C&#8217;est plus verbeux mais plus puissant.</p>
</div>
<div class="paragraph">
<p>Pour construire un formulaire dans notre code, nous allons utiliser les abstractions dont nous avons parlé:
<code>FormControl</code> et <code>FormGroup</code>.</p>
</div>
<div class="paragraph">
<p>Avec ces briques de bases on peut construire un formulaire dans notre composant.
Mais au lieu d&#8217;utiliser <code>new FormControl()</code> ou <code>new FormGroup()</code>,
on va utiliser une classe utilitaire, <code>FormBuilder</code>, qu&#8217;on peut s&#8217;injecter&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="javascript">import { Component, inject } from '@angular/core';
import { FormBuilder, ReactiveFormsModule } from '@angular/forms';

@Component({
  selector: 'ns-register',
  templateUrl: './register-form.component.html',
  imports: [ReactiveFormsModule]
})
export class RegisterFormComponent {
  private readonly fb = inject(FormBuilder);
  // we will have to build the form

  register(): void {
    // we will have to handle the submission
  }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p><code>FormBuilder</code> est une classe utilitaire, avec plein de méthodes bien pratiques pour créer
des contrôles et des groupes.
Faisons simple, et créons un petit formulaire avec deux contrôles, un nom d&#8217;utilisateur et un mot de passe.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="javascript">import { Component, inject } from '@angular/core';
import { FormBuilder, ReactiveFormsModule } from '@angular/forms';

@Component({
  selector: 'ns-register',
  templateUrl: './register-form.component.html',
  imports: [ReactiveFormsModule]
})
export class RegisterFormComponent {
  private readonly fb = inject(FormBuilder);
  readonly userForm = this.fb.group({
    username: '',
    password: ''
  });
  // `userForm` is of type `FormGroup&lt;{
  //   username: FormControl&lt;string | null&gt;;
  //   password: FormControl&lt;string | null&gt;;
  // }&gt;`

  register(): void {
    // we will have to handle the submission
  }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>On a créé un <code>&lt;form&gt;</code> avec deux contrôles.
Tu peux voir que chaque contrôle est créé avec la valeur <code>''</code>.
C&#8217;est la même chose que d&#8217;utiliser la méthode <code>control()</code> du <code>FormBuilder</code> avec cette chaîne de caractères comme paramètre,
et la même chose que d&#8217;appeler le constructeur <code>new FormControl('')</code>&#160;:
la chaîne de caractères représente la valeur initiale que nous voulons afficher dans le formulaire.
Ici elle est vide, donc l&#8217;input sera vide.
Mais tu peux mettre une valeur bien sûr, si tu veux éditer une entité existante par exemple.
La méthode utilitaire peut aussi recevoir d&#8217;autres attributs, que nous verrons plus tard.</p>
</div>
<div class="paragraph">
<p>On veut maintenant implémenter la méthode <code>register</code>.
Comme on l&#8217;a vu, l&#8217;objet <code>FormGroup</code> a un attribut <code>value</code>, alors on peut facilement tracer son contenu avec&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="javascript">import { Component, inject } from '@angular/core';
import { FormBuilder, ReactiveFormsModule } from '@angular/forms';

@Component({
  selector: 'ns-register',
  templateUrl: './register-form.component.html',
  imports: [ReactiveFormsModule]
})
export class RegisterFormComponent {
  private readonly fb = inject(FormBuilder);
  readonly userForm = this.fb.group({
    username: '',
    password: ''
  });

  register(): void {
    console.log(this.userForm.value);
  }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>On veut maintenant affiner un peu le template.
On va utiliser d&#8217;autres directives que celles que nous avons dans les formulaires "pilotés par le template".
Ces directives sont dans le module <code>ReactiveFormsModule</code> que nous devons importer dans notre composant.
Leurs noms commencent par <code>form</code> au lieu de <code>ng</code> comme c&#8217;était le cas avec la façon "pilotée par le template".</p>
</div>
<div class="paragraph">
<p>Le formulaire doit être relié à notre objet <code>userForm</code>, grâce à la directive <code>formGroup</code>.
Chaque champ de saisie est relié à un <code>FormControl</code>, grâce à la directive <code>formControlName</code>&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="html">&lt;h2&gt;Sign up&lt;/h2&gt;
&lt;form (ngSubmit)="register()" [formGroup]="userForm"&gt;
  &lt;div&gt;
    &lt;label&gt;Username&lt;/label&gt;&lt;input formControlName="username"&gt;
  &lt;/div&gt;
  &lt;div&gt;
    &lt;label&gt;Password&lt;/label&gt;&lt;input type="password" formControlName="password"&gt;
  &lt;/div&gt;
  &lt;button type="submit"&gt;Register&lt;/button&gt;
&lt;/form&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>On utilise la notation avec crochets <code>[formGroup]="userForm"</code> pour relier notre objet <code>userForm</code> à <code>formGroup</code>.
Chaque <code>input</code> reçoit la directive <code>formControlName</code> avec pour valeur le nom du contrôle auquel il est relié.
Si tu indiques un nom qui n&#8217;existe pas, tu auras une erreur.
Comme on passe une valeur (et pas une expression), on n&#8217;utilise pas les <code>[]</code> autour de <code>formControlName</code>.</p>
</div>
<div class="paragraph">
<p>Et c&#8217;est tout&#160;: un clic sur le bouton <em>submit</em> va tracer un objet contenant le nom d&#8217;utilisateur et le mot de passe choisi&#160;!</p>
</div>
<div class="paragraph">
<p>Si tu en as besoin, tu peux mettre à jour la valeur d&#8217;un <code>FormControl</code> depuis ton composant en utilisant <code>setValue()</code>&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="javascript">import { Component, inject } from '@angular/core';
import { FormBuilder, ReactiveFormsModule } from '@angular/forms';

@Component({
  selector: 'ns-register',
  templateUrl: './register-form.component.html',
  imports: [ReactiveFormsModule]
})
export class RegisterFormComponent {
  private readonly fb = inject(FormBuilder);
  readonly usernameCtrl = this.fb.control('');
  readonly passwordCtrl = this.fb.control('');
  readonly userForm = this.fb.group({
    username: this.usernameCtrl,
    password: this.passwordCtrl
  });

  setAnotherNinja(): void {
    this.usernameCtrl.setValue('JB');
  }

  register(): void {
    console.log(this.userForm.value);
  }
}</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_un_peu_de_validation">20.4. Un peu de validation</h3>
<div class="paragraph">
<p>La validation de données est traditionnellement une partie importante de la construction de formulaire.
Certains champs sont obligatoires, certains dépendent d&#8217;autres,
certains doivent respecter un format spécifique,
certains ne doivent pas avoir de valeur plus grande ou plus petite que X, par exemple.</p>
</div>
<div class="paragraph">
<p>Commençons par ajouter quelques règles basiques&#160;: tous nos champs sont obligatoires.</p>
</div>
<div class="sect3">
<h4 id="_dans_un_formulaire_piloté_par_le_code">20.4.1. Dans un formulaire piloté par le code</h4>
<div class="paragraph">
<p>Pour spécifier que chaque champ est requis, on va utiliser <code>Validator</code>.
Un validateur retourne une <em>map</em> des erreurs, ou <code>null</code> si aucune n&#8217;a été détectée.</p>
</div>
<div class="paragraph">
<p>Quelques validateurs sont fournis par le framework&#160;:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>Validators.required</code> pour vérifier qu&#8217;un contrôle n&#8217;est pas vide&#160;;</p>
</li>
<li>
<p><code>Validators.minLength(n)</code> pour s&#8217;assurer que la valeur entrée a au moins <em>n</em> caractères&#160;;</p>
</li>
<li>
<p><code>Validators.maxLength(n)</code> pour s&#8217;assurer que la valeur entrée a au plus <em>n</em> caractères&#160;;</p>
</li>
<li>
<p><code>Validators.email()</code> (disponible depuis la version 4.0) pour s&#8217;assurer que la valeur entrée est une adresse email valide
(bon courage pour trouver l&#8217;expression régulière par vous-même&#8230;&#8203;)&#160;;</p>
</li>
<li>
<p><code>Validators.min(n)</code> (disponible depuis la version 4.2) pour s&#8217;assurer que la valeur entrée vaut au moins <em>n</em>&#160;;</p>
</li>
<li>
<p><code>Validators.max(n)</code> (disponible depuis la version 4.2) pour s&#8217;assurer que la valeur entrée vaut au plus <em>n</em>&#160;;</p>
</li>
<li>
<p><code>Validators.pattern(p)</code> pour s&#8217;assurer que la valeur entrée correspond à l&#8217;expression régulière <em>p</em> définie.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Les validateurs peuvent être multiples, en passant un tableau,
et peuvent s&#8217;appliquer sur un <code>FormControl</code> ou un <code>FormGroup</code>.
Comme on veut que tous les champs soient obligatoires, on peut ajouter
le validator <code>required</code> sur chaque contrôle,
et s&#8217;assurer que le nom de l&#8217;utilisateur fait 3 caractères au minimum.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="javascript">import { Component, inject } from '@angular/core';
import { FormBuilder, ReactiveFormsModule, Validators } from '@angular/forms';

@Component({
  selector: 'ns-register',
  templateUrl: './register-form.component.html',
  imports: [ReactiveFormsModule]
})
export class RegisterFormComponent {
  private readonly fb = inject(FormBuilder);
  readonly userForm = this.fb.group({
    username: this.fb.control('', [Validators.required, Validators.minLength(3)]),
    password: this.fb.control('', Validators.required)
  });

  register(): void {
    console.log(this.userForm.value);
  }
}</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_dans_un_formulaire_piloté_par_le_template">20.4.2. Dans un formulaire piloté par le template</h4>
<div class="paragraph">
<p>Ajouter un champ requis dans un formulaire piloté par le template est aussi rapide.
Il suffit de rajouter l&#8217;attribut <code>required</code> sur les <code>&lt;input&gt;</code>.
<code>required</code> est une directive fournie par le framework, qui ajoutera automatiquement le validateur sur le champ.
Même chose avec <code>minlength</code>, <code>maxlength</code>, et <code>email</code>
(<code>min</code> et <code>max</code> ne sont en revanche pas encore disponibles comme des directives).</p>
</div>
<div class="paragraph">
<p>En partant de l&#8217;exemple de binding bi-directionnel&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="html">&lt;h2&gt;Sign up&lt;/h2&gt;
&lt;form (ngSubmit)="register(userForm.value)" #userForm="ngForm"&gt;
  &lt;div&gt;
    &lt;label&gt;Username&lt;/label&gt;&lt;input name="username" ngModel required minlength="3"&gt;
  &lt;/div&gt;
  &lt;div&gt;
    &lt;label&gt;Password&lt;/label&gt;&lt;input type="password" name="password" ngModel required&gt;
  &lt;/div&gt;
  &lt;button type="submit"&gt;Register&lt;/button&gt;
&lt;/form&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>Note que cela peut s&#8217;utiliser dans un formulaire piloté par le code également.</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_erreurs_et_soumission">20.5. Erreurs et soumission</h3>
<div class="paragraph">
<p>Évidemment, on veut que l&#8217;utilisateur ne puisse pas soumettre le formulaire tant qu&#8217;il reste des erreurs,
et ces erreurs doivent être parfaitement affichées.</p>
</div>
<div class="paragraph">
<p>Si tu utilises les exemples plus haut, tu verras que même si les champs sont requis,
on peut quand même soumettre le formulaire. Peut-être qu&#8217;on peut y faire quelque chose&#160;?</p>
</div>
<div class="paragraph">
<p>On sait qu&#8217;on peut facilement désactiver un bouton avec l&#8217;attribut <code>disabled</code>,
mais encore faut-il lui passer une expression qui reflète l&#8217;état de validité du formulaire courant.</p>
</div>
<div class="sect3">
<h4 id="_erreurs_et_soumission_dans_un_formulaire_piloté_par_le_code">20.5.1. Erreurs et soumission dans un formulaire piloté par le code</h4>
<div class="paragraph">
<p>Nous avons ajouté un champ <code>userForm</code>, du type <code>FormGroup</code>&#160;, à notre composant.
Ce champ fournit une vision complète de l&#8217;état du formulaire et de ses champs, incluant ses erreurs de validation.</p>
</div>
<div class="paragraph">
<p>Par exemple, on peut désactiver la soumission si le formulaire n&#8217;est pas valide&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="html">&lt;h2&gt;Sign up&lt;/h2&gt;
&lt;form (ngSubmit)="register()" [formGroup]="userForm"&gt;
  &lt;div&gt;
    &lt;label&gt;Username&lt;/label&gt;&lt;input formControlName="username"&gt;
  &lt;/div&gt;
  &lt;div&gt;
    &lt;label&gt;Password&lt;/label&gt;&lt;input type="password" formControlName="password"&gt;
  &lt;/div&gt;
  &lt;button type="submit" [disabled]="userForm.invalid"&gt;Register&lt;/button&gt;
&lt;/form&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>Comme tu le vois dans la dernière ligne, il suffit de lier <code>disabled</code> à la propriété <code>invalid</code> du <code>userForm</code>.</p>
</div>
<div class="paragraph">
<p>Désormais, on ne pourra soumettre que si tous les contrôles sont valides.
Pour informer l&#8217;utilisateur de la raison de cette impossibilité, il faut encore afficher les messages d&#8217;erreur.</p>
</div>
<div class="paragraph">
<p>Toujours grâce au <code>userForm</code>, on peut écrire&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="html">&lt;h2&gt;Sign up&lt;/h2&gt;
&lt;form (ngSubmit)="register()" [formGroup]="userForm"&gt;
  &lt;div&gt;
    &lt;label&gt;Username&lt;/label&gt;&lt;input formControlName="username"&gt;
    @if (userForm.controls.username.hasError('required')) {
      &lt;div&gt;Username is required&lt;/div&gt;
    }
    @if (userForm.controls.username.hasError('minlength')) {
      &lt;div&gt;Username should be 3 characters min&lt;/div&gt;
    }
  &lt;/div&gt;
  &lt;div&gt;
    &lt;label&gt;Password&lt;/label&gt;&lt;input type="password" formControlName="password"&gt;
    @if (userForm.controls.password.hasError('required')) {
      &lt;div&gt;Password is required&lt;/div&gt;
    }
  &lt;/div&gt;
  &lt;button type="submit" [disabled]="userForm.invalid"&gt;Register&lt;/button&gt;
&lt;/form&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>Cool&#160;! Les erreurs sont désormais affichées si les champs sont vides,
et elles disparaissent quand ils ont une valeur. Mais elles sont affichées dès
l&#8217;apparition du formulaire. Peut-être qu&#8217;on devrait les masquer jusqu&#8217;à ce que
l&#8217;utilisateur remplisse une valeur&#160;?</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="html">&lt;h2&gt;Sign up&lt;/h2&gt;
&lt;form (ngSubmit)="register()" [formGroup]="userForm"&gt;
  &lt;div&gt;
    &lt;label&gt;Username&lt;/label&gt;&lt;input formControlName="username"&gt;
    @if (userForm.controls.username.dirty &amp;&amp; userForm.controls.username.hasError('required')) {
      &lt;div&gt;Username is required&lt;/div&gt;
    }
    @if (userForm.controls.username.dirty &amp;&amp; userForm.controls.username.hasError('minlength')) {
      &lt;div&gt;Username should be 3 characters min&lt;/div&gt;
    }
  &lt;/div&gt;
  &lt;div&gt;
    &lt;label&gt;Password&lt;/label&gt;&lt;input type="password" formControlName="password"&gt;
    @if (userForm.controls.password.dirty &amp;&amp; userForm.controls.password.hasError('required')) {
      &lt;div&gt;Password is required&lt;/div&gt;
    }
  &lt;/div&gt;
  &lt;button type="submit" [disabled]="userForm.invalid"&gt;Register&lt;/button&gt;
&lt;/form&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>C&#8217;est un peu verbeux, mais on peut créer des références sur chaque contrôle dans le composant pour améliorer cela&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="javascript">@Component({
  selector: 'ns-register',
  templateUrl: './register-form.component.html',
  imports: [ReactiveFormsModule]
})
export class RegisterFormComponent {
  private readonly fb = inject(FormBuilder);
  readonly usernameCtrl = this.fb.control('', Validators.required);
  readonly passwordCtrl = this.fb.control('', Validators.required);
  readonly userForm = this.fb.group({
    username: this.usernameCtrl,
    password: this.passwordCtrl
  });

  register(): void {
    console.log(this.userForm.value);
  }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Et ensuite on utilise ces références dans le template&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="html">&lt;h2&gt;Sign up&lt;/h2&gt;
&lt;form (ngSubmit)="register()" [formGroup]="userForm"&gt;
  &lt;div&gt;
    &lt;label&gt;Username&lt;/label&gt;&lt;input formControlName="username"&gt;
    @if (usernameCtrl.dirty &amp;&amp; usernameCtrl.hasError('required')) {
      &lt;div&gt;Username is required&lt;/div&gt;
    }
    @if (usernameCtrl.dirty &amp;&amp; usernameCtrl.hasError('minlength')) {
      &lt;div&gt;Username should be 3 characters min&lt;/div&gt;
    }
  &lt;/div&gt;
  &lt;div&gt;
    &lt;label&gt;Password&lt;/label&gt;&lt;input type="password" formControlName="password"&gt;
    @if (passwordCtrl.dirty &amp;&amp; passwordCtrl.hasError('required')) {
      &lt;div&gt;Password is required&lt;/div&gt;
    }
  &lt;/div&gt;
  &lt;button type="submit" [disabled]="userForm.invalid"&gt;Register&lt;/button&gt;
&lt;/form&gt;</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_erreurs_et_soumission_dans_un_formulaire_piloté_par_le_template">20.5.2. Erreurs et soumission dans un formulaire piloté par le template</h4>
<div class="paragraph">
<p>Dans un formulaire piloté par le template, nous n&#8217;avons pas de champ dans notre composant référençant le <code>FormGroup</code>,
mais nous avons déjà déclaré une variable locale dans le template,
référençant l&#8217;objet <code>NgForm</code> exporté par la directive.
Une fois encore, cette variable permet de connaître l&#8217;état du formulaire et d&#8217;accéder aux champs.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="html">&lt;h2&gt;Sign up&lt;/h2&gt;
&lt;form (ngSubmit)="register(userForm.value)" #userForm="ngForm"&gt;
  &lt;div&gt;
    &lt;label&gt;Username&lt;/label&gt;&lt;input name="username" ngModel required&gt;
  &lt;/div&gt;
  &lt;div&gt;
    &lt;label&gt;Password&lt;/label&gt;&lt;input type="password" name="password" ngModel required&gt;
  &lt;/div&gt;
  &lt;button type="submit" [disabled]="userForm.invalid"&gt;Register&lt;/button&gt;
&lt;/form&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>Maintenant il nous faut afficher les erreurs sur chaque champ.</p>
</div>
<div class="paragraph">
<p>Comme le formulaire, chaque contrôle expose son objet <code>FormControl</code>, on peut donc
créer une variable locale pour accéder aux erreurs&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="html">&lt;h2&gt;Sign up&lt;/h2&gt;
&lt;form (ngSubmit)="register(userForm.value)" #userForm="ngForm"&gt;
  &lt;div&gt;
    &lt;label&gt;Username&lt;/label&gt;&lt;input name="username" ngModel required #username="ngModel"&gt;
    @if (username.dirty &amp;&amp; username.hasError('required')) {
      &lt;div&gt;Username is required&lt;/div&gt;
    }
  &lt;/div&gt;
  &lt;div&gt;
    &lt;label&gt;Password&lt;/label&gt;&lt;input type="password" name="password" ngModel required #password="ngModel"&gt;
    @if (password.dirty &amp;&amp; password.hasError('required')) {
      &lt;div&gt;Password is required&lt;/div&gt;
    }
  &lt;/div&gt;
  &lt;button type="submit" [disabled]="userForm.invalid"&gt;Register&lt;/button&gt;
&lt;/form&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>Yeah&#160;!</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_un_peu_de_style">20.6. Un peu de style</h3>
<div class="paragraph">
<p>Quelle que soit la façon que tu as choisie pour créer tes formulaires,
Angular réalise une autre tâche bien pratique pour nous&#160;:
il ajoute et enlève automatiquement certaines classes CSS sur chaque champ (et le formulaire)
pour nous permettre d&#8217;affiner le style visuel.</p>
</div>
<div class="paragraph">
<p>Par exemple, un champ aura la classe <code>ng-invalid</code> si un de ses validateurs échoue,
ou <code>ng-valid</code> si tous ses validateurs passent.
Cela signifie que tu peux facilement ajouter du style, comme la traditionnelle bordure rouge autour des champs invalides&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="html">&lt;style&gt;
  input.ng-invalid {
    border: 3px red solid;
  }
&lt;/style&gt;
&lt;h2&gt;Sign up&lt;/h2&gt;
&lt;form (ngSubmit)="register(userForm.value)" #userForm="ngForm"&gt;
  &lt;div&gt;
    &lt;label&gt;Username&lt;/label&gt;&lt;input name="username" ngModel required&gt;
  &lt;/div&gt;
  &lt;div&gt;
    &lt;label&gt;Password&lt;/label&gt;&lt;input type="password" name="password" ngModel required&gt;
  &lt;/div&gt;
  &lt;button type="submit" [disabled]="userForm.invalid"&gt;Register&lt;/button&gt;
&lt;/form&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p><code>ng-dirty</code> est une autre classe CSS utile, qui sera présente si l&#8217;utilisateur a modifié la valeur.
Son contraire est <code>ng-pristine</code>, présente si l&#8217;utilisateur n&#8217;a jamais modifié la valeur.
En général, je n&#8217;affiche une bordure rouge qu&#8217;une fois que l&#8217;utilisateur a modifié la valeur&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="html">&lt;style&gt;
  input.ng-invalid.ng-dirty {
    border: 3px red solid;
  }
&lt;/style&gt;
&lt;h2&gt;Sign up&lt;/h2&gt;
&lt;form (ngSubmit)="register(userForm.value)" #userForm="ngForm"&gt;
  &lt;div&gt;
    &lt;label&gt;Username&lt;/label&gt;&lt;input name="username" ngModel required&gt;
  &lt;/div&gt;
  &lt;div&gt;
    &lt;label&gt;Password&lt;/label&gt;&lt;input type="password" name="password" ngModel required&gt;
  &lt;/div&gt;
  &lt;button type="submit" [disabled]="userForm.invalid"&gt;Register&lt;/button&gt;
&lt;/form&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>Et enfin, il y a une dernière classe CSS&#160;: <code>ng-touched</code>.
Elle sera présente si l&#8217;utilisateur est entré et sorti du champ au moins une fois (même s&#8217;il n&#8217;a rien modifié)
Son contraire est <code>ng-untouched</code>.</p>
</div>
<div class="paragraph">
<p>Quand tu afficheras un formulaire pour la première fois,
un champ portera généralement les classes CSS <code>ng-pristine ng-untouched ng-invalid</code>.
Ensuite, quand l&#8217;utilisateur sera rentré puis sorti du champ, elle basculeront à <code>ng-pristine ng-touched ng-invalid</code>.
Quand l&#8217;utilisateur modifiera la valeur, toujours invalide, on aura <code>ng-dirty ng-touched ng-invalid</code>.
Et enfin, quand la valeur deviendra valide&#160;: <code>ng-dirty ng-touched ng-valid</code>.</p>
</div>
</div>
<div class="sect2">
<h3 id="_créer_un_validateur_spécifique">20.7. Créer un validateur spécifique</h3>
<div class="paragraph">
<p>Les courses de poneys sont très addictives (TRÈS), alors on ne peut s&#8217;inscrire que si on a plus de 18 ans.
Et on veut que l&#8217;utilisateur entre son mot de passe deux fois, pour éviter toute erreur de saisie.</p>
</div>
<div class="paragraph">
<p>Comment fait-on cela&#160;? En créant un validateur spécifique.</p>
</div>
<div class="paragraph">
<p>Pour ce faire, il suffit de créer une méthode qui accepte un <code>FormControl</code>,
teste sa <code>value</code>, et retourne un objet avec les erreurs, ou <code>null</code> si
la valeur est valide.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="javascript">const isOldEnough = (control: AbstractControl&lt;Date | null&gt;) =&gt; {
  // control is a date input, so we can build the Date from the value
  const birthDatePlus18 = new Date(control.value!);
  birthDatePlus18.setFullYear(birthDatePlus18.getFullYear() + 18);
  return birthDatePlus18 &lt; new Date() ? null : { tooYoung: true };
};</code></pre>
</div>
</div>
<div class="paragraph">
<p>Notre validation est plutôt simple&#160;: on prend la valeur du contrôle,
on crée une date, on vérifie si le 18ème anniversaire est avant aujourd&#8217;hui,
et on retourne une erreur avec la clé <code>tooYoung</code> ("trop jeune") sinon.</p>
</div>
<div class="paragraph">
<p>Maintenant il nous faut inclure ce validateur.</p>
</div>
<div class="sect3">
<h4 id="_utiliser_un_validateur_dans_un_formulaire_piloté_par_le_code">20.7.1. Utiliser un validateur dans un formulaire piloté par le code</h4>
<div class="paragraph">
<p>On doit ajouter un nouveau contrôle dans notre formulaire, via le <code>FormBuilder</code>&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="javascript">import { Component, inject } from '@angular/core';
import { AbstractControl, FormBuilder, ReactiveFormsModule, ValidationErrors, Validators } from '@angular/forms';

@Component({
  selector: 'ns-register',
  templateUrl: './register-form.component.html',
  imports: [ReactiveFormsModule]
})
export class RegisterFormComponent {
  private readonly fb = inject(FormBuilder);
  readonly usernameCtrl = this.fb.control('', Validators.required);
  readonly passwordCtrl = this.fb.control('', Validators.required);
  readonly birthdateCtrl = this.fb.control('', [Validators.required, RegisterFormComponent.isOldEnough]);
  readonly userForm = this.fb.group({
    username: this.usernameCtrl,
    password: this.passwordCtrl,
    birthdate: this.birthdateCtrl
  });

  static isOldEnough(control: AbstractControl): ValidationErrors | null {
    // control is a date input, so we can build the Date from the value
    const birthDatePlus18 = new Date(control.value);
    birthDatePlus18.setFullYear(birthDatePlus18.getFullYear() + 18);
    return birthDatePlus18 &lt; new Date() ? null : { tooYoung: true };
  }

  register(): void {
    console.log(this.userForm.value);
  }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Comme tu le vois, on a ajouté un nouveau contrôle <code>birthdate</code> ("date de naissance"),
avec deux validateurs combinés.
Le premier validateur est <code>required</code>, et le second est la méthode statique <code>isOldEnough</code> de notre classe.
Bien sûr, la méthode pourrait appartenir à une autre classe (<code>required</code> est statique par exemple).</p>
</div>
<div class="paragraph">
<p>N&#8217;oublie pas d&#8217;ajouter le champ et d&#8217;afficher les erreurs dans le formulaire&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="html">&lt;h2&gt;Sign up&lt;/h2&gt;
&lt;form (ngSubmit)="register()" [formGroup]="userForm"&gt;
  &lt;div&gt;
    &lt;label&gt;Username&lt;/label&gt;&lt;input formControlName="username"&gt;
    @if (usernameCtrl.dirty &amp;&amp; usernameCtrl.hasError('required')) {
      &lt;div&gt;Username is required&lt;/div&gt;
    }
  &lt;/div&gt;
  &lt;div&gt;
    &lt;label&gt;Password&lt;/label&gt;&lt;input type="password" formControlName="password"&gt;
    @if (passwordCtrl.dirty &amp;&amp; passwordCtrl.hasError('required')) {
      &lt;div&gt;Password is required&lt;/div&gt;
    }
  &lt;/div&gt;
  &lt;div&gt;
    &lt;label&gt;Birth date&lt;/label&gt;&lt;input type="date" formControlName="birthdate"&gt;
    @if (birthdateCtrl.dirty) {
      @if (birthdateCtrl.hasError('required')) {
        &lt;div&gt;Birth date is required&lt;/div&gt;
      } @else if (birthdateCtrl.hasError('tooYoung')) {
        &lt;div&gt;You're way too young to be betting on pony races&lt;/div&gt;
      }
    }
  &lt;/div&gt;
  &lt;button type="submit" [disabled]="userForm.invalid"&gt;Register&lt;/button&gt;
&lt;/form&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>Plutôt facile, non&#160;?</p>
</div>
<div class="paragraph">
<p>A noter qu&#8217;il est possible de créer et d&#8217;ajouter des validateurs asynchrones également
(pour vérifier auprès du backend si un nom d&#8217;utilisateur est disponible par exemple).</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="javascript">@Component({
  selector: 'ns-register',
  templateUrl: './register-form.component.html',
  imports: [ReactiveFormsModule]
})
export class RegisterFormComponent {
  private readonly fb = inject(FormBuilder);
  readonly usernameCtrl = this.fb.control('', Validators.required, control =&gt; this.isUsernameAvailable(control));
  readonly userForm = this.fb.group({
    username: this.usernameCtrl
  });

  private readonly userService = inject(UserService);

  isUsernameAvailable(control: AbstractControl): Observable&lt;ValidationErrors | null&gt; {
    const username = control.value;
    return this.userService
      .isUsernameAvailable(username)
      .pipe(map(available =&gt; (available ? null : { alreadyUsed: true })));
  }

  register(): void {
    console.log(this.userForm.value);
  }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Le validateur asynchrone n&#8217;est cette fois pas une méthode statique
car il accède au service du composant.</p>
</div>
<div class="paragraph">
<p>La méthode du service renvoie un <code>Observable</code> émettant soit <code>null</code>
si il n&#8217;y a pas d&#8217;erreur (le username est disponible),
soit un objet dont la clé sera le nom de l&#8217;erreur comme pour les validateurs synchrones.</p>
</div>
<div class="paragraph">
<p>Fonctionnalité intéressante, la classe <code>ng-pending</code> est ajoutée dynamiquement au champ
tant que le validateur asynchrone n&#8217;aura pas terminé son travail.
Cela permet par exemple d&#8217;afficher un spinner
pour indiquer que la validation est en cours.</p>
</div>
</div>
<div class="sect3">
<h4 id="_utiliser_un_validateur_dans_un_formulaire_piloté_par_le_template">20.7.2. Utiliser un validateur dans un formulaire piloté par le template</h4>
<div class="paragraph">
<p>Pour cela, on doit définir une directive custom qui s&#8217;applique sur un <code>input</code>,
mais franchement c&#8217;est beaucoup plus simple en utilisant l&#8217;approche pilotée par le code&#8230;&#8203;</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_regrouper_des_champs">20.8. Regrouper des champs</h3>
<div class="paragraph">
<p>Jusqu&#8217;à présent, on n&#8217;avait qu&#8217;un seul groupe&#160;: le formulaire global.
Mais on peut déclarer des groupes au sein d&#8217;un groupe.
C&#8217;est très pratique si tu veux valider un groupe de champs globalement,
comme une adresse postale par exemple, ou, comme dans notre exemple, si tu veux
vérifier que le mot de passe et sa confirmation sont bien identiques.</p>
</div>
<div class="paragraph">
<p>La solution est d&#8217;utiliser un formulaire piloté par le code.</p>
</div>
<div class="paragraph">
<p>D&#8217;abord, on crée un nouveau groupe <code>passwordGroup</code>, avec les deux champs, et
on l&#8217;ajoute dans le groupe <code>userForm</code> avec la clé <code>passwordForm</code>&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="javascript">import { Component, inject } from '@angular/core';
import { AbstractControl, FormBuilder, ReactiveFormsModule, ValidationErrors, Validators } from '@angular/forms';

@Component({
  selector: 'ns-register',
  templateUrl: './register-form.component.html',
  imports: [ReactiveFormsModule]
})
export class RegisterFormComponent {
  private readonly fb = inject(FormBuilder);
  readonly usernameCtrl = this.fb.control('', Validators.required);
  readonly passwordCtrl = this.fb.control('', Validators.required);
  readonly confirmCtrl = this.fb.control('', Validators.required);
  readonly passwordGroup = this.fb.group(
    { password: this.passwordCtrl, confirm: this.confirmCtrl },
    { validators: RegisterFormComponent.passwordMatch }
  );

  readonly userForm = this.fb.group({ username: this.usernameCtrl, passwordForm: this.passwordGroup });

  static passwordMatch(group: AbstractControl): ValidationErrors | null {
    const password = group.value.password;
    const confirm = group.value.confirm;
    return password === confirm ? null : { matchingError: true };
  }

  register(): void {
    console.log(this.userForm.value);
  }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Comme tu le vois, on a ajouté un validateur sur le groupe, <code>passwordMatch</code>,
qui sera appelé à chaque fois qu&#8217;un des champs est modifié.</p>
</div>
<div class="paragraph">
<p>Mettons à jour le template pour refléter le nouveau formulaire,
grâce à la directive <code>formGroupName</code>&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="html">&lt;h2&gt;Sign up&lt;/h2&gt;
&lt;form (ngSubmit)="register()" [formGroup]="userForm"&gt;
  &lt;div&gt;
    &lt;label&gt;Username&lt;/label&gt;&lt;input formControlName="username"&gt;
    @if (usernameCtrl.dirty &amp;&amp; usernameCtrl.hasError('required')) {
      &lt;div&gt;Username is required&lt;/div&gt;
    }
  &lt;/div&gt;
  &lt;div formGroupName="passwordForm"&gt;
    &lt;div&gt;
      &lt;label&gt;Password&lt;/label&gt;&lt;input type="password" formControlName="password"&gt;
      @if (passwordCtrl.dirty &amp;&amp; passwordCtrl.hasError('required')) {
        &lt;div&gt;Password is required&lt;/div&gt;
      }
    &lt;/div&gt;
    &lt;div&gt;
      &lt;label&gt;Confirm password&lt;/label&gt;&lt;input type="password" formControlName="confirm"&gt;
      @if (confirmCtrl.dirty &amp;&amp; confirmCtrl.hasError('required')) {
        &lt;div&gt;Confirm your password&lt;/div&gt;
      }
    &lt;/div&gt;
    @if (passwordGroup.dirty &amp;&amp; passwordGroup.hasError('matchingError')) {
      &lt;div&gt;Your password does not match&lt;/div&gt;
    }
  &lt;/div&gt;
  &lt;button type="submit" [disabled]="userForm.invalid"&gt;Register&lt;/button&gt;
&lt;/form&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>Et voilà&#160;!</p>
</div>
</div>
<div class="sect2">
<h3 id="_réagir_aux_modifications">20.9. Réagir aux modifications</h3>
<div class="paragraph">
<p>Dernier bénéfice d&#8217;un formulaire piloté par le code&#160;: tu peux facilement
réagir aux modifications, grâce à l'<em>observable</em> <code>valueChanges</code>. La programmation réactive pour les champions&#160;!
Par exemple, disons que notre champ de mot de passe doit afficher un indicateur de sécurité.
On veut en calculer la robustesse lors de chaque changement du mot de passe&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="javascript">private readonly fb = inject(FormBuilder);
readonly usernameCtrl = this.fb.control('', Validators.required);
readonly passwordCtrl = this.fb.control('', Validators.required);
readonly userForm = this.fb.group({
  username: this.usernameCtrl,
  password: this.passwordCtrl
});
readonly passwordStrength = signal(0);

constructor() {
  // we subscribe to every password change
  this.passwordCtrl.valueChanges
    .pipe(
      // only recompute when the user stops typing for 400ms
      debounceTime(400),
      // only recompute if the new value is different from the last
      distinctUntilChanged()
    )
    .subscribe(newValue =&gt; this.passwordStrength.set(this.computePasswordStrength(newValue)));
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>ou avec <code>toSignal</code>&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="javascript">readonly passwordStrength = toSignal(
  this.passwordCtrl.valueChanges.pipe(
    // only recompute when the user stops typing for 400ms
    debounceTime(400),
    // only recompute if the new value is different from the last
    distinctUntilChanged(),
    // compute the length of the password
    map(newValue =&gt; this.computePasswordStrength(newValue))
  ),
  { initialValue: 0 }
);</code></pre>
</div>
</div>
<div class="paragraph">
<p>Maintenant, on a un attribut <code>passwordStrength</code> dans notre instance de composant,
qu&#8217;on peut afficher à notre utilisateur&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="html">&lt;h2&gt;Sign up&lt;/h2&gt;
&lt;form (ngSubmit)="register()" [formGroup]="userForm"&gt;
  &lt;div&gt;
    &lt;label&gt;Username&lt;/label&gt;&lt;input formControlName="username"&gt;
    @if (usernameCtrl.dirty &amp;&amp; usernameCtrl.hasError('required')) {
      &lt;div&gt;Username is required&lt;/div&gt;
    }
  &lt;/div&gt;
  &lt;div&gt;
    &lt;label&gt;Password&lt;/label&gt;&lt;input type="password" formControlName="password"&gt;
    &lt;div&gt;Strength: {{ passwordStrength() }}&lt;/div&gt;
    @if (passwordCtrl.dirty &amp;&amp; passwordCtrl.hasError('required')) {
      &lt;div&gt;Password is required&lt;/div&gt;
    }
  &lt;/div&gt;
  &lt;button type="submit" [disabled]="userForm.invalid"&gt;Register&lt;/button&gt;
&lt;/form&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>On utilise les opérateurs RxJS pour ajouter quelques fonctionnalités bien cools&#160;:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>debounceTime(400)</code> émettra seulement des valeurs lorsque l&#8217;utilisateur arrête de taper pendant 400ms.
Cela évite de devoir calculer la force du mot de passe à chaque valeur entrée par l&#8217;utilisateur.
Cela peut être très intéressant si le calcul prend beaucoup de temps, ou lance une requête HTTP.</p>
</li>
<li>
<p><code>distinctUntilChanged()</code> émettra seulement des valeurs si la nouvelle valeur est différente de l&#8217;ancienne.
Très intéressant également&#160;: imagine que l&#8217;utilisateur entre <code>'password'</code> puis s&#8217;arrête.
On calcule la force du mot de passe. Puis il entre un nouveau caractère avant de l&#8217;effacer rapidement (en moins de 400ms).
Le prochain événement qui sortira de <code>debounceTime</code> sera à nouveau <code>'password'</code>.
Cela n&#8217;a pas de sens de recalculer la force du mot de passe à nouveau&#160;!
Cet opérateur n&#8217;émettra même pas la valeur, et nous économise un recalcul.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>RxJS peut faire une tonne de travail pour toi&#160;: imagine si tu devais recoder toi-même ce que l&#8217;on a fait en deux lignes.
Cela peut également se combiner facilement avec des requêtes HTTP, puisque le service <code>HttpClient</code> utilise des observables également.</p>
</div>
</div>
<div class="sect2">
<h3 id="_mettre_à_jour_seulement_à_la_perte_de_focus_ou_à_la_soumission">20.10. Mettre à jour seulement à la perte de focus ou à la soumission</h3>
<div class="paragraph">
<p>Angular&#160;5.0 a introduit la possibilité d&#8217;attendre la perte de focus (<em>blur</em>) ou la soumission du formulaire (<em>submit</em>)
pour mettre à jour la valeur et la validité d&#8217;un champ.
Pour cela, le constructeur de <code>FormControl</code> accepte à présent un objet <code>options</code> comme second paramètre,
qui permet de définir les validateurs synchrones et asynchrones,
ainsi que l&#8217;option <code>updateOn</code>.
Sa valeur peut-être&#160;:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>change</code>, par défaut, la valeur et la validité sont mises à jour à chaque changement&#160;;</p>
</li>
<li>
<p><code>blur</code>, la valeur et la validité sont mises à jour uniquement quand le champ perd le focus&#160;;</p>
</li>
<li>
<p><code>submit</code>, la valeur et la validité sont mises à jour uniquement quand le formulaire parent est soumis.</p>
</li>
</ul>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="javascript">readonly usernameCtrl = this.fb.control('', Validators.required);
readonly passwordCtrl = this.fb.control('', {
  validators: Validators.required,
  updateOn: 'blur'
});</code></pre>
</div>
</div>
<div class="paragraph">
<p>Il est aussi possible de configurer cette option sur tous les champs d&#8217;un groupe à la fois&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="javascript">readonly userForm = this.fb.group(
  {
    username: this.usernameCtrl,
    password: this.passwordCtrl
  },
  {
    updateOn: 'blur'
  }
);</code></pre>
</div>
</div>
<div class="paragraph">
<p>La même fonctionnalité existe aussi dans les formulaires pilotés par le template,
grâce à l&#8217;input <code>ngModelOptions</code> de la directive <code>NgModel</code>&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="javascript">&lt;label&gt;Username&lt;/label&gt;
&lt;input name="username" #usernameCtrl="ngModel"
  [(ngModel)]="user.username" [ngModelOptions]="{ updateOn: 'blur' }" required&gt;
@if (usernameCtrl.dirty &amp;&amp; usernameCtrl.hasError('required')) {
  &lt;div&gt;Username is required&lt;/div&gt;
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>ou globalement sur un formulaire avec l&#8217;input <code>NgFormOptions</code> (apparu avec Angular&#160;5.0) de la directive <code>NgForm</code>&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="javascript">&lt;form (ngSubmit)="register()" [ngFormOptions]="{ updateOn: 'blur' }"&gt;
  &lt;div&gt;
    &lt;label&gt;Username&lt;/label&gt;
    &lt;input name="username" #usernameCtrl="ngModel"
      [(ngModel)]="user.username" required&gt;
    @if (usernameCtrl.dirty &amp;&amp; usernameCtrl.hasError('required')) {
      &lt;div&gt;Username is required&lt;/div&gt;
    }</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_formarray_et_formrecord">20.11. <code>FormArray</code> et <code>FormRecord</code></h3>
<div class="paragraph">
<p><code>FormControl</code> et <code>FormGroup</code> ne sont pas les seules entités
que l&#8217;on peut utiliser pour construire un formulaire.
Si tu souhaites qu&#8217;une partie du formulaire soit dynamique,
tu peux utiliser un <code>FormArray</code> ou un <code>FormRecord</code>.</p>
</div>
<div class="paragraph">
<p><code>FormArray</code> est un tableau d&#8217;éléments qui contiennent les mêmes types de valeur.
Un exemple typique serait un formulaire ou les utilisateurs peuvent ajouter/supprimer des valeurs,
par exemple pour ajouter/supprimer des mot-clés sur un article de blog&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="javascript">export class EditBlogPostComponent {
  private readonly fb = inject(FormBuilder);
  // one empty tag by default
  readonly tagsArray = this.fb.array(['']);
  readonly blogPostForm = this.fb.group({
    title: '',
    content: '',
    tags: this.tagsArray
  });

  addTag() {
    this.tagsArray.push(this.fb.control(''));
  }

  removeTag(index: number) {
    this.tagsArray.removeAt(index);
  }</code></pre>
</div>
</div>
<div class="paragraph">
<p>On peut ensuiter itérer sur les champs du tableau dans le template,
et avoir des boutons d&#8217;ajout/suppression d&#8217;un mot-clé&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="javascript">&lt;div formArrayName="tags"&gt;
  &lt;p&gt;Tags&lt;/p&gt;
  &lt;button id="add-tag" (click)="addTag()"&gt;Add tag&lt;/button&gt;
  @for (tagControl of tagsArray.controls; track tagControl) {
    &lt;div&gt;
      &lt;input class="tag" [formControlName]="$index" /&gt;
      &lt;button class="remove-tag" (click)="removeTag($index)"&gt;Remove tag&lt;/button&gt;
    &lt;/div&gt;
  }
&lt;/div&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>La valeur du <code>FormArray</code> est un tableau de chaîne de caractères dans cet exemple.
Bien sûr, un <code>FormArray</code> peut contenir n&#8217;importe quel type d&#8217;élément.
Par exemple, si tu veux ajouter des lignes à une facture,
le <code>FormArray</code> peut contenir des <code>FormGroup</code> avec un nom, une quantité, un prix, etc.</p>
</div>
<div class="paragraph">
<p><code>FormRecord</code> est une autre entité utilisable dans les formulaires.
Il a été introduit en Angular&#160;v14,
et permet de construire des dictionnaires de clés/valeurs.</p>
</div>
<div class="paragraph">
<p>Disons que l&#8217;on veut un formulaire pour lister l&#8217;équipement à préparer pour un voyage,
avec la possibilité d&#8217;ajouter/supprimer des éléments,
et de pouvoir les cocher/décocher.
<code>FormRecord</code> peut aider dans ce cas&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="javascript">export class EditPackingListComponent {
  private readonly fb = inject(NonNullableFormBuilder);
  readonly equipmentRecord = this.fb.record({
    // always bring your toothbrush
    toothbrush: true
  });
  readonly packingListForm = this.fb.group({
    equipments: this.equipmentRecord
  });

  addEquipment(equipment: string) {
    this.equipmentRecord.addControl(equipment, this.fb.control(true));
  }

  removeEquipment(equipment: string) {
    this.equipmentRecord.removeControl(equipment);
  }</code></pre>
</div>
</div>
<div class="paragraph">
<p>On peut là-aussi itérer sur les champs dans le template,
et avoir des boutons d&#8217;ajout/suppression d&#8217;un équipement&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="html">&lt;div formGroupName="equipments"&gt;
  &lt;label for="equipment-to-add"&gt;Equipments&lt;/label&gt;
  &lt;input #equipment id="equipment-to-add" /&gt;
  &lt;button id="add-equipment" (click)="addEquipment(equipment.value)"&gt;Add&lt;/button&gt;
  @for (control of equipmentRecord.controls | keyvalue; track control) {
    &lt;div&gt;
      &lt;label [for]="'eq-' + control.key"&gt;{{ control.key }}&lt;/label&gt;
      &lt;input [id]="'eq-' + control.key" type="checkbox" class="equipment" [formControlName]="control.key" /&gt;
      &lt;button class="remove-equipment" (click)="removeEquipment(control.key)"&gt;Remove equipment&lt;/button&gt;
    &lt;/div&gt;
  }
&lt;/div&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>La valeur du <code>FormRecord</code> sera alors un objet,
avec le nom de l&#8217;équipement comme clé et un booléen comme valeur.
Par exemple&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="javascript">{
  toothbrush: false,
  jacket: true
}</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_des_formulaires_typés">20.12. Des formulaires typés</h3>
<div class="paragraph">
<p>Jusqu&#8217;à la version 14 d&#8217;Angular, les formulaires n&#8217;étaient pas typés. Qu&#8217;entend-on par là&#160;?</p>
</div>
<div class="paragraph">
<p>Et bien la valeur d&#8217;un <code>FormControl</code> ou d&#8217;un <code>FormGroup</code> était de type <code>any</code>, ce qui évidemment, est loin d&#8217;être idéal.</p>
</div>
<div class="paragraph">
<p>Si vous migrez une application de la version 13 à la version 14, afin de ne pas casser votre code, les types <code>FormControl</code>, <code>FormGroup</code>
et <code>FormArray</code> vont être remplacés respectivement par <code>UntypedFormControl</code>, <code>UntypedFormGroup</code> et <code>UntypedFormArray</code>.</p>
</div>
<div class="paragraph">
<p>Les types originaux sont à présent typés. Mais qu&#8217;est-ce qui a changé concrètement avec Angular&#160;14&#160;?</p>
</div>
<div class="paragraph">
<p>Les éléments de formulaire sont devenus génériques.
Ainsi, on utilise à présent des <code>FormControl&lt;string&gt;</code> par exemple, pour indiquer que la valeur du contrôle est une chaîne de caractère.
Les <code>FormGroup</code>, quant à eux, prennent le type des contrôles qu&#8217;ils contiennent. Par exemple, un <code>FormGroup</code> utilisé pour l&#8217;enregistrement
aura le type</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="javascript">FormGroup&lt;{
  username: FormControl&lt;string&gt;;
  password: FormControl&lt;string&gt;;
}&gt;;</code></pre>
</div>
</div>
<div class="paragraph">
<p>C&#8217;est verbeux, mais pas de panique&#160;: ces types génériques sont la plupart du temps inférés par le compilateur à l&#8217;initialisation.</p>
</div>
<div class="sect3">
<h4 id="_nullabilité">20.12.1. Nullabilité</h4>
<div class="paragraph">
<p>J&#8217;ai quelque peu simplifié les choses dans la section précédente. En effet, le typage des formulaires doit prendre en compte deux dures réalités&#160;:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>certains éléments de formulaire peuvent être désactivés</p>
</li>
<li>
<p>le comportement de la méthode <code>reset()</code> d&#8217;Angular est de peupler les champs avec la valeur <code>null</code>.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>Lorsqu&#8217;un contrôle est désactivé, sa valeur n&#8217;apparaît plus dans la valeur du <code>FormGroup</code> auquel il appartient. Ainsi, si je décide de désactiver le champ
<em>password</em> de mon formulaire, la valeur du <code>FormGroup</code> sera simplement</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="javascript">{
  username: 'cedric'
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Et ça, c&#8217;est un peu gênant, parce que cela implique que la valeur du <code>FormGroup</code> n&#8217;est pas de type</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="javascript">{
  username: string;
  password: string;
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>comme on pourrait s&#8217;y attendre, mais bien</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="javascript">{
  username?: string;
  password?: string;
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>En effet, Angular ne peut savoir à l&#8217;avance si vous comptez ou pas désactiver les champs du formulaire. Il est donc obligé de rendre chacune
des propriétés optionnelles dans sa valeur. À vous, donc, de gérer cela, typiquement en utilisant <code>value.username!</code> pour obtenir une valeur de type
<code>string</code> plutôt qu&#8217;une valeur de type <code>string | undefined</code>, si vous savez qu&#8217;il n&#8217;est pas désactivé.
Une autre possibilité est d&#8217;utiliser la valeur <em>raw</em> du <code>FormGroup</code> (retournée par <code>getRawValue()</code>).
Cette valeur <em>raw</em> contient toutes les propriétés, que leur contrôle soit désactivé ou pas.
Et ces propriétés ne sont donc pas marquées comme optionnelles.</p>
</div>
<div class="paragraph">
<p>Le deuxième point pose le même genre de problème. Comme Angular ne peut savoir à l&#8217;avance si vous appellerez ou pas la méthode <code>reset()</code>,
la valeur du <code>FormGroup</code> est en réalité de type</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="javascript">{
  username?: string | null;
  password?: string | null;
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Ce deuxième désagrément, au contraire du premier, peut être évité. Il faut pour cela configurer chacun des éléments du formulaire avec l&#8217;option
<code>nonNullable: true</code>. Cette option change le comportement de <code>reset()</code>, qui va peupler le champ avec sa valeur initiale plutôt qu&#8217;avec <code>null</code>.
Configurer cette option sur chacun des éléments de formulaire est assez pénible et verbeux. C&#8217;est néanmoins ce que vous devez faire si
vous utilisez les constructeurs pour créer vos éléments de formulaire. C&#8217;est plus simple si vous choisissez d&#8217;utiliser le <code>FormBuilder</code>. Il suffit
de vous injecter à la place de <code>FormBuilder</code> un <code>NonNullableFormBuilder</code>, et tous les éléments qu&#8217;il créera auront l&#8217;option <code>nonNullable</code>.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="javascript">export class RegisterFormComponent {
  readonly userForm = inject(NonNullableFormBuilder).group({
    username: '',
    password: ''
  });
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Il faut noter que le nom <code>NonNullableFormBuilder</code> est trompeur. L&#8217;utiliser n&#8217;empêche pas d&#8217;avoir des contrôles avec la valeur <code>null</code>.
Prenons l&#8217;exemple d&#8217;un champ de type <code>number</code>. Il n&#8217;y a pas vraiment d&#8217;autre valeur par défaut possible que <code>null</code> dans ce cas. Et même
si vous préinitialisez le champ avec une valeur non-null, l&#8217;utilisateur pourra toujours vider le champ et donc lui donner la valeur <code>null</code>.
Dans ce cas, il vous faudra typer explicitement le contrôle&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="javascript">readonly birthYearCtrl = new FormControl&lt;number | null&gt;(null);</code></pre>
</div>
</div>
<div class="paragraph">
<p>ou, avec le <code>FormBuilder</code> ou le <code>NonNullableFormBuilder</code>&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="javascript">readonly birthYearCtrl = inject(NonNullableFormBuilder).control&lt;number | null&gt;(null);</code></pre>
</div>
</div>
<div class="paragraph">
<p>ou si ce contrôle fait partie d&#8217;un <code>FormGroup</code>&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="javascript">readonly formGroup = inject(NonNullableFormBuilder).group({
  // ...
  birthYear: null as number | null
});</code></pre>
</div>
</div>
<div class="paragraph">
<p>Toute cette complexité additionnelle peut sembler rebutante, mais il ne faut pas perdre de vue ce qu&#8217;on y a gagné&#160;: des objets avec des
propriétés dont le nom et le type sont connus, et qui peuvent être auto-complétées par l&#8217;IDE. Au final donc, du code plus maintenable
et plus robuste.</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_des_messages_derreur_de_validation_super_simples_avec_ngx_valdemort">20.13. Des messages d&#8217;erreur de validation super simples avec <code>ngx-valdemort</code></h3>
<div class="paragraph">
<p>Comme tu l&#8217;as sans doute remarqué,
les templates des formulaires deviennent rapidement bavards
avec leurs messages d&#8217;erreurs à répéter
pour chaque type d&#8217;erreur
de chaque champ de chaque formulaire.
On se retrouve vite avec des <code>ngIf</code> à rallonge,
et des copier/coller entre composants.</p>
</div>
<div class="paragraph">
<p>Et comme on trouve ça désagréable nous aussi,
nous avons écrit une petite bibliothèque open-source pour simplifier tout ça
(fortement inspirée de <code>ngMessages</code> en AngularJS)&#160;:
<a href="https://ngx-valdemort.ninja-squad.com/">ngx-valdemort</a>.</p>
</div>
<div class="paragraph">
<p>À la place de&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="html">&lt;input id="email" formControlName="email" class="form-control" type="email" /&gt;
@if (form.controls.email.invalid &amp;&amp; (f.submitted || form.controls.email.touched)) {
  &lt;div class="invalid-feedback"&gt;
    @if (form.controls.email.hasError('required')) {
      &lt;div&gt;The email is required&lt;/div&gt;
    }
    @if (form.controls.email.hasError('email')) {
      &lt;div&gt;The email must be a valid email address&lt;/div&gt;
    }
  &lt;/div&gt;
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>la bibliothèque permet d&#8217;écrire&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="html">&lt;input id="email" formControlName="email" class="form-control" type="email" /&gt;
&lt;val-errors controlName="email"&gt;
  &lt;ng-template valError="required"&gt;The email is required&lt;/ng-template&gt;
  &lt;ng-template valError="email"&gt;The email must be a valid email address&lt;/ng-template&gt;
&lt;/val-errors&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>On peut même faire encore mieux en définissant des messages d&#8217;erreur par défaut
une bonne fois pour toutes&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="html">&lt;val-default-errors&gt;
  &lt;ng-template valError="required" let-label&gt; {{ label || 'This field' }} is required &lt;/ng-template&gt;
  &lt;ng-template valError="email" let-label&gt; {{ label || 'This field' }} must be a valid email address &lt;/ng-template&gt;
  &lt;ng-template valError="min" let-error="error" let-label&gt;
    {{ label || 'This field' }} must be at least {{ error.min | number }}
  &lt;/ng-template&gt;
  &lt;!-- same for the other types of error --&gt;
&lt;/val-default-errors&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>Et ensuite simplement utiliser dans un formulaire&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="html">&lt;input id="email" formControlName="email" class="form-control" type="email" /&gt;
&lt;val-errors controlName="email" label="The email" /&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>Une intégration avec Bootstrap et Material est fournie,
pour avoir des messages d&#8217;erreur avec un style cohérent si tu utilises un de ces frameworks CSS.
Fais un essai, on pense que tu ne le regretteras pas&#160;!</p>
</div>
</div>
<div class="sect2">
<h3 id="_aller_plus_loin_définir_ses_propres_contrôles_de_formulaires_avec_controlvalueaccessor">20.14. Aller plus loin&#160;: définir ses propres contrôles de formulaires avec <code>ControlValueAccessor</code></h3>
<div class="paragraph">
<p>HTML définit un nombre important de contrôles standards&#160;: texte, mot de passe, case à cocher, etc.
Mais parfois ces contrôles standards ne conviennent pas.</p>
</div>
<div class="paragraph">
<p>Angular permet de définir des composants bien sûr, et il est en fait possible
d&#8217;en faire des éléments de formulaires, c&#8217;est-à-dire de les lier à un <em>form control</em>
en leur appliquant la directive <code>NgModel</code> ou <code>FormControlName</code>,
et donc de les intégrer dans un formulaire.</p>
</div>
<div class="paragraph">
<p>Ce qui permet de lier un composant Angular a un contrôle de formulaire est une interface
fournie par Angular&#160;: <code>ControlValueAccessor</code>.</p>
</div>
<div class="paragraph">
<p>Remplir le contrat de cette interface est en fait assez simple. Il faut</p>
</div>
<div class="ulist">
<ul>
<li>
<p>accepter la valeur du <code>FormControl</code> et l&#8217;afficher dans le composant (<code>writeValue</code>)&#160;;</p>
</li>
<li>
<p>prévenir Angular que l&#8217;utilisateur a changé la valeur, en appelant une fonction callback (<code>registerOnChange</code>)&#160;;</p>
</li>
<li>
<p>prévenir Angular quand le contrôle doit être considéré comme <em>touched</em>, en appelant une fonction callback (<code>registerOnTouched</code>)&#160;;</p>
</li>
<li>
<p>honorer la demande d&#8217;activer ou de désactiver le contrôle (<code>setDisabledState</code>).</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Nous allons illustrer tout cela en utilisant un composant <em>rating</em>.
Ce composant permet de donner une note de 0 à 5 à un film, par exemple.
Mais au lieu d&#8217;utiliser un champ de type <code>number</code> ou <code>range</code>, on voudrait que l&#8217;utilisateur clique simplement sur un bouton parmi 6 boutons
affichés (qui, typiquement, seraient présentés sous forme d&#8217;étoiles, mais nous laisserons ça de côté dans l&#8217;exemple qui suit).</p>
</div>
<div class="paragraph">
<p>Voici le code d&#8217;un tel composant&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="javascript">export class RatingComponent implements ControlValueAccessor {
  private onChange: (rating: number) =&gt; void = () =&gt; {
    // do nothing by default
  };

  onTouched: () =&gt; void = () =&gt; {
    // do nothing by default
  };

  readonly value = signal&lt;number | null&gt;(null);
  readonly disabled = signal(false);
  readonly pickableValues = [0, 1, 2, 3, 4, 5];

  registerOnChange(fn: (rating: number) =&gt; void): void {
    this.onChange = fn;
  }

  registerOnTouched(fn: () =&gt; void): void {
    this.onTouched = fn;
  }

  setDisabledState(isDisabled: boolean): void {
    this.disabled.set(isDisabled);
  }

  writeValue(v: number | null): void {
    this.value.set(v);
  }

  setValueAndPropagateChanges(value: number) {
    this.value.set(value);
    // tell Angular the value has changed
    this.onChange(value);
  }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Et voici son template&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="html">@let v = value();
@for (pickableValue of pickableValues; track pickableValue) {
  &lt;button
    [class.selected]="v != null &amp;&amp; pickableValue &lt;= v"
    type="button"
    (click)="setValueAndPropagateChanges(pickableValue)"
    [disabled]="disabled()"
    (blur)="onTouched()"
  &gt;
    {{ pickableValue }}
  &lt;/button&gt;
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Le code qui gère les deux fonctions callback et l&#8217;état d&#8217;activation est pratiquement
identique dans chaque <em>CVA</em> (<code>ControlValueAccessor</code>).</p>
</div>
<div class="paragraph">
<p>La partie intéressante est la gestion de la valeur. Angular appelle <code>writeValue()</code> pour dire au composant
quelle valeur il doit afficher. Ici, on stocke simplement cette valeur, et on l&#8217;utilise dans le template
pour afficher les premiers boutons en jaune.</p>
</div>
<div class="paragraph">
<p>Lorsqu&#8217;on clique sur un bouton, on change la valeur du composant bien sûr, mais on doit aussi
notifier Angular de ce changement de valeur.
C&#8217;est ce qui lui permet de changer la valeur du <code>FormControl</code>, de déclencher la validation, etc.</p>
</div>
<div class="paragraph">
<p>L&#8217;état <code>disabled</code> est honoré en désactivant les boutons.</p>
</div>
<div class="paragraph">
<p>Et finalement, on choisit de rendre le contrôle <em>touched</em> dès que l&#8217;un des boutons perd le focus.
On fait ça en appelant la fonction de callback <code>onTouched</code>, fournie par Angular, lorsqu&#8217;un bouton lève un événement <code>blur</code>.</p>
</div>
<div class="paragraph">
<p>Dernière chose à faire&#160;: enregistrer ce composant comme l&#8217;un des <em>control value accessors</em> de l&#8217;application.
Nous faisons cela en ajoutant un <em>provider</em> dans le décorateur du composant <em>rating</em>.
Ne te prends pas trop la tête avec cette syntaxe&#160;:
tu peux simplement la copier-coller chaque fois que tu définis un nouveau CVA.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="javascript">providers: [
  {
    provide: NG_VALUE_ACCESSOR,
    useExisting: forwardRef(() =&gt; RatingComponent),
    multi: true
  }
]</code></pre>
</div>
</div>
<div class="paragraph">
<p>Et voilà. Nous disposons à présent d&#8217;un joli composant qui peut être utilisé dans n&#8217;importe quel formulaire,
en lui appliquant simplement l&#8217;une des directives des formulaires Angular&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="javascript">&lt;ns-rating id="rating" formControlName="rating" /&gt;</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_conclusion_2">20.15. Conclusion</h3>
<div class="paragraph">
<p>Angular propose deux façons de construire un formulaire&#160;:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>une en mettant tout en place dans le template.
Mais, comme tu l&#8217;as vu,
ça oblige à écrire des directives custom pour la validation, et c&#8217;est plus dur à tester.
Cette façon est donc plus adaptée aux formulaires simples, qui n&#8217;ont par exemple qu&#8217;un seul ou quelques champs,
et nous donne du binding bidirectionnel.</p>
</li>
<li>
<p>une en mettant quasiment tout en place dans le composant.
Cette façon est plus adaptée à la validation et au test, avec plusieurs niveaux de groupes si besoin.
C&#8217;est donc le bon choix pour construire des formulaires complexes.
Et tu peux même réagir aux changements d&#8217;un groupe, ou d&#8217;un champ.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>C&#8217;est peut-être l&#8217;approche la plus pragmatique&#160;:
commence avec une approche orientée template et le binding bidirectionnel si ça te plaît,
et dès que tu as besoin d&#8217;accéder à un champ ou un groupe de champs,
pour par exemple ajouter de la validation custom ou de la programmation réactive,
alors tu peux déclarer ce dont tu as besoin dans le composant,
et lier les inputs et divs à ces déclarations avec les directives adéquates.</p>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<i class="fa icon-tip" title="Mise en pratique"></i>
</td>
<td class="content">
<div class="paragraph">
<p>Essaye notre
<a href="https://angular-exercises.ninja-squad.com/exercises/13/quiz-forms">quiz</a> <span class="image"><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAIgAAACACAMAAADnN9ENAAACSVBMVEVMaXH7whr7whr7whr7whr7whr7whr7whr7whr7whr7whr7whp4o614o614o614o637whr7whp4o614o614o614o614o614o614o614o62EoKN4o614o637whqFXFKFXFKQnZm4kni0k3vA1Njr8fLd5+myytB/qLGFXFKFXFKcmY98oqp4o63V4uWFXFKFXFKoloWgmIx4o62Hpqu+nofCpI/b08yFXFKAoaaMnpzYzcSFXFKFXFKUnJaYm5O7mIDl5eOGrbaFXFKGk5Kfd2WSalyYcGClfmqhlIZ6lpx+hIWDaWOFXFKFXFJ/gICkl4nFqpeFXFKFXFKCamSDZV2EYFiDaWOCbmne2dTk7O77whqOZE6Ad3TIsJ6jwMflryWbb0h/gIDo6+rH2dz0vB58jZGIn6Cxgj17kZbOvK2FXFL7whq5iTqVt75/e3rPnC/eqSiMYk+FXFKjdkS4p6Ll6OjLtqbSwrXFubacu8PstSGynZiOsrqLZVzauj/013mrlI56mqLCtFrt69fY1dSApaTrvizz2oafgXqSb2aqxcuhrX/11GvO3uGQeHG5z9T20V7e3t7s7uX4y0P6xSjv5byYeHC+sKyli4TSzMrIzc28wcGwtLVHR0c8OztIR0c1NTWNkJEvLy+NioqTkJCHhISlqKnU2dpCQUGBhIRnZmZeYGBqbGyZnJ07Ozvf5ebLwsCmqapfYGFiYmLAw8Tw9fXs8vNqjZVBTE9PYmY4Pj9deH5mho5GU1Y9RUdhf4ZznKVKW140Njdz5u6AAAAAf3RSTlMAMIBQ7/+fEI/PYL8QcIBAIK+v/7+fz+8wUP/fYEAgEP//////////32D//yD//7///4//////UP///zDv///////P//////////+vj3Ag//+fQJ/////////fz///////////////////gHD///////+v//////////////9AWHP9fwAABxxJREFUeAHs1IVy5DAQBNBZ0DJ3mJUonGiPmZmZmZmZPv6ssb2oFFqHeYUq7LJ7mlatWhWVWDxBf4SkEHH6EwhPKk2/X0Z4sn9AknRSeJIx+u0SguXot8sLliG7QrFUKtOvUEkKVrUXpQZPT6EZrBdAX7FA0YsLX7ZCFv0w+gco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" alt="Pro" width="18"></span>,
et nos exercices
<a href="https://angular-exercises.ninja-squad.com/exercises/14/login">Formulaire de login</a> <span class="image"><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAIgAAACACAMAAADnN9ENAAACSVBMVEVMaXH7whr7whr7whr7whr7whr7whr7whr7whr7whr7whr7whp4o614o614o614o637whr7whp4o614o614o614o614o614o614o614o62EoKN4o614o637whqFXFKFXFKQnZm4kni0k3vA1Njr8fLd5+myytB/qLGFXFKFXFKcmY98oqp4o63V4uWFXFKFXFKoloWgmIx4o62Hpqu+nofCpI/b08yFXFKAoaaMnpzYzcSFXFKFXFKUnJaYm5O7mIDl5eOGrbaFXFKGk5Kfd2WSalyYcGClfmqhlIZ6lpx+hIWDaWOFXFKFXFJ/gICkl4nFqpeFXFKFXFKCamSDZV2EYFiDaWOCbmne2dTk7O77whqOZE6Ad3TIsJ6jwMflryWbb0h/gIDo6+rH2dz0vB58jZGIn6Cxgj17kZbOvK2FXFL7whq5iTqVt75/e3rPnC/eqSiMYk+FXFKjdkS4p6Ll6OjLtqbSwrXFubacu8PstSGynZiOsrqLZVzauj/013mrlI56mqLCtFrt69fY1dSApaTrvizz2oafgXqSb2aqxcuhrX/11GvO3uGQeHG5z9T20V7e3t7s7uX4y0P6xSjv5byYeHC+sKyli4TSzMrIzc28wcGwtLVHR0c8OztIR0c1NTWNkJEvLy+NioqTkJCHhISlqKnU2dpCQUGBhIRnZmZeYGBqbGyZnJ07Ozvf5ebLwsCmqapfYGFiYmLAw8Tw9fXs8vNqjZVBTE9PYmY4Pj9deH5mho5GU1Y9RUdhf4ZznKVKW140Njdz5u6AAAAAf3RSTlMAMIBQ7/+fEI/PYL8QcIBAIK+v/7+fz+8wUP/fYEAgEP//////////32D//yD//7///4//////UP///zDv///////P//////////+vj3Ag//+fQJ/////////fz///////////////////gHD///////+v//////////////9AWHP9fwAABxxJREFUeAHs1IVy5DAQBNBZ0DJ3mJUonGiPmZmZmZmZPv6ssb2oFFqHeYUq7LJ7mlatWhWVWDxBf4SkEHH6EwhPKk2/X0Z4sn9AknRSeJIx+u0SguXot8sLliG7QrFUKtOvUEkKVrUXpQZPT6EZrBdAX7FA0YsLX7ZCFv0w+gco0APWP0jRywpmrWwBGIJnuEBsAKERityoCDQrOzZOvjIm5KSJ0ktsBJhS0zOzAAYocikRCis7N0++IhaknFwEsERGCVCe5Vn+SE7GpK2yuk6+EtZIKdcCWBd0d/2GjZu8JABKFLmcaMjGOIjeHHZTGluA4eC91XtuU2oG6C+4GhOWHCXarvWOMTKGt0hjZ/hvgF3ec/cepfY6+SQVEQgqq7Xet5082H/g4MFDh4/g6LHj9RMnTwGnpeeMUlNAv8MxYSnSxtn5c+cvaHbxkmaXgTXSuKKuzgIuxuSaaJG/ru1uAJLdVOoW37S7MWG372iru9gifffUfWD43Lkxd2PCHtiTPMQj6dukrgIwf+7sdmdjwh5riyfmaNhTvpvL2nhGkXou2r3Q3YC10uC7eQm80uysszFhr3WnC8CaMAi39a52kSQmOrx5q9tdBmQzyIwfhJ1zNibsdkeSV9iyQpB30fa1OSb247mLRysE2eFyTDjJ+/aj2WkJwihaVcHsjf3wUak92z5J9rkjyLOz9bqeq58YczAm7I0OfVG+e59386Cpr3y+nZ65GRPxTQe+Kx9HMROvfviD1mnf+M9izaq5caQLw999qOpTsIZHJ1YW3MuMvt/9AUPLzCANymH0Tpg50TIz8/6ydTudmhNXv5Za1lY/14EnfU6/fbqdbCZpsCLFgBgP30sq4v8zk94qkT6xRz9V87TjDAgtN/Ef+NJ1qTw62wcPigwVRYVhqkL26rNCBw/ao2+Ju1J5dDgjo9xjjMaFZIIYipJzVgDeOrqn8cj9oieNx2F5r3uHeVwlmlCtqmFySkBueumlt3pEmbvSeDiS6ZlrDUIUiAqzpGO2KOJ4K7WHS3N989Ji4eoiEflCMk56LooY7j+W0sPLU4WhxTn+Nw8TYCLG475Ufao8GMGSClXEsqjJXSk9HJcOslLJMuxBqyKOnpseNSnPjVqPfqnRHxAmEAm4/6XEKo3tlf1CVays+KtUZm19jQAiET1Ja1TxeIz0bGxube9sbpiLcN5KtCht0uNV0rMbRe++934UfWAuwrk/wVjbJD3CU6Tlwyj66L333oui6MMU+5cT69GlAkTPx2WFT977JIqiXdLQn4kI27hPE+DTaJ9PtSmvxpUEQok2TI7iRT6jGksy7BuI4BfdS4SQpVF8Tgpd+F6h4SWxz1IKkWbpUThFkA8jxRdfkg4lUAyUkuQrc5EWR5KnGnygRL4mQFCpjl9WEorVcVORxg6WqIj1b8oa335HmFl/vHhFJvG+iG8q0sobBPP9d9//QAjNeBJoa2PaIAaAs3iCVs1EOnmDZCjiG4o0HuIJkp1IMTAUuZUdddmw1xrLZCbS5UhyecqOK+pOiETwzpV4jz1NGTEhPeDghqNdIV0mM2qR4kU8HeDCcEKX6mZ23A94kaqAhakinKTsCIpABBaGc+kUZcZyMpEWR0uYpwxAoxuMMg1eFiZ8TuHozxgLJpprnYMJM+gT8GgBDn9EiTJj+KAJ7FTAZMaHIBY55GAyPgZ9oRjXiBx2YjDv16en4x5yqCgEXhDAY2SIi+upon5Frg1eEIBHZpTYKoIp9qLMfM0LRJa1ORU6ZeJmNpn5IEN+/CmKfna0TFNyJj12EUAzm1/JfLB3f4nK/FpnlJwqORVcAvjsAwV9uv8WSX6qbwO7BadCgRArUuQrqiHyYyT5vR6RydBRuIQoqsJIQGn+kCJ/phY5pVZDEtaM1n5SgGb96+9//uAeHLb4udxkXpNgj3mJdlk/8yCzPOMip3Ke6oFXS7nJyVOqItOXvKSbbK8uChxoEOIaHO/V0CiI/VXiIjjRsEj3Yw4g3gOgu3rHwDTaWg9l5EGaZ9UYCtc0bpQTbkvz/4GN51Jy4u8SgI7mRr7vu5qbq7/xsW4yAL1ommgoGh1GWEIaAPDGm1gDrGWBTMEXLMihw/gpI/1siz/AwxqQjjoGOfSOB2gFGuyVSXEqvQinTa/RgiWqQ2g6AxFg0tYJDTS5XKhLBJt0yPSKpSl9u9b4oaz1DiX8D/PG9PeOWj+1+ZBajK7/QXCUeKfMRSA3trS0gM6IjxLXTCRjWD1DqyI8SvI2RXiUPGZThEeJd8qmCI8S16YIj5LQjohmwsvbFOFRUrIpwqPEsyrCo8S1KcKj5FULIvrbYrdNER4lJZsiPEo8OyKaKHFtivAouWRThEeJ021ThEdJzqYIj5KCHRFNlDxtU4RHySWbIo0Oo9uKiCZKcjZFeJQU7IhoouTphCL/Alq7hNcCRv2nAAAAAElFTkSuQmCC" alt="Pro" width="18"></span>,
<a href="https://angular-exercises.ninja-squad.com/exercises/15/register">Formulaire d&#8217;enregistrement</a> <span class="image"><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAIgAAACACAMAAADnN9ENAAACSVBMVEVMaXH7whr7whr7whr7whr7whr7whr7whr7whr7whr7whr7whp4o614o614o614o637whr7whp4o614o614o614o614o614o614o614o62EoKN4o614o637whqFXFKFXFKQnZm4kni0k3vA1Njr8fLd5+myytB/qLGFXFKFXFKcmY98oqp4o63V4uWFXFKFXFKoloWgmIx4o62Hpqu+nofCpI/b08yFXFKAoaaMnpzYzcSFXFKFXFKUnJaYm5O7mIDl5eOGrbaFXFKGk5Kfd2WSalyYcGClfmqhlIZ6lpx+hIWDaWOFXFKFXFJ/gICkl4nFqpeFXFKFXFKCamSDZV2EYFiDaWOCbmne2dTk7O77whqOZE6Ad3TIsJ6jwMflryWbb0h/gIDo6+rH2dz0vB58jZGIn6Cxgj17kZbOvK2FXFL7whq5iTqVt75/e3rPnC/eqSiMYk+FXFKjdkS4p6Ll6OjLtqbSwrXFubacu8PstSGynZiOsrqLZVzauj/013mrlI56mqLCtFrt69fY1dSApaTrvizz2oafgXqSb2aqxcuhrX/11GvO3uGQeHG5z9T20V7e3t7s7uX4y0P6xSjv5byYeHC+sKyli4TSzMrIzc28wcGwtLVHR0c8OztIR0c1NTWNkJEvLy+NioqTkJCHhISlqKnU2dpCQUGBhIRnZmZeYGBqbGyZnJ07Ozvf5ebLwsCmqapfYGFiYmLAw8Tw9fXs8vNqjZVBTE9PYmY4Pj9deH5mho5GU1Y9RUdhf4ZznKVKW140Njdz5u6AAAAAf3RSTlMAMIBQ7/+fEI/PYL8QcIBAIK+v/7+fz+8wUP/fYEAgEP//////////32D//yD//7///4//////UP///zDv///////P//////////+vj3Ag//+fQJ/////////fz///////////////////gHD///////+v//////////////9AWHP9fwAABxxJREFUeAHs1IVy5DAQBNBZ0DJ3mJUonGiPmZmZmZmZPv6ssb2oFFqHeYUq7LJ7mlatWhWVWDxBf4SkEHH6EwhPKk2/X0Z4sn9AknRSeJIx+u0SguXot8sLliG7QrFUKtOvUEkKVrUXpQZPT6EZrBdAX7FA0YsLX7ZCFv0w+gco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" alt="Pro" width="18"></span>
et
<a href="https://angular-exercises.ninja-squad.com/exercises/16/control-value-accessor">Control Value Accessor</a> <span class="image"><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAIgAAACACAMAAADnN9ENAAACSVBMVEVMaXH7whr7whr7whr7whr7whr7whr7whr7whr7whr7whr7whp4o614o614o614o637whr7whp4o614o614o614o614o614o614o614o62EoKN4o614o637whqFXFKFXFKQnZm4kni0k3vA1Njr8fLd5+myytB/qLGFXFKFXFKcmY98oqp4o63V4uWFXFKFXFKoloWgmIx4o62Hpqu+nofCpI/b08yFXFKAoaaMnpzYzcSFXFKFXFKUnJaYm5O7mIDl5eOGrbaFXFKGk5Kfd2WSalyYcGClfmqhlIZ6lpx+hIWDaWOFXFKFXFJ/gICkl4nFqpeFXFKFXFKCamSDZV2EYFiDaWOCbmne2dTk7O77whqOZE6Ad3TIsJ6jwMflryWbb0h/gIDo6+rH2dz0vB58jZGIn6Cxgj17kZbOvK2FXFL7whq5iTqVt75/e3rPnC/eqSiMYk+FXFKjdkS4p6Ll6OjLtqbSwrXFubacu8PstSGynZiOsrqLZVzauj/013mrlI56mqLCtFrt69fY1dSApaTrvizz2oafgXqSb2aqxcuhrX/11GvO3uGQeHG5z9T20V7e3t7s7uX4y0P6xSjv5byYeHC+sKyli4TSzMrIzc28wcGwtLVHR0c8OztIR0c1NTWNkJEvLy+NioqTkJCHhISlqKnU2dpCQUGBhIRnZmZeYGBqbGyZnJ07Ozvf5ebLwsCmqapfYGFiYmLAw8Tw9fXs8vNqjZVBTE9PYmY4Pj9deH5mho5GU1Y9RUdhf4ZznKVKW140Njdz5u6AAAAAf3RSTlMAMIBQ7/+fEI/PYL8QcIBAIK+v/7+fz+8wUP/fYEAgEP//////////32D//yD//7///4//////UP///zDv///////P//////////+vj3Ag//+fQJ/////////fz///////////////////gHD///////+v//////////////9AWHP9fwAABxxJREFUeAHs1IVy5DAQBNBZ0DJ3mJUonGiPmZmZmZmZPv6ssb2oFFqHeYUq7LJ7mlatWhWVWDxBf4SkEHH6EwhPKk2/X0Z4sn9AknRSeJIx+u0SguXot8sLliG7QrFUKtOvUEkKVrUXpQZPT6EZrBdAX7FA0YsLX7ZCFv0w+gco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" alt="Pro" width="18"></span>.
Tu apprendras à construire des formulaires en utilisant le <code>ReactiveFormsModule</code>,
à écrire des composants de formulaire réutilisables,
à écrire des validateurs custom, comment tester les formulaires
et authentifier tes utilisateurs&#160;!</p>
</div>
</td>
</tr>
</table>
</div>
<div style="page-break-after: always;"></div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="zones">21. Les Zones et la magie d&#8217;Angular</h2>
<div class="sectionbody">
<div class="paragraph">
<p>J&#8217;espère que tu te souviens des explications du chapitre précédent sur les signaux.
Angular veut que tu stockes l&#8217;état de tes composants dans des signaux.
Les templates lisent les signaux pour afficher l&#8217;information qu&#8217;ils contiennent.
Grâce aux super-pouvoirs des signaux, une relation de dépendance est établie entre
le template et les signaux qu&#8217;il lit. Angular est notifié quand la valeur
d&#8217;un signal change, et il met à jour le DOM des templates qui dépendent de ce signal.</p>
</div>
<div class="paragraph">
<p>Si tu expérimentes avec la version actuelle d&#8217;Angular (ou les versions plus anciennes), tu
réaliseras qu&#8217;en réalité, tu n&#8217;as pas vraiment besoin de stocker l&#8217;état dans des signaux.
Si une simple propriété change, Angular est capable de détecter le changement et de mettre à
jour le DOM.
Ne fais pas cela cependant&#160;: cela fonctionne seulement parce que Angular supporte encore
le mécanisme de détection de changements "brutal" qui ne s&#8217;appuie pas sur les signaux.</p>
</div>
<div class="paragraph">
<p>Afin de mieux comprendre comment les applications "legacy" fonctionnent, et pourquoi c&#8217;est
une bonne idée de passer aux signaux, expliquons la magie qu&#8217;il y a derrière cette détection de
changements.</p>
</div>
<div class="sect2">
<h3 id="_zonejs">21.1. ZoneJS</h3>
<div class="paragraph">
<p>Le mécanisme de détection de changements "legacy" est basé sur un truc sale&#160;: ZoneJS.
ZoneJS est une bibliothèque qui a été écrite pour les besoins d&#8217;Angular, mais qui
n&#8217;y est pas fortement couplée. Son principe est assez simple, mais moche&#160;: elle patche
plein de fonctions du navigateur. En gros, toutes les fonctions du navigateur qui reçoivent
une fonction de callback, comme <code>setTimeout</code>, <code>setInterval</code>, <code>Element.addEventListener</code>,
<code>Promise.then</code>, etc.</p>
</div>
<div class="paragraph">
<p>Le but de ce <em>"monkey-patching"</em>, pour Angular, est d&#8217;en faire une sorte de mouchard.
Chaque fois qu&#8217;une de ces fonctions de callback est appelée, ZoneJS indique à Angular
que quelque chose s&#8217;est produit.</p>
</div>
<div class="paragraph">
<p>Pour l&#8217;illustrer, prenons <code>setTimeout</code> comme exemple. Le principe du <em>"monkey-patching"</em>
de ZoneJS est le suivant (il ne s&#8217;agit pas du code réel)&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="javascript">const originalSetTimeout = window.setTimeout;
window.setTimeout = (callback, timeout) =&gt; {
  const snitchingCallback = () =&gt; {
    callback();
    angular.notifyThatSomeCodeHasBeenExecuted();
  };
  originalSetTimeout(snitchingCallback, timeout);
};</code></pre>
</div>
</div>
<div class="paragraph">
<p>En quoi cela aide-t-il&#160;?
Grâce à ZoneJS, le framework <em>sait</em> quand du code a été exécuté.
Il sait donc qu&#8217;une partie de l&#8217;état de l&#8217;application <em>pourrait</em> avoir changé.
En revanche, il ne sait pas <em>si</em> quelque chose a vraiment changé, et encore moins <em>ce qui</em> a changé.</p>
</div>
<div class="paragraph">
<p>Pour garder le DOM à jour, Angular va donc lancer une détection de changements chaque fois que
ZoneJS lui indique que du code a été exécuté.</p>
</div>
<div class="paragraph">
<p>Cette première partie montre déjà certaines des raisons pour lesquelles Angular veut
se débarrasser de ZoneJS en introduisant les signaux&#160;:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>chaque application Angular doit télécharger le code de ZoneJS et attendre qu&#8217;elle ait
patché le navigateur avant de démarrer l&#8217;application, ce qui impacte bien sûr les performances&#160;;</p>
</li>
<li>
<p>chaque appel aux fonctions patchées provoque plus tard des détections de changements, y compris
les appels des bibliothèques qui ne modifient pas l&#8217;état de l&#8217;application. Donc plein de détections
de changements sont effectuées pour rien&#160;;</p>
</li>
<li>
<p>les piles d&#8217;appel des erreurs qui se produisent à l&#8217;exécution contiennent du code de ZoneJS
qui les rend plus difficiles à lire et à comprendre.</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_la_détection_de_changement">21.2. La détection de changement</h3>
<div class="paragraph">
<p>La seconde partie du problème est la détection de changements en elle-même.
C&#8217;est bien beau de savoir quand on doit la lancer, mais comment fonctionne-t-elle&#160;?</p>
</div>
<div class="paragraph">
<p>Tout d&#8217;abord, il faut se rappeler qu&#8217;une application Angular est un arbre de composants.
Lorsque la détection de changement est lancée,
le framework traverse <em>tous</em> les composants de l&#8217;arbre, de la racine jusqu&#8217;aux feuilles.
Il évalue <em>toutes</em> les expressions utilisées dans les templates, et compare chaque résultat avec
le résultat précédent.
Si une évaluation retourne un résultat différent, le DOM est modifié.
L&#8217;expression qui a une nouvelle valeur peut être passée en input d&#8217;un composant enfant.
Dans ce cas, Angular écrit la nouvelle valeur dans le composant enfant, et appelle sa méthode
<code>ngOnChanges</code>, qui peut provoquer un changement d&#8217;état dans le composant enfant. Puis le
composant enfant subit à son tour la détection de changements.</p>
</div>
<div class="paragraph">
<p>Heureusement pour les performances, le parcours de l&#8217;arbre n&#8217;est effectué qu&#8217;une seule fois
par détection. Mais cela a un inconvénient&#160;: on peut introduire un bug si, pendant la détection
d&#8217;un composant enfant, on modifie l&#8217;état de ce composant ou d&#8217;un parent.
En effet, comme une seule passe est faite sur l&#8217;arbre, ces changements ne seront pas détectés
avant que ZoneJS ne déclenche une nouvelle passe.</p>
</div>
<div class="paragraph">
<p>C&#8217;est donc tout simplement interdit de faire cela.
Pendant le développement, chaque détection de changement fait en réalité deux passes
successives sur l&#8217;arbre des composants. À la seconde passe, si le moindre changement est détecté,
alors Angular lève une erreur pour te prévenir que tu n&#8217;as pas respecté le principe de
flux unidirectionnel de données (la fameuse <a href="https://angular.dev/errors/NG0100"><code>ExpressionChangedAfterItHasBeenCheckedError</code></a>).</p>
</div>
<div class="paragraph">
<p>Tu vois que la détection de changements est en effet assez brutale.
Les expressions dans les templates sont évaluées de très nombreuses fois.
C&#8217;est la raison pour laquelle il faut éviter qu&#8217;elles appellent des fonctions complexes,
qui vont ralentir chaque détection de changements.</p>
</div>
<div class="sect3">
<h4 id="_inline_caching">21.2.1. Inline caching</h4>
<div class="paragraph">
<p>Un autre paramètre entre en compte dans les performances de la détection de changements&#160;:
le temps qu&#8217;il faut au framework pour évaluer les expressions.
L&#8217;équipe Angular a fait parler sa connaissance des sciences informatiques
et des machines virtuelles pour les rendre aussi rapides que possibles.</p>
</div>
<div class="paragraph">
<p>Pour améliorer les performances, les machines virtuelles qui font tourner des
langages dynamiques comme JavaScript,
utilisent un concept nommé <em>inline caching</em>.
C&#8217;est une technique très ancienne
(inventée pour SmallTalk je crois, soit près de 40 ans, une éternité en informatique),
basée un principe finalement assez simple&#160;:
si un programme appelle une fonction beaucoup de fois avec le même type d&#8217;objet,
la VM devrait se rappeler de quelle façon elle évalue les propriétés des objets en question.
Il y a donc un cache qui est créé, d&#8217;où le nom, <em>inline caching</em>.
La VM commence par regarder dans le cache si elle connaît le type d&#8217;objet qu&#8217;elle reçoit,
et si c&#8217;est le cas, utilise la méthode optimisée de chargement.</p>
</div>
<div class="paragraph">
<p>Ce genre de cache ne fonctionne vraiment que
si les arguments de la méthode ont la même forme.
Par exemple <code>{name: 'Cédric'}</code> et <code>{name: 'Cyril'}</code> ont la même forme.
Par contre <code>{name: 'JB', skills: []}</code> n&#8217;a pas la même forme.
Lorsque les arguments ont toujours la même forme,
on dit que le cache est <em>monomorphique</em>,
un bien grand mot pour dire qu&#8217;il n&#8217;a qu&#8217;une seule entrée,
ce qui donne des résultats très rapides.
S&#8217;il contient quelques entrées, on dit qu&#8217;il est <em>polymorphique</em>,
cela veut dire que la méthode peut être appelée avec des types d&#8217;objets différents,
et le code est un peu plus lent.
Enfin, il arrive que la VM laisse tomber le cache s&#8217;il y a trop de types d&#8217;objet différents,
c&#8217;est ce qu&#8217;on appelle un état <em>mégamorphique</em>.
Et tu l&#8217;as compris, c&#8217;est le cas le moins performant.</p>
</div>
<div class="paragraph">
<p>Afin de bénéficier de l'<em>inline caching</em>, Angular a adopté une stratégie intelligente.
Plutôt que d&#8217;utiliser une seule fonction capable d&#8217;évaluer des expressions impliquant
tous les types d&#8217;objet,
l&#8217;équipe Angular a pris le parti de compiler les templates en code JavaScript,
et de faire générer au compilateur un ensemble de fonctions spécifiques à chaque
composant.</p>
</div>
<div class="paragraph">
<p>La VM peut optimiser ce code parce qu&#8217;il est monomorphique.</p>
</div>
</div>
<div class="sect3">
<h4 id="_peaufiner_la_détection_de_changements">21.2.2. Peaufiner la détection de changements</h4>
<div class="paragraph">
<p>Si nécessaire, il est possible d&#8217;aller plus loin que ces optimisations
automatiques fournies par le framework&#160;: les composants peuvent être configurés avec une stratégie de <em>ChangeDetection</em> alternative. Mais ça c&#8217;est pour un autre chapitre.</p>
</div>
<div class="paragraph">
<p>Le futur va plus loin que ça. Grâce aux signaux, on va pouvoir se passer complètement
de ZoneJS et de ces traversées de l&#8217;arbre des composants. C&#8217;est en fait déjà possible,
mais encore expérimental pour l&#8217;instant.</p>
</div>
<div class="paragraph">
<p>Si tu veux apprendre à customiser la détection de changements ou à rendre ton application <em>"zoneless"</em>, lis le
<a href="#performances">chapitre</a>
sur les performances.</p>
</div>
<div style="page-break-after: always;"></div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="aot-compiler">22. Compilation Angular&#160;: JiT (Just in Time) et AoT (Ahead of Time)</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_génération_de_code">22.1. Génération de Code</h3>
<div class="paragraph">
<p>Dans le chapitre précédent,
nous avons brièvement évoqué comment le framework <em>générait</em>
une fonction de détection de changement pour chaque composant.</p>
</div>
<div class="paragraph">
<p>C&#8217;est une caractéristique intéressante d&#8217;Angular,
que tu ne retrouveras pas dans d&#8217;autres frameworks&#160;:
Angular, au démarrage de ton application,
va <em>compiler</em> tes templates
et <em>générer</em> du code dynamique pour chaque composant.</p>
</div>
<div class="paragraph">
<p>Le HTML que tu écris dans tes templates n&#8217;est jamais lu directement par le navigateur.
À la place, Angular génère une <em>component definition</em> pour chaque composant
qui représente exactement ce que tu as écrit dans ton template.
Cette définition est générée dans un champ statique du composant.</p>
</div>
<div class="paragraph">
<p>Prenons par exemple notre fameux <code>PonyComponent</code>.
Le template est essentiellement une image avec une source dynamique,
et une légende avec interpolation.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="html">&lt;figure&gt;
  &lt;img [src]="ponyImageUrl()"&gt;
  &lt;figcaption&gt;{{ ponyModel().name }}&lt;/figcaption&gt;
&lt;/figure&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>Quand Angular le compile,
il commence par <em>parser</em> le template
pour générer un arbre de syntaxe abstraite (<em>Abstract Syntax Tree</em>, AST).
Un AST est un arbre représentant la structure du template,
que les compilateurs utilisent traditionnellement pour représenter la structure d&#8217;un programme.
C&#8217;est le résultat de la phase <em>d&#8217;analyse syntaxique</em> de la compilation.
Cet AST sera ensuite utilisé pour générer le code JS dynamique,
une <em>component definition</em> par composant.
Une définition de composant contient différentes choses,
et parmi elles, le template, représenté par une fonction.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="javascript">elementStart(0, 'figure');
{
  element(1, 'img');
}
{
  elementStart(2, 'figcaption');
  text(3);
  elementEnd();
}
elementEnd();</code></pre>
</div>
</div>
<div class="admonitionblock warning">
<table>
<tr>
<td class="icon">
<i class="fa icon-warning" title="Attention"></i>
</td>
<td class="content">
Ce chapitre décrit le code généré par le compilateur/moteur de rendu introduit en Angular&#160;8.0
et appelé "Ivy".
Nous avons écrit <a href="https://blog.ninja-squad.com/2019/05/07/what-is-angular-ivy/">un article assez détaillé</a>
sur Ivy si cela t&#8217;intéresse.
Ce moteur de rendu en est à sa troisième itération.
En effet, il a déjà été réécrit en Angular&#160;4.0.
Ces itérations ont amené soit de meilleures performances, soit des améliorations de la taille des bundles
ou les deux, tout en gardant la même syntaxe de template, afin d&#8217;être rétro-compatible avec les applications existantes,
et de nous permettre de migrer facilement.
La plupart des développeurs n&#8217;ont même pas remarqué le changement de moteur introduit par Angular&#160;4.0 par exemple.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Avec cette fonction,
Angular est capable de créer le DOM correspondant à notre <code>PonyComponent</code>&#160;:
la fonction crée les <code>HTMLElement</code> correspondants à chaque élément
et les attache au DOM.</p>
</div>
<div class="paragraph">
<p>Mais comment gère-t-il la détection de changement&#160;?
La fonction définissant le template est en fait un peu plus longue&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="javascript">template: (renderFlags: RenderFlags, component: PonyComponent) =&gt; {
  if (renderFlags &amp; RenderFlags.Create) {
    elementStart(0, 'figure');
    {
      element(1, 'img');
    }
    {
      elementStart(2, 'figcaption');
      text(3);
      elementEnd();
    }
    elementEnd();
  }
  if (renderFlags &amp; RenderFlags.Update) {
    advance();
    property('src', component.ponyImageUrl());
    advance(2);
    textInterpolate(component.ponyModel().name);
  }
},</code></pre>
</div>
</div>
<div class="paragraph">
<p>Cette fonction de template a deux parties&#160;:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>la création du composant comme expliqué ci-dessus&#160;;</p>
</li>
<li>
<p>la mise à jour du composant qui réalise essentiellement ce que tu aurais pu écrire à la main
(c&#8217;est à dire que l&#8217;image a une propriété <code>src</code> qui doit refléter le résultat de la méthode <code>ponyImageUrl()</code> de mon composant,
et une <code>figcaption</code> dont le texte doit refléter le nom du poney).</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Elle est invoquée par le framework à chaque fois qu&#8217;il a besoin de vérifier
si un changement s&#8217;est produit (voir le chapitre précédent).
Elle récupère la valeur de ses parties dynamiques
(l&#8217;attribut <code>src</code> et son interpolation),
puis appelle une fonction du framework avec
l&#8217;indice de l&#8217;élément à mettre à jour pour le sélectionner,
puis une autre avec la propriété et sa nouvelle valeur.
Le framework compare alors la valeur stockée précédemment pour cette propriété,
et si elle a changé, met à jour la valeur stockée,
et remplace la valeur de la propriété par cette nouvelle valeur.</p>
</div>
<div class="paragraph">
<p>Ce code généré est très rapide, et peut être optimisé par les moteurs JavaScript
(voir la partie sur le monomorphisme et le <em>inline caching</em> du chapitre précédent).
Cette génération de code prend du temps, et elle était auparavant faite dans le navigateur, au démarrage de l&#8217;application.
C&#8217;est ce que l&#8217;on appelait la compilation Juste à Temps (<em>Just in Time</em>, JiT).
Le compilateur Ivy est maintenant suffisamment rapide pour
que cette compilation se fasse directement quand tu lances un <code>ng serve</code> ou un <code>ng build</code>.
C&#8217;est ce que l&#8217;on appelle la compilation AoT, que l&#8217;on détaille ci-dessous.</p>
</div>
<div class="paragraph">
<p>Pour résumer, quand tu utilises la compilation JiT&#160;:
tu écris du code TypeScript et des templates en HTML,
tu compiles le TypeScript en JavaScript,
et tu envoies du JS et du HTML à tes utilisateurs.
Et à l&#8217;exécution, le HTML est aussi compilé en JS.</p>
</div>
</div>
<div class="sect2">
<h3 id="_compilation_en_avance_ahead_of_time_aot">22.2. Compilation En Avance (<em>Ahead of Time</em>, AoT)</h3>
<div class="paragraph">
<p>On peut donc générer ce code <em>avant</em> le démarrage de l&#8217;application,
grâce à un compilateur fourni par l&#8217;équipe Angular&#160;;
le compilateur <em>Ahead of Time</em> (AoT).
Tu peux l&#8217;invoquer manuellement dans ton projet (<code>ngc</code>),
ou, si tu utilises la CLI (tu devrais),
cela se fait par défaut quand tu exécutes <code>ng serve</code> ou <code>ng build</code>
depuis Angular CLI v8.1.</p>
</div>
<div class="paragraph">
<p>Le build va alors utiliser le compilateur Angular
pour compiler les templates en fichiers TypeScript.
En fichiers TypeScript&#160;?
Oui, en fichier TypeScript, parce que cela permet de vérifier
qu&#8217;on n&#8217;a pas fait d&#8217;erreur de syntaxe dans nos templates&#160;!
Le code TypeScript généré et notre code applicatif seront ensuite compilés
(<code>ngc</code> va appeler le compilateur TypeScript immédiatement)
et si tu as fait une faute dans un template,
tu verras une erreur&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="html">&lt;figure&gt;
  &lt;!-- wrong computed name --&gt;
  &lt;img [src]="ponyImageUr()"&gt;
  &lt;figcaption&gt;{{ ponyModel().name }}&lt;/figcaption&gt;
&lt;/figure&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>Le compilateur Angular génère ensuite ce code TypeScript&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="javascript">&lt;!-- wrong computed name in the generated code --&gt;
property('src', component.ponyImageUr());
advance(2);
textInterpolate(component.ponyModel().name);</code></pre>
</div>
</div>
<div class="paragraph">
<p>Et ce code lèvera une erreur de compilation TypeScript&#160;:</p>
</div>
<div class="literalblock">
<div class="content">
<pre>Property 'ponyImageUr' does not exist on type 'PonyComponent'.</pre>
</div>
</div>
<div class="paragraph">
<p>C&#8217;est plutôt cool,
parce que cela signifie que tu peux vérifier tous tes templates avant même
de démarrer l&#8217;application.
Ainsi, tes refactorings futurs seront sans douleur&#160;:
si tu renommes une méthode ou une propriété d&#8217;un composant,
tu sauras immédiatement si un template doit aussi être mis à jour,
parce qu&#8217;il cassera le build.</p>
</div>
<div class="paragraph">
<p>Cela signifie aussi que la compilation peut lever une erreur
alors que ton code semblait fonctionner en mode JiT.
Par exemple, si tu as un <code>input()</code> privé d&#8217;un composant
utilisé dans un template, cela ne produira pas d&#8217;erreur en mode JiT
(parce que le JavaScript n&#8217;a pas la notion de propriété privée),
mais cela échouera en mode AoT
(parce que le code TypeScript généré pour un autre composant doit accéder à cette propriété).</p>
</div>
<div class="paragraph">
<p>Compiler ton application avant de l&#8217;envoyer à tes utilisateurs
va aussi grandement améliorer le temps de démarrage de ton application,
puisque la compilation sera déjà faite&#160;!</p>
</div>
<div class="paragraph">
<p>Pour résumer, en mode AoT&#160;:
tu écris toujours du TypeScript et du HTML,
tu compiles le HTML en TypeScript, puis tout le code TypeScript en JavaScript,
puis tu envoies tout le code JS à tes utilisateurs.</p>
</div>
<div class="paragraph">
<p>L&#8217;inconvénient sera la taille de tes modules JavaScript à envoyer à tes utilisateurs&#160;:
le code généré est plus large que les templates non compilés.
Cela est partiellement compensé par le fait que tu n&#8217;as plus besoin
d&#8217;envoyer le compilateur Angular à tes utilisateurs,
puisque les templates sont déjà compilés.
Et le compilateur est un bon gros morceau de code,
alors le gain n&#8217;est pas négligeable.
Sur des applications de taille moyenne ou large,
cela ne compense cependant pas, en général, l&#8217;augmentation de la taille par
le code généré.
Si tu veux avoir les bénéfices de la compilation AoT
ET conserver des modules de taille raisonnable,
il te faudra creuser les fonctionnalités de <em>lazy-loading</em> que nous avons
expliquées dans le chapitre sur le Routeur.</p>
</div>
<div style="page-break-after: always;"></div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="advanced-observables">23. Observables&#160;: utilisation avancée</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Quand on démarre avec Angular, RxJS paraît très complexe. Les débutants essaient souvent
d&#8217;éviter de l&#8217;utiliser. Après tout, les autres frameworks n&#8217;utilisent pas des observables.
Par ailleurs, Angular utilise des signaux maintenant.
Alors, faut-il vraiment apprendre RxJS&#160;?</p>
</div>
<div class="paragraph">
<p>Bon, d&#8217;abord, tu n&#8217;as pas vraiment le choix pour l&#8217;instant. Angular te force toujours
à l&#8217;utiliser si tu veux profiter de son client HTTP, de son routeur ou de ses formulaires réactifs.</p>
</div>
<div class="paragraph">
<p>Mais même s&#8217;il ne te l&#8217;imposait pas, RxJS est vraiment une bibliothèque excellente,
qui permet de rendre beaucoup plus simple, efficace et correcte la programmation asynchrone.
Le code asynchrone basé sur les promesses est souvent plein de bugs subtils ou d&#8217;inefficacités.
Et RxJS n&#8217;est pas lié à Angular, donc apprendre à l&#8217;utiliser peut être bénéfique pour
n&#8217;importe quelle application qui utiliserait un autre framework, ou pas de framework du tout.</p>
</div>
<div class="sect2">
<h3 id="_certains_laiment_chaud">23.1. Certains l&#8217;aiment chaud</h3>
<div class="paragraph">
<p>On a appris dans le chapitre sur la programmation réactive qu&#8217;un <code>Observable</code>
représente une séquence d&#8217;événements à laquelle on peut souscrire.</p>
</div>
<div class="paragraph">
<p>Mais il y a une subtile distinction à percevoir entre deux familles d&#8217;Observables&#160;:
les Observables "chauds" (<em>"hot"</em>), et les Observables "froids" (<em>"cold"</em>).</p>
</div>
<div class="paragraph">
<p>Les observables froids émettent des événements uniquement quand on s&#8217;y est abonné.
Tu peux faire l&#8217;analogie avec le visionnage d&#8217;une vidéo sur Youtube&#160;:
le flux vidéo ne démarre qu&#8217;après avoir appuyé sur lecture.
Par exemple, les observables retournés par la classe <code>HttpClient</code> sont des observables froids&#160;:
ils ne déclenchent une requête que quand on invoque <code>subscribe</code>.
Et chaque appel à <code>subscribe</code> envoie une nouvelle requête et résulte en un nouveau flux
d&#8217;événements (limité à un seul événement dans ce cas précis).</p>
</div>
<div class="paragraph">
<p>Les observables chauds sont différents&#160;:
ils émettent des événements sans se préoccuper de savoir si on a souscrit ou pas.
L&#8217;analogie serait celle de la télévision&#160;:
si tu allumes la TV, tu tombes au milieu d&#8217;une émission,
qui a pu démarrer il y a quelques minutes comme quelques heures.
L&#8217;observable <code>valueChanges</code> dans un <code>FormControl</code> est un observable chaud&#160;:
tu ne recevras pas les valeurs émises avant ton abonnement,
mais seulement celles émises après.
Et à l&#8217;inverse d&#8217;un observable froid, deux souscripteurs différents recevront
les mêmes événements.</p>
</div>
</div>
<div class="sect2">
<h3 id="_dé_souscriptions">23.2. Dé-souscriptions</h3>
<div class="paragraph">
<p>Dans notre application Ponyracer, une course en direct peut être représentée par un observable,
qui émet la position des poneys.
Quand la course se termine, l&#8217;observable arrête d&#8217;émettre des événements.</p>
</div>
<div class="paragraph">
<p>Mais peut-être que l&#8217;utilisateur-trice ne va pas regarder la course jusqu&#8217;au bout.
Que se passe-t-il alors&#160;? Le composant va être détruit.
Mais, si on a oublié de dé-souscrire,
alors la fonction <code>next</code> va continuer à faire son travail à chaque événement.
Même si le composant n&#8217;est plus affiché&#160;!</p>
</div>
<div class="paragraph">
<p>Cela peut conduire à des fuites mémoire et à toutes sortes de problème
(du trafic réseau supplémentaire, une surcharge du serveur, etc.).
Donc la bonne pratique en général est de dé-souscrire avant que le composant ne soit
détruit.</p>
</div>
<div class="paragraph">
<p>Un moyen de faire cela est de stocker la <code>Subscription</code> retournée par <code>subscribe</code> dans une
propriété du composant et, dans la méthode <code>ngOnDestroy</code>, d&#8217;appeler <code>unsubscribe</code> sur cette souscription&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="javascript">export class LiveRaceComponent implements OnDestroy {
  private subscription: Subscription;

  constructor() {
    const raceService = inject(RaceService);
    this.subscription = raceService.live().subscribe(() =&gt; {
      // ...
    });
  }

  ngOnDestroy() {
    this.subscription.unsubscribe();
  }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Comme on l&#8217;a expliqué auparavant, on est automatiquement dé-souscrit lorsque l&#8217;observable signale
sa complétion.
Un autre moyen d&#8217;éviter les troubles causés par des souscriptions de trop longue durée consiste
à faire en sorte que l&#8217;observable signale sa complétion lorsque le composant est détruit.
Depuis Angular v16, on peut faire cela simplement en utilisant l&#8217;opérateur <code>takeUntilDestroyed</code>
fourni par le framework dans le package <code>@angular/core/rxjs-interop</code>.
Cet opérateur doit être le dernier dans la chaîne, juste avant l&#8217;appel à <code>subscribe</code>.
De cette manière, il s&#8217;assure qu&#8217;on dé-souscrit à toute la chaîne d&#8217;observables quand le composant
est détruit.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="javascript">export class LiveRaceComponent {
  constructor() {
    const raceService = inject(RaceService);
    raceService
      .live()
      .pipe(takeUntilDestroyed())
      .subscribe(() =&gt; {
        // ...
      });
  }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Y a-t-il des situations où ce n&#8217;est pas nécessaire de dé-souscrire&#160;?
Si tu n&#8217;es pas sûr de toi, respecte la bonne pratique et dé-souscris.
C&#8217;est intéressant cependant de comprendre quand c&#8217;est absolument essentiel de dé-souscrire
et quand ce n&#8217;est pas un drame de ne pas le faire.</p>
</div>
<div class="paragraph">
<p>Puisqu&#8217;on est automatiquement dé-souscrit quand un observable signale une complétion ou une erreur,
ce n&#8217;est pas un gros problème de ne pas dé-souscrire aux observables HTTP par exemple&#160;:
elles se terminent ou signalent une erreur après un temps court, d&#8217;habitude avant ou peu après
la destruction du composant.</p>
</div>
<div class="paragraph">
<p>Pareillement, si l&#8217;émetteur des événements est détruit en même temps que le composant
qui y a souscrit (par exemple, l'<code><code>ActivatedRoute</code></code> d&#8217;un composant associé à une route,
ou le formulaire créé par le composant), alors ne pas dé-souscrire est également acceptable.</p>
</div>
</div>
<div class="sect2">
<h3 id="_dé_souscriptions_automatiques">23.3. Dé-souscriptions automatiques</h3>
<div class="paragraph">
<p>Un bon moyen de ne pas oublier de dé-souscrire est&#8230;&#8203; de ne pas souscrire.
Bon, quelqu&#8217;un va devoir le faire, sinon rien ne se produira.
Mais si tu laisses le framework souscrire à ta place, il dé-souscrira aussi à ta place.</p>
</div>
<div class="paragraph">
<p>Ce n&#8217;est pas toujours possible. Pour déclencher des effets de bord,
souscrire explicitement est pratiquement inévitable.</p>
</div>
<div class="paragraph">
<p>Mais si le but de l&#8217;observable est d&#8217;obtenir des informations à afficher, alors tu
peux laisser le framework souscrire et dé-souscrire pour toi, en utilisant <code>toSignal</code>:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="javascript">export class LiveRaceComponent {
  readonly liveRace: Signal&lt;LiveRaceModel | undefined&gt; = toSignal(inject(RaceService).live());
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>C&#8217;est ma solution préférée. Avant que les signaux ne soient introduits, un autre moyen était
fréquemment utilisé (et l&#8217;est peut-être toujours dans tes projets)&#160;: le <em>pipe</em> <code>async</code>.</p>
</div>
<div class="paragraph">
<p>Son utilisation consiste à exposer l&#8217;observable elle-même comme propriété du composant,
et de laisser le <em>pipe</em> <code>async</code> souscrire et dé-souscrire pour toi, directement depuis le template&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="javascript">@Component({
  selector: 'ns-live-race',
  template: `{{ (liveRace$ | async)?.name }}`,
  imports: [AsyncPipe]
})
export class LiveRaceComponent {
  liveRace$: Observable&lt;LiveRaceModel&gt; = inject(RaceService).live();
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Comme avec <code>toSignal</code>, le pipe <code>async</code> ne peut pas retourner une course tant que l&#8217;observable
n&#8217;en a pas émis. C&#8217;est la raison pour laquelle on utilise l&#8217;opérateur <code>?.</code>.</p>
</div>
<div class="paragraph">
<p>Et si on veut aussi afficher l&#8217;instant de départ de la course&#160;? On pourrait écrire ça&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="javascript">@Component({
  selector: 'ns-live-race',
  template: `❌ don't do this
    &lt;div&gt;{{ (liveRace$ | async)?.name }}&lt;/div&gt;
    &lt;div&gt;{{ (liveRace$ | async)?.startInstant | date }}&lt;/div&gt;`,
  imports: [AsyncPipe, DatePipe]
})
export class LiveRaceComponent {
  liveRace$: Observable&lt;LiveRaceModel&gt; = inject(RaceService).live();
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Est-ce que tu vois où est le problème&#160;?
On appelle deux fois le <em>pipe</em> <code>async</code>,
ce qui veut dire qu&#8217;on souscrit deux fois à l&#8217;observable.
Si l&#8217;observable est froide, deux flux différents d&#8217;événements sont générés
(deux requêtes et réponses HTTP différentes par exemple).</p>
</div>
<div class="paragraph">
<p>On pourrait utiliser l&#8217;opérateur <code>shareReplay</code> pour transformer l&#8217;observable froide
en observable chaude. Mais le moyen habituel d&#8217;éviter le problème est de simplement
utiliser le <em>pipe</em> <code>async</code> une seule fois, en suivant le modèle suivant&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="javascript">@Component({
  selector: 'ns-live-race',
  template: `✅ Do this instead
    @if (liveRace$ | async; as liveRace) {
      &lt;div&gt;{{ liveRace.name }}&lt;/div&gt;
      &lt;div&gt;{{ liveRace.startInstant | date }}&lt;/div&gt;
    } @else {
      Loading in progress...
    }`,
  imports: [AsyncPipe, DatePipe]
})
export class LiveRaceComponent {
  liveRace$: Observable&lt;LiveRaceModel&gt; = inject(RaceService).live();
}</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_le_pouvoir_des_opérateurs">23.4. Le pouvoir des opérateurs</h3>
<div class="paragraph">
<p>On a déjà croisé quelques opérateurs,
mais j&#8217;aimerais prendre un peu de temps pour en décrire quelques autres dans un exemple pas à pas.
On va coder un champ de saisie <em>typeahead</em>.
Un champ typeahead permet à ton utilisateur-trice de saisir du texte dans un champ,
puis l&#8217;application propose quelques suggestions basées sur cette saisie
(comme la boîte de recherche Google).</p>
</div>
<div class="paragraph">
<p>Un bon typeahead a quelques particularités&#160;:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>il affiche des propositions qui correspondent à la recherche (évidemment)&#160;;</p>
</li>
<li>
<p>il permet de n&#8217;afficher les résultats que si la saisie contient déjà quelques caractères&#160;;</p>
</li>
<li>
<p>il ne chargera pas les résultats pour chaque frappe de l&#8217;utilisateur-trice,
mais attendra un peu pour être sûr qu&#8217;il/elle a fini de taper&#160;;</p>
</li>
<li>
<p>il ne déclenchera pas deux fois la même requête si l&#8217;utilisateur-trice saisit la même recherche.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Tout cela peut se faire à la main, mais c&#8217;est loin d&#8217;être trivial.
Heureusement, Angular et RxJS se combinent plutôt bien pour résoudre ce problème&#160;!</p>
</div>
<div class="paragraph">
<p>Tout d&#8217;abord, regardons à quoi ressemblerait un tel composant&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="javascript">import { Component, inject, Signal } from '@angular/core';
import { toSignal } from '@angular/core/rxjs-interop';
import { NonNullableFormBuilder, ReactiveFormsModule } from '@angular/forms';
import { PonyModel, PonyService } from './pony.service';

@Component({
  selector: 'ns-typeahead',
  template: `
    &lt;div&gt;
      &lt;input [formControl]="input" /&gt;
      &lt;ul&gt;
        @for (pony of ponies(); track pony.id) {
          &lt;li&gt;{{ pony.name }}&lt;/li&gt;
        }
      &lt;/ul&gt;
    &lt;/div&gt;
  `,
  imports: [ReactiveFormsModule]
})
export class PonyTypeAheadComponent {
  readonly input = inject(NonNullableFormBuilder).control('');
  readonly ponies: Signal&lt;Array&lt;PonyModel&gt;&gt;;

  constructor() {
    const ponyService = inject(PonyService);
    // todo: do something with the input
  }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Dans le constructeur,
on commence par s&#8217;abonner à l&#8217;observable <code>valueChanges</code> exposé par le <code>FormControl</code>
(relis le chapitre sur les formulaires si tu as besoin de te rafraîchir la mémoire).</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="javascript">this.input.valueChanges.subscribe(value =&gt; console.log(value));</code></pre>
</div>
</div>
<div class="paragraph">
<p>Ensuite, on veut utiliser cette saisie pour trouver les poneys correspondants.
Notre service <code>PonyService</code> possède justement une méthode <code>search()</code> dont c&#8217;est exactement le travail&#160;!
On peut supposer que cette méthode réalise une requête HTTP pour obtenir les résultats du serveur,
alors elle retourne un <code>Observable&lt;Array&lt;PonyModel&gt;&gt;</code>, un observable qui émet un tableau de poneys.</p>
</div>
<div class="paragraph">
<p>Abonnons-nous à cette méthode pour mettre à jour le champ <code>ponies</code> de notre composant&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="javascript">const ponies = signal&lt;Array&lt;PonyModel&gt;&gt;([]);
this.ponies = ponies;
this.input.valueChanges.subscribe(value =&gt; {
  this.ponyService.search(value).subscribe(results =&gt; ponies.set(results));
});</code></pre>
</div>
</div>
<div class="paragraph">
<p>Cool, ça fonctionne. Mais ce n&#8217;est pas idéal.
On a beaucoup de souscriptions sans dé-souscription.
Et il y a une <em>race condition</em>&#160;: le second résultat de recherche pourrait être émis
avant le premier.</p>
</div>
<div class="paragraph">
<p>On pourrait transformer l'<code><code>Observable&lt;string&gt;</code></code>  en appliquant l&#8217;opérateur <code>map</code>.
Mais comme la méthode <code>search</code> retourne un <code>Observable&lt;Array&lt;PonyModel&gt;&gt;</code>, on se retrouverait
avec un <code>Observable&lt;Observable&lt;Array&lt;PonyModel&gt;&gt;&gt;</code>.
Ce qu&#8217;on désire, c&#8217;est un <code>Observable&lt;Array&lt;PonyModel&gt;&gt;</code>, qui émet les résultats de
recherche successifs.</p>
</div>
<div class="paragraph">
<p>Il faut utiliser l&#8217;un des opérateurs de <em>flattening</em> proposés par RxJS. Essayons avec <code>mergeMap</code>:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="javascript">const ponies$ = this.input.valueChanges.pipe(mergeMap(value =&gt; this.ponyService.search(value)));
this.ponies = toSignal(ponies$, { initialValue: [] });</code></pre>
</div>
</div>
<div class="paragraph">
<p>Voilà, c&#8217;est bien plus élégant&#160;!
Chaque fois qu&#8217;un nom de poney est émis par l&#8217;observable source,
il crée un nouvel observable de poneys, et il fusionne tous les événements de ces
observables dans un seul observable.
Mais ce code présente le même bug que le code précédent&#160;:
le second résultat de recherche pourrait être émis avant le premier.</p>
</div>
<div class="paragraph">
<p>Essayons avec <code>concatMap</code>:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="javascript">const ponies$ = this.input.valueChanges.pipe(concatMap(value =&gt; this.ponyService.search(value)));
this.ponies = toSignal(ponies$, { initialValue: [] });</code></pre>
</div>
</div>
<div class="paragraph">
<p>Cette fois les résultats de recherche sont ordonnés correctement. Mais comme les observables
sont concaténés, la seconde recherche n&#8217;est lancée que lorsqu&#8217;on a obtenu la réponse
de la première. C&#8217;est bien trop lent, et ça affiche inutilement tous les résultats de recherche
successifs.</p>
</div>
<div class="paragraph">
<p>L&#8217;opérateur correct à utiliser ici est celui qu&#8217;on a déjà évoqué précédemment&#160;: <code>switchMap</code>.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="javascript">const ponies$ = this.input.valueChanges.pipe(switchMap(value =&gt; this.ponyService.search(value)));
this.ponies = toSignal(ponies$, { initialValue: [] });</code></pre>
</div>
</div>
<div class="paragraph">
<p>Lorsqu&#8217;un nouveau nom de poney est émis, <code>switchMap</code> dé-souscrit de la précédente observable
avant de créer et de souscrire à la suivante. Donc on obtient les résultats dans l&#8217;ordre,
et on n&#8217;attend pas d&#8217;obtenir un résultat avant de demander le suivant.</p>
</div>
<div class="paragraph">
<p>OK, maintenant ignorons les recherches de moins de trois caractères.
Trop facile&#160;: il nous suffit d&#8217;utiliser l&#8217;opérateur <code>filter</code>&#160;!</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="javascript">const ponies$ = this.input.valueChanges.pipe(
  filter(query =&gt; query.length &gt;= 3),
  switchMap(value =&gt; this.ponyService.search(value))
);
this.ponies = toSignal(ponies$, { initialValue: [] });</code></pre>
</div>
</div>
<div class="paragraph">
<p>On ne veut également pas que notre recherche se déclenche immédiatement après la frappe&#160;:
on aimerait la déclencher seulement quand l&#8217;utilisateur-trice s&#8217;est arrêté-e de taper pendant 400ms.
Oui, tu l&#8217;as deviné&#160;: il y bien a un opérateur pour cela,
et il s&#8217;appelle <code>debounceTime</code>&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="javascript">const ponies$ = this.input.valueChanges.pipe(
  filter(query =&gt; query.length &gt;= 3),
  debounceTime(400),
  switchMap(value =&gt; this.ponyService.search(value))
);
this.ponies = toSignal(ponies$, { initialValue: [] });</code></pre>
</div>
</div>
<div class="paragraph">
<p>Donc maintenant un-e utilisateur-trice peut saisir une recherche,
corriger quelques caractères, puis en ajouter d&#8217;autres,
et la requête se déclenchera uniquement quand 400ms se seront écoulées depuis la dernière frappe.
Mais que se passe-t-il si l&#8217;utilisateur-trice saisit "Rainbow",
attend 400ms (ce qui déclenchera donc une requête),
puis saisit "Rainbow Dash" et immédiatement supprime "Dash" pour revenir à "Rainbow"&#160;?
Cela déclencherait deux requêtes successives pour "Rainbow"&#160;!
Pourrait-on déclencher une requête seulement si la recherche est différente de la précédente&#160;?
Bien sûr, avec <code>distinctUntilChanged</code>&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="javascript">const ponies$ = this.input.valueChanges.pipe(
  filter(query =&gt; query.length &gt;= 3),
  debounceTime(400),
  distinctUntilChanged(),
  switchMap(value =&gt; this.ponyService.search(value))
);
this.ponies = toSignal(ponies$, { initialValue: [] });</code></pre>
</div>
</div>
<div class="paragraph">
<p>Une dernière chose&#160;: il nous faut encore gérer proprement les erreurs.
On sait déjà que <code>valueChanges</code> ne va jamais signaler d&#8217;erreur,
mais notre observable <code>ponyService.search()</code> le pourrait tout à fait&#160;: il dépend du réseau.
Et le problème avec les observables c&#8217;est qu&#8217;une erreur va définitivement stopper le flux&#160;:
si la moindre requête échoue, le composant ne fonctionnera plus du tout&#8230;&#8203;
Ce n&#8217;est évidemment pas ce que l&#8217;on souhaite, alors attrapons ces maudites erreurs
et remplaçons l&#8217;observable en faute par un observable qui émet un résultat vide&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="javascript">const ponies$ = this.input.valueChanges.pipe(
  filter(query =&gt; query.length &gt;= 3),
  debounceTime(400),
  distinctUntilChanged(),
  switchMap(value =&gt; this.ponyService.search(value).pipe(catchError(() =&gt; of([]))))
);
this.ponies = toSignal(ponies$, { initialValue: [] });</code></pre>
</div>
</div>
<div class="paragraph">
<p>Plutôt cool, tu ne trouves pas&#160;?
On ne déclenche une recherche que si l&#8217;utilisateur saisit un texte de plus de 3 caractères
et attend au moins 400ms.
On garantit qu&#8217;on ne déclenchera pas deux fois la même requête,
et les suggestions sont toujours en accord avec la recherche&#160;!
Et le tout avec 5 lignes de code seulement.
Bonne chance pour implémenter la même chose à la main sans introduire de problèmes&#8230;&#8203;</p>
</div>
<div class="paragraph">
<p>Bon, d&#8217;accord, c&#8217;est le cas d&#8217;utilisation idéal pour RxJS,
mais il faut retenir qu&#8217;il propose une tonne d&#8217;opérateurs,
dont certains sont de véritables pépites.
Apprendre à les maîtriser demande du temps,
mais cela vaut le coup car ils peuvent être d&#8217;une aide précieuse pour ton application.</p>
</div>
</div>
<div class="sect2">
<h3 id="_utiliser_les_subjects_comme_déclencheurs">23.5. Utiliser les Subjects comme déclencheurs</h3>
<div class="paragraph">
<p>Un autre cas d&#8217;utilisation courant dans Angular est d&#8217;utiliser un <code>Subject</code> pour déclencher une action.
Par exemple, imaginons que nous voulions afficher une liste de courses&#160;:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>quand le composant est chargé</p>
</li>
<li>
<p>à chaque fois que l&#8217;utilisateur clique sur un bouton de rafraîchissement</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Nous pouvons utiliser un <code>Subject</code> pour cela.
Un <code>Subject</code> est un observable chaud, qui émet un nouvel événement quand on appelle sa méthode <code>next</code>.
Dans le code ci-dessous, <code>refreshTrigger</code> est utilisé pour émettre un événement
chaque fois que l&#8217;utilisateur clique sur le bouton de rafraîchissement.
Nous utilisons ce sujet comme source de la souscription à la méthode <code>raceService.list</code>.
Comme nous voulons aussi appeler la méthode quand le composant est chargé,
nous utilisons l&#8217;opérateur <code>startWith</code> pour émettre un événement quand le composant est initialisé.</p>
</div>
<div class="listingblock">
<div class="title">races.component.ts</div>
<div class="content">
<pre class="prettyprint highlight"><code data-lang="javascript">private readonly refreshTrigger = new Subject&lt;void&gt;();
readonly races: Signal&lt;Array&lt;RaceModel&gt; | undefined&gt;;

constructor() {
  const raceService = inject(RaceService);
  const races$ = this.refreshTrigger.pipe(
    startWith(undefined),
    switchMap(() =&gt; raceService.list())
  );
  this.races = toSignal(races$);
}

refresh() {
  this.refreshTrigger.next();
}</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_construire_son_propre_observable">23.6. Construire son propre Observable</h3>
<div class="paragraph">
<p>Parfois, malheureusement, il te faudra utiliser des bibliothèques qui produisent des événements
mais sans utiliser un Observable.
Tout espoir n&#8217;est pas perdu, car tu peux évidemment créer tes propres Observables,
en utilisant <code>new Observable(observer &#8658; {})</code>.</p>
</div>
<div class="paragraph">
<p>La fonction passée en paramètre au constructeur est appelée la fonction <code>subscribe</code>&#160;:
elle sera en charge d&#8217;émettre les événements et les erreurs, et de terminer le flux.</p>
</div>
<div class="paragraph">
<p>Par exemple, si tu veux créer un Observable qui émettra 1, puis 2, puis se termine, tu pourrais écrire&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="javascript">const numbers = new Observable(observer =&gt; {
  observer.next(1);
  observer.next(2);
  observer.complete();
});</code></pre>
</div>
</div>
<div class="paragraph">
<p>On pourrait alors s&#8217;abonner à un tel observable&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="javascript">numbers.subscribe({
  next: number =&gt; console.log(number),
  error: error =&gt; console.log(error),
  complete: () =&gt; console.log('Complete!')
});
// Will log:
// 1
// 2
// Complete!</code></pre>
</div>
</div>
<div class="paragraph">
<p>Maintenant, disons qu&#8217;on veut émettre 'hello' toutes les deux secondes, sans jamais se terminer.
On pourrait faire cela facilement avec des opérateurs fournis,
mais essayons de le faire nous-même, pour l&#8217;exemple&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="javascript">import { Observable } from 'rxjs';

export class HelloService {
  get(): Observable&lt;string&gt; {
    return new Observable(observer =&gt; {
      const interval = setInterval(() =&gt; observer.next('hello'), 2000);
    });
  }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>La fonction passée à <code>new Observable()</code>
peut aussi retourner une fonction qui sera appelée lors du désabonnement.
C&#8217;est très pratique si tu as du nettoyage à réaliser.
Et c&#8217;est le cas dans notre <code>HelloService</code>,
parce qu&#8217;il nous faut stopper le <code>setInterval</code> au désabonnement de l&#8217;observable.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="javascript">import { Observable } from 'rxjs';

export class HelloService {
  get(): Observable&lt;string&gt; {
    return new Observable(observer =&gt; {
      const interval = setInterval(() =&gt; observer.next('hello'), 2000);
      return () =&gt; clearInterval(interval);
    });
  }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Comme l&#8217;intervalle ne sera pas créé avant l&#8217;abonnement,
nous venons donc de créer un observable "froid".</p>
</div>
</div>
<div class="sect2">
<h3 id="_gestion_détat_avec_un_store_ngrx_ngxs_elf_et_autres">23.7. Gestion d&#8217;état avec un <em>store</em> (NgRx, NGXS, Elf et autres)</h3>
<div class="paragraph">
<p>L&#8217;écosystème Angular a beaucoup de bibliothèques de gestion d&#8217;état, habituellement appelées <em>stores</em>&#160;:
<a href="https://ngrx.io/">NgRx</a>, NgRx component store,
<a href="https://www.ngxs.io/">NGXS</a>, <a href="https://ngneat.github.io/elf/">Elf</a>, et probablement d&#8217;autres.</p>
</div>
<div class="paragraph">
<p>Pendant nos formations, on nous demande souvent&#160;: "est-ce que je devrais en utiliser un&#160;?"
ou "lequel est le meilleur&#160;?".
On ne peut pas vraiment répondre à ces questions.
Chaque projet a ses propres besoins.
Chaque équipe de développeurs a ses préférences et ses priorités.</p>
</div>
<div class="paragraph">
<p>Nous avons un avis, cependant&#160;: ce ne sont pas des outils magiques, et ils ne vous éviteront pas
d&#8217;avoir à apprendre RxJS.
Ils sont tous basés sur RxJS, et tu as intérêt à maîtriser RxJS avant de les utiliser.</p>
</div>
<div class="paragraph">
<p>Pour <em>nos</em> différents projets, on a toujours trouvé que leurs bénéfices
ne compensaient pas la complexité additionnelle et le <em>boilerplate</em> que leur utilisation implique.
Mais tu peux avoir un avis différent. Fais tes propres expériences et décide par toi-même.</p>
</div>
<div class="paragraph">
<p>Attention à ce biais cependant&#160;: les stores paraissent intelligents&#160;; le fait de les utiliser peut te faire paraître intelligent&#160;;
mais ça ne veut pas dire pour autant qu&#8217;ils sont une solution à promouvoir pour ton projet et ton équipe.
Nous recevons aussi beaucoup de témoignages nous disant que le développeur principal a fait
le choix d&#8217;utiliser un store, et que tous les autres développeurs de l&#8217;équipe pâtissent de ce choix.</p>
</div>
</div>
<div class="sect2">
<h3 id="_conclusion_3">23.8. Conclusion</h3>
<div class="paragraph">
<p>J&#8217;espère que tu as apprécié ce court chapitre sur les observables.
Ils peuvent aussi servir à séquencer tes requêtes HTTP,
ou à communiquer entre tes composants (on y reviendra bientôt).
Mais tu as désormais un bon aperçu de ce qui est possible&#160;!</p>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<i class="fa icon-tip" title="Mise en pratique"></i>
</td>
<td class="content">
<div class="paragraph">
<p>Nous avons de nombreux exercices qui utilisent RxJS et te permettent de découvrir les opérateurs&#160;:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><a href="https://angular-exercises.ninja-squad.com/exercises/21/bet">Parier sur un poney</a> <span class="image"><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAIgAAACACAMAAADnN9ENAAACSVBMVEVMaXH7whr7whr7whr7whr7whr7whr7whr7whr7whr7whr7whp4o614o614o614o637whr7whp4o614o614o614o614o614o614o614o62EoKN4o614o637whqFXFKFXFKQnZm4kni0k3vA1Njr8fLd5+myytB/qLGFXFKFXFKcmY98oqp4o63V4uWFXFKFXFKoloWgmIx4o62Hpqu+nofCpI/b08yFXFKAoaaMnpzYzcSFXFKFXFKUnJaYm5O7mIDl5eOGrbaFXFKGk5Kfd2WSalyYcGClfmqhlIZ6lpx+hIWDaWOFXFKFXFJ/gICkl4nFqpeFXFKFXFKCamSDZV2EYFiDaWOCbmne2dTk7O77whqOZE6Ad3TIsJ6jwMflryWbb0h/gIDo6+rH2dz0vB58jZGIn6Cxgj17kZbOvK2FXFL7whq5iTqVt75/e3rPnC/eqSiMYk+FXFKjdkS4p6Ll6OjLtqbSwrXFubacu8PstSGynZiOsrqLZVzauj/013mrlI56mqLCtFrt69fY1dSApaTrvizz2oafgXqSb2aqxcuhrX/11GvO3uGQeHG5z9T20V7e3t7s7uX4y0P6xSjv5byYeHC+sKyli4TSzMrIzc28wcGwtLVHR0c8OztIR0c1NTWNkJEvLy+NioqTkJCHhISlqKnU2dpCQUGBhIRnZmZeYGBqbGyZnJ07Ozvf5ebLwsCmqapfYGFiYmLAw8Tw9fXs8vNqjZVBTE9PYmY4Pj9deH5mho5GU1Y9RUdhf4ZznKVKW140Njdz5u6AAAAAf3RSTlMAMIBQ7/+fEI/PYL8QcIBAIK+v/7+fz+8wUP/fYEAgEP//////////32D//yD//7///4//////UP///zDv///////P//////////+vj3Ag//+fQJ/////////fz///////////////////gHD///////+v//////////////9AWHP9fwAABxxJREFUeAHs1IVy5DAQBNBZ0DJ3mJUonGiPmZmZmZmZPv6ssb2oFFqHeYUq7LJ7mlatWhWVWDxBf4SkEHH6EwhPKk2/X0Z4sn9AknRSeJIx+u0SguXot8sLliG7QrFUKtOvUEkKVrUXpQZPT6EZrBdAX7FA0YsLX7ZCFv0w+gco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" alt="Pro" width="18"></span></p>
</li>
<li>
<p><a href="https://angular-exercises.ninja-squad.com/exercises/22/live">Live</a> <span class="image"><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAIgAAACACAMAAADnN9ENAAACSVBMVEVMaXH7whr7whr7whr7whr7whr7whr7whr7whr7whr7whr7whp4o614o614o614o637whr7whp4o614o614o614o614o614o614o614o62EoKN4o614o637whqFXFKFXFKQnZm4kni0k3vA1Njr8fLd5+myytB/qLGFXFKFXFKcmY98oqp4o63V4uWFXFKFXFKoloWgmIx4o62Hpqu+nofCpI/b08yFXFKAoaaMnpzYzcSFXFKFXFKUnJaYm5O7mIDl5eOGrbaFXFKGk5Kfd2WSalyYcGClfmqhlIZ6lpx+hIWDaWOFXFKFXFJ/gICkl4nFqpeFXFKFXFKCamSDZV2EYFiDaWOCbmne2dTk7O77whqOZE6Ad3TIsJ6jwMflryWbb0h/gIDo6+rH2dz0vB58jZGIn6Cxgj17kZbOvK2FXFL7whq5iTqVt75/e3rPnC/eqSiMYk+FXFKjdkS4p6Ll6OjLtqbSwrXFubacu8PstSGynZiOsrqLZVzauj/013mrlI56mqLCtFrt69fY1dSApaTrvizz2oafgXqSb2aqxcuhrX/11GvO3uGQeHG5z9T20V7e3t7s7uX4y0P6xSjv5byYeHC+sKyli4TSzMrIzc28wcGwtLVHR0c8OztIR0c1NTWNkJEvLy+NioqTkJCHhISlqKnU2dpCQUGBhIRnZmZeYGBqbGyZnJ07Ozvf5ebLwsCmqapfYGFiYmLAw8Tw9fXs8vNqjZVBTE9PYmY4Pj9deH5mho5GU1Y9RUdhf4ZznKVKW140Njdz5u6AAAAAf3RSTlMAMIBQ7/+fEI/PYL8QcIBAIK+v/7+fz+8wUP/fYEAgEP//////////32D//yD//7///4//////UP///zDv///////P//////////+vj3Ag//+fQJ/////////fz///////////////////gHD///////+v//////////////9AWHP9fwAABxxJREFUeAHs1IVy5DAQBNBZ0DJ3mJUonGiPmZmZmZmZPv6ssb2oFFqHeYUq7LJ7mlatWhWVWDxBf4SkEHH6EwhPKk2/X0Z4sn9AknRSeJIx+u0SguXot8sLliG7QrFUKtOvUEkKVrUXpQZPT6EZrBdAX7FA0YsLX7ZCFv0w+gco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" alt="Pro" width="18"></span></p>
</li>
<li>
<p><a href="https://angular-exercises.ninja-squad.com/exercises/24/advanced-observables">Astuces sur les Observables</a> <span class="image"><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAIgAAACACAMAAADnN9ENAAACSVBMVEVMaXH7whr7whr7whr7whr7whr7whr7whr7whr7whr7whr7whp4o614o614o614o637whr7whp4o614o614o614o614o614o614o614o62EoKN4o614o637whqFXFKFXFKQnZm4kni0k3vA1Njr8fLd5+myytB/qLGFXFKFXFKcmY98oqp4o63V4uWFXFKFXFKoloWgmIx4o62Hpqu+nofCpI/b08yFXFKAoaaMnpzYzcSFXFKFXFKUnJaYm5O7mIDl5eOGrbaFXFKGk5Kfd2WSalyYcGClfmqhlIZ6lpx+hIWDaWOFXFKFXFJ/gICkl4nFqpeFXFKFXFKCamSDZV2EYFiDaWOCbmne2dTk7O77whqOZE6Ad3TIsJ6jwMflryWbb0h/gIDo6+rH2dz0vB58jZGIn6Cxgj17kZbOvK2FXFL7whq5iTqVt75/e3rPnC/eqSiMYk+FXFKjdkS4p6Ll6OjLtqbSwrXFubacu8PstSGynZiOsrqLZVzauj/013mrlI56mqLCtFrt69fY1dSApaTrvizz2oafgXqSb2aqxcuhrX/11GvO3uGQeHG5z9T20V7e3t7s7uX4y0P6xSjv5byYeHC+sKyli4TSzMrIzc28wcGwtLVHR0c8OztIR0c1NTWNkJEvLy+NioqTkJCHhISlqKnU2dpCQUGBhIRnZmZeYGBqbGyZnJ07Ozvf5ebLwsCmqapfYGFiYmLAw8Tw9fXs8vNqjZVBTE9PYmY4Pj9deH5mho5GU1Y9RUdhf4ZznKVKW140Njdz5u6AAAAAf3RSTlMAMIBQ7/+fEI/PYL8QcIBAIK+v/7+fz+8wUP/fYEAgEP//////////32D//yD//7///4//////UP///zDv///////P//////////+vj3Ag//+fQJ/////////fz///////////////////gHD///////+v//////////////9AWHP9fwAABxxJREFUeAHs1IVy5DAQBNBZ0DJ3mJUonGiPmZmZmZmZPv6ssb2oFFqHeYUq7LJ7mlatWhWVWDxBf4SkEHH6EwhPKk2/X0Z4sn9AknRSeJIx+u0SguXot8sLliG7QrFUKtOvUEkKVrUXpQZPT6EZrBdAX7FA0YsLX7ZCFv0w+gco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" alt="Pro" width="18"></span></p>
</li>
<li>
<p><a href="https://angular-exercises.ninja-squad.com/exercises/25/boost-pony">Booster un poney</a> <span class="image"><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAIgAAACACAMAAADnN9ENAAACSVBMVEVMaXH7whr7whr7whr7whr7whr7whr7whr7whr7whr7whr7whp4o614o614o614o637whr7whp4o614o614o614o614o614o614o614o62EoKN4o614o637whqFXFKFXFKQnZm4kni0k3vA1Njr8fLd5+myytB/qLGFXFKFXFKcmY98oqp4o63V4uWFXFKFXFKoloWgmIx4o62Hpqu+nofCpI/b08yFXFKAoaaMnpzYzcSFXFKFXFKUnJaYm5O7mIDl5eOGrbaFXFKGk5Kfd2WSalyYcGClfmqhlIZ6lpx+hIWDaWOFXFKFXFJ/gICkl4nFqpeFXFKFXFKCamSDZV2EYFiDaWOCbmne2dTk7O77whqOZE6Ad3TIsJ6jwMflryWbb0h/gIDo6+rH2dz0vB58jZGIn6Cxgj17kZbOvK2FXFL7whq5iTqVt75/e3rPnC/eqSiMYk+FXFKjdkS4p6Ll6OjLtqbSwrXFubacu8PstSGynZiOsrqLZVzauj/013mrlI56mqLCtFrt69fY1dSApaTrvizz2oafgXqSb2aqxcuhrX/11GvO3uGQeHG5z9T20V7e3t7s7uX4y0P6xSjv5byYeHC+sKyli4TSzMrIzc28wcGwtLVHR0c8OztIR0c1NTWNkJEvLy+NioqTkJCHhISlqKnU2dpCQUGBhIRnZmZeYGBqbGyZnJ07Ozvf5ebLwsCmqapfYGFiYmLAw8Tw9fXs8vNqjZVBTE9PYmY4Pj9deH5mho5GU1Y9RUdhf4ZznKVKW140Njdz5u6AAAAAf3RSTlMAMIBQ7/+fEI/PYL8QcIBAIK+v/7+fz+8wUP/fYEAgEP//////////32D//yD//7///4//////UP///zDv///////P//////////+vj3Ag//+fQJ/////////fz///////////////////gHD///////+v//////////////9AWHP9fwAABxxJREFUeAHs1IVy5DAQBNBZ0DJ3mJUonGiPmZmZmZmZPv6ssb2oFFqHeYUq7LJ7mlatWhWVWDxBf4SkEHH6EwhPKk2/X0Z4sn9AknRSeJIx+u0SguXot8sLliG7QrFUKtOvUEkKVrUXpQZPT6EZrBdAX7FA0YsLX7ZCFv0w+gco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" alt="Pro" width="18"></span></p>
</li>
<li>
<p><a href="https://angular-exercises.ninja-squad.com/exercises/26/reactive-score">Score réactif</a> <span class="image"><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAIgAAACACAMAAADnN9ENAAACSVBMVEVMaXH7whr7whr7whr7whr7whr7whr7whr7whr7whr7whr7whp4o614o614o614o637whr7whp4o614o614o614o614o614o614o614o62EoKN4o614o637whqFXFKFXFKQnZm4kni0k3vA1Njr8fLd5+myytB/qLGFXFKFXFKcmY98oqp4o63V4uWFXFKFXFKoloWgmIx4o62Hpqu+nofCpI/b08yFXFKAoaaMnpzYzcSFXFKFXFKUnJaYm5O7mIDl5eOGrbaFXFKGk5Kfd2WSalyYcGClfmqhlIZ6lpx+hIWDaWOFXFKFXFJ/gICkl4nFqpeFXFKFXFKCamSDZV2EYFiDaWOCbmne2dTk7O77whqOZE6Ad3TIsJ6jwMflryWbb0h/gIDo6+rH2dz0vB58jZGIn6Cxgj17kZbOvK2FXFL7whq5iTqVt75/e3rPnC/eqSiMYk+FXFKjdkS4p6Ll6OjLtqbSwrXFubacu8PstSGynZiOsrqLZVzauj/013mrlI56mqLCtFrt69fY1dSApaTrvizz2oafgXqSb2aqxcuhrX/11GvO3uGQeHG5z9T20V7e3t7s7uX4y0P6xSjv5byYeHC+sKyli4TSzMrIzc28wcGwtLVHR0c8OztIR0c1NTWNkJEvLy+NioqTkJCHhISlqKnU2dpCQUGBhIRnZmZeYGBqbGyZnJ07Ozvf5ebLwsCmqapfYGFiYmLAw8Tw9fXs8vNqjZVBTE9PYmY4Pj9deH5mho5GU1Y9RUdhf4ZznKVKW140Njdz5u6AAAAAf3RSTlMAMIBQ7/+fEI/PYL8QcIBAIK+v/7+fz+8wUP/fYEAgEP//////////32D//yD//7///4//////UP///zDv///////P//////////+vj3Ag//+fQJ/////////fz///////////////////gHD///////+v//////////////9AWHP9fwAABxxJREFUeAHs1IVy5DAQBNBZ0DJ3mJUonGiPmZmZmZmZPv6ssb2oFFqHeYUq7LJ7mlatWhWVWDxBf4SkEHH6EwhPKk2/X0Z4sn9AknRSeJIx+u0SguXot8sLliG7QrFUKtOvUEkKVrUXpQZPT6EZrBdAX7FA0YsLX7ZCFv0w+gco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" alt="Pro" width="18"></span></p>
</li>
</ul>
</div>
</td>
</tr>
</table>
</div>
<div style="page-break-after: always;"></div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="advanced-components">24. Composants et directives avancés</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_transformation_dinputs">24.1. Transformation d&#8217;inputs</h3>
<div class="paragraph">
<p>Depuis Angular&#160;v16.1, il est possible de transformer un input
avec l&#8217;option <code>tranform</code> du décorateur <code>@Input()</code>. Bien sûr, la fonction <code>input()</code>
supporte aussi cette fonctionnalité.</p>
</div>
<div class="paragraph">
<p>Cela permet de transformer la valeur passée à l&#8217;input avant qu&#8217;elle soit stockée dans le signal.
L&#8217;option <code>transform</code> attend une fonction qui recevra la valeur en entrée et renvoie la valeur transformée.
Comme les cas les plus courants sont de transformer une chaîne de caractères en nombre ou en booléen,
Angular fournit deux fonctions pour cela&#160;: <code>numberAttribute</code> et <code>booleanAttribute</code> dans <code>@angular/core</code>.</p>
</div>
<div class="paragraph">
<p>Voici comment on utilise <code>booleanAttribute</code>&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="js">readonly disabled = input(false, { transform: booleanAttribute });</code></pre>
</div>
</div>
<div class="paragraph">
<p>Cela va transformer la valeur passée en input en booléen,
rendant possible ces utilisations&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="html">&lt;ns-button disabled /&gt;
&lt;ns-button disabled="true" /&gt;
&lt;!-- Before, only the following was properly working --&gt;
&lt;ns-button [disabled]="true" /&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>La fonction <code>numberAttribute</code> est similaire et transforme la chaîne de caractère en nombre&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="js">readonly value = input(0, { transform: numberAttribute });</code></pre>
</div>
</div>
<div class="paragraph">
<p>Elle permet de définir une valeur par défaut,
dans le cas où l&#8217;input ne serait pas un nombre valide (la valeur par défaut est <code>NaN</code>)&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="js">readonly value = input(0, { transform: (value: unknown) =&gt; numberAttribute(value, 42) });</code></pre>
</div>
</div>
<div class="paragraph">
<p>On peut alors utiliser le composant comme ceci&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="html">&lt;ns-value value="42" /&gt;
&lt;ns-value value="not a number" /&gt;
&lt;!-- Before, only the following was properly working --&gt;
&lt;ns-value [value]="42" /&gt;</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_requêtes_de_vue_viewchild">24.2. Requêtes de vue&#160;: <code>viewChild</code></h3>
<div class="paragraph">
<p>Dans le chapitre sur les templates,
on a mentionné les "variables locales",
une chouette fonctionnalité qui permet d&#8217;obtenir dans le template une référence
vers un élément du DOM.
Par exemple, tu peux facilement donner le focus à un champ grâce à un bouton&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="html">&lt;input #myInput /&gt;
&lt;button (click)="myInput.focus()"&gt;Focus&lt;/button&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>On a aussi rencontré cette fonctionnalité dans le chapitre sur les formulaires,
quand on voulait obtenir une référence vers une directive précise&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="html">&lt;input name="login" [(ngModel)]="user.login" required #loginCtrl="ngModel" /&gt;
@if (loginCtrl.dirty &amp;&amp; loginCtrl.hasError('required')) {
  &lt;div&gt;The login field is required&lt;/div&gt;
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Mais comment faire si on a besoin de ces mêmes références dans le code de
notre composant, et pas seulement dans son template&#160;?
C&#8217;est là que les requêtes de vue (<em>view queries</em>) arrivent à la rescousse.</p>
</div>
<div class="paragraph">
<p>Par exemple, tu pourrais vouloir donner le focus à un champ dès que le
composant est affiché.
Pour ce faire, il nous faut obtenir une référence vers l&#8217;input,
grâce à la fonction <code>viewChild</code>.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="javascript">@Component({
  selector: 'ns-login',
  template: `&lt;input #loginInput name="login" [(ngModel)]="credentials.login" required /&gt;`,
  imports: [FormsModule]
})
export class LoginComponent implements AfterViewInit {
  credentials = { login: '' };

  readonly loginInput = viewChild.required&lt;ElementRef&lt;HTMLInputElement&gt;&gt;('loginInput');

  ngAfterViewInit(): void {
    this.loginInput().nativeElement.focus();
  }
}</code></pre>
</div>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
Les fonctions <code>viewChild</code> et <code>viewChild.required</code> sont les alternatives modernes,
basées sur les signaux, au décorateur <code>@ViewChild</code>, de la même manière que <code>input</code> et
<code>input.required</code> sont les alternatives modernes, basées sur les signaux, au décorateur `@Input.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>On déclare une propriété <code>loginInput</code>, que l&#8217;on initialise avec <code>viewChild.required</code>.
Cette fonction a besoin d&#8217;un sélecteur en paramètre&#160;:
ici on utilise la variable locale déclarée dans notre template.
La fonction indique ainsi au framework qu&#8217;il veut requêter la vue pour y
trouver un élément avec ce nom de variable locale.
Le signal sera initialisé avec cet élément, de type <code>ElementRef&lt;T&gt;</code>.
Ce type n&#8217;a qu&#8217;un seul attribut, <code>nativeElement</code> de type <code>T</code>, qui est une référence
à l&#8217;élément du DOM sous-jacent.</p>
</div>
<div class="paragraph">
<p>Cet exemple montre aussi une utilisation intéressante du cycle de vie avec
l&#8217;usage de la méthode <code>ngAfterViewInit</code>.
Cette méthode est appelée dès que la vue est créée,
ainsi, nous sommes sûrs que l&#8217;élément qu&#8217;on attend sera effectivement présent.
Si tu essaies de faire la même chose dans le constructeur ou dans <code>ngOnInit</code>,
cela ne fonctionnera pas.</p>
</div>
<div class="paragraph">
<p>Il y a aussi une autre méthode nommée <code>ngAfterViewChecked</code>,
qui est appelée à chaque fois que la vue est vérifiée (après chaque
détection de changement).</p>
</div>
<div class="paragraph">
<p>Si tu veux implémenter cette fonctionnalité de focus dans plusieurs
composants différents, tu pourrais créer une directive pour cela,
au lieu de dupliquer ce code dans chaque composant.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="javascript">@Directive({
  selector: '[nsFocus]'
})
export class FocusDirective implements AfterViewInit {
  ngAfterViewInit(): void {
  }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Cette directive ne fait rien pour le moment,
mais elle serait utilisée comme suit dans un template&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="html">&lt;input nsFocus /&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>Cette directive doit accéder à son élément hôte pour lui donner le focus.
C&#8217;est alors que <code>ElementRef</code> devient très intéressant,
puisqu&#8217;il peut être injecté dans notre directive&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="javascript">@Directive({
  selector: '[nsFocus]'
})
export class FocusDirective implements AfterViewInit {
  readonly element = inject&lt;ElementRef&lt;HTMLElement&gt;&gt;(ElementRef);

  ngAfterViewInit(): void {
    this.element.nativeElement.focus();
  }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Et voilà&#160;: grâce à cette directive, nous donnerons le focus à son
élément hôte&#160;!</p>
</div>
<div class="paragraph">
<p>Retournons à notre fonction <code>viewChild</code>&#160;:
il peut aussi accepter un <em>type</em> comme sélecteur.</p>
</div>
<div class="paragraph">
<p>Par exemple, dans le chapitre sur les formulaires,
on a vu que pour soumettre un formulaire avec la façon pilotée par le template,
on peut utiliser du binding bi-directionnel,
ou on peut obtenir une référence vers le formulaire et passer sa valeur
à la méthode submit&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="html">&lt;form (ngSubmit)="authenticate(form.value)" #form="ngForm"&gt;
  &lt;!-- ... --&gt;
&lt;/form&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>Mais on pourrait aussi utiliser <code>viewChild</code>&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="javascript">@Component({
  selector: 'ns-login',
  template: `
    &lt;form (ngSubmit)="authenticate()"&gt;
      &lt;!-- ... --&gt;
    &lt;/form&gt;
  `,
  imports: [FormsModule]
})
export class LoginFormComponent {
  readonly credentialsForm = viewChild.required(NgForm);

  authenticate(): void {
    if (this.credentialsForm().valid) {
      console.log(this.credentialsForm().value);
    }
  }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Le truc cool avec <code>viewChild</code> c&#8217;est que c&#8217;est une requête dynamique&#160;:
il sera toujours à jour du template.
Si l&#8217;élément requêté est détruit,
le signal deviendra <code>undefined</code>.</p>
</div>
<div class="paragraph">
<p>Cette fonction a aussi une sœur jumelle nommée <code>viewChildren</code>.
À la différence de <code>viewChild</code> qui permet d&#8217;obtenir la référence vers un seul
élément correspondant au sélecteur (le premier s&#8217;il y en a plusieurs),
<code>viewChildren</code> permet d&#8217;obtenir une référence vers tous les éléments y correspondant.</p>
</div>
<div class="paragraph">
<p>Supposons que nous ayons un <code>RaceComponent</code> affichant une collection de <code>PonyComponent</code>.
On peut facilement être notifié chaque fois qu&#8217;un <code>PonyComponent</code> est ajouté ou
supprimé&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="javascript">@Component({
  selector: 'ns-race',
  templateUrl: './race.component.html',
  imports: [PonyComponent]
})
export class RaceComponent {
  readonly raceModel = input.required&lt;RaceModel&gt;();
  readonly ponies = viewChildren(PonyComponent);

  constructor() {
    effect(() =&gt; {
      console.log(this.ponies().length);
    });
  }
}</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_contenu_ng_content">24.3. Contenu&#160;: <code>ng-content</code></h3>
<div class="paragraph">
<p>Un autre besoin récurrent des développeurs est la capacité de construire des
composants graphiques dont le contenu serait dynamique.</p>
</div>
<div class="paragraph">
<p>Par exemple, supposons que tu veuilles construire
<a href="https://getbootstrap.com/docs/5.3/components/card/">un composant "carte"</a>
à l&#8217;aide du framework CSS Bootstrap.
Le template d&#8217;une telle carte ressemblerait à&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="html">&lt;div class="card"&gt;
  &lt;div class="card-body"&gt;
    &lt;h4 class="card-title"&gt;Card title&lt;/h4&gt;
    &lt;p class="card-text"&gt;Some quick example text&lt;/p&gt;
  &lt;/div&gt;
&lt;/div&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>Tu pourrais évidemment dupliquer ce code HTML chaque fois que tu en as
besoin dans ton application.
Mais à ce point de la lecture, tu penses déjà probablement à créer
un composant.
Il y a deux parties dynamiques dans cette carte (le titre et le contenu),
alors tu arriverais probablement à quelque-chose comme&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="html">@Component({
  selector: 'ns-card',
  template: `
    &lt;div class="card"&gt;
      &lt;div class="card-body"&gt;
        &lt;h4 class="card-title"&gt;{{ title() }}&lt;/h4&gt;
        &lt;p class="card-text"&gt;{{ text() }}&lt;/p&gt;
      &lt;/div&gt;
    &lt;/div&gt;
  `
})
export class CardComponent {
  readonly title = input('');
  readonly text = input('');
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Et tu l&#8217;utiliserais comme cela&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="html">&lt;ns-card title="Card title" text="Some quick example text" /&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>Cela fonctionne parfaitement.
Mais en regardant plus précisément le besoin,
tu te rends compte que le contenu de la carte peut aussi être du HTML complexe,
et pas seulement du texte, ce que supporte Bootstrap&#160;!</p>
</div>
<div class="paragraph">
<p>Heureusement, Angular va encore une fois te sauver la mise&#160;:
il est facile de "passer" du HTML à un composant enfant,
grâce à <code>&lt;ng-content&gt;</code>.</p>
</div>
<div class="paragraph">
<p><code>ng-content</code> est un tag spécial que tu peux utiliser dans tes templates
pour inclure le HTML fourni par le composant parent&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="html">&lt;div class="card"&gt;
  &lt;div class="card-body"&gt;
    &lt;h4 class="card-title"&gt;{{ title() }}&lt;/h4&gt;
    &lt;p class="card-text"&gt;
      &lt;ng-content /&gt;
    &lt;/p&gt;
  &lt;/div&gt;
&lt;/div&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>Et tu peux désormais utiliser ce composant comme cela&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="html">&lt;ns-card title="Card title"&gt; Some quick &lt;strong&gt;example&lt;/strong&gt; text &lt;/ns-card&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>Plus tard, tu te rends compte que le titre peut aussi contenir du HTML.
Et bien sûr, il y a une solution pour passer plusieurs contenus au composant
carte, en utilisant plusieurs <code>ng-content</code> avec un sélecteur.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="html">&lt;div class="card"&gt;
  &lt;div class="card-body"&gt;
    &lt;h4 class="card-title"&gt;
      &lt;ng-content select="[title]"&gt;&lt;/ng-content&gt;
    &lt;/h4&gt;
    &lt;p class="card-text"&gt;
      &lt;ng-content select="[content]"&gt;&lt;/ng-content&gt;
    &lt;/p&gt;
  &lt;/div&gt;
&lt;/div&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>et tu l&#8217;utiliseras comme cela&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="html">&lt;ns-card&gt;
  &lt;span title&gt;Card &lt;strong&gt;title&lt;/strong&gt;&lt;/span&gt;
  &lt;p content&gt;Some quick &lt;strong&gt;example&lt;/strong&gt; text&lt;/p&gt;
&lt;/ns-card&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>Cela produira le résultat suivant&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="html">&lt;div class="card"&gt;
  &lt;div class="card-body"&gt;
    &lt;h4 class="card-title"&gt;
      &lt;p class="title"&gt;Card &lt;strong&gt;title&lt;/strong&gt;&lt;/p&gt;
    &lt;/h4&gt;
    &lt;p class="card-text"&gt;
      &lt;p class="content"&gt;Some quick &lt;strong&gt;example&lt;/strong&gt; text&lt;/p&gt;
    &lt;/p&gt;
  &lt;/div&gt;
&lt;/div&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>Depuis Angular v18, il est possible de définir un contenu par défaut,
qui sera utilisé si aucun contenu n&#8217;est fourni par le parent&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="html">&lt;div class="card"&gt;
  &lt;div class="card-body"&gt;
    &lt;h4 class="card-title"&gt;
      &lt;ng-content select="[title]"&gt;Default title&lt;/ng-content&gt;
    &lt;/h4&gt;
    &lt;p class="card-text"&gt;
      &lt;ng-content select="[content]"&gt;&lt;/ng-content&gt;
    &lt;/p&gt;
  &lt;/div&gt;
&lt;/div&gt;</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_requêtes_de_contenu_contentchild">24.4. Requêtes de contenu&#160;: <code>contentChild</code></h3>
<div class="paragraph">
<p>Quand tu utilises ces tags <code>ng-content</code>,
le contenu projeté ne sera pas requêtable par <code>viewChild</code> ou <code>viewChildren</code>.
Pour ces contenus, il te faut utiliser deux autres fonctions&#160;:
<code>contentChild</code> et <code>contentChildren</code>.</p>
</div>
<div class="paragraph">
<p>Disons que tu es en train de créer un autre composant graphique en Bootstrap,
cette fois-ci <a href="https://getbootstrap.com/docs/5.3/components/navs-tabs/">un composant "onglet"</a>.
D&#8217;après la documentation, le HTML doit ressembler à&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="html">&lt;ul class="nav nav-tabs"&gt;
  &lt;li class="nav-item"&gt;
    &lt;a class="nav-link"&gt;Races&lt;/a&gt;
  &lt;/li&gt;
  &lt;li class="nav-item"&gt;
    &lt;a class="nav-link"&gt;About&lt;/a&gt;
  &lt;/li&gt;
&lt;/ul&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>Mais on voudrait proposer un composant plus agréable d&#8217;utilisation à notre équipe,
qui ressemblerait à&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="html">&lt;ns-tabs&gt;
  &lt;ns-tab title="Races" /&gt;
  &lt;ns-tab title="About" /&gt;
&lt;/ns-tabs&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>On a aussi besoin d&#8217;un composant <code>Tabs</code> englobant,
qui doit découvrir combien de directives <code>ns-tab</code> sont embarquées dans le
template du composant,
doit itérer sur chacune d&#8217;elles, et générer le balisage adéquat.</p>
</div>
<div class="paragraph">
<p>Pour ce faire, commençons par créer une directive <code>TabDirective</code>&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="javascript">@Directive({
  selector: 'ns-tab'
})
export class TabDirective {
  readonly title = input('');
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Cette directive ne fait pas grand-chose&#160;:
elle n&#8217;a qu&#8217;une seule entrée pour le titre de l&#8217;onglet.
Note qu&#8217;on utilise un élément comme sélecteur&#160;: <code>ns-tab</code>.</p>
</div>
<div class="paragraph">
<p>Maintenant il nous faut construire le <code>TabsComponent</code>:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="html">@Component({
  selector: 'ns-tabs',
  template: `
    &lt;ul class="nav nav-tabs"&gt;
      @for (tab of tabs(); track tab) {
        &lt;li class="nav-item"&gt;
          &lt;a class="nav-link"&gt;{{ tab.title() }}&lt;/a&gt;
        &lt;/li&gt;
      }
    &lt;/ul&gt;
  `,
  imports: []
})
export class TabsComponent {
  readonly tabs = contentChildren(TabDirective);
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Comme tu le vois, le template itère sur un tableau d&#8217;onglets <code>tabs</code> et génère
un élément <code>li</code> pour chacun.
Mais d&#8217;où provient ce tableau <code>tabs</code>&#160;?
Comment le composant peut-il connaître les deux directives <code>ns-tab</code> imbriquées
dans le composant <code>ns-tabs</code>&#160;?
C&#8217;est ce que permet la directive <code>ContentChildren</code>.</p>
</div>
<div class="paragraph">
<p>Pour récupérer la liste des onglets,
on doit utiliser <code>contentChildren</code>, avec <code>TabDirective</code> en argument.
Cela nous fournit un tableau d&#8217;onglets, que l&#8217;on peut parcourir avec une boucle <code>for</code>.
Chaque élément dans cette liste est une <code>TabDirective</code>,
on peut donc accéder à sa propriété <code>title</code>,
et afficher le titre de l&#8217;onglet&#160;!</p>
</div>
<div class="paragraph">
<p>Note que si, pour n&#8217;importe quelle raison,
tu avais un template comme celui-ci&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="html">&lt;ns-tabs&gt;
  &lt;div&gt;
    &lt;ns-tab title="Races" /&gt;
  &lt;/div&gt;
  &lt;ns-tabgroup&gt;
    &lt;ns-tab title="About" /&gt;
  &lt;/ns-tabgroup&gt;
&lt;/ns-tabs&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>alors le tableau dans <code>TabComponent</code> ne contiendrait que la première
<code>TabDirective</code>.
<code>contentChild</code> et <code>contentChildren</code> ne recherchent en effet que les descendants
directs, et stopperaient leur recherche sur le composant <code>ns-tabgroup</code>.</p>
</div>
<div class="paragraph">
<p>Si tu voulais que ton composant fonctionne malgré cela,
il te faudrait passer une option à <code>contentChildren</code>&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="javascript">@Component({
  selector: 'ns-tabs',
  template: `
    &lt;ul class="nav nav-tabs"&gt;
      @for (tab of tabs(); track tab) {
        &lt;li class="nav-item"&gt;
          &lt;a class="nav-link"&gt;{{ tab.title() }}&lt;/a&gt;
        &lt;/li&gt;
      }
    &lt;/ul&gt;
  `,
  imports: []
})
export class TabsWithDescendantsComponent {
  readonly tabs = contentChildren(TabDirective, { descendants: true });
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Et maintenant, il trouverait de nouveau toutes les <code>TabDirective</code>&#160;!</p>
</div>
<div class="paragraph">
<p>La propriété <code>tabs</code> est un signal,
donc tu peux aussi être notifié de ses changements,
comme on l&#8217;a vu pour <code>viewChildren</code>.
Encore une fois, la valeur du signal n&#8217;est pas accessible dans le constructeur du composant,
ni même dans <code>ngOnInit</code>.
Pour être sûr que le contenu puisse être requêté,
tu dois utiliser la méthode <code>ngAfterContentInit</code> du cycle de vie.
Tu peux aussi utiliser <code>ngAfterContentChecked</code>, qui est appelée à chaque fois que la
détection de changements est lancée.</p>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<i class="fa icon-tip" title="Practice"></i>
</td>
<td class="content">
<div class="paragraph">
<p>Essaye notre exercice
<a href="https://angular-exercises.ninja-squad.com/exercises/31/advanced-components">Composants avancés</a> <span class="image"><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAIgAAACACAMAAADnN9ENAAACSVBMVEVMaXH7whr7whr7whr7whr7whr7whr7whr7whr7whr7whr7whp4o614o614o614o637whr7whp4o614o614o614o614o614o614o614o62EoKN4o614o637whqFXFKFXFKQnZm4kni0k3vA1Njr8fLd5+myytB/qLGFXFKFXFKcmY98oqp4o63V4uWFXFKFXFKoloWgmIx4o62Hpqu+nofCpI/b08yFXFKAoaaMnpzYzcSFXFKFXFKUnJaYm5O7mIDl5eOGrbaFXFKGk5Kfd2WSalyYcGClfmqhlIZ6lpx+hIWDaWOFXFKFXFJ/gICkl4nFqpeFXFKFXFKCamSDZV2EYFiDaWOCbmne2dTk7O77whqOZE6Ad3TIsJ6jwMflryWbb0h/gIDo6+rH2dz0vB58jZGIn6Cxgj17kZbOvK2FXFL7whq5iTqVt75/e3rPnC/eqSiMYk+FXFKjdkS4p6Ll6OjLtqbSwrXFubacu8PstSGynZiOsrqLZVzauj/013mrlI56mqLCtFrt69fY1dSApaTrvizz2oafgXqSb2aqxcuhrX/11GvO3uGQeHG5z9T20V7e3t7s7uX4y0P6xSjv5byYeHC+sKyli4TSzMrIzc28wcGwtLVHR0c8OztIR0c1NTWNkJEvLy+NioqTkJCHhISlqKnU2dpCQUGBhIRnZmZeYGBqbGyZnJ07Ozvf5ebLwsCmqapfYGFiYmLAw8Tw9fXs8vNqjZVBTE9PYmY4Pj9deH5mho5GU1Y9RUdhf4ZznKVKW140Njdz5u6AAAAAf3RSTlMAMIBQ7/+fEI/PYL8QcIBAIK+v/7+fz+8wUP/fYEAgEP//////////32D//yD//7///4//////UP///zDv///////P//////////+vj3Ag//+fQJ/////////fz///////////////////gHD///////+v//////////////9AWHP9fwAABxxJREFUeAHs1IVy5DAQBNBZ0DJ3mJUonGiPmZmZmZmZPv6ssb2oFFqHeYUq7LJ7mlatWhWVWDxBf4SkEHH6EwhPKk2/X0Z4sn9AknRSeJIx+u0SguXot8sLliG7QrFUKtOvUEkKVrUXpQZPT6EZrBdAX7FA0YsLX7ZCFv0w+gco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" alt="Pro" width="18"></span>&#160;!
Tu construiras un composant avec <code>ng-content</code>&#160;!</p>
</div>
</td>
</tr>
</table>
</div>
</div>
<div class="sect2">
<h3 id="_projection_de_contenu_conditionnelle_et_contextuelle_ng_template_et_ngtemplateoutlet">24.5. Projection de contenu conditionnelle et contextuelle&#160;: <code>ng-template</code> et <code>ngTemplateOutlet</code></h3>
<div class="paragraph">
<p><code>ng-content</code> ne convient pas lorsqu&#8217;on veut insérer du contenu HTML dynamique de manière conditionnelle,
ou en boucle. Il ne permet pas non plus de fournir un contexte à ce contenu dynamique inséré.</p>
</div>
<div class="paragraph">
<p>Illustrons un tel cas par un exemple simple. On voudrait créer un composant <em>progress</em>.
Ce composant accepte une valeur minimale, une valeur maximale et une valeur,
calcule le pourcentage, et l&#8217;affiche dans une barre de progression.</p>
</div>
<div class="paragraph">
<p>Commençons par le squelette de ce composant&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="javascript">export class ProgressComponent {
  readonly min = input(0);
  readonly max = input(100);
  readonly value = input.required&lt;number&gt;();
  readonly percentage = computed(() =&gt; (100 * (this.value() - this.min())) / (this.max() - this.min()));
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Et son template&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="html">&lt;div class="progress"&gt;
  &lt;div
    class="progress-bar"
    role="progressbar"
    [style.width.%]="percentage()"
    [attr.aria-valuenow]="value()"
    [attr.aria-valuemin]="min()"
    [attr.aria-valuemax]="max()"
  &gt;
  &lt;/div&gt;
&lt;/div&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>Rien de nouveau jusqu&#8217;ici.</p>
</div>
<div class="paragraph">
<p>Mais on voudrait aussi afficher la valeur du pourcentage. Et l&#8217;utilisateur/utilisatrice du composant
doit pouvoir customiser l&#8217;affichage du pourcentage si il ou elle le désire.</p>
</div>
<div class="paragraph">
<p>Donc, dans le template du composant <code>progress</code>, on veut ceci, où le <code>formatter</code> est quelque chose
qui est fourni en <em>input</em> du composant.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="html">&lt;div class="progress"&gt;
  &lt;div
    class="progress-bar"
    role="progressbar"
    [style.width.%]="percentage()"
    [attr.aria-valuenow]="value()"
    [attr.aria-valuemin]="min()"
    [attr.aria-valuemax]="max()"
  &gt;
    @if (formatter(); as f) {
      &lt;span&gt;
      &lt;/span&gt;
    } @else {
      {{ percentage() | number }}%
    }

  &lt;/div&gt;
&lt;/div&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>Ce <em>formatter</em> n&#8217;est pas une valeur. Ce n&#8217;est pas non plus une fonction,
parce que le pourcentage doit pouvoir être affiché en utilisant du code HTML, enrichi grâce à Angular.</p>
</div>
<div class="paragraph">
<p>Angular modélise un tel bout de HTML enrichi, qu&#8217;on peut passer en argument et insérer où et quand on le veut,
par un <code>&lt;ng-template&gt;</code>. Son équivalent TypeScript est un objet de type <code>TemplateRef</code>.</p>
</div>
<div class="paragraph">
<p>Dans notre cas, la responsabilité du <em>formatter</em> est d&#8217;afficher un pourcentage. Donc il a besoin
d&#8217;un contexte qui contient ce pourcentage. Ce contexte d&#8217;affichage constitue le type générique du
<code>TemplateRef</code> que le composant accepte en <em>input</em>.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="javascript">interface ProgressContext {
  percentage: number;
}

export class ProgressComponent {
  // ...
  readonly formatter = input&lt;TemplateRef&lt;ProgressContext&gt;&gt;();
  readonly formatterContext = computed&lt;ProgressContext&gt;(() =&gt; ({
    percentage: this.percentage()
  }));
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>À présent, comment insérer ce <code>TemplateRef</code> dans le template de notre composant <em>progress</em>&#160;
et lui fournir son contexte?
C&#8217;est le rôle de la directive structurelle <code>*ngTemplateOutlet</code>. Voici comment on l&#8217;utilise&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="html">@if (formatter(); as f) {
  &lt;span&gt;
    &lt;ng-container *ngTemplateOutlet="f; context: formatterContext()" /&gt;
  &lt;/span&gt;
} @else {
  {{ percentage() | number }}%
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Enfin, comment utilise-t-on ce composant <em>progress</em> et comment lui fournit-on un <em>formatter</em>&#160;?
Simplement en utilisant la balise <code>&lt;ng-template&gt;</code>, en lui assignant une variable, et en passant cette
variable comme valeur de l'<em>input</em> <code>formatter</code> au composant <em>progress</em>.</p>
</div>
<div class="paragraph">
<p>Dans le <code>&lt;ng-template&gt;</code>, on peut bien sûr accéder à toutes les propriétés du composant courant.
Mais on peut en outre accéder aux propriétés du contexte, qui vient du composant <em>progress</em>, en utilisant
cette syntaxe bizarre <code>let-p="percentage"</code>. <code>p</code> est simplement un alias pour l&#8217;élément du contexte
nommé <code>percentage</code> (on pourrait choisir n&#8217;importe quel autre alias, comme par exemple <code>let-progress="percentage"</code>)`.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="html">&lt;!-- without formatter --&gt;
&lt;ns-progress [value]="75" /&gt;

&lt;!-- with formatter --&gt;
&lt;ng-template #myFormatter let-p="percentage"&gt;&lt;strong&gt;Your&lt;/strong&gt; progress: {{ p | number }}%&lt;/ng-template&gt;
&lt;ns-progress [value]="75" [formatter]="myFormatter" /&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>Si, dans l&#8217;interface du contexte, on choisit de nommer une propriété <code>$implicit</code> (au lieu de <code>percentage</code> par exemple),
alors on peut utiliser simplement <code>let-p</code> au lieu de <code>let-p="percentage"</code> pour accéder à cette propriété.</p>
</div>
<div class="paragraph">
<p>C&#8217;est d&#8217;ailleurs ainsi que fonctionnent les directives structurelles en Angular.
Toutes les directives que l&#8217;on utilise avec une <code>*</code>, comme <code>ngIf</code> ou <code>ngFor</code>,
sont en réalité des directives dont l&#8217;élément hôte est un <code>&lt;ng-template&gt;</code>.
Angular définit une <em>micro-syntaxe</em> pour les directives structurelles,
qui permet d&#8217;appliquer plus succinctement une directive à un <code>&lt;ng-template&gt;</code>.
Prenons l&#8217;exemple de <code>ngFor</code>.
Quand on écrit un <code>ngFor</code> comme celui-ci (<code>ngFor</code> est la directive qu&#8217;on utilisait
avant que <code>@for</code> ne soit introduit)&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="html">&lt;div *ngFor="let pony of ponies; i as index"&gt;
  {{ i }} - {{ pony }}
&lt;/div&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>Cela revient au même qu&#8217;écrire le template suivant&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="html">&lt;ng-template ngFor [ngForOf]="ponies" let-pony let-i="index"&gt;
  &lt;div&gt;{{ i }} - {{ pony }}&lt;/div&gt;
&lt;/ng-template&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>C&#8217;est moins lisible, on est d&#8217;accord.
C&#8217;est pour ça que l&#8217;on utilise toujours <code>*ngFor</code>.
Mais cela montre qu&#8217;en réalité
Angular utilise lui-même ce pattern à base de <code>ng-template</code>&#160;!
<code>ngFor</code> n&#8217;est rien d&#8217;autre qu&#8217;une directive s&#8217;appliquant sur un <code>ng-template</code>,
avec un input <code>ngForOf</code> qui attend une collection,
et un contexte contenant une propriété <code>$implicit</code> qui est l&#8217;élément courant,
et d&#8217;autres propriétés comme l&#8217;index.</p>
</div>
<div class="paragraph">
<p>Ce pattern est extrêmement puissant,
et est d&#8217;une grande utilité pour concevoir des composants customisables.</p>
</div>
</div>
<div class="sect2">
<h3 id="_à_lécoute_de_lhôte_host_listener">24.6. À l&#8217;écoute de l&#8217;hôte&#160;: <em>Host Listener</em></h3>
<div class="paragraph">
<p>Quand on écrit une directive,
on a souvent envie d&#8217;interagir avec l&#8217;élément hôte.</p>
</div>
<div class="paragraph">
<p>Prenons un exemple simple&#160;:
notre client voudrait rapidement vider le contenu de certains champs texte
en double-cliquant dessus.
C&#8217;est typiquement le genre de comportement que tu peux encapsuler dans une
directive custom, que nous appellerons <code>InputClearDirective</code>.
Son sélecteur sera un attribut, disons <code>nsInputClear</code>.
Quand cet attribut sera ajouté sur un élément,
on voudra écouter les double-clics sur cet élément hôte.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
Cet exemple est certes simple, mais pas vraiment réaliste.
Une application plus réaliste (mais aussi plus complexe) de cette fonctionnalité
serait, par exemple, d&#8217;afficher une bulle d&#8217;aide (<em>tooltip</em>) quand un élément
est survolé ou cliqué.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Créons cette directive&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="javascript">@Directive({
  selector: '[nsInputClear]',
})
export class InputClearDirective {
  private readonly element = inject&lt;ElementRef&lt;HTMLInputElement&gt;&gt;(ElementRef);
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>On utilisera notre directive comme cela&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="html">&lt;input nsInputClear /&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>Il nous faut maintenant réagir à l&#8217;événement 'dblclick' sur notre élément
hôte (ici, le <code>&lt;input&gt;</code>) pour y vider sa valeur.</p>
</div>
<div class="paragraph">
<p>C&#8217;est là que nous pouvons utiliser les méta-données <code>host</code> dans le décorateur <code>@Component</code>.
La syntaxe est presque identique à celle qu&#8217;on utiliserait dans un template&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="javascript">host: {
  '(eventtype)': 'statement()'
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Dans notre cas, nous pourrions écrire&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="javascript">@Directive({
  selector: '[nsInputClear]',
  host: {
    '(dblclick)': 'clearContent()'
  }
})
export class InputClearDirective {
  private readonly element = inject&lt;ElementRef&lt;HTMLInputElement&gt;&gt;(ElementRef);

  clearContent(): void {
    this.element.nativeElement.value = '';
  }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Désormais, chaque fois qu&#8217;un événement 'dblclick' est déclenché sur l&#8217;élément
hôte, la directive va vider la valeur de l&#8217;input.</p>
</div>
<div class="paragraph">
<p>Note qu&#8217;il est aussi possible de se mettre à l&#8217;écoute d&#8217;événements globaux,
comme <code>window:resize</code> par exemple&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="javascript">@Directive({
  selector: '[nsWindowResize]',
  host: {
    '(window:resize)': 'resize($event)'
  }
})
export class WindowResizeDirective {
  resize(event: Event): void {
    const innerWidth = (event.target as Window).innerWidth;
    console.log(`The screen is being resized to ${innerWidth}`);
  }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Un autre moyen de réagir à des événements sur l&#8217;élément hôte est de décorer une méthode de la
directive avec <code>@HostListener</code>.
C&#8217;était la manière recommandée dans le passé, mais utiliser les méta-données de l&#8217;hôte est maintenant préférable.</p>
</div>
</div>
<div class="sect2">
<h3 id="_binding_sur_lhôte_host_binding">24.7. Binding sur l&#8217;hôte&#160;: <em>Host binding</em></h3>
<div class="paragraph">
<p>On a souvent besoin d&#8217;ajouter automatiquement une classe ou un style CSS,
ou de modifier une propriété DOM de l&#8217;élément hôte d&#8217;une directive ou d&#8217;un composant.
Les méta-données de l&#8217;hôte, comme nous venons de le voir, permettent de faire de
l'<em>event binding</em> sur l&#8217;élément hôte. On peut utiliser les mêmes méta-données pour
faire aussi du <em>property binding</em>.</p>
</div>
<div class="paragraph">
<p>Supposons qu&#8217;on veuille ajouter une classe CSS particulière (<code>is-required</code>)
à un input s&#8217;il fait l&#8217;objet d&#8217;une erreur de validation donnée (<code>required</code>).
Cette classe pourrait ajouter une jolie bordure autour du champ,
ou un petit astérisque, peu importe.
Cela ne validera en aucune façon la saisie, on se contentera de consommer
le résultat de la validation native de formulaires en Angular, et d&#8217;utiliser
ce résultat pour styler le champ.</p>
</div>
<div class="paragraph">
<p>C&#8217;est de nouveau un travail idéal pour une directive&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="javascript">@Directive({
  selector: '[nsAddClassIfRequired]',
})
export class AddClassIfRequiredDirective {
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>On pourra l&#8217;utiliser dans un formulaire Angular piloté par le code&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="javascript">&lt;input formControlName="firstName" nsAddClassIfRequired /&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>Ou dans un formulaire piloté par le template&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="javascript">&lt;input [(ngModel)]="user.name" required nsAddClassIfRequired&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>Il nous faut ensuite, dans cette directive, une référence à l&#8217;état du champ.
Angular valide automatiquement les champs,
et ajoute l&#8217;erreur <code>required</code> si un champ est requis mais vide.
Le puissant système d&#8217;injection de dépendances va encore une fois pouvoir
nous aider&#160;!
On peut en effet demander à Angular d&#8217;injecter dans une directive une autre
directive appliquée au même hôte, ou à un des ses ascendants.</p>
</div>
<div class="paragraph">
<p>Comme nous voulons que notre directive fonctionne avec <code>FormControlName</code> ou <code>NgModel</code>,
on pourrait demander à Angular de nous injecter les deux.
Mais ces injections ne fonctionneraient pas, car seulement une seule des deux
serait disponible (on utilise généralement soit l&#8217;une, soit l&#8217;autre,
sur un input donné),
et Angular lève une erreur si une dépendance ne peut être injectée.
Il existe une astuce qui permet de demander à Angular de continuer même si une
dépendance s&#8217;avère manquante&#160;: le décorateur <code>Optional</code>.</p>
</div>
<div class="paragraph">
<p>Ainsi, un tel code pourrait fonctionner&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="javascript">private readonly formControl = inject(FormControlName, { optional: true });
private readonly ngModel = inject(NgModel, { optional: true });</code></pre>
</div>
</div>
<div class="paragraph">
<p>Mais on peut faire mieux.
En fait, ces deux directives héritent de la même classe de base&#160;: <code>NgControl</code>.
Alors, au lieu d&#8217;injecter l&#8217;une ou l&#8217;autre, on peut lui demander de nous fournir
le <code>NgControl</code> commun&#160;!</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="javascript">@Directive({
  selector: '[nsAddClassIfRequired]',
})
export class AddClassIfRequiredDirective {
  private readonly control = inject(NgControl);
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Maintenant qu&#8217;on a une référence au <code>NgControl</code>,
il est facile de savoir si le champ présente l&#8217;erreur <code>required</code>,
en utilisant sa méthode <code>hasError()</code>.
La dernière étape est d&#8217;ajouter la classe <code>is-required</code> à l&#8217;élément hôte si
c&#8217;est le cas.
C&#8217;est là que le binding de propriété sur l&#8217;hôte entre en scène&#160;!
Là aussi, la syntaxe est presque identique à celle qu&#8217;on utiliserait dans un template&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="javascript">host: {
  '[prop]': 'expression'
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Et cela mettrait à jour automatiquement la propriété <code>prop</code> de l&#8217;hôte chaque
fois que <code>expression</code> change de valeur.</p>
</div>
<div class="paragraph">
<p>Dans notre cas, nous n&#8217;avons pas de propriété sur laquelle se lier.
Mais on peut définir un accesseur qui retourne <code>true</code> ou <code>false</code> en fonction
de la présence de l&#8217;erreur sur le contrôle.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="javascript">@Directive({
  selector: '[nsAddClassIfRequired]',
  host: {
    '[class.is-required]': 'isRequired'
  }
})
export class AddClassIfRequiredDirective {
  private readonly control = inject(NgControl);

  get isRequired(): boolean {
    return this.control.hasError('required');
  }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Ces quelques lignes de code sont vraiment puissantes&#160;:
à chaque fois que cette directive sera utilisée dans un formulaire,
Angular ajoutera ou enlèvera automatiquement notre classe spécifique
selon la saisie utilisateur&#160;!</p>
</div>
<div class="paragraph">
<p>Cela peut être utilisé pour binder d&#8217;autres types de caractéristiques,
et pas uniquement des classes CSS.
Par exemple, certaines bibliothèques de composants l&#8217;utilisent pour ajouter
les attributs d&#8217;accessibilité (<code>aria.xxx</code>) à l&#8217;élément hôte.</p>
</div>
<div class="paragraph">
<p>Note que notre directive utilise un sélecteur spécifique.
Mais si tu veux l&#8217;appliquer absolument partout,
tu peux simplement changer son sélecteur pour <code>input</code>,
et tous les champs de ton application en bénéficieront.</p>
</div>
<div class="paragraph">
<p>Un autre moyen de faire du <em>property binding</em> sur l&#8217;élément hôte est de décorer
une propriété de la directive avec <code>@HostBinding</code>.
C&#8217;était la manière recommandée dans le passé, mais utiliser les méta-données de l&#8217;hôte est maintenant préférable.</p>
</div>
</div>
<div class="sect2">
<h3 id="_manipulation_de_dom_avec_afterrender_ou_afternextrender">24.8. Manipulation de DOM avec <code>afterRender</code> ou <code>afterNextRender</code></h3>
<div class="paragraph">
<p>Depuis Angular 16.2, deux nouvelles fonctions sont à notre disposition&#160;: <code>afterRender</code> et <code>afterNextRender</code>.
Ce ne sont pas des <em>hooks</em> traditionnels implémentés sous forme de méthodes de composant.
Ce sont plutôt des fonctions qu&#8217;un composant peut appeler, quand bon lui semble, afin de fournir une
fonction qui sera exécutée chaque fois (pour <code>afterRender</code>) ou la prochaine fois (pour <code>afterNextRender</code>)
qu&#8217;Angular met à jour le DOM de l&#8217;application tout entière.</p>
</div>
<div class="paragraph">
<p>Ils sont donc utiles pour faire de la manipulation de DOM. Par exemple, si un gestionnaire d&#8217;événement
modifie l&#8217;état de l&#8217;application, ce qui entraîne ensuite des impacts sur le DOM, et si tu veux
appliquer des transformations à ce nouveau DOM, appeler <code>afterNextRender</code> dans le gestionnaire d&#8217;événement
est un bon moyen de faire cela.</p>
</div>
<div class="paragraph">
<p>Attention cependant&#160;: ces deux fonctions, comme <code>inject</code>, sont des fonctions contextuelles.
Si tu les appelles en-dehors d&#8217;un constructeur, tu devras leur passer l&#8217;injecteur du composant en option.</p>
</div>
<div class="paragraph">
<p>Voici un exemple d&#8217;utilisation de <code>afterNextRender</code>&#160;: le clic d&#8217;un bouton permet d&#8217;afficher un champ texte
pour saisir le nom d&#8217;un nouveau poney. Une fois que le champ apparaît dans le DOM, il doit prendre le focus
immédiatement.
Bien sûr, passer à <code>true</code> le booléen ne fait pas apparaître le champ immédiatement.
Il faut attendre qu&#8217;Angular ait mis à jour le DOM avant d&#8217;accéder au champ et de lui donner le focus.
Utiliser <code>afterNextRender</code> est un moyen parfait de faire cela.
Et puisqu&#8217;on ne l&#8217;appelle pas depuis le constructeur,
nous devons lui passer l&#8217;injecteur du composant, qui a été injecté dans le constructeur.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="javascript">@Component({
  selector: 'ns-new-pony',
  template: `
    &lt;button (click)="showPonyForm()"&gt;New pony&lt;/button&gt;
    @if (ponyFormDisplayed()) {
      &lt;label for="pony-name"&gt;New pony name:&lt;/label&gt;
      &lt;input id="pony-name" #ponyName /&gt;
    }
  `
})
export class NewPonyComponent {
  readonly ponyFormDisplayed = signal(false);
  readonly ponyName = viewChild&lt;ElementRef&lt;HTMLInputElement&gt;&gt;('ponyName');

  private readonly injector = inject(Injector);

  showPonyForm() {
    // display the form
    this.ponyFormDisplayed.set(true);
    // and give the focus to the new input once the DOM is rendered
    afterNextRender(() =&gt; this.ponyName()!.nativeElement.focus(), { injector: this.injector });
  }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Un autre intérêt de ces fonctions est que le <em>callback</em> qu&#8217;on leur demande d&#8217;exécuter
n&#8217;est jamais exécuté sur le serveur, lorsqu&#8217;on utilise le <em>Server-Side Rendering</em> (SSR).
Par conséquent, si tu veux que du code ne soit exécuté que côté client, par exemple parce qu&#8217;il
accède à <code>window</code> ou à une autre API qui n&#8217;est pas disponible sur le serveur,
placer ce code dans une fonction passée à <code>afterNextRender()</code> est un bon moyen de le faire.</p>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<i class="fa icon-tip" title="Mise en pratique"></i>
</td>
<td class="content">
<div class="paragraph">
<p>Essaye notre exercice
<a href="https://angular-exercises.ninja-squad.com/exercises/32/advanced-directives">Directives avancées</a> <span class="image"><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAIgAAACACAMAAADnN9ENAAACSVBMVEVMaXH7whr7whr7whr7whr7whr7whr7whr7whr7whr7whr7whp4o614o614o614o637whr7whp4o614o614o614o614o614o614o614o62EoKN4o614o637whqFXFKFXFKQnZm4kni0k3vA1Njr8fLd5+myytB/qLGFXFKFXFKcmY98oqp4o63V4uWFXFKFXFKoloWgmIx4o62Hpqu+nofCpI/b08yFXFKAoaaMnpzYzcSFXFKFXFKUnJaYm5O7mIDl5eOGrbaFXFKGk5Kfd2WSalyYcGClfmqhlIZ6lpx+hIWDaWOFXFKFXFJ/gICkl4nFqpeFXFKFXFKCamSDZV2EYFiDaWOCbmne2dTk7O77whqOZE6Ad3TIsJ6jwMflryWbb0h/gIDo6+rH2dz0vB58jZGIn6Cxgj17kZbOvK2FXFL7whq5iTqVt75/e3rPnC/eqSiMYk+FXFKjdkS4p6Ll6OjLtqbSwrXFubacu8PstSGynZiOsrqLZVzauj/013mrlI56mqLCtFrt69fY1dSApaTrvizz2oafgXqSb2aqxcuhrX/11GvO3uGQeHG5z9T20V7e3t7s7uX4y0P6xSjv5byYeHC+sKyli4TSzMrIzc28wcGwtLVHR0c8OztIR0c1NTWNkJEvLy+NioqTkJCHhISlqKnU2dpCQUGBhIRnZmZeYGBqbGyZnJ07Ozvf5ebLwsCmqapfYGFiYmLAw8Tw9fXs8vNqjZVBTE9PYmY4Pj9deH5mho5GU1Y9RUdhf4ZznKVKW140Njdz5u6AAAAAf3RSTlMAMIBQ7/+fEI/PYL8QcIBAIK+v/7+fz+8wUP/fYEAgEP//////////32D//yD//7///4//////UP///zDv///////P//////////+vj3Ag//+fQJ/////////fz///////////////////gHD///////+v//////////////9AWHP9fwAABxxJREFUeAHs1IVy5DAQBNBZ0DJ3mJUonGiPmZmZmZmZPv6ssb2oFFqHeYUq7LJ7mlatWhWVWDxBf4SkEHH6EwhPKk2/X0Z4sn9AknRSeJIx+u0SguXot8sLliG7QrFUKtOvUEkKVrUXpQZPT6EZrBdAX7FA0YsLX7ZCFv0w+gco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" alt="Pro" width="18"></span>&#160;!
Tu construiras plusieurs directives qui interagissent entre elles et avec <code>ContentChild</code> et <code>HostBinding</code>&#160;!
Tu pourras ensuite voir comment des bibliothèques comme <a href="https://ng-bootstrap.github.io/">ng-bootstrap</a> utilisent ces patterns dans l&#8217;exercice
<a href="https://angular-exercises.ninja-squad.com/exercises/33/ng-bootstrap">Intégration avec une bibliothèque de composants</a> <span class="image"><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAIgAAACACAMAAADnN9ENAAACSVBMVEVMaXH7whr7whr7whr7whr7whr7whr7whr7whr7whr7whr7whp4o614o614o614o637whr7whp4o614o614o614o614o614o614o614o62EoKN4o614o637whqFXFKFXFKQnZm4kni0k3vA1Njr8fLd5+myytB/qLGFXFKFXFKcmY98oqp4o63V4uWFXFKFXFKoloWgmIx4o62Hpqu+nofCpI/b08yFXFKAoaaMnpzYzcSFXFKFXFKUnJaYm5O7mIDl5eOGrbaFXFKGk5Kfd2WSalyYcGClfmqhlIZ6lpx+hIWDaWOFXFKFXFJ/gICkl4nFqpeFXFKFXFKCamSDZV2EYFiDaWOCbmne2dTk7O77whqOZE6Ad3TIsJ6jwMflryWbb0h/gIDo6+rH2dz0vB58jZGIn6Cxgj17kZbOvK2FXFL7whq5iTqVt75/e3rPnC/eqSiMYk+FXFKjdkS4p6Ll6OjLtqbSwrXFubacu8PstSGynZiOsrqLZVzauj/013mrlI56mqLCtFrt69fY1dSApaTrvizz2oafgXqSb2aqxcuhrX/11GvO3uGQeHG5z9T20V7e3t7s7uX4y0P6xSjv5byYeHC+sKyli4TSzMrIzc28wcGwtLVHR0c8OztIR0c1NTWNkJEvLy+NioqTkJCHhISlqKnU2dpCQUGBhIRnZmZeYGBqbGyZnJ07Ozvf5ebLwsCmqapfYGFiYmLAw8Tw9fXs8vNqjZVBTE9PYmY4Pj9deH5mho5GU1Y9RUdhf4ZznKVKW140Njdz5u6AAAAAf3RSTlMAMIBQ7/+fEI/PYL8QcIBAIK+v/7+fz+8wUP/fYEAgEP//////////32D//yD//7///4//////UP///zDv///////P//////////+vj3Ag//+fQJ/////////fz///////////////////gHD///////+v//////////////9AWHP9fwAABxxJREFUeAHs1IVy5DAQBNBZ0DJ3mJUonGiPmZmZmZmZPv6ssb2oFFqHeYUq7LJ7mlatWhWVWDxBf4SkEHH6EwhPKk2/X0Z4sn9AknRSeJIx+u0SguXot8sLliG7QrFUKtOvUEkKVrUXpQZPT6EZrBdAX7FA0YsLX7ZCFv0w+gco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" alt="Pro" width="18"></span>
et comment ajouter des graphiques dans une application avec l&#8217;exercice
<a href="https://angular-exercises.ninja-squad.com/exercises/34/chart">Charts</a> <span class="image"><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAIgAAACACAMAAADnN9ENAAACSVBMVEVMaXH7whr7whr7whr7whr7whr7whr7whr7whr7whr7whr7whp4o614o614o614o637whr7whp4o614o614o614o614o614o614o614o62EoKN4o614o637whqFXFKFXFKQnZm4kni0k3vA1Njr8fLd5+myytB/qLGFXFKFXFKcmY98oqp4o63V4uWFXFKFXFKoloWgmIx4o62Hpqu+nofCpI/b08yFXFKAoaaMnpzYzcSFXFKFXFKUnJaYm5O7mIDl5eOGrbaFXFKGk5Kfd2WSalyYcGClfmqhlIZ6lpx+hIWDaWOFXFKFXFJ/gICkl4nFqpeFXFKFXFKCamSDZV2EYFiDaWOCbmne2dTk7O77whqOZE6Ad3TIsJ6jwMflryWbb0h/gIDo6+rH2dz0vB58jZGIn6Cxgj17kZbOvK2FXFL7whq5iTqVt75/e3rPnC/eqSiMYk+FXFKjdkS4p6Ll6OjLtqbSwrXFubacu8PstSGynZiOsrqLZVzauj/013mrlI56mqLCtFrt69fY1dSApaTrvizz2oafgXqSb2aqxcuhrX/11GvO3uGQeHG5z9T20V7e3t7s7uX4y0P6xSjv5byYeHC+sKyli4TSzMrIzc28wcGwtLVHR0c8OztIR0c1NTWNkJEvLy+NioqTkJCHhISlqKnU2dpCQUGBhIRnZmZeYGBqbGyZnJ07Ozvf5ebLwsCmqapfYGFiYmLAw8Tw9fXs8vNqjZVBTE9PYmY4Pj9deH5mho5GU1Y9RUdhf4ZznKVKW140Njdz5u6AAAAAf3RSTlMAMIBQ7/+fEI/PYL8QcIBAIK+v/7+fz+8wUP/fYEAgEP//////////32D//yD//7///4//////UP///zDv///////P//////////+vj3Ag//+fQJ/////////fz///////////////////gHD///////+v//////////////9AWHP9fwAABxxJREFUeAHs1IVy5DAQBNBZ0DJ3mJUonGiPmZmZmZmZPv6ssb2oFFqHeYUq7LJ7mlatWhWVWDxBf4SkEHH6EwhPKk2/X0Z4sn9AknRSeJIx+u0SguXot8sLliG7QrFUKtOvUEkKVrUXpQZPT6EZrBdAX7FA0YsLX7ZCFv0w+gco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" alt="Pro" width="18"></span>.</p>
</div>
</td>
</tr>
</table>
</div>
<div style="page-break-after: always;"></div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="angular-modules">25. Les modules Angular</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Jusqu&#8217;à la version 14 d&#8217;Angular, les applications étaient organisées en modules Angular.
Beaucoup d&#8217;applications existantes le sont probablement encore.
Et même dans les applications récentes, qui utilisent des composants, <em>pipes</em> et directives standalone,
le concept de module Angular, ou <code>NgModule</code>, est toujours présent&#160;:
on peut, voire on doit, importer certains d&#8217;entre eux (<code>CommonModule</code>, <code>ReactiveFormsModule</code> par exemple)
dans nos composants.</p>
</div>
<div class="paragraph">
<p>Peut-être lis-tu ce livre en vue de travailler sur un projet existant où les modules Angular
sont toujours utilisés. Ce chapitre explique leurs principes, règles, et usages.
Nous t&#8217;encourageons néanmoins à utiliser des composants standalone dans tes nouvelles applications, et même
à migrer tes applications existantes. La CLI fournit des commandes permettant
d&#8217;<a href="https://blog.ninja-squad.com/2023/02/21/migrate-an-angular-application-to-standalone/">automatiser la
plus grande partie de cette migration</a>.</p>
</div>
<div class="sect2">
<h3 id="_une_unité_de_compilation">25.1. Une unité de compilation</h3>
<div class="paragraph">
<p>Dans la plus simple des applications Angular utilisant des modules, tu en trouveras au moins un, le
module racine (<em>root</em>), conventionnellement appelé <code>AppModule</code>. Ce module ressemble typiquement à ceci&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="javascript">@NgModule({
  declarations: [AppComponent, HomeComponent, AboutComponent, PonyComponent],
  imports: [BrowserModule, HttpClientModule, RouterModule.forRoot(APP_ROUTES)],
  providers: [],
  bootstrap: [AppComponent]
})
export class AppModule {}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Que peut-on en dire&#160;?</p>
</div>
<div class="paragraph">
<p>La propriété <code>declarations</code> déclare les composants, <em>pipes</em> et directives qui appartiennent à ce module.
Ils ne sont pas standalone. S&#8217;ils l&#8217;étaient, alors ils seraient listés dans la propriété <code>imports</code>.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
La seule différence entre un composant (ou un <em>pipe</em>, ou une directive) standalone et un composant "normal", non standalone,
est que les composants non-standalone ont <code>standalone: false</code> et pas d'`imports` dans leur décorateur.
Le module auquel ils appartiennent définit ce qu&#8217;ils peuvent utiliser dans leur template.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Un module Angular définit une unité de compilation. Comme ils font partie du même module,
tous ces composants peuvent s&#8217;utiliser l&#8217;un l&#8217;autre. Par exemple, les composants <code>HomeComponent</code>
et <code>AboutComponent</code> peuvent utiliser <code>PonyComponent</code> dans leur template.</p>
</div>
<div class="paragraph">
<p>La propriété <code>imports</code> définit la liste des autres modules Angular, mais aussi des composants, <em>pipes</em> et
directives standalones, qui sont importés dans ce module.
Comme nous importons <code>RouterModule</code>, les composants peuvent utiliser les directives du module de routage, comme <code>routerLink</code>.
Comme nous n&#8217;importons pas <code>ReactiveFormsModule</code>, ils ne peuvent pas utiliser les directives de ce module, comme <code>formGroup</code>.
Importer <code>HttpClientModule</code> (qui est maintenant déprécié) permet d&#8217;importer le <em>provider</em> qu&#8217;il définit pour le service <code>HttpClient</code>,
ce qui signifie qu&#8217;il peut être injecté dans n&#8217;importe quel service de l&#8217;application.
Importer <code>BrowserModule</code>, qui lui-même importe et exporte <code>CommonModule</code>, est ce qui rend possible l&#8217;utilisation
des directives et <em>pipes</em> communs (<code>*ngIf</code>, <code>ngClass</code>, <code>date</code> etc.) dans les composants de ce module.</p>
</div>
<div class="paragraph">
<p>Le tableau <code>providers</code> définit les <em>provider</em>s, de la même manière qu&#8217;ils sont définis dans l&#8217;appel de la fonction
<code>bootstrapApplication()</code> des applications standalone. Comme la plupart des services utilisent <code>providedIn: 'root'</code>,
il n&#8217;y a pas besoin de les lister ici. Mais cela peut être nécessaire si un service doit être fourni explicitement pour
configurer l&#8217;application.</p>
</div>
<div class="paragraph">
<p>Enfin, <code>bootstrap</code> contient le composant racine (ou, beaucoup plus rarement, les composants racines) de l&#8217;application,
qui doivent être <em>bootstrappés</em>, parce qu&#8217;ils sont à la racine de l&#8217;arbre des composants.</p>
</div>
</div>
<div class="sect2">
<h3 id="_composition_de_modules">25.2. Composition de modules</h3>
<div class="paragraph">
<p>Les applications plus grandes sont composées de modules supplémentaires, qu&#8217;on peut ranger dans deux catégories&#160;:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Les modules contenant des composants, directives, <em>pipes</em> réutilisables, et parfois aussi des <em>providers</em> de services.
Ces modules sont destinés à être importés par les modules fonctionnels de l&#8217;application.</p>
</li>
<li>
<p>Les modules fonctionnels, souvent chargés à la demande, correspondant à un ensemble de routes de l&#8217;application.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>Commençons avec les modules de composants réutilisables.
Supposons que le <code>PonyComponent</code> doive aussi être utilisé par le <code>RacesComponent</code>, qui est lui-même déclaré dans un module fonctionnel <code>RacesModule</code>.
Comme nous l&#8217;avons vu, pour que le <code>RacesComponent</code> ait accès au <code>PonyComponent</code>, nous devrions ajouter le <code>PonyComponent</code>
aux <code>declarations</code> de <code>RacesModule</code>.
Angular, cependant, ne te laissera pas faire ça&#160;: un composant doit être déclaré dans un et un seul
module de l&#8217;application. Or il est déjà déclaré dans <code>AppModule</code> (qui en a aussi besoin pour pouvoir l&#8217;utiliser dans <code>HomeComponent</code>).</p>
</div>
<div class="paragraph">
<p>La solution consiste à extraire <code>PonyComponent</code> dans un module supplémentaire, parfois appelé module partagé (<em>shared module</em>)&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="javascript">@NgModule({
  declarations: [PonyComponent],
  imports: [CommonModule],
  exports: [PonyComponent]
})
export class PonyModule {}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Ce module déclare le <code>PonyComponent</code> qu&#8217;il contient.
Il importe <code>CommonModule</code> afin que <code>PonyComponent</code> puisse utiliser les directives communes.
Et, le plus important, sa propriété <code>exports</code> contient aussi <code>PonyComponent</code>.
C&#8217;est cet export qui permet de rendre disponible le composant aux autres modules qui importent
le <code>PonyModule</code>. C&#8217;est ce que nous allons faire dans <code>AppModule</code> et <code>RacesModule</code> afin de pouvoir utiliser
<code>PonyComponent</code>:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="javascript">@NgModule({
  declarations: [AppComponent, HomeComponent, AboutComponent],
  imports: [BrowserModule, HttpClientModule, RouterModule.forRoot(APP_ROUTES), PonyModule],
  providers: [],
  bootstrap: [AppComponent]
})
export class AppModule {}</code></pre>
</div>
</div>
<div class="paragraph">
<p>La tentation est grande de mettre tous les composants réutilisables dans un seul module <code>SharedModule</code>.
Au fur et à mesure que l&#8217;application grossit, cependant, ce module va devenir énorme.
Une meilleure approche est de créer de nombreux minuscules modules partagés, afin que les
autres modules n&#8217;importent que ce dont ils ont réellement besoin.
De tels modules, qui n&#8217;exportent qu&#8217;un seul composant, sont connues sous le nom de <em>SCAM</em>s (<em>Single Component Angular Modules</em>).
Le <em>boilerplate</em> que tous ces modules représentent est l&#8217;une des raisons pour lesquelles Angular
a décidé de supporter les composants standalone&#160;: tu peux voir un composant standalone comme étant à la
fois un composant et le module qui le déclare et l&#8217;exporte.</p>
</div>
</div>
<div class="sect2">
<h3 id="_modules_fonctionnels_associés_au_routage">25.3. Modules fonctionnels associés au routage</h3>
<div class="paragraph">
<p>Les modules fonctionnels ne sont pas bien différents des modules de composants réutilisables.
Les composants qu&#8217;ils déclarent, en revanche, ne sont pas destinés à être utilisés par les composants
d&#8217;autres modules. Donc, ils sont déclarés, mais pas exportés.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="javascript">@NgModule({
  declarations: [RacesComponent],
  imports: [CommonModule, PonyModule, RouterModule.forChild(RACES_ROUTES)]
})
export class RacesModule {}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Le module principal peut importer les modules fonctionnels.  Mais alors, ils seront intégrés au
<em>bundle</em> principal, et donc chargés immédiatement, avant le démarrage de l&#8217;application.
La plupart du temps, on préférera donc charger les modules fonctionnels à la demande.
La manière de procéder est similaire à celle que l&#8217;on a décrite précédemment. Simplement, au lieu de
charger dynamiquement des routes, on chargera le module fonctionnel lui-même.
Ainsi, dans les routes du modules principal, on trouvera&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="javascript">{
  path: 'races',
  loadChildren: () =&gt; import('./races/races.module').then(m =&gt; m.RacesModule)
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Tu devrais maintenant être en mesure de comprendre comment une application est organisée en modules
Angular.
Les règles ne sont pas si difficiles à maîtriser, mais il faut bien reconnaître que les modules
Angular n&#8217;apportent aucune fonctionnalité à l&#8217;application, et rendent les dépendances des composants
plus difficiles à trouver. C&#8217;est la raison pour laquelle, dans ce livre, nous avons préféré promouvoir
l&#8217;utilisation des composants standalone.</p>
</div>
<div style="page-break-after: always;"></div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="internationalisation">26. Internationalisation</h2>
<div class="sectionbody">
<div class="paragraph">
<p><em>So you want to internationalize your application, huh?</em></p>
</div>
<div class="paragraph">
<p>Bon, ne te tracasse pas si ton niveau d&#8217;anglais est si bas que tu n&#8217;as pas pu comprendre
cette petite introduction. Ton rôle de développeur n&#8217;est pas de traduire ton application
en anglais, espagnol, ou quelque autre dialecte exotique. Ce que tu peux faire par contre,
c&#8217;est rendre cette traduction possible. Ce chapitre explique comment y arriver.</p>
</div>
<div class="imageblock text-center">
<div class="content">
<img src="data:image/png;base64,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" alt="i18n">
</div>
</div>
<div class="sect2">
<h3 id="_la_locale">26.1. La <em>locale</em></h3>
<div class="paragraph">
<p>On a déjà évoqué l&#8217;internationalisation auparavant, dans le chapitre sur les <em>pipes</em>.
Quatre des <em>pipes</em> fournis par Angular concernent l&#8217;internationalisation.
Ces <em>pipes</em> sont les <em>pipes</em> <code>number</code>, <code>percent</code>, <code>currency</code> et <code>date</code>.
Jusqu&#8217;à Angular&#160;5, ils utilisaient l&#8217;API JavaScript standard <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Intl"><em>Internationalization</em></a>,
censée être fournie par le navigateur.
Mais cette API n&#8217;étant pas toujours fournie par le navigateur et parfois source de bugs et d&#8217;incohérences entre navigateurs,
ces <em>pipes</em> ont été complètement réécrits en Angular&#160;5.0.</p>
</div>
<div class="paragraph">
<p>Ce que nous ne savons pas encore, c&#8217;est comment ces <em>pipes</em> décident de formater les nombres et les dates.
Doivent-ils utiliser le point ou la virgule comme séparateur décimal&#160;? Doivent-ils utiliser <em>January</em> ou
<em>Janvier</em> pour désigner le premier mois de l&#8217;année&#160;? Tu pourrais penser que la décision est basée sur
la langue préférée configurée dans le navigateur. En réalité, ce n&#8217;est pas le cas. La décision est basée sur une
valeur injectable nommée <code>LOCALE_ID</code>. Et la valeur par défaut de <code>LOCALE_ID</code> est <code>'en-US'</code>.</p>
</div>
<div class="paragraph">
<p>Voici un exemple qui montre comment obtenir la valeur de <code>LOCALE_ID</code>. Comme tu peux le voir, il s&#8217;agit d&#8217;une simple
chaîne de caractères. Pour l&#8217;injecter dans tes composants ou services, tu ne peux pas compter sur son type (<code>string</code>).
Il est nécessaire d&#8217;indiquer à Angular le <em>token</em> qui identifie cette valeur, en utilisant <code>@Inject(LOCALE_ID)</code>.
Ceci peut être utile si la logique du composant ou du service dépend de la locale que l&#8217;application utilise.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="javascript">@Component({
  selector: 'ns-locale',
  template: `
    &lt;p&gt;The locale is {{ locale }}&lt;/p&gt;
    &lt;!-- will display 'en-US' --&gt;

    &lt;p&gt;{{ 1234.56 | number }}&lt;/p&gt;
    &lt;!-- will display '1,234.56' --&gt;
  `,
  imports: [DecimalPipe]
})
class DefaultLocaleComponent {
  readonly locale = inject(LOCALE_ID);
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Tout ça est bien beau, mais comment peut-on faire pour <em>changer</em> la locale&#160;? En fait, on ne peut pas. La
locale est une constante, qu&#8217;on ne peut changer pendant l&#8217;exécution de l&#8217;application. Mais on peut en revanche
fournir une autre valeur que <code>'en-US'</code> <em>avant</em> que l&#8217;application ne démarre. Ceci est possible, simplement
en fournissant une autre valeur pour le token <code>LOCALE_ID</code>, dans les <em>providers</em> de l&#8217;application.
Attention cependant&#160;: il faut également faire en sorte que les données nécessaires à la locale
(les traduction des mois, les règles de formattage des nombres, etc.) soient livrées avec l&#8217;application.
En effet, Angular ne contient par défaut que les données de <code>en-US</code>.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="javascript">import '@angular/common/locales/global/fr';</code></pre>
</div>
</div>
<div class="paragraph">
<p>Voici un exemple, qui montre l&#8217;effet que cela produit sur notre composant&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="javascript">bootstrapApplication(AppComponent, {
  providers: [
    { provide: LOCALE_ID, useValue: 'fr-FR' }
  ]
}).catch(err =&gt; console.error(err));

@Component({
  selector: 'ns-locale',
  template: `
    &lt;p&gt;The locale is {{ locale }}&lt;/p&gt;
    &lt;!-- will display 'fr-FR' --&gt;

    &lt;p&gt;{{ 1234.56 | number }}&lt;/p&gt;
    &lt;!-- will display '1 234,56' --&gt;
  `,
  imports: [DecimalPipe]
})
export class CustomLocaleComponent {
  readonly locale = inject(LOCALE_ID);
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Tous les <em>pipes</em> qui gèrent l&#8217;internationalisation peuvent aussi prendre comme dernier paramètre la locale.
Il est donc possible de la changer dynamiquement si besoin&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="javascript">@Component({
  selector: 'ns-locale',
  template: `
    &lt;p&gt;The locale is {{ locale }}&lt;/p&gt;
    &lt;!-- will display 'en-US' --&gt;

    &lt;p&gt;{{ 1234.56 | number: '1.0-3' : 'fr-FR' }}&lt;/p&gt;
    &lt;!-- will display '1 234,56' --&gt;
  `,
  imports: [DecimalPipe]
})
class DefaultLocaleOverriddenComponent {
  readonly locale = inject(LOCALE_ID);
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Si tu veux créer une application entièrement francophone (par exemple), c&#8217;est tout ce dont tu as
besoin. Mais bien souvent, les utilisateurs de ton application parlent diverses langues, et il faut donc aller plus loin,
et réellement internationaliser l&#8217;application.</p>
</div>
</div>
<div class="sect2">
<h3 id="_la_devise_par_défaut">26.2. La devise par défaut</h3>
<div class="paragraph">
<p>Le pipe <code>currency</code> permet de préciser la devise à utiliser
en fournissant un code ISO comme <code>USD</code>, <code>EUR</code>&#8230;&#8203;
Si tu n&#8217;en fournis pas, le pipe utilise <code>USD</code> par défaut.
C&#8217;est donc un peu pénible de devoir préciser la devise à chaque fois
si ton application n&#8217;affiche que des euros par exemple.</p>
</div>
<div class="paragraph">
<p>Angular&#160;9 a introduit la possibilité de configurer
la devise par défaut globalement en utilisant le token <code>DEFAULT_CURRENCY_CODE</code>.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="javascript">bootstrapApplication(AppComponent, {
  providers: [
    { provide: DEFAULT_CURRENCY_CODE, useValue: 'EUR' },
    { provide: LOCALE_ID, useValue: 'fr-FR' }
  ]
}).catch(err =&gt; console.error(err));</code></pre>
</div>
</div>
<div class="paragraph">
<p>Tu peux ensuite utiliser <code>currency</code> sans devoir préciser <code>EUR</code> dans un composant.
Et tu peux bien sûr récupérer la devise par défaut via l&#8217;injection de dépendances&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="javascript">@Component({
  selector: 'ns-currency',
  template: `
    &lt;p&gt;The currency is {{ currency }}&lt;/p&gt;
    &lt;!-- will display 'EUR' --&gt;

    &lt;p&gt;{{ 1234.56 | currency }}&lt;/p&gt;
    &lt;!-- will display '1 234,56 €' --&gt;
  `,
  imports: [CurrencyPipe]
})
class DefaultCurrencyOverriddenComponent {
  readonly currency = inject(DEFAULT_CURRENCY_CODE);
}</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_traduire_du_texte">26.3. Traduire du texte</h3>
<div class="paragraph">
<p>Si tu as utilisé AngularJS 1.x pour construire une application internationalisée, tu sais qu&#8217;AngularJS ne propose
pas de solution pour afficher du texte traduit dans la langue de préférence de l&#8217;utilisateur.</p>
</div>
<div class="paragraph">
<p>Ce manque est comblé pas des librairies externes au framework, dont l&#8217;une, très populaire, est
<a href="https://angular-translate.github.io/">angular-translate</a>. La stratégie qu&#8217;elle utilise est assez commune&#160;:
le template HTML contient des clés (comme par exemple <code>'home.welcome'</code>), qui sont traduites grâce à une directive
ou un filtre. Chaque clé identifie donc un message, et chaque message est traduit dans chacune des langues
que l&#8217;application supporte (par exemple&#160;: 'Welcome' et 'Bienvenue'). A l&#8217;exécution, la directive ou le filtre
utilise la langue préférée pour obtenir la traduction adéquate, et met à jour le DOM avec le message traduit.
Tu peux changer de langue préférée à l&#8217;exécution, et tous les messages de la page sont immédiatement traduits dans
cette nouvelle langue.</p>
</div>
<div class="paragraph">
<p>Avec Angular, l&#8217;internationalisation est à présent directement supportée,
sans avoir à recourir à des librairies externes,
bien que cette fonctionnalité ne soit vraiment utilisable que depuis la version 4.0,
et qu&#8217;elle ait été ré-écrite en Angular&#160;9.0.
Angular utilise la même stratégie basée sur des clés,
mais avec une différence importante&#160;:
le remplacement des clés par les messages traduits est effectué pendant la phase de compilation plutôt qu&#8217;à l&#8217;exécution.
Lorsque tu construis l&#8217;application,
Angular analyse les templates HTML de tous les composants,
et les compile en code JavaScript qui, essentiellement,
analyse les changements dans le modèle et modifie le DOM en conséquence.
C&#8217;est pendant cette phase de compilation
du HTML en JavaScript que la traduction est réalisée.
Cela a des conséquences importantes&#160;:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>on ne peut pas changer la locale (et donc le texte affiché dans l&#8217;application)
pendant l&#8217;exécution.
L&#8217;application entière doit être rechargée et redémarrée pour changer de langue&#160;;</p>
</li>
<li>
<p>une fois démarrée, l&#8217;application est plus rapide,
parce qu&#8217;elle ne doit pas traduire les clés encore et encore&#160;;</p>
</li>
<li>
<p>si tu utilises la compilation <em>AOT</em> (et tu devrais, au moins en production),
tu dois construire et servir autant de versions de l&#8217;application que de locales supportées.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>À partir de la version&#160;9.0,
l&#8217;équipe Angular a introduit un nouveau package <code>@angular/localize</code>.
Si tu utilises la CLI, tu as juste à lancer <code>ng add @angular/localize</code>
et elle se chargera de l&#8217;ajouter au bon endroit pour toi.</p>
</div>
<div class="paragraph">
<p>Ce nouveau package introduit une fonction globale appelée <code>$localize</code>,
qui est utilisée sous le capot pour la localisation,
et que l&#8217;on pourra utiliser dans le futur
pour traduire des messages dans notre code.</p>
</div>
</div>
<div class="sect2">
<h3 id="_processus_et_outillage">26.4. Processus et outillage</h3>
<div class="paragraph">
<p>Dans la suite de ce chapitre, nous supposerons que tu utilises Angular CLI pour construire ton application.
Les outils sont en fait utilisables sans Angular CLI.
Mais comme ils sont bien intégrés et simples à utiliser dans Angular CLI,
et que c&#8217;est l&#8217;outil recommandé pour construire ton application,
c&#8217;est ce que nous utiliserons.</p>
</div>
<div class="paragraph">
<p>Enfin, nous supposerons que tu es en fait un parfait anglophone qui a écrit son application en anglais et qui
désire la traduire en français, langue que tu ne maîtrises que de façon parcellaire.</p>
</div>
<div class="paragraph">
<p>Cela étant dit, comment procède-t-on. Tu devrais à présent savoir comment écrire des composants et leurs templates.
Va-t-il falloir tous les réécrire pour les internationaliser&#160;? Heureusement non. La procédure est la suivante&#160;:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>tu marques les parties des templates qui doivent être traduites en utilisant un attribut <code>i18n</code>&#160;;</p>
</li>
<li>
<p>tu exécutes une commande permettant d&#8217;extraire ces parties marquées vers un fichier, par exemple <code>messages.xlf</code>.
Deux formats de fichiers, des standards de l&#8217;industrie basés sur XML, sont supportés&#160;;</p>
</li>
<li>
<p>tu demandes à un traducteur compétent de fournir une version traduite de ce fichier, par exemple <code>messages.fr.xlf</code>&#160;;</p>
</li>
<li>
<p>tu construis l&#8217;application en fournissant la locale (<code>'fr'</code> par exemple) et ce fichier contenant les traductions françaises.
(<code>messages.fr.xlf</code>). Le compilateur Angular et la CLI remplacent les parties marquées via l&#8217;attribut i18n par les
traductions trouvées dans le fichier, et configurent l&#8217;application avec le <code>LOCALE_ID</code> fourni.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>Examinons ces différentes étapes en détail.</p>
</div>
<div class="sect3">
<h4 id="_marquer_le_texte_à_traduire_et_lextraire">26.4.1. Marquer le texte à traduire et l&#8217;extraire</h4>
<div class="paragraph">
<p>Commençons avec un template d&#8217;exemple&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="html">&lt;h1&gt;Welcome to Ponyracer&lt;/h1&gt;
&lt;p&gt;Welcome to Ponyracer {{ user.firstName }} {{ user.lastName }}!&lt;/p&gt;
&lt;img src="/img/pony.gif" alt="running pony" title="Ponies are cool, aren't they?" /&gt;
Let's start playing.</code></pre>
</div>
</div>
<div class="paragraph">
<p>Cinq morceaux de texte doivent être traduits dans ce template. Bien sûr, on pourrait considérer tout le
template comme un seul long bloc à traduire. Mais dans un exemple plus réaliste, cela exposerait beaucoup de code HTML
aux traducteurs. Et devoir retraduire tout à chaque fois que la structure du HTML change n&#8217;est vraiment pas
acceptable. Il faut donc traduire les 5 morceaux séparément.</p>
</div>
<div class="paragraph">
<p>L&#8217;un d&#8217;eux, le contenu de l&#8217;élément <code>h1</code>, est du texte purement statique. L&#8217;un d&#8217;eux est du texte contenant
deux expressions interpolées. Deux d&#8217;entre eux sont des attributs d&#8217;un élément HTML. Le dernier est du texte statique
qui n&#8217;est contenu dans aucun élément.</p>
</div>
<div class="paragraph">
<p>Voici comment les marquer. Commençons avec le plus simple, le premier&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="html">&lt;h1 i18n&gt;Welcome to Ponyracer&lt;/h1&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>A présent qu&#8217;on a ajouté l&#8217;attribut <code>i18n</code> sur l&#8217;élément,
utilisons la commande <code>extract-i18n</code> fournie par Angular CLI&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="bash">ng extract-i18n --output-path src/locale/</code></pre>
</div>
</div>
<div class="paragraph">
<p>Cela va générer un fichier <code>messages.xlf</code> dans le répertoire <code>src/locale</code>. Voici ce qu&#8217;il contient&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="xml">&lt;?xml version="1.0" encoding="UTF-8" ?&gt;
&lt;xliff version="1.2" xmlns="urn:oasis:names:tc:xliff:document:1.2"&gt;
  &lt;file source-language="en-US" datatype="plaintext" original="ng2.template"&gt;
    &lt;body&gt;
      &lt;trans-unit id="7627914200888412251" datatype="html"&gt;
        &lt;source&gt;Welcome to Ponyracer&lt;/source&gt;
        &lt;context-group purpose="location"&gt;
          &lt;context context-type="sourcefile"&gt;src/app/app.component.html&lt;/context&gt;
          &lt;context context-type="linenumber"&gt;2,3&lt;/context&gt;
        &lt;/context-group&gt;
      &lt;/trans-unit&gt;
    &lt;/body&gt;
  &lt;/file&gt;
&lt;/xliff&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>Comme tu peux le voir, cela génère une <code>trans-unit</code> contenant, comme valeur source, notre texte statique.
Le rôle du traducteur francophone est de fournir un fichier <code>messages.fr.xlf</code> qui ressemble à ça&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="xml">&lt;?xml version="1.0" encoding="UTF-8" ?&gt;
&lt;xliff version="1.2" xmlns="urn:oasis:names:tc:xliff:document:1.2"&gt;
  &lt;file source-language="en" datatype="plaintext" original="ng2.template" target-language="fr"&gt;
    &lt;body&gt;
      &lt;trans-unit id="7627914200888412251" datatype="html"&gt;
        &lt;source&gt;Welcome to Ponyracer&lt;/source&gt;
        &lt;target&gt;Bienvenue dans Ponyracer&lt;/target&gt;
      &lt;/trans-unit&gt;
    &lt;/body&gt;
  &lt;/file&gt;
&lt;/xliff&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>Cela est relativement simple, parce que le message source est facile à comprendre. Il n&#8217;y a pas besoin de beaucoup
d&#8217;informations contextuelles supplémentaires pour comprendre de quoi il s&#8217;agit, et comment traduire ce message.
Néanmoins, cette façon de faire a un gros inconvénient. Si tu changes le code source du template pour y ajouter
des sauts de lignes insignifiants par exemple, ou un point à la fin du titre, voici ce qui se produit lorsqu&#8217;on extrait
à nouveau les messages&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="html">&lt;h1 i18n&gt;
  Welcome to Ponyracer.
&lt;/h1&gt;</code></pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="xml">      &lt;trans-unit id="6888363845978110110" datatype="html"&gt;
        &lt;source&gt; Welcome to Ponyracer.
&lt;/source&gt;
        &lt;context-group purpose="location"&gt;
          &lt;context context-type="sourcefile"&gt;src/app/app.component.html&lt;/context&gt;
          &lt;context context-type="linenumber"&gt;6,8&lt;/context&gt;
        &lt;/context-group&gt;
      &lt;/trans-unit&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>Non seulement le nouveau message source a changé, reflétant la nouvelle valeur dans le template, ce qui est normal.
Mais l&#8217;identifiant du message a aussi changé. Cela rend la maintenance des traductions plus pénible et complexe
que nécessaire. Heureusement, il y a un meilleur moyen. Tu peux fournir l&#8217;identifiant unique du message de manière
explicite&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="html">&lt;h1 i18n="@@home.title"&gt;Welcome to Ponyracer&lt;/h1&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>qui produit&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="xml">&lt;trans-unit id="home.title" datatype="html"&gt;
  &lt;source&gt;Welcome to Ponyracer&lt;/source&gt;
  &lt;context-group purpose="location"&gt;
    &lt;context context-type="sourcefile"&gt;src/app/app.component.html&lt;/context&gt;
    &lt;context context-type="linenumber"&gt;10,11&lt;/context&gt;
  &lt;/context-group&gt;
&lt;/trans-unit&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>En fait, afin de fournir plus de contexte aux traducteurs, tu peux même aller plus loin et indiquer une signification
et une description en plus de l&#8217;identifiant du message&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="html">&lt;h1 i18n="welcome title|the title of the home page@@home.fullTitle"&gt;Welcome to Ponyracer&lt;/h1&gt;</code></pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="xml">&lt;trans-unit id="home.fullTitle" datatype="html"&gt;
  &lt;source&gt;Welcome to Ponyracer&lt;/source&gt;
  &lt;context-group purpose="location"&gt;
    &lt;context context-type="sourcefile"&gt;src/app/app.component.html&lt;/context&gt;
    &lt;context context-type="linenumber"&gt;13,15&lt;/context&gt;
  &lt;/context-group&gt;
  &lt;note priority="1" from="description"&gt;the title of the home page&lt;/note&gt;
  &lt;note priority="1" from="meaning"&gt;welcome title&lt;/note&gt;
&lt;/trans-unit&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>Passons à présent au second morceau de texte&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="html">&lt;p i18n="@@home.welcome"&gt;Welcome to Ponyracer {{ user().firstName }} {{ user().lastName }}!&lt;/p&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>Voici ce que l&#8217;extraction produit pour ce message&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="xml">&lt;trans-unit id="home.welcome" datatype="html"&gt;
  &lt;source&gt;Welcome to Ponyracer &lt;x id="INTERPOLATION" equiv-text="{{ user().firstName }}"/&gt; &lt;x id="INTERPOLATION_1" equiv-text="{{ user().lastName }}"/&gt;!&lt;/source&gt;
  &lt;context-group purpose="location"&gt;
    &lt;context context-type="sourcefile"&gt;src/app/app.component.html&lt;/context&gt;
    &lt;context context-type="linenumber"&gt;16,17&lt;/context&gt;
  &lt;/context-group&gt;
&lt;/trans-unit&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>Comme tu peux le voir, ce format a des caractéristiques intéressantes&#160;:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>le traducteur n&#8217;est pas confronté aux expressions interpolées. Il ne peut pas malencontreusement traduire le contenu
des expressions, qui doivent rester telles quelles, puisqu&#8217;elles sont clairement indiquées&#160;;</p>
</li>
<li>
<p>en revanche, si ce que ces deux expressions représentent est clair pour les développeurs, cela peut ne pas l&#8217;être pour les traducteurs. Dans ce cas, ce serait donc une
bonne idée d&#8217;expliquer cela dans la description du message&#160;;</p>
</li>
<li>
<p>si, dans certaines langues, le nom de famille doit venir avant le prénom, le traducteur est libre de réordonner
les deux interpolations&#160;;</p>
</li>
<li>
<p>si le développeur choisit de renommer l&#8217;attribut <code>user</code> du composant, ou les attributs <code>firstName</code> et <code>lastName</code>
de l&#8217;utilisateur, le message extrait reste identique (à part les indications des interpolations), et rien ne doit être re-traduit.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Passons maintenant aux deux attributs de l&#8217;élément <code>img</code>. La syntaxe pour traduire des attributs est la suivante&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="html">&lt;img
  src="/img/pony.gif"
  alt="running pony"
  i18n-alt="@@home.ponyImage.alt"
  title="Ponies are cool, aren't they?"
  i18n-title="@@home.ponyImage.title"
/&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>Cela génère les <code>trans-unit</code> suivantes&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="xml">&lt;trans-unit id="home.ponyImage.alt" datatype="html"&gt;
  &lt;source&gt;running pony&lt;/source&gt;
  &lt;context-group purpose="location"&gt;
    &lt;context context-type="sourcefile"&gt;src/app/app.component.html&lt;/context&gt;
    &lt;context context-type="linenumber"&gt;21,22&lt;/context&gt;
  &lt;/context-group&gt;
&lt;/trans-unit&gt;
&lt;trans-unit id="home.ponyImage.title" datatype="html"&gt;
  &lt;source&gt;Ponies are cool, aren&amp;apos;t they?&lt;/source&gt;
  &lt;context-group purpose="location"&gt;
    &lt;context context-type="sourcefile"&gt;src/app/app.component.html&lt;/context&gt;
    &lt;context context-type="linenumber"&gt;23,24&lt;/context&gt;
  &lt;/context-group&gt;
&lt;/trans-unit&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>Enfin, comment traduire le dernier morceau de texte&#160;? Il n&#8217;y a aucun élément qui puisse porter l&#8217;attribut
<code>i18n</code>. Une solution est possible&#160;: utiliser un élément <code>ng-container</code>, qui ne fera
pas partie du HTML généré par le template&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="html">&lt;ng-container i18n="@@home.startMessage"&gt;Let's start playing.&lt;/ng-container&gt;</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_traduire_construire_et_servir_lapplication">26.4.2. Traduire, construire et servir l&#8217;application</h4>
<div class="paragraph">
<p>Maintenant que le fichier <code>messages.xlf</code> est extrait et contient tous les messages à traduire,
quelqu&#8217;un doit s&#8217;en charger.</p>
</div>
<div class="admonitionblock caution">
<table>
<tr>
<td class="icon">
<i class="fa icon-caution" title="Attention"></i>
</td>
<td class="content">
Une erreur classique est de simplement remplacer le message source dans le fichier par sa traduction.
Cela ne fonctionnera pas. Les traductions doivent être saisies dans l&#8217;élément <code>&lt;target&gt;</code> de chaque élément <code>trans-unit</code>.
Le contenu de l&#8217;élément <code>&lt;source&gt;</code> doit être conservé tel quel&#160;: il fournit le message original qui doit être
traduit. Voici un exemple de message correctement traduit&#160;:
</td>
</tr>
</table>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="xml">&lt;trans-unit id="home.welcome" datatype="html"&gt;
  &lt;source&gt;Welcome to Ponyracer &lt;x id="INTERPOLATION" equiv-text="{{ user.firstName }}"/&gt; &lt;x id="INTERPOLATION_1" equiv-text="{{ user.lastName }}"/&gt;!&lt;/source&gt;
  &lt;target&gt;Bienvenue dans Ponyracer &lt;x id="INTERPOLATION" equiv-text="{{ user.firstName }}"/&gt; &lt;x id="INTERPOLATION_1" equiv-text="{{ user.lastName }}"/&gt;&amp;nbsp;!&lt;/target&gt;
&lt;/trans-unit&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>Pour exécuter ou construire l&#8217;application en français,
tu dois indiquer la locale, ainsi que l&#8217;emplacement du fichier
de messages à utiliser, à la commande <code>ng serve</code> ou <code>ng build</code>
en utilisant la propriété <code>i18n</code> du fichier <code>angular.json</code>&#160;:</p>
</div>
<div class="paragraph">
<p>Avant la version 9, nous devions passer de nombreuses options
aux commandes <code>ng serve</code> et <code>ng build</code> pour lancer ou construire
l&#8217;application en français.</p>
</div>
<div class="paragraph">
<p>Depuis la version 9, nous devons préciser les locales que nous voulons supporter,
avec leurs messages associés,
en utilisant la propriété <code>i18n</code> du fichier <code>angular.json</code>&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="javascript">"prefix": "ns",
"i18n": {
  "locales": {
    "fr": "src/locale/messages.fr.xlf"
  }
},</code></pre>
</div>
</div>
<div class="paragraph">
<p>Tu peux ajouter autant de locales que tu veux,
chacune liée à son fichier de traduction.</p>
</div>
<div class="paragraph">
<p>Tu peux ensuite lancer&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="bash">ng build --localize</code></pre>
</div>
</div>
<div class="paragraph">
<p>et la CLI construit l&#8217;application;
et génère autant de versions que de locales définies.
Dans notre cas, elle génère une version pour la locale par défaut <code>en-US</code>,
dans le répertoire <code>dist/i18n/en-US</code> (si le projet s&#8217;appelle <code>i18n</code>),
et une autre version pour la locale <code>fr</code> dans le dossier <code>dist/i18n/fr</code>.</p>
</div>
<div class="paragraph">
<p>Si tu veux lancer <code>ng serve</code>,
tu dois spécifier la locale à utiliser,
car on ne peut servir qu&#8217;une seule version.</p>
</div>
<div class="paragraph">
<p>Le plus simple est de définir une <code>configuration</code> de build
pour cette locale dans le fichier <code>angular.json</code>,
exactement comme la configuration <code>production</code>,
mais en beaucoup plus simple&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="javascript">"fr": {
  "localize": ["fr"]
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>et ajouter une configuration pour <code>serve</code>:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="javascript">"fr": {
  "buildTarget": "i18n:build:fr"
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>et ensuite lancer&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>ng serve --configuration=fr</pre>
</div>
</div>
<div class="paragraph">
<p>ou construire l&#8217;application pour une locale spécifique avec&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="bash">ng build --configuration=production,fr</code></pre>
</div>
</div>
<div class="paragraph">
<p>Le compilateur AOT invoqué par ces commandes va localiser tous les morceaux de texte marqués par l&#8217;attribut <code>i18n</code>
dans les templates, trouver les traductions correspondantes dans le fichier XLF, et transformer le texte des templates
en texte traduit. Ensuite, il va transformer comme d&#8217;habitude ces templates HTML traduits en code JavaScript, et
construire le <em>bundle</em> de l&#8217;application.</p>
</div>
<div class="paragraph">
<p>Si tu veux supporter l&#8217;anglais, le français et l&#8217;espagnol, par exemple,
il te faudra construire ton application une seule fois,
puis l&#8217;outil de localization générera trois versions (une pour chaque langue)
de l&#8217;application (c&#8217;est très rapide).
Ensuite, il faudra déployer ces trois applications sur ton serveur web de production. Tu devras aussi
décider quelle application est servie à quel utilisateur. Cela peut être fait côté serveur, en détectant
la locale préférée dans le header de la requête HTTP et en servant la page <code>index.html</code> adéquate. Si l&#8217;utilisateur est
authentifié, sa langue préférée peut aussi être stockée avec le reste de ses informations dans la base de données.
Cette détection peut aussi être réalisée côté client, en servant les trois applications sur trois URLs différentes
(<code>ponyracer.com</code>, <code>ponyracer.fr</code> et <code>ponyracer.es</code>,
ou bien <code>ponyracer.com/en</code>, <code>ponyracer.com/fr</code> et <code>ponyracer.com/es</code>), et en redirigeant de <code>ponyracer.com</code> vers
l&#8217;une des trois URLs en fonction de la langue configurée dans le navigateur.</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_traduire_les_messages_dans_le_code">26.5. Traduire les messages dans le code</h3>
<div class="paragraph">
<p>Parfois, le texte à traduire n&#8217;est pas dans les templates, mais dans le code TypeScript. Par exemple, les trois états
PENDING, RUNNING et FINISHED d&#8217;une course de poneys devraient être traduits d&#8217;une manière ou d&#8217;une autre.
Depuis Angular&#160;9.0, on peut utiliser <code>$localize</code> pour faire cela.
<code>$localize</code> est une fonction de tag qui peut être appliquée à une chaîne de caractères template
(revois le chapitre
<a href="#es2015">ECMAScript&#160;2015</a>
si tu veux te rafraîchir la mémoire).</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="javascript">status = $localize`PENDING`;</code></pre>
</div>
</div>
<div class="paragraph">
<p>Ensuite tu peux construire ton application avec la CLI,
et les appels à <code>$localize</code> sont remplacés par leurs traductions&#160;!</p>
</div>
<div class="paragraph">
<p>Tu peux aussi définir un ID avec la même syntaxe que dans les templates,
et avoir des parties dynamiques dans la chaîne de caractères&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="javascript">greetings = $localize`:@@home.greetings:Welcome ${this.user().firstName}!`;</code></pre>
</div>
</div>
<div class="paragraph">
<p><code>ng extract-i18n</code> supporte l&#8217;extraction des appels
à <code>$localize</code> dans le code depuis la CLI v10.1,
et génère&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="xml">&lt;trans-unit id="home.greetings" datatype="html"&gt;
  &lt;source&gt;Welcome &lt;x id="PH" equiv-text="this.user().firstName"/&gt;!&lt;/source&gt;
  &lt;context-group purpose="location"&gt;
    &lt;context context-type="sourcefile"&gt;src/app/app.component.ts&lt;/context&gt;
    &lt;context context-type="linenumber"&gt;17&lt;/context&gt;
  &lt;/context-group&gt;
&lt;/trans-unit&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>Tu peux ensuite le traduire comme d&#8217;habitude (avec <code>PH</code> le placeholder pour la partie dynamique)&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="xml">&lt;trans-unit id="home.greetings" datatype="html"&gt;
  &lt;source&gt;Welcome &lt;x id="PH" equiv-text="{{ this.user.firstName }}"/&gt;!&lt;/source&gt;
  &lt;target&gt;Bonjour &lt;x id="PH" equiv-text="{{ this.user.firstName }}"/&gt;&amp;nbsp;!&lt;/target&gt;
&lt;/trans-unit&gt;</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_pluralisation">26.6. Pluralisation</h3>
<div class="paragraph">
<p>Parfois, le message à afficher dépend du nombre d&#8217;éléments dans une collection, ou d&#8217;un nombre quelconque
stocké dans une propriété.</p>
</div>
<div class="paragraph">
<p>Par exemple, supposons que notre page d&#8217;accueil affiche le nombre de courses prévues pour la journée. On pourrait
simplement afficher <em>"Nombre de course(s) prévue(s)&#160;: 4"</em>. Mais la page serait plus accueillante si elle affichait
plutôt <em>"Aucune course n&#8217;est prévue"</em>, ou <em>"Seule une course est prévue"</em>, ou encore <em>"N courses sont prévues"</em>
dans les autres cas.</p>
</div>
<div class="paragraph">
<p>Angular, en fait, a une syntaxe spécifique pour faire cela. Elle est assez difficile à lire, sauf peut-être pour
les programmeurs LISP, mais elle fait le boulot et est relativement simple à comprendre à partir de l&#8217;exemple suivant.
Supposons que notre composant ait une propriété <code>racesPlanned</code>, contenant le nombre de courses prévues.
On peut l&#8217;afficher, en anglais, de la manière suivante&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="html">&lt;p&gt;
  Hello,
  {racesPlanned(), plural,
    =0 {no race is planned}
    =1 {only one race is planned}
    other {{{ racesPlanned() }} races are planned}

  }.
&lt;/p&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>Pour internationaliser un tel message, on utilise l&#8217;attribut <code>i18n</code>, comme d&#8217;habitude&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="html">&lt;p i18n="@@home.racesPlanned"&gt;
  Hello, {racesPlanned(), plural, =0 {no race is planned} =1 {only one race is planned} other
  {{{ racesPlanned() }} races are planned}}.
&lt;/p&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>L&#8217;extraction de ce message génère deux éléments <code>trans-unit</code>&#160;:
l&#8217;un pour le message lui-même, et l&#8217;autre pour l&#8217;expression contenue dans le message.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="xml">      &lt;trans-unit id="home.racesPlanned" datatype="html"&gt;
        &lt;source&gt; Hello, &lt;x id="ICU" equiv-text="{racesPlanned(), plural, =0 {no race is planned} =1 {only one race is planned} other
  {{{ racesPlanned() }} races are planned}}" xid="2482273160942454889"/&gt;.
&lt;/source&gt;
        &lt;context-group purpose="location"&gt;
          &lt;context context-type="sourcefile"&gt;src/app/app.component.html&lt;/context&gt;
          &lt;context context-type="linenumber"&gt;32,35&lt;/context&gt;
        &lt;/context-group&gt;
      &lt;/trans-unit&gt;
      &lt;trans-unit id="5232470321856793506" datatype="html"&gt;
        &lt;source&gt;{VAR_PLURAL, plural, =0 {no race is planned} =1 {only one race is planned} other {&lt;x id="INTERPOLATION"/&gt; races are planned}}&lt;/source&gt;
        &lt;context-group purpose="location"&gt;
          &lt;context context-type="sourcefile"&gt;src/app/app.component.html&lt;/context&gt;
          &lt;context context-type="linenumber"&gt;32,33&lt;/context&gt;
        &lt;/context-group&gt;
      &lt;/trans-unit&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>Malheureusement, la deuxième <code>trans-unit</code> a un identifiant auto-généré,
et la syntaxe de pluralisation doit être comprise et respectée par le traducteur.
Il est possible de traduire ces deux <code>trans-unit</code>, cependant, et la traduction fonctionne correctement&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="xml">      &lt;trans-unit id="home.racesPlanned" datatype="html"&gt;
        &lt;source&gt;
  Hello, &lt;x id="ICU" equiv-text="{racesPlanned, plural, =0 {...} =1 {...} other {...}}"/&gt;..
&lt;/source&gt;
        &lt;target&gt;Bonjour, &lt;x id="ICU" equiv-text="{racesPlanned, plural, =0 {...} =1 {...} other {...}}"/&gt;.&lt;/target&gt;
      &lt;/trans-unit&gt;
      &lt;trans-unit id="5232470321856793506" datatype="html"&gt;
        &lt;source&gt;{VAR_PLURAL, plural, =0 {no race is planned} =1 {only one race is planned} other {&lt;x id="INTERPOLATION" equiv-text="{{ racesPlanned }}"/&gt; races are planned} }&lt;/source&gt;
        &lt;target&gt;{VAR_PLURAL, plural, =0 {aucune course n'est planifiée} =1 {seule une course est planifiée} other {&lt;x id="INTERPOLATION" equiv-text="{{ racesPlanned }}"/&gt; courses sont planifiées} }&lt;/target&gt;
      &lt;/trans-unit&gt;</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_i18n_à_lexécution_avec_transloco">26.7. I18n à l&#8217;exécution avec Transloco</h3>
<div class="paragraph">
<p>Notre propre expérience en tant que développeurs et formateurs nous a montré que l&#8217;internationalisation à l&#8217;exécution
était souvent préférée au système d&#8217;internationalisation à la compilation fourni par Angular.</p>
</div>
<div class="paragraph">
<p>Il existe plusieurs bibliothèques permettant de faire cela.
La plus populaire semble être <a href="https://github.com/ngx-translate/core">ngx-translate</a>, mais c&#8217;est probablement parce que
c&#8217;est la première à avoir été disponible.
Elle fonctionne bien, mais est à présent en mode maintenance.</p>
</div>
<div class="paragraph">
<p>Il existe une alternative plus complète et plus moderne, qui est aussi très populaire&#160;: <a href="https://jsverse.github.io/transloco/">Transloco</a>.</p>
</div>
<div class="paragraph">
<p>Le principe général des deux bibliothèques est similaire&#160;:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>configurer la bibliothèque avec les langues supportées, une langue par défaut et un <em>loader</em>,
qui a pour responsabilité de télécharger dynamiquement les clés de traductions stockée dans un fichier JSON&#160;;</p>
</li>
<li>
<p>utiliser une directive, un <em>pipe</em> ou un service pour obtenir la traduction d&#8217;une clé donnée, depuis le template
ou depuis le code TypeScript.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Transloco est très bien documenté. Tu devrais sans problème pouvoir apprendre tout ce qu&#8217;il y a à savoir dessus
grâce à sa documentation. Tu peux aussi apprendre par la pratique en réalisant l&#8217;exercice <em>I18n</em> du Pack Pro.</p>
</div>
<div class="paragraph">
<p>Voici néanmoins l&#8217;essentiel, si tu veux juste voir à quoi ça ressemble concrètement.</p>
</div>
<div class="paragraph">
<p>D&#8217;abord, il faut définir un <em>loader</em>. Celui-ci utilise le client HTTP, mais il y a d&#8217;autres options&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="typescript">@Injectable({ providedIn: 'root' })
export class TranslocoHttpLoader implements TranslocoLoader {
  private readonly http = inject(HttpClient);
  getTranslation(lang: string) {
    return this.http.get&lt;Translation&gt;(`./i18n/${lang}.json`);
  }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Ensuite, il faut configurer la bibliothèque et ajouter les <em>providers</em> nécessaires à l&#8217;application&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="typescript">export const appConfig: ApplicationConfig = {
  providers: [
    provideHttpClient(),
    provideTransloco({
      config: {
        availableLangs: ['en', 'fr'],
        defaultLang: 'en',
        prodMode: !isDevMode()
      },
      loader: TranslocoHttpLoader
    })
  ]
};</code></pre>
</div>
</div>
<div class="paragraph">
<p>Et enfin, on peut l&#8217;utiliser pour traduire du texte dans le <em>template</em>&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="html">&lt;ng-container *transloco="let t"&gt;
  &lt;h1&gt;{{ t('home.title') }}&lt;/h1&gt;
  &lt;p&gt;{{ t('home.welcome-message') }}&lt;/p&gt;
&lt;/ng-container&gt;</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_bonnes_pratiques">26.8. Bonnes pratiques</h3>
<div class="paragraph">
<p>Ces bonnes pratiques, acquises par des années d&#8217;expérience de développement d&#8217;applications internationalisées,
ne sont pas nécessairement liées à Angular, mais à l&#8217;internationalisation en général.</p>
</div>
<div class="paragraph">
<p>Spécifie toujours un identifiant unique, de manière explicite, pour les messages. Si tu choisis un identifiant clair,
qui a du sens, il est souvent inutile de fournir une description pour le message, parce que l&#8217;identifiant est suffisant.
Préfixer les identifiants avec le nom du composant dans lequel ils sont utilisés (comme je l&#8217;ai fait dans tous les
exemples précédents avec le préfixe <code>home.</code> permet de savoir où ils sont utilisés, et de les retrouver rapidement
dans le code. Compter sur des identifiants auto-générés ne permet pas d&#8217;avoir des traductions différentes pour deux
messages identiques utilisés dans deux contextes différents. Faire la différence entre les messages d&#8217;une précédente
version de l&#8217;application et la version actuelle est aussi bien plus difficile.</p>
</div>
<div class="paragraph">
<p>Même si les traducteurs ne sont pas toujours des développeurs, stocke les fichiers de messages dans ton système de
gestion des sources (Git, etc.). Cela permet à chaque branche d&#8217;avoir ses propres modifications dans les fichiers de
messages, qui peuvent n&#8217;être intégrées dans la branche principale que lorsque la branche est prête. Cela rend aussi
la comparaison entre branches ou releases plus aisée.</p>
</div>
<div class="paragraph">
<p>La duplication n&#8217;est pas nécessairement une mauvaise chose. Tu pourrais penser que deux pages partageant un même
libellé "Enregistrer" ou "OK" devraient utiliser le même identifiant de message. Mais peut-être devront-ils être
renommés respectivement "OK, je vais le faire" et "OK, j&#8217;accepte". Ou peut-être ces termes assez vagues nécessitent-ils
d&#8217;être différenciés dans certaines langues étrangères. Il est d&#8217;autant plus important d&#8217;utiliser des identifiants
distincts lorsqu&#8217;un même mot est utilisé, mais avec des significations différentes. Par exemple, "Valider" peut
vouloir dire "vérifier la cohérence des données" mais aussi "accepter la proposition". Ce même mot serait
traduit en anglais par "Validate" dans le premier cas, et "Accept" dans le deuxième.</p>
</div>
<div class="paragraph">
<p>Ne confond pas <em>langue</em> et <em>pays</em>. N&#8217;utilise pas des drapeaux de pays pour représenter une langue. Certaines
langues sont parlées dans de nombreux pays (comme le français ou l&#8217;anglais), et certains pays utilisent plusieurs
langues (comme la Belgique, qui utilise le français, le néerlandais et l&#8217;allemand).</p>
</div>
<div class="paragraph">
<p>Évite d&#8217;utiliser la concaténation pour traduire des messages paramétrés. Par exemple, pour traduire <em>"Bonjour, je
m&#8217;appelle X et j&#8217;ai Y ans"</em>, n&#8217;utilise pas une première clé pour <em>"</em>"Bonjour, je m&#8217;appelle "<em>, une seconde clé pour
_" et j&#8217;ai "</em> et une troisième pour <em>" ans"</em>. Utilise une clé unique, contenant des expressions interpolées.</p>
</div>
<div class="paragraph">
<p>Tu devrais à présent être prêt à conquérir le monde avec ta splendide application multilingue.</p>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<i class="fa icon-tip" title="Practice"></i>
</td>
<td class="content">
<div class="paragraph">
<p>Essaye notre exercice
<a href="https://angular-exercises.ninja-squad.com/exercises/37/i18n">I18n</a> <span class="image"><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAIgAAACACAMAAADnN9ENAAACSVBMVEVMaXH7whr7whr7whr7whr7whr7whr7whr7whr7whr7whr7whp4o614o614o614o637whr7whp4o614o614o614o614o614o614o614o62EoKN4o614o637whqFXFKFXFKQnZm4kni0k3vA1Njr8fLd5+myytB/qLGFXFKFXFKcmY98oqp4o63V4uWFXFKFXFKoloWgmIx4o62Hpqu+nofCpI/b08yFXFKAoaaMnpzYzcSFXFKFXFKUnJaYm5O7mIDl5eOGrbaFXFKGk5Kfd2WSalyYcGClfmqhlIZ6lpx+hIWDaWOFXFKFXFJ/gICkl4nFqpeFXFKFXFKCamSDZV2EYFiDaWOCbmne2dTk7O77whqOZE6Ad3TIsJ6jwMflryWbb0h/gIDo6+rH2dz0vB58jZGIn6Cxgj17kZbOvK2FXFL7whq5iTqVt75/e3rPnC/eqSiMYk+FXFKjdkS4p6Ll6OjLtqbSwrXFubacu8PstSGynZiOsrqLZVzauj/013mrlI56mqLCtFrt69fY1dSApaTrvizz2oafgXqSb2aqxcuhrX/11GvO3uGQeHG5z9T20V7e3t7s7uX4y0P6xSjv5byYeHC+sKyli4TSzMrIzc28wcGwtLVHR0c8OztIR0c1NTWNkJEvLy+NioqTkJCHhISlqKnU2dpCQUGBhIRnZmZeYGBqbGyZnJ07Ozvf5ebLwsCmqapfYGFiYmLAw8Tw9fXs8vNqjZVBTE9PYmY4Pj9deH5mho5GU1Y9RUdhf4ZznKVKW140Njdz5u6AAAAAf3RSTlMAMIBQ7/+fEI/PYL8QcIBAIK+v/7+fz+8wUP/fYEAgEP//////////32D//yD//7///4//////UP///zDv///////P//////////+vj3Ag//+fQJ/////////fz///////////////////gHD///////+v//////////////9AWHP9fwAABxxJREFUeAHs1IVy5DAQBNBZ0DJ3mJUonGiPmZmZmZmZPv6ssb2oFFqHeYUq7LJ7mlatWhWVWDxBf4SkEHH6EwhPKk2/X0Z4sn9AknRSeJIx+u0SguXot8sLliG7QrFUKtOvUEkKVrUXpQZPT6EZrBdAX7FA0YsLX7ZCFv0w+gco0APWP0jRywpmrWwBGIJnuEBsAKERityoCDQrOzZOvjIm5KSJ0ktsBJhS0zOzAAYocikRCis7N0++IhaknFwEsERGCVCe5Vn+SE7GpK2yuk6+EtZIKdcCWBd0d/2GjZu8JABKFLmcaMjGOIjeHHZTGluA4eC91XtuU2oG6C+4GhOWHCXarvWOMTKGt0hjZ/hvgF3ec/cepfY6+SQVEQgqq7Xet5082H/g4MFDh4/g6LHj9RMnTwGnpeeMUlNAv8MxYSnSxtn5c+cvaHbxkmaXgTXSuKKuzgIuxuSaaJG/ru1uAJLdVOoW37S7MWG372iru9gifffUfWD43Lkxd2PCHtiTPMQj6dukrgIwf+7sdmdjwh5riyfmaNhTvpvL2nhGkXou2r3Q3YC10uC7eQm80uysszFhr3WnC8CaMAi39a52kSQmOrx5q9tdBmQzyIwfhJ1zNibsdkeSV9iyQpB30fa1OSb247mLRysE2eFyTDjJ+/aj2WkJwihaVcHsjf3wUak92z5J9rkjyLOz9bqeq58YczAm7I0OfVG+e59386Cpr3y+nZ65GRPxTQe+Kx9HMROvfviD1mnf+M9izaq5caQLw999qOpTsIZHJ1YW3MuMvt/9AUPLzCANymH0Tpg50TIz8/6ydTudmhNXv5Za1lY/14EnfU6/fbqdbCZpsCLFgBgP30sq4v8zk94qkT6xRz9V87TjDAgtN/Ef+NJ1qTw62wcPigwVRYVhqkL26rNCBw/ao2+Ju1J5dDgjo9xjjMaFZIIYipJzVgDeOrqn8cj9oieNx2F5r3uHeVwlmlCtqmFySkBueumlt3pEmbvSeDiS6ZlrDUIUiAqzpGO2KOJ4K7WHS3N989Ji4eoiEflCMk56LooY7j+W0sPLU4WhxTn+Nw8TYCLG475Ufao8GMGSClXEsqjJXSk9HJcOslLJMuxBqyKOnpseNSnPjVqPfqnRHxAmEAm4/6XEKo3tlf1CVays+KtUZm19jQAiET1Ja1TxeIz0bGxube9sbpiLcN5KtCht0uNV0rMbRe++934UfWAuwrk/wVjbJD3CU6Tlwyj66L333oui6MMU+5cT69GlAkTPx2WFT977JIqiXdLQn4kI27hPE+DTaJ9PtSmvxpUEQok2TI7iRT6jGksy7BuI4BfdS4SQpVF8Tgpd+F6h4SWxz1IKkWbpUThFkA8jxRdfkg4lUAyUkuQrc5EWR5KnGnygRL4mQFCpjl9WEorVcVORxg6WqIj1b8oa335HmFl/vHhFJvG+iG8q0sobBPP9d9//QAjNeBJoa2PaIAaAs3iCVs1EOnmDZCjiG4o0HuIJkp1IMTAUuZUdddmw1xrLZCbS5UhyecqOK+pOiETwzpV4jz1NGTEhPeDghqNdIV0mM2qR4kU8HeDCcEKX6mZ23A94kaqAhakinKTsCIpABBaGc+kUZcZyMpEWR0uYpwxAoxuMMg1eFiZ8TuHozxgLJpprnYMJM+gT8GgBDn9EiTJj+KAJ7FTAZMaHIBY55GAyPgZ9oRjXiBx2YjDv16en4x5yqCgEXhDAY2SIi+upon5Frg1eEIBHZpTYKoIp9qLMfM0LRJa1ORU6ZeJmNpn5IEN+/CmKfna0TFNyJj12EUAzm1/JfLB3f4nK/FpnlJwqORVcAvjsAwV9uv8WSX6qbwO7BadCgRArUuQrqiHyYyT5vR6RydBRuIQoqsJIQGn+kCJ/phY5pVZDEtaM1n5SgGb96+9//uAeHLb4udxkXpNgj3mJdlk/8yCzPOMip3Ke6oFXS7nJyVOqItOXvKSbbK8uChxoEOIaHO/V0CiI/VXiIjjRsEj3Yw4g3gOgu3rHwDTaWg9l5EGaZ9UYCtc0bpQTbkvz/4GN51Jy4u8SgI7mRr7vu5qbq7/xsW4yAL1ommgoGh1GWEIaAPDGm1gDrGWBTMEXLMihw/gpI/1siz/AwxqQjjoGOfSOB2gFGuyVSXEqvQinTa/RgiWqQ2g6AxFg0tYJDTS5XKhLBJt0yPSKpSl9u9b4oaz1DiX8D/PG9PeOWj+1+ZBajK7/QXCUeKfMRSA3trS0gM6IjxLXTCRjWD1DqyI8SvI2RXiUPGZThEeJd8qmCI8S16YIj5LQjohmwsvbFOFRUrIpwqPEsyrCo8S1KcKj5FULIvrbYrdNER4lJZsiPEo8OyKaKHFtivAouWRThEeJ021ThEdJzqYIj5KCHRFNlDxtU4RHySWbIo0Oo9uKiCZKcjZFeJQU7IhoouTphCL/Alq7hNcCRv2nAAAAAElFTkSuQmCC" alt="Pro" width="18"></span>
pour apprendre à configurer et utiliser Transloco, le LOCALE_ID, et date-fns pour internationaliser tes applications.</p>
</div>
</td>
</tr>
</table>
</div>
<div style="page-break-after: always;"></div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="performances">27. Performances</h2>
<div class="sectionbody">
<div class="admonitionblock warning">
<table>
<tr>
<td class="icon">
<i class="fa icon-warning" title="Attention"></i>
</td>
<td class="content">
Attention à ne pas optimiser prématurément.
Il faut toujours mesurer avant et après.
Fais attention également aux benchmarks que l&#8217;on trouve sur les internets&#160;:
il est assez facile de leur faire dire ce que l&#8217;on veut.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Le terme performance peut vouloir dire beaucoup de choses&#160;:
vitesse, utilisation du CPU (et donc consommation de la batterie), pression sur la mémoire&#8230;&#8203;
Tout n&#8217;est pas important pour tout le monde&#160;:
on peut avoir des besoins différents selon que l&#8217;on développe un site mobile,
une plate-forme e-commerce, ou une application de gestion classique.</p>
</div>
<div class="paragraph">
<p>Les performances peuvent être découpées en plusieurs catégories,
qui, une fois de plus, peuvent ne pas être aussi importantes les unes que les autres pour toi&#160;:
premier chargement, rechargement, et performances durant la vie de l&#8217;application,
ce que l&#8217;on appelle le <em>runtime</em>.</p>
</div>
<div class="paragraph">
<p>Le premier chargement se produit lorsqu&#8217;un utilisateur charge l&#8217;application pour la première fois.
Le rechargement se produit quand il ou elle revient consulter l&#8217;application.
Les performances au <em>runtime</em> concernent quant à elles ce qui se passe quand l&#8217;application est utilisée.
Certains des conseils suivants sont très génériques,
et pourraient être appliqués à n&#8217;importe quel framework.
Nous en parlons quand même parce que l&#8217;on pense que c&#8217;est intéressant et important à savoir.
Et aussi parce que, lorsque l&#8217;on parle de performances,
le framework est parfois le goulot d&#8217;étranglement,
mais très (très) souvent, ce n&#8217;est pas le cas.</p>
</div>
<div class="sect2">
<h3 id="_premier_chargement_bundling_compression_lazy_loading_rendu_côté_serveur">27.1. Premier chargement (<em>bundling</em>, compression, <em>lazy-loading</em>, rendu côté serveur&#8230;&#8203;)</h3>
<div class="paragraph">
<p>Quand tu charges une application web moderne dans ton navigateur,
un certain nombre de choses se passent.
Premièrement, le fichier <code>index.html</code> est chargé et interprété par le navigateur.
Puis les scripts JS et les autres ressources référencées sont téléchargés.
Quand une des ressources demandées est reçue,
le navigateur l&#8217;analyse,
et l&#8217;exécute si c&#8217;est un fichier JS.</p>
</div>
<div class="sect3">
<h4 id="_taille_des_ressources">27.1.1. Taille des ressources</h4>
<div class="paragraph">
<p>La première astuce est relativement évidente&#160;:
fais attention à la taille des ressources chargées&#160;!</p>
</div>
<div class="paragraph">
<p>La phase de chargement des ressources dépend du nombre de ressources que tu veux charger.
Beaucoup de ressources veut dire que ce sera long.
Des ressources volumineuses également.
Particulièrement si le réseau n&#8217;est pas très bon,
ce qui arrive plus souvent que tu ne le penses&#160;:
tu testes peut-être l&#8217;application sur une bonne connection fibre,
mais certains utilisateurs sont peut-être au milieu de nulle part,
contraints d&#8217;utiliser une 3G lente.
Voici ce que tu peux faire pour les aider.</p>
</div>
</div>
<div class="sect3">
<h4 id="_faire_un_beau_paquet_le_bundle">27.1.2. Faire un beau paquet&#160;: le <em>bundle</em></h4>
<div class="paragraph">
<p>Quand on écrit une application Angular,
on a des imports un peu partout,
et notre code est réparti dans des dizaines, centaines, voire milliers de fichiers.
Mais on ne veut pas que nos utilisateurs chargent des milliers de fichiers&#160;!
Donc avant de livrer notre application,
nous allons faire ce que l&#8217;on appelle un "bundle"&#160;:
un seul fichier contenant tous les fichiers JavaScript.</p>
</div>
<div class="paragraph">
<p>C&#8217;est le travail de <a href="https://esbuild.github.io/">esbuild</a> de prendre tous nos fichiers JavaScript
(et CSS, et les fichiers de template HTML) et de construire ces <em>bundles</em>.
Ce n&#8217;est pas un outil simple à maîtriser pour être honnête,
mais Angular CLI fait un assez bon travail pour cacher sa complexité.</p>
</div>
</div>
<div class="sect3">
<h4 id="_tree_shaking">27.1.3. <em>Tree-shaking</em></h4>
<div class="paragraph">
<p>esbuild (et les autres <em>bundlers</em> comme Webpack) commence par le point d&#8217;entrée de ton application
(le fichier <code>main.ts</code> que la CLI a généré pour toi, et que tu n&#8217;as probablement jamais touché),
et résout ensuite le graphe des imports, puis produit le <em>bundle</em>.
C&#8217;est assez cool parce que le <em>bundle</em> ne contient ainsi que les fichiers
de ta base de code et des bibliothèques tierces que tu as importés.
Le reste n&#8217;est pas embarqué.
Donc même si tu as des dépendances dans ton <code>package.json</code> que tu n&#8217;utilises plus
(et donc que tu n&#8217;importes plus),
elles ne seront pas dans le <em>bundle</em> final.</p>
</div>
<div class="paragraph">
<p>Webpack est même un petit peu plus malin que ça.
Si tu as un fichier <code>models</code> qui exporte deux classes,
disons <code>PonyModel</code> et <code>RaceModel</code>,
et que tu n&#8217;importes que <code>PonyModel</code> dans le reste de l&#8217;application,
mais jamais <code>RaceModel</code>, alors esbuild mettra seulement <code>PonyModel</code> dans le <em>bundle</em> final,
et pas <code>RaceModel</code>.
Ce procédé est appelé <strong>tree-shaking</strong>.
Et tous les frameworks et bibliothèques dans l&#8217;éco-système font de leur mieux
pour être "tree-shakable".
En théorie, cela veut dire que ton <em>bundle</em> final ne contient que ce qui est réellement nécessaire.
En pratique, les <em>bundlers</em> sont sensiblement plus conservateurs,
et ne sont pas capables de comprendre deux ou trois choses à l&#8217;heure actuelle.
Par exemple, si tu as une classe <code>Pony</code> avec deux méthodes <code>eat</code> et <code>run</code>,
mais que tu n&#8217;utilise que <code>run</code>, le code de la méthode <code>eat</code> sera quand même dans le <em>bundle</em> final.
Donc ce n&#8217;est pas parfait, mais cela fait déjà un bon boulot.</p>
</div>
<div class="paragraph">
<p>Pour éviter les <em>bundles</em> trop volumineux, méfie-toi des composants et librairies externes
que tu prévois d&#8217;utiliser, et de leurs dépendances transitives.
Quel sont leurs poids additionnels&#160;?
Sont-ils vraiment utiles&#160;?
N&#8217;y a-t-il pas un moyen natif de faire la même chose, ou n&#8217;est-il pas possible
de créer le composant par toi-même&#160;?</p>
</div>
</div>
<div class="sect3">
<h4 id="_minification_et_élimination_de_code_mort">27.1.4. Minification et élimination de code mort</h4>
<div class="paragraph">
<p>Quand le <em>bundle</em> est construit,
le code est généralement minifié et le code mort est éliminé.
Cela veut dire que toutes les variables, noms de méthodes, noms de classes&#8230;&#8203;
sont renommés pour n&#8217;utiliser qu&#8217;un ou deux caractères à travers toute la base de code.
C&#8217;est un peu effrayant au premier abord et laisse penser que cela pourrait casser des choses,
mais les outils de minification font un bon travail.</p>
</div>
</div>
<div class="sect3">
<h4 id="_autres_types_de_ressources">27.1.5. Autres types de ressources</h4>
<div class="paragraph">
<p>Alors que les sections précédentes concernent spécifiquement le JavaScript,
une application contient aussi souvent d&#8217;autres types de ressources, comme des styles, des images, des polices de caractères&#8230;&#8203;
Tu devrais avoir le même souci d&#8217;efficacité à leurs propos,
et faire de ton mieux pour les garder à une taille raisonnable.
Appliquer toutes sortes de techniques dingues pour optimiser la taille des <em>bundles</em> JS,
mais charger des images de plusieurs Mo serait contre-productif sur le temps de chargement et la bande passante&#160;!
Comme ce n&#8217;est pas réellement le sujet de cet ebook,
je ne vais pas creuser ce sujet,
mais cette ressource en ligne de Addy Osmani à propos de l&#8217;optimisation des images est vraiment excellente&#160;:
<a href="https://web.dev/learn/images/">Essential Image Optimization</a>.</p>
</div>
<div class="paragraph">
<p>Angular fournit une directive <code>NgOptimizedImage</code> qui force un certain nombre de ces bonnes pratiques.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="html">&lt;img [ngSrc]="imageUrl" alt="Pony" width="100" height="100" /&gt;</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_compression">27.1.6. Compression</h4>
<div class="paragraph">
<p>Tous les navigateurs modernes supportent la compression des ressources,
et indiquent au serveur, via un header de la requête HTTP,
que le serveur peut compresser la ressource demandée avant de l&#8217;envoyer.
Cela veut dire que tu peux servir une version compressée à tes utilisateurs,
et le navigateur se chargera de la décompresser avant de l&#8217;interpréter.
C&#8217;est vraiment obligatoire car cela sauve une tonne de bande passante et de temps de chargement.</p>
</div>
<div class="paragraph">
<p>Tous les serveurs du marché ont une option qui permet d&#8217;activer la compression des ressources
ou mêmes des réponses HTTP dynamiques.
Généralement le premier utilisateur qui demandera la ressource payera le coût de la compression à la volée,
et ensuite les suivants recevront la ressource compressée directement.</p>
</div>
<div class="paragraph">
<p>L&#8217;algorithme de compression le plus courant est GZIP,
mais d&#8217;autres comme <a href="https://github.com/google/brotli">Brotli</a> sont également populaires.</p>
</div>
</div>
<div class="sect3">
<h4 id="_chargement_fainéant_le_lazy_loading">27.1.7. Chargement fainéant&#160;: le <em>lazy-loading</em></h4>
<div class="paragraph">
<p>Parfois, en dépit de nos efforts pour garder le <em>bundle</em> JS le plus petit possible,
on finit avec un gros fichier parce que notre application contient plusieurs dizaines de composants,
et utilise plusieurs bibliothèques tierces.
Et non seulement ce gros <em>bundle</em> va augmenter le temps nécessaire pour télécharger ce JavaScript,
mais il va aussi augmenter le temps nécessaire à l&#8217;analyse du code JavaScript qu&#8217;il contient.</p>
</div>
<div class="paragraph">
<p>La solution à ce problème est d&#8217;utiliser un chargement différé ou <em>lazy-loading</em>.
Cela veut dire que plutôt que d&#8217;avoir un seul gros <em>bundle</em>,
tu découpes ton application en plusieurs parties et demande au <em>bundler</em> de construire plusieurs <em>bundles</em>.</p>
</div>
<div class="paragraph">
<p>La bonne nouvelle est qu&#8217;Angular (son routeur en particulier)
rend cette tâche facile à accomplir.
Tu peux lire le
<a href="#router">chapitre sur le routeur</a>
pour en apprendre plus à ce sujet.
Les templates peuvent aussi utiliser l&#8217;instruction <code>@defer</code> pour charger
un composant et ses dépendances seulement quand c&#8217;est nécessaire.
Lis le
<a href="#router">chapitre sur defer</a>
pour tout savoir là-dessus.</p>
</div>
<div class="paragraph">
<p>Le <em>lazy-loading</em> peut améliorer radicalement le temps de chargement&#160;:
tu peux rendre le premier bundle chargé très petit,
avec seulement le code nécessaire pour afficher la page d&#8217;accueil,
et laisser Angular charger des <em>bundles</em> supplémentaires à la demande,
quand ton utilisateur navigue vers une autre partie de l&#8217;application.
Tu peux aussi utiliser des stratégies de pré-chargement pour indiquer à Angular de démarrer le chargement des autres <em>bundles</em>
dès qu&#8217;il est inactif.</p>
</div>
</div>
<div class="sect3">
<h4 id="_rendu_côté_serveur">27.1.8. Rendu côté serveur</h4>
<div class="paragraph">
<p>J&#8217;aimerais commencer par préciser que cette technique n&#8217;est sans doute destinée qu&#8217;à 0.0001% d&#8217;entre vous.
Elle peut être utile pour des sites web publics, mais ne l&#8217;est pas vraiment pour des applications,
encore moins pour des applications intranet.
Le rendu côté serveur (<em>server side rendering</em> ou <em>SSR</em>) est une technique qui consiste
à générer le contenu des pages de l&#8217;application sur le serveur avant de les envoyer aux utilisateurs.
Avec cette technique, quand une utilisatrice demande <code>/dashboard</code>,
elle recevra une version pré-générée du tableau de bord,
plutôt que de recevoir la page <code>index.html</code> presque vide.</p>
</div>
<div class="paragraph">
<p>Cela peut donner de grandes améliorations dans les temps de démarrage perçus.
Angular CLI offre une option <code>--ssr</code> pour la commande <code>ng new</code>
qui permet de générer un projet pré-configuré pour le <em>server side rendering</em>.
Angular peut pré-générer les pages dans un serveur NodeJS et les servir à tes utilisateurs.
La page va alors s&#8217;afficher très vite et, une fois qu&#8217;Angular aura démarré dans le navigateur,
il procédera à "l&#8217;hydratation" de la page puis fera tourner l&#8217;application comme d&#8217;habitude.
L&#8217;hydratation consiste à prendre le contrôle du DOM&#160;: ajouter les gestionnaires
d&#8217;événement, démarrer la détection des changements, et parfois ajouter certaines parties qui
ne peuvent l&#8217;être que côté client.</p>
</div>
<div class="paragraph">
<p>Le SSR aussi un gros avantage si tu veux que ton site soit découvrable
par les moteurs de recherche et les réseaux sociaux qui n&#8217;exécutent pas le JavaScript,
puisque tu peux leur servir une page pré-rendue, plutôt qu&#8217;une page blanche.</p>
</div>
<div class="paragraph">
<p>La mauvaise nouvelle est que ce n&#8217;est pas aussi simple que d&#8217;ajouter une simple option lors de la génération du projet.
Ton application devra suivre les bonnes pratiques (pas de manipulation directe du DOM par exemple,
car le serveur n&#8217;a pas de vrai DOM à manipuler).
Il faudra ensuite mettre en place le serveur et réfléchir à la stratégie à adopter.
Veux-tu pré-rendre toutes les pages ou seulement quelques-unes&#160;?
Veux-tu pré-rendre toute la page, avec les données déjà récupérées et les vérifications de sécurité nécessaires,
ou juste des parties critiques de la page&#160;?
Veux-tu pré-rendre les pages au build, ou les pré-rendre à la demande et les mettre en cache&#160;?
Veux-tu faire cela pour tous les profils d&#8217;utilisateur et toutes les langues supportées ou juste pour certaines combinaisons&#160;?
Toutes ces questions dépendent du type d&#8217;application que tu construis,
et l&#8217;effort peut beaucoup varier pour atteindre ces objectifs.</p>
</div>
<div class="paragraph">
<p>Donc, encore une fois, je te conseille de te pencher sur cette technique
uniquement si c&#8217;est critique pour ton application,
et non pas seulement pour la hype&#8230;&#8203;</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_rechargement_cache_service_worker">27.2. Rechargement (cache, <em>service worker</em>)</h3>
<div class="paragraph">
<p>Une fois que les utilisateurs ont ouvert l&#8217;application une première fois,
il est possible d&#8217;accélérer les chargements suivants.</p>
</div>
<div class="sect3">
<h4 id="_cache">27.2.1. Cache</h4>
<div class="paragraph">
<p>Tu devrais toujours mettre en cache les ressources statiques de ton application (images, styles, <em>bundles</em> JS&#8230;&#8203;).
Tu peux facilement le faire en configurant ton serveur et en utilisant les headers HTTP <code>Cache-Control</code> et <code>ETag</code>.
Tous les serveurs du marché permettent de faire cela,
ou tu peux aussi utiliser un CDN.
Si tu actives le cache, la prochaine fois que tes utilisateurs chargeront l&#8217;application,
leur navigateur n&#8217;aura même pas à faire de requête HTTP pour récupérer ces ressources car il les aura déjà en cache&#160;.</p>
</div>
<div class="paragraph">
<p>Mais un cache est toujours un peu traître&#160;:
tu peux avoir besoin de dire au navigateur
"Hé&#160;! J&#8217;ai déployé une nouvelle version en production, merci de récupérer les nouvelles ressources&#160;!".</p>
</div>
<div class="paragraph">
<p>La façon la plus simple de faire ceci est d&#8217;avoir un nom différent pour la ressource mise à jour.
Cela veut dire qu&#8217;au lieu de déployer une ressource <code>main.js</code>, tu déploies <code>main.xxxx.js</code>
où <code>xxxx</code> est un identifiant unique.
Cette technique est appelée du <em>cache busting</em>, ce qui pourrait se traduire approximativement par "faire péter le cache".
Et, encore une fois, la CLI est là pour toi&#160;: en mode production,
elle va automatiquement nommer les ressources avec un <em>hash</em> unique,
calculé grâce au contenu du fichier.
Elle met également automatiquement à jour les sources des scripts dans <code>index.html</code> pour refléter ces noms uniques,
les sources des polices de caractères, les sources des fichiers de style, etc.</p>
</div>
<div class="paragraph">
<p>Si tu utilises la CLI, tu peux donc déployer en toute sécurité une nouvelle version et tout mettre en cache,
à l&#8217;exception du <code>index.html</code> (puisqu&#8217;il contiendra les liens vers les nouvelles ressources déployées)&#160;!</p>
</div>
</div>
<div class="sect3">
<h4 id="_service_worker">27.2.2. Service Worker</h4>
<div class="paragraph">
<p>Si tu veux aller un cran plus loin,
tu peux utiliser les <em>service workers</em>.</p>
</div>
<div class="paragraph">
<p>Les <em>Service Workers</em> sont une API supportée par la plupart des navigateurs modernes
et, pour simplifier, ils se comportent comme un proxy dans le navigateur.
Tu peux enregistrer un <em>service worker</em> dans ton application
et toutes les requêtes GET passeront par lui,
te permettant de décider si tu veux vraiment charger la ressource demandée,
ou si tu veux la servir depuis un cache.
Tu peux alors tout mettre en cache, même le <code>index.html</code>,
ce qui garantit un temps de démarrage extrêmement rapide (pas de requête au serveur).</p>
</div>
<div class="paragraph">
<p>Tu te demandes peut-être comment une nouvelle version peut être déployée si tout est en cache,
mais tout est prévu&#160;: le <em>service worker</em> va servir la ressource depuis le cache
puis ira vérifier si une nouvelle version est disponible.
Il peut alors forcer un rafraîchissement, ou demander à l&#8217;utilisateur s&#8217;il veut la nouvelle version tout de suite
ou plus tard.</p>
</div>
<div class="paragraph">
<p>Cela permet même de fonctionner en mode déconnecté, puisque tout est en cache&#160;!</p>
</div>
<div class="paragraph">
<p>Angular propose un package dédié appelé <code>@angular/service-worker</code>,
qui est relativement simple à mettre en œuvre, et qui te permet
de transformer ton application Angular en <em>Progressive Web App</em> (<em>PWA</em>).</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_profilage">27.3. Profilage</h3>
<div class="paragraph">
<p>Maintenant que nous avons évoqué le premier chargement et les rechargements
de l&#8217;application, nous pouvons parler des performances à l&#8217;exécution.
Si tu détectes un problème de performances, avant d&#8217;appliquer quelque
changement que ce soit, l&#8217;idéal est d&#8217;avoir des chiffres, et donc de profiler
l&#8217;application pour mesurer ses performances.</p>
</div>
<div class="paragraph">
<p>Les navigateurs modernes viennent avec des outils de développement
sophistiqués. Chrome, en particulier, permet de faire un
"enregistrement" de l&#8217;application, et de fournir une analyse assez détaillée
de son comportement, de la hiérarchie des appels de fonctions,
du temps passé dans chacune d&#8217;elles, etc.
Il permet en outre de simuler un environnement spécifique, comme par exemple
un processeur lent, ou un réseau médiocre.</p>
</div>
<div class="paragraph">
<p>En plus des outils fournis par le navigateur, tu peux y installer
l&#8217;extension officielle <em>Angular DevTools</em>.
Elle permet elle aussi de faire du profilage pour, par exemple,
analyser la détection de changement.</p>
</div>
<div class="paragraph">
<p>Mais l&#8217;outillage ne se limite pas au navigateur. Angular lui-même vient avec un outil
méconnu mais précieux&#160;: <code>ng.profiler</code>.
Cela peut s&#8217;avérer utile pour mesurer le temps passé par la détection
de changements dans la page courante.
Profiler la détection de changements est important quand l&#8217;application s&#8217;appuie
sur le mécanisme "brutal" qui consiste à évaluer toutes les expressions de tous
les composants de l&#8217;arbre. On peut espérer que, lorsque tous les composants s&#8217;appuieront
sur les signaux pour signaler un changement et que ZoneJS ne sera plus utilisé, le temps
pris par la détection de changements ne sera plus un problème.</p>
</div>
<div class="paragraph">
<p>Avant d&#8217;en arriver là tu peux utiliser les outils fournis par le navigateur, et le <em>profiler</em> fourni
par Angular. Cela permet de savoir ce qu&#8217;il faut optimiser au lieu de se lancer à l&#8217;aveugle.
Et une fois l&#8217;optimisation appliquée, cela permet d&#8217;avoir une idée précise de son efficacité.</p>
</div>
<div class="paragraph">
<p>Dans le fichier <code>main.ts</code>,
remplace le code qui démarre l&#8217;application par le code suivant&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="html">bootstrapApplication(AppComponent, appConfig)
  .then(applicationRef =&gt; {
    const componentRef = applicationRef.components[0];
    // allows to run `ng.profiler.timeChangeDetection();`
    enableDebugTools(componentRef);
  })
  .catch(err =&gt; console.log(err));</code></pre>
</div>
</div>
<div class="paragraph">
<p>Ensuite, navigue vers la page que tu désires profiler,
et exécute la ligne de code suivante dans la console du navigateur&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="text">&gt; ng.profiler.timeChangeDetection()
ran 489 change detection cycles
1.02 ms per check</code></pre>
</div>
</div>
<div class="paragraph">
<p>L&#8217;équipe Angular recommande un temps par cycle en dessous de 3ms,
pour laisser assez de temps à la logique applicative,
à la mise à jour de l&#8217;interface et au rendu du navigateur
de s&#8217;exécuter dans une fenêtre de 16ms (en supposant que l&#8217;on vise 60FPS).</p>
</div>
<div class="paragraph">
<p>Lorsque tu optimises ton code, en utilisant les techniques que nous
allons expliquer dans les pages qui suivent, utiliser ces outils
de profilage en mesurant avant et après l&#8217;optimisation permet de voir
si elle est vraiment utile.</p>
</div>
<div class="paragraph">
<p>Découvrons ces différentes astuces&#160;!</p>
</div>
</div>
<div class="sect2">
<h3 id="_performances_à_lexécution">27.4. Performances à l&#8217;exécution</h3>
<div class="paragraph">
<p>La magie d&#8217;Angular réside dans son mécanisme de détection de changements&#160;:
le framework détecte les changements de l&#8217;état de l&#8217;application et modifie le DOM en conséquence.
C&#8217;est le principal travail d&#8217;Angular, et donc, en règle générale, le meilleur moyen
de rendre l&#8217;application performante est de limiter le nombre et la taille des détections
de changements et la quantité de modifications à apporter au DOM (créations, modifications, suppressions).</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="paragraph">
<p>Lis le
<a href="#zones">chapitre sur ZoneJS</a>
pour savoir comment fonctionne la détection de changements d&#8217;Angular.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Pour être honnête, la plupart des applications Angular n&#8217;auront aucun problème de
performance, sans avoir à appliquer une quelconque optimisation.</p>
</div>
<div class="paragraph">
<p>Malheureusement, certains d&#8217;entre nous vont devoir recréer Excel dans le navigateur
pour leur entreprise, ou ne vont pas échapper à un arbre devant absolument afficher
10&#160;000 clients, ou vont être confrontés à une quelconque autre demande déraisonnable
pour une application web.
C&#8217;est là que, quel que soit le framework utilisé, les choses deviennent plus compliquées.
Ces fonctionnalités nécessitent un nombre énorme d&#8217;éléments dans le DOM, et de composants
Angular dans l&#8217;arbre de composants.
Les trucs et astuces qui suivent peuvent être efficaces dans ce genre de situation.</p>
</div>
</div>
<div class="sect2">
<h3 id="_mode_production">27.5. Mode production</h3>
<div class="paragraph">
<p>Pendant le développement (quand tu utilises <code>ng serve</code> pour servir l&#8217;application),
la CLI définit une variable interne <code>ngDevMode</code> que le framework utilise pour savoir s&#8217;il doit
faire certaines choses en plus ou pas.</p>
</div>
<div class="paragraph">
<p>Dans ce mode, les messages d&#8217;erreur sont plus détaillés.
Le DOM généré contient aussi des attributs supplémentaires utiles au déboguage.
Et plus impportant, chaque détection de changements fait deux traversées de l&#8217;arbre des composants
au lieu d&#8217;une.
La seconde passe vérifie que toutes les expressions retournent bien la même chose que
lors de la première passe. Si ce n&#8217;est pas le cas, Angular lève une exception.
Cela permet de détecter qu&#8217;on n&#8217;a pas respecté le principe de flux unidirectionnel des données.</p>
</div>
<div class="paragraph">
<p>Assure-toi de détecter et de corriger ces erreurs, parce que le build de production
(qu&#8217;on obtient en exécutant <code>ng build</code>) ne fera pas ces traversées additionnelles, ce qui
rend l&#8217;application plus rapide.
Un tel problème ne sera donc pas tracé dans la console en production.</p>
</div>
</div>
<div class="sect2">
<h3 id="_track_dans_les_boucles_for">27.6. <code>track</code> dans les boucles <em>for</em></h3>
<div class="paragraph">
<p>Si tu utilises la syntaxe de <em>control flow</em>, tu sais que <code>track</code> est obligatoire dans les boucles <code>@for</code>.
Afin de comprendre pourquoi, laisse-moi t&#8217;expliquer
comment les frameworks JavaScript modernes (du moins, les plus populaires d&#8217;entre eux) gèrent les collections.
Suppose qu&#8217;on veuille afficher une liste de 3 poneys. Le code devrait ressembler à ça&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="html">&lt;ul&gt;
  @for (pony of ponies(); track pony) {
    &lt;li&gt;{{ pony.name }}&lt;/li&gt;
  }
&lt;/ul&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>Si tu ajoutes un poney, Angular va insérer un nouvel élément DOM à la bonne position.
Si tu modifies le nom de l&#8217;un des poneys, Angular modifiera le texte de l&#8217;élément <code>li</code> correspondant.</p>
</div>
<div class="paragraph">
<p>Mais comment fait-il cela&#160;?
En créant un lien entre les éléments du DOM et les objets contenus dans le tableau.
Angular utilise une table de correspondances qui ressemble à ça&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="html">node li 1 -&gt; pony #e435 // { id: 3, color: blue }
node li 2 -&gt; pony #8fa4 // { id: 4, color: red }</code></pre>
</div>
</div>
<div class="paragraph">
<p>Ça fonctionne très bien. Si tu remplaces un objet par un autre dans le tableau, Angular
détruira l&#8217;élément du DOM correspondant et en créera un nouveau.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="html">node li 1 (recreated) -&gt; pony #c1ea // { id: 1, color: green }
node li 2 -&gt; pony #8fa4 // { id: 4, color: red }</code></pre>
</div>
</div>
<div class="paragraph">
<p>Si tous les éléments du tableau sont remplacés par de nouveaux objets,
tous les éléments <code>li</code> du DOM seront détruits et recréés.
Tout cela ne pose pas de problème en général, excepté lorsque le but est simplement de
rafraîchir la liste avec un contenu qui sera pratiquement identique.
Dans ce cas, il serait bien plus efficace de garder les éléments du DOM existants,
et de faire les quelques modifications nécessaires.
Le problème, c&#8217;est que si tu vas rechercher cette même liste de poneys sur le serveur
pour la rafraîchir, même si l&#8217;état des objets sera sensiblement identique à l&#8217;état précédent,
les objets, eux (i.e. leur référence) seront tous différents.</p>
</div>
<div class="paragraph">
<p>La solution est d&#8217;aider Angular à maintenir cette table de correspondances sans tout détruire
à chaque rafraîchissement, en lui disant d&#8217;identifier (<em>track</em>) les objets non plus
par leur référence, mais plutôt par une propriété fonctionnelle qui permet de les identifier
de manière unique, typiquement un ID de base de données.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="html">&lt;ul&gt;
  @for (pony of ponies(); track pony.id) {
    &lt;li&gt;{{ pony.name }}&lt;/li&gt;
  }
&lt;/ul&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>Dans l&#8217;exemple ci-dessus, Angular ne créera un nouvel élément dans le DOM que si l&#8217;identifiant
du poney change.
Sur des longues listes dont le contenu change peu, cela permet d&#8217;économiser des tas
de suppressions et de créations d&#8217;éléments.
Comme cette optimisation est plutôt simple à mettre en œuvre,
Angular a décider de forcer les développeurs à spécifier une expression <code>track</code>
dans les boucles <code>@for</code>.
Ce n&#8217;est pas obligatoire quand on utilise la directive <code>*ngFor</code>,
mais une optimisation similaire existe: <code>trackBy</code>.</p>
</div>
<div class="paragraph">
<p><code>track</code> est aussi nécessaire en cas d&#8217;utilisation d&#8217;animations.
Si le style d&#8217;un élément est supposé s&#8217;animer
(en transitionnant progressivement de la valeur précédente à la nouvelle valeur),
et que la liste de poneys est remplacée par une nouvelle liste à chaque rafraîchissement,
alors un <code>track</code> correct est indispensable. Avec un <code>track</code> par identité, l&#8217;animation ne va jamais se déclencher,
puisque le style des éléments ne change jamais&#160;: l&#8217;élément lui-même est remplacé par un autre.</p>
</div>
</div>
<div class="sect2">
<h3 id="_stratégies_de_détection_de_changements">27.7. Stratégies de détection de changements</h3>
<div class="paragraph">
<p>Lorsque nous avons expliqué comment Angular détecte les changements,
nous avons montré qu&#8217;il partait du composant à la racine de l&#8217;arbre des composants,
puis appliquait la détection (<em>check</em>) sur ses fils, puis ses petit-fils, et ainsi
de suite jusqu&#8217;à ce que tous les composants soient vérifiés.
Ensuite seulement, tous les changements nécessaires sont appliqués au DOM en une passe.</p>
</div>
<div class="paragraph">
<p>Mais est-ce vraiment une bonne idée de vérifier <strong>chaque</strong> composant à <strong>chaque</strong> changement&#160;?
Bien souvent, ce n&#8217;est pas nécessaire.</p>
</div>
<div class="paragraph">
<p>Angular offre une stratégie alternative de détection de changements&#160;: <code>OnPush</code>.
Et chaque composant peut opter pour cette stratégie.</p>
</div>
<div class="paragraph">
<p>Si un composant utilise <code>OnPush</code>, il ne sera vérifié que dans 3 cas&#160;:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>lorsque l&#8217;un des <em>inputs</em> du composant a changé (pour être plus précis,
lorsque la <strong>référence</strong> d&#8217;une <em>input</em> a changé)&#160;;</p>
</li>
<li>
<p>lorsqu&#8217;un gestionnaire d&#8217;événement du composant a été déclenché&#160;;</p>
</li>
<li>
<p>lorsque la valeur d&#8217;un signal lu par le template du composant a changé.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Cette stratégie est donc adéquate lorsque le template du composant
dépend uniquement de ses <em>inputs</em>, et elle peut améliorer substantiellement
les performances d&#8217;une application qui affiche un grand nombre de composants à l&#8217;écran&#160;!
Mais une fois encore, sois très prudent avant d&#8217;appliquer cette optimisation&#160;: si les
préconditions s&#8217;avèrent n&#8217;être pas respectées, tu vas perdre tes cheveux à te demander
pourquoi le composant, ou l&#8217;un de ses descendants, n&#8217;est pas rafraîchi après un changement.</p>
</div>
<div class="paragraph">
<p>Prenons un exemple simple pour illustrer le problème.</p>
</div>
<div class="paragraph">
<p>Imagine que nous ayons 3 composants.
Un composant très simple <code>ImageComponent</code>&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="javascript">@Component({
  selector: 'ns-img',
  template: `
    &lt;p&gt;{{ check() }}&lt;/p&gt;
    &lt;img [src]="src()" /&gt;
  `
})
export class ImageComponent {
  readonly src = input.required&lt;string&gt;();

  check(): void {
    console.log('image component view checked');
  }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>utilisé par <code>PonyComponent</code>&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="javascript">@Component({
  selector: 'ns-pony',
  template: `
    &lt;p&gt;{{ check() }}&lt;/p&gt;
    &lt;ns-img [src]="ponyImageUrl()" /&gt;
  `,
  imports: [ImageComponent]
})
export class PonyComponent {
  readonly ponyModel = input.required&lt;PonyModel&gt;();
  readonly ponyImageUrl = computed(() =&gt; `images/pony-${this.ponyModel().color}-running.gif`);
  check(): void {
    console.log('pony component view checked');
  }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>lui-même utilisé par <code>RaceComponent</code>&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="html">@Component({
  selector: 'ns-race',
  template: `
    &lt;h2&gt;Race&lt;/h2&gt;
    &lt;p&gt;{{ check() }}&lt;/p&gt;
    @for (pony of ponies(); track pony.id) {
      &lt;div&gt;
        &lt;ns-pony [ponyModel]="pony" /&gt;
      &lt;/div&gt;
    }
    &lt;button (click)="changeColor()"&gt;Change color&lt;/button&gt;
  `,
  imports: [PonyComponent]
})
export class RaceComponent {
  readonly ponies = signal&lt;Array&lt;PonyModel&gt;&gt;([
    { id: 1, color: 'green' },
    { id: 2, color: 'orange' }
  ]);
  readonly colors: Array&lt;string&gt; = ['green', 'orange', 'blue'];

  check(): void {
    console.log('race component view checked');
  }

  changeColor(): void {
    const ponies = this.ponies();
    ponies[0].color = this.randomColor();
    this.ponies.set([...ponies]);
  }

}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Le <code>RaceComponent</code> affiche deux poneys,
et l&#8217;utilisateur peut changer la couleur du premier poney en cliquant sur le bouton
<code>Change color</code>.</p>
</div>
<div class="paragraph">
<p>Avec la stratégie de détection par défaut, chaque événement déclenche la détection
de changements sur les 3 composants.</p>
</div>
<div class="paragraph">
<p>Nous avons ajouté une méthode <code>check()</code> dans chacun des composants, appelée depuis leur template.
Elle nous permet de savoir si le composant est vérifié ou pas.
Et en effet, en exécutant notre exemple, on voit s&#8217;afficher dans la console&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="bash">pony component view checked
image component view checked
pony component view checked
image component view checked
race component view checked</code></pre>
</div>
</div>
<div class="paragraph">
<p>(on peut même voir ces traces deux fois à chaque clic, parce que
l&#8217;application est en mode <em>développement</em>. Vois la section précédente à propos du mode <em>production</em>).</p>
</div>
<div class="sect3">
<h4 id="_onpush">27.7.1. OnPush</h4>
<div class="paragraph">
<p>Dans notre exemple, nous savons que la plupart de ces détections sont inutiles&#160;:
si le poney ne change pas, le template du <code>PonyComponent</code> n&#8217;a pas besoin d&#8217;être modifié.
Il en va de même pour <code>ImageComponent</code>: si la valeur de l'<em>input</em> <code>src</code> ne change pas,
il n&#8217;y a pas besoin de recalculer la valeur de l&#8217;URL.
Adoptons donc la stratégie <code>OnPush</code> pour ces deux composants,
en ajoutant une propriété <code>changeDetection</code> dans leur décorateur <code>@Component</code>&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="javascript">@Component({
  selector: 'ns-img',
  template: `
    &lt;p&gt;{{ check() }}&lt;/p&gt;
    &lt;img [src]="src()" /&gt;
  `,
  changeDetection: ChangeDetectionStrategy.OnPush
})
export class ImageComponent {
  readonly src = input.required&lt;string&gt;();

  check(): void {
    console.log('image component view checked');
  }
}</code></pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="javascript">@Component({
  selector: 'ns-pony',
  template: `
    &lt;p&gt;{{ check() }}&lt;/p&gt;
    &lt;ns-img [src]="ponyImageUrl()" /&gt;
  `,
  imports: [ImageComponent],
  changeDetection: ChangeDetectionStrategy.OnPush
})
export class PonyComponent {
  readonly ponyModel = input.required&lt;PonyModel&gt;();
  readonly ponyImageUrl = computed(() =&gt; `images/pony-${this.ponyModel().color}-running.gif`);

  check(): void {
    console.log('pony component view checked');
  }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Cette fois, lorsqu&#8217;on clique sur le bouton,
la seule ligne qui apparaît dans la console est&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="bash">race component view checked</code></pre>
</div>
</div>
<div class="paragraph">
<p>Parfait. La stratégie est donc bien efficace puisque les composants ne sont plus vérifiés par Angular \o/.</p>
</div>
</div>
<div class="sect3">
<h4 id="_onpush_et_le_piège_de_la_mutabilité">27.7.2. OnPush et le piège de la mutabilité</h4>
<div class="paragraph">
<p>Mais&#8230;&#8203; il ya comme un problème&#160;:
la couleur du poney ne change plus&#160;!</p>
</div>
<div class="paragraph">
<p>J&#8217;ai choisi cet exemple à dessein&#160;: <code>OnPush</code> est efficace,
mais il s&#8217;agit de bien comprendre son fonctionnement et de ne pas ajouter <code>OnPush</code> ici et là.</p>
</div>
<div class="paragraph">
<p>Pourquoi ne fonctionne-t-il pas comme nous l&#8217;espérions&#160;?</p>
</div>
<div class="paragraph">
<p>Relis attentivement le code de <code>RaceComponent</code>,
et en particulier de sa méthode <code>changeColor</code>&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="javascript">changeColor(): void {
  const ponies = this.ponies();
  ponies[0].color = this.randomColor();
  this.ponies.set([...ponies]);
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Cette méthode <strong>modifie l&#8217;état</strong> du poney dans le tableau <code>ponies</code>,
et ce poney est l'<em>input</em> de <code>PonyComponent</code>.
Maintenant que nous avons adopté la stratégie <code>OnPush</code> pour ce composant,
Angular ne déclenchera la détection de changements sur ce composant
que si la <strong>référence</strong> de l'<em>input</em> <code>pony</code> est modifiée.
Lorsqu&#8217;on change l&#8217;état du poney, l&#8217;objet lui-même reste identique,
et Angular considère donc qu&#8217;aucune détection de changements n&#8217;est nécessaire.</p>
</div>
<div class="paragraph">
<p>Cette stratégie est-elle donc inutile&#160;? Non, pas du tout, mais
elle requiert beaucoup d&#8217;attention.</p>
</div>
<div class="paragraph">
<p>Le moyen de résoudre notre problème est tout simple. Plutôt que de changer l&#8217;état
du poney dans <code>changeColor</code>, il suffit de remplacer le poney par un autre poney&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="javascript">changeColor(): void {
  const ponies = this.ponies();
  const pony = ponies[0];
  // create a new pony with the old attributes and the new color
  ponies[0] = { ...pony, color: this.randomColor() };
  this.ponies.set([...ponies]);
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Une fois ce changement effectué, l&#8217;application est plus rapide <strong>et</strong> correcte.
L&#8217;utilisateur clique sur le bouton&#160;; la méthode <code>changeColor</code> crée un nouvel
objet avec les mêmes propriétés excepté la nouvelle couleur.
Comme il s&#8217;agit d&#8217;un nouvel objet passé en <em>input</em> au <code>PonyComponent</code>,
Angular déclenche la détection de changements sur ce composant.
Comme la valeur de l'<em>input</em> <code>src</code> de <code>ImageComponent</code> s&#8217;en trouve elle aussi modifiée,
l&#8217;image affiche désormais le poney avec la bonne couleur.
Et, bien sûr, si un autre changement se produit sur <code>RaceComponent</code> sans affecter
la valeur des poneys, les instances de <code>PonyComponent</code> échapperont à une détection
de changements inutile.</p>
</div>
<div class="paragraph">
<p>Comme tu le vois, il est assez facile de tomber dans ce piège lorsqu&#8217;on
utilise <code>OnPush</code>. Sois donc prudent&#160;! (Les tests unitaires sont tes amis).</p>
</div>
<div class="paragraph">
<p>Il y a un dernier sujet dont il faut parler lorsqu&#8217;on évoque <code>OnPush</code>&#160;: les observables.</p>
</div>
</div>
<div class="sect3">
<h4 id="_onpush_les_observables_les_signaux_et_le_pipe_async">27.7.3. OnPush, les Observables, les signaux et le <em>pipe</em> async</h4>
<div class="paragraph">
<p>Supposons à présent que nous utilisions uniquement notre désormais fameux
composant <code>PonyComponent</code>.
Il souscrit à un observable exposé par le service <code>ColorService</code>,
qui émet une nouvelle couleur toutes les secondes.
On s&#8217;attend évidemment à voir l&#8217;image affichée par le composant changer, elle aussi,
toutes les secondes.
Le développeur de ce composant se dit qu&#8217;utiliser <code>OnPush</code> sur ce composant ne peut pas faire de mal.
Qu&#8217;en penses-tu&#160;?</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="javascript">@Component({
  selector: 'ns-pony',
  template: `
    &lt;p&gt;New color every 1s&lt;/p&gt;
    @if (color) {
      &lt;img [src]="'pony-' + color + '.gif'" [alt]="color" /&gt;
    }
  `,
  changeDetection: ChangeDetectionStrategy.OnPush
})
export class PonyComponent {
  color: string | undefined;

  constructor() {
    inject(ColorService)
      .get()
      .pipe(takeUntilDestroyed())
      .subscribe(color =&gt; (this.color = color));
  }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Malheureusement, cette fois encore, ça ne fonctionne pas.
Avec la stratégie <code>OnPush</code>,
Angular ne rafraîchit un composant que si l&#8217;un de ses <em>inputs</em> a changé
(ici, pas d'<em>input</em>),
ou si un gestionnaire d&#8217;événement a été appelé sur le composant (il n&#8217;y en a pas non plus),
ou si un signal lu par le template a changé de valeur (aucun signal n&#8217;est utilisé ici).
Donc la propriété <code>color</code> est bien modifiée toutes les secondes,
mais la vue n&#8217;est jamais rafraîchie&#8230;&#8203;</p>
</div>
<div class="paragraph">
<p>Ce problème peut être résolu en faisant de la propriété <code>color</code> un signal et en modifiant le
signal quand l&#8217;observable émet une nouvelle couleur.
Mais il y a une solution encore plus simple&#160;: utiliser <code>toSignal</code> pour transformer
l&#8217;obervable en signal&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="javascript">@Component({
  selector: 'ns-observable-on-push-with-signal',
  template: `@if (color(); as c) {
    &lt;img [src]="'pony-' + c + '.gif'" [alt]="c" /&gt;
  }`,
  changeDetection: ChangeDetectionStrategy.OnPush
})
export class PonyComponent {
  readonly color: Signal&lt;string | undefined&gt; = toSignal(inject(ColorService).get());
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Avant l&#8217;introduction des signaux, la solution à ce problème était d&#8217;utiliser le <em>pipe</em> <code>async</code>.
Il permet de souscrire (et dé-souscrire) à l&#8217;observable depuis le template.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="javascript">@Component({
  selector: 'ns-observable-on-push-with-async',
  template: `@if (color$ | async; as c) {
    &lt;img [src]="'pony-' + c + '.gif'" [alt]="c" /&gt;
  }`,
  imports: [AsyncPipe],
  changeDetection: ChangeDetectionStrategy.OnPush
})
export class PonyComponent {
  color$: Observable&lt;string&gt; = inject(ColorService).get();
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Lorsqu&#8217;il reçoit un nouvel événement de l&#8217;observable, le <em>pipe</em> <code>async</code> marque le composant comme devant être détecté lors de la prochaine détection de changements.</p>
</div>
<div class="paragraph">
<p>Attention cependant&#160;: utiliser <code>async</code> plusieurs fois dans le template conduit à souscrire plusieurs fois à l&#8217;observable. Si l&#8217;observable est un observable HTTP,
cela déclenchera l&#8217;envoi de plusieurs requêtes HTTP. Son utilisation rend aussi plus difficile
l&#8217;accès à la couleur depuis le code TypeScript du composant.
Notre préférence va donc à la solution utilisant <code>toSignal</code>, qui a tous les avantages
du <em>pipe</em> <code>async</code> sans ses inconvénients.</p>
</div>
<div class="paragraph">
<p>Sois tout de même conscient que <code>toSignal()</code> est toujours en <em>developer preview</em>.
Mais hormis cet inconvénient temporaire, c&#8217;est notre manière préférée
de gérer des changements asynchrones d&#8217;état dans les composants OnPush.</p>
</div>
<div class="paragraph">
<p>Ces deux exemples montrent que passer à <code>OnPush</code> ne doit pas être fait à la légère,
en particulier pour des composants anciens qui n&#8217;utilisent pas les signaux.
Cependant, les composants <code>OnPush</code> se comportent pratiquement comme tous les composants
se comporteront lorsque ZoneJS ne sera plus utilisé pour la détection de changements.
Si tu veux te préparer à ce futur "zoneless", tu devrais donc envisager, au moins pour les nouveaux
composants, d&#8217;utiliser des signaux pour stocker leur état et de leur faire utiliser la stratégie
<code>OnPush</code>.</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_sortir_de_la_zone">27.8. Sortir de la zone</h3>
<div class="paragraph">
<p>Une autre façon d&#8217;éviter des détections de changements inutiles est possible&#160;:
on peut exécuter une partie du code hors de la "surveillance" de Zone.js.
Pour se mettre "hors-zone", on injecte le service <code>NgZone</code>,
et on utilise sa méthode <code>runOutsideAngular</code>, qui exécute du code hors de sa surveillance.</p>
</div>
<div class="paragraph">
<p>Cela peut être très pratique pour envelopper une portion de code qui gère beaucoup d&#8217;événements,
typiquement du code qui vient d&#8217;une bibliothèque tierce.
Par exemple, imaginons un composant qui affiche un graphique construit avec <a href="https://www.chartjs.org/">Chart.js</a>.
Lorsque nos utilisateurs vont ne serait-ce que survoler le graphique,
des centaines d&#8217;événements DOM se déclencheront.
Le fait que des centaines d&#8217;événements soient déclenchés n&#8217;est pas vraiment un problème.
C&#8217;est la même chose pour n&#8217;importe quel élément DOM.
Le problème est que la bibliothèque utilise <code>addEventListener()</code>
pour gérer ces événements, par exemple pour afficher des info-bulles,
et c&#8217;est ce qui déclenche des centaines de détections de changements&#160;!</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="javascript">readonly canvas = viewChild.required&lt;ElementRef&lt;HTMLCanvasElement&gt;&gt;('chart');

constructor() {
  effect(() =&gt; {
    const ctx = this.canvas().nativeElement;
    new Chart(ctx, {
      type: 'bar',
      data: {
        labels: ['Green', 'Red'],
        datasets: [{ label: 'Score', data: [12, 21] }]
      }
    });
  });
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Dans ce cas tu peux injecter <code>NgZone</code> et utiliser <code>runOutsideAngular</code>
pour ignorer les événements issus de Chart.js&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="javascript">readonly canvas = viewChild.required&lt;ElementRef&lt;HTMLCanvasElement&gt;&gt;('chart');

constructor() {
  const ngZone = inject(NgZone);
  effect(() =&gt; {
    const ctx = this.canvas().nativeElement;
    ngZone.runOutsideAngular(() =&gt; {
      new Chart(ctx, {
        type: 'bar',
        data: {
          labels: ['Green', 'Red'],
          datasets: [{ label: 'Score', data: [12, 21] }]
        }
      });
    });
  });
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Cela produit le même résultat visuel
et les autres changements effectués sur le composant seraient toujours détectés automatiquement par Angular.
Mais on ne déclenchera pas de détection de changement quand on utilisera le graphique.</p>
</div>
<div class="paragraph">
<p>Avoir à faire cela pour éviter des problèmes de performance
est l&#8217;un des gros problèmes causés par l&#8217;utilisation de ZoneJS.
C&#8217;est l&#8217;une des raisons pour lesquelles Angular veut évoluer vers un système
de détection de changements <em>zoneless</em>.</p>
</div>
</div>
<div class="sect2">
<h3 id="_détection_de_changements_zoneless">27.9. Détection de changements <em>zoneless</em></h3>
<div class="paragraph">
<p>Angular v18 a introduit un nouveau moyen <strong>expérimental</strong> de déclencher la détection de changements.
Au lieu de s&#8217;appuyer sur ZoneJS pour savoir quand quelque chose a potentiellement changé,
le framework peut programmer par lui-même une détection de changements.</p>
</div>
<div class="paragraph">
<p>Pour ce faire, un nouveau <em>scheduler</em> a été ajouté au framework (appelé <code>ChangeDetectionScheduler</code>),
et ce <em>scheduler</em> est utilisé en interne pour déclencher la détection de changements.
Ce nouveau <em>scheduler</em> est activé par défaut en v18 et v19, même si ZoneJS est utilisé.
Cependant, le but est de progressivement se séparer de ZoneJS.</p>
</div>
<div class="paragraph">
<p>Avec ce nouveau <em>scheduler</em> en effet, le framework s&#8217;appuie sur d&#8217;autres déclencheurs
que ZoneJS pour lancer une détection de changements.
Par exemple, il en déclenche une lorsqu&#8217;un <em>listener</em> d&#8217;événement (hôte ou dans le template)
est appelé, lorsqu&#8217;une vue est attachée ou enlevée, lorsque le pipe <code>async</code> détecte une
nouvelle émission, lorsque la méthode <code>markForCheck()</code> est appelée ou lorsqu&#8217;un signal change de valeur.</p>
</div>
<div class="paragraph">
<p>On peut ainsi faire en sorte de ne s&#8217;appuyer <em>que</em> sur ce nouveau <em>scheduler</em>,
et se passer de ZoneJS, pour déclencher les détections de changements.
C&#8217;est une fonctionnalié expérimentale, qu&#8217;il faut activer en utilisant la fonction <code>provideExperimentalZonelessChangeDetection()</code> dans la configuration de l&#8217;application.</p>
</div>
<div class="paragraph">
<p>Lorsqu&#8217;on fait cela, le framework n&#8217;uilise plus ZoneJS pour déclencher la détection de changements.
On peut donc supprimer ZoneJS de l&#8217;application si on le désire
(et si les dépendances de l&#8217;application le permettent bien sûr),
en enlevant <code>zone.js</code> des <code>polyfills</code> dans le fichier <code>angular.json</code>.</p>
</div>
<div class="paragraph">
<p>Cela devrait fonctionner si tous les composants sont <code>OnPush</code> et/ou s&#8217;appuient sur les signaux,
et si le code n&#8217;utilise pas certaines méthodes comme  <code>NgZone.onStable</code>.</p>
</div>
<div class="paragraph">
<p>Pour en savoir plus sur cette fonctionnalité expérimentale, comment l&#8217;utiliser dans les test, etc.,
tu peux lire <a href="https://blog.ninja-squad.com/2024/05/22/what-is-new-angular-18.0/">cet article de notre blog</a>,
qui rentre plus dans les détails.</p>
</div>
</div>
<div class="sect2">
<h3 id="_pipes_purs">27.10. <em>Pipes</em> purs</h3>
<div class="paragraph">
<p>Comme tu le sais maintenant, tu peux définir tes propres <em>pipes</em>,
la plupart du temps pour formater des données.
Par exemple, pour afficher le nom complet d&#8217;un utilisateur,
tu pourrais utiliser une méthode dans le composant&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="javascript">@Component({
  selector: 'ns-menu',
  template: `
    &lt;p&gt;{{ userName() }}&lt;/p&gt;
    &lt;p&gt;...&lt;/p&gt;
    &lt;p&gt;{{ userName() }}&lt;/p&gt;
  `
})
export class MenuComponent {
  readonly user = signal&lt;UserModel&gt;({
    id: 1001,
    firstName: 'Jane',
    lastName: 'Doe',
    title: 'Miss'
  });

  userName(): string {
    return `${this.user().title} ${this.user().firstName} ${this.user().lastName}`;
  }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>ou mieux, définir un signal <em>computed</em>&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="javascript">@Component({
  selector: 'ns-menu',
  template: `
    &lt;p&gt;{{ userName() }}&lt;/p&gt;
    &lt;p&gt;...&lt;/p&gt;
    &lt;p&gt;{{ userName() }}&lt;/p&gt;
  `
})
export class MenuComponent {
  readonly user = signal&lt;UserModel&gt;({
    id: 1001,
    firstName: 'Jane',
    lastName: 'Doe',
    title: 'Miss'
  });
  readonly userName = computed(() =&gt; `${this.user().title} ${this.user().firstName} ${this.user().lastName}`);
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Cette version est plus performante, parce que le calcul est mémorisé (<em>memoized</em>)
au lieu d&#8217;être exécuté chaque fois que l&#8217;expression est évaluée dans le template.</p>
</div>
<div class="paragraph">
<p>Si cette solution est simple et efficace quand on a un signal contenant un seul utilisateur,
elle est plus pénible quand on doit afficher une liste d&#8217;objets ayant chacun un utilisateur
comme propriété.</p>
</div>
<div class="paragraph">
<p>Écrire un <em>pipe</em> pour encapsuler cette logique est une solution plus simple&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="javascript">@Component({
  selector: 'ns-menu',
  template: `
    &lt;p&gt;{{ user | displayName }}&lt;/p&gt;
    &lt;p&gt;...&lt;/p&gt;
    &lt;p&gt;{{ user | displayName }}&lt;/p&gt;
  `,
  imports: [DisplayNamePipe]
})
export class MenuComponent {
  readonly user: UserModel = {
    id: 1001,
    firstName: 'Jane',
    lastName: 'Doe',
    title: 'Miss'
  };
}</code></pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="javascript">@Pipe({
  name: 'displayName'
})
export class DisplayNamePipe implements PipeTransform {
  transform(user: UserModel): string {
    return `${user.title} ${user.firstName} ${user.lastName}`;
  }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Ça nécessite un petit peu plus de travail, mais ça permet d&#8217;utiliser
cette logique dans n&#8217;importe quel template.</p>
</div>
<div class="paragraph">
<p>Ce que tu ne réalises peut-être pas, c&#8217;est que l&#8217;utilisation
d&#8217;un <em>pipe</em> offre le même avantage de performance qu&#8217;un signal <em>computed</em>.
Par défaut, un <em>pipe</em> est "pur".
En programmation fonctionnelle, on appelle "pure" une fonction qui n&#8217;a pas d&#8217;effet de bord,
et dont le résultat dépend exclusivement de ses arguments.
Sachant que le <em>pipe</em> est "pur", Angular applique la même optimisation que pour les signaux <em>computed</em>&#160;: il mémorise la transformation.
La méthode <code>transform</code> du <em>pipe</em> n&#8217;est appelée que si la référence de l&#8217;objet qu&#8217;il transforme
a changé ou si celle d&#8217;un autre argument de la méthode a changé (le principe est
similaire à la stratégie <code>OnPush</code> des composants).</p>
</div>
<div class="paragraph">
<p>Comme un <em>pipe</em> est pur par défaut, cette optimisation est gratuite et sans effort&#160;!
Mais parfois, elle pose problème.</p>
</div>
<div class="paragraph">
<p>Dans l&#8217;exemple précédent, si on modifie l&#8217;état de l&#8217;utilisateur en assignant une autre valeur
à sa propriété <code>firstName</code>, la valeur affichée à l&#8217;écran reste identique&#8230;&#8203;
Il s&#8217;agit là du même problème que celui évoqué dans la section sur la stratégie <code>OnPush</code>&#160;:
la référence à l&#8217;objet passé en argument au <em>pipe</em> ne change pas, donc le <em>pipe</em> n&#8217;est pas réexécuté.</p>
</div>
<div class="paragraph">
<p>Deux solutions sont possibles&#160;:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>utiliser des objets immuables
(ne pas modifier l&#8217;état de l&#8217;utilisateur, mais créer un nouvel objet avec un nouveau <code>firstName</code>)&#160;;</p>
</li>
<li>
<p>marquer le <em>pipe</em> comme "impur", pour désactiver l&#8217;optimisation.
Les performances vont être un peu amoindries, mais la valeur sera toujours rafraîchie, quelle que soit la manière dont les changements sont effectués.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Pour rendre un <em>pipe</em> impur, il suffit d&#8217;ajouter <code>pure: false</code> à son décorateur&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="javascript">@Pipe({
  name: 'displayName',
  pure: false
})
export class DisplayNameImpurePipe implements PipeTransform {
  transform(user: UserModel): string {
    return `${user.title} ${user.firstName} ${user.lastName}`;
  }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Pour résumer&#160;:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>un <em>pipe</em> pur n&#8217;est pas appelé autant de fois qu&#8217;une méthode d&#8217;un composant</p>
</li>
<li>
<p>mais il n&#8217;est pas appelé si ses arguments sont "mutés", donc il s&#8217;agit d&#8217;être prudent et rigoureux.</p>
</li>
</ul>
</div>
<div class="sect3">
<h4 id="_conclusion_4">27.10.1. Conclusion</h4>
<div class="paragraph">
<p>Ce chapitre, j&#8217;espère, t&#8217;as appris quelques techniques permettant de résoudre
d&#8217;éventuels problèmes de performance. Mais avant tout, retiens les règles d&#8217;or de l&#8217;optimisation
des performances (en anglais dans le texte)&#160;:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>don&#8217;t</p>
</li>
<li>
<p>don&#8217;t&#8230;&#8203; yet</p>
</li>
<li>
<p>profile before optimizing.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Comme l&#8217;a dit un célèbre informaticien&#160;:</p>
</div>
<div class="quoteblock">
<blockquote>
<div class="paragraph">
<p>l&#8217;optimisation prématurée est la source de tous les maux.</p>
</div>
</blockquote>
<div class="attribution">
&#8212; Donald Knuth
</div>
</div>
<div class="paragraph">
<p>Alors pense d&#8217;abord à écrire du code aussi simple, correct et lisible que possible, et ne pense
à profiler l&#8217;application, puis à l&#8217;optimiser, que si tu as réellement un problème de performance.</p>
</div>
<div class="paragraph">
<p>Pour les nouveaux composants, s&#8217;appuyer sur les signaux permet facilement d&#8217;appliquer la stratégie
<code>OnPush</code> et de se préparer à la détection de changements <em>zoneless</em>.</p>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<i class="fa icon-tip" title="Mise en pratique"></i>
</td>
<td class="content">
<div class="paragraph">
<p>Essaye notre exercice
<a href="https://angular-exercises.ninja-squad.com/exercises/35/performance">Performance</a> <span class="image"><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAIgAAACACAMAAADnN9ENAAACSVBMVEVMaXH7whr7whr7whr7whr7whr7whr7whr7whr7whr7whr7whp4o614o614o614o637whr7whp4o614o614o614o614o614o614o614o62EoKN4o614o637whqFXFKFXFKQnZm4kni0k3vA1Njr8fLd5+myytB/qLGFXFKFXFKcmY98oqp4o63V4uWFXFKFXFKoloWgmIx4o62Hpqu+nofCpI/b08yFXFKAoaaMnpzYzcSFXFKFXFKUnJaYm5O7mIDl5eOGrbaFXFKGk5Kfd2WSalyYcGClfmqhlIZ6lpx+hIWDaWOFXFKFXFJ/gICkl4nFqpeFXFKFXFKCamSDZV2EYFiDaWOCbmne2dTk7O77whqOZE6Ad3TIsJ6jwMflryWbb0h/gIDo6+rH2dz0vB58jZGIn6Cxgj17kZbOvK2FXFL7whq5iTqVt75/e3rPnC/eqSiMYk+FXFKjdkS4p6Ll6OjLtqbSwrXFubacu8PstSGynZiOsrqLZVzauj/013mrlI56mqLCtFrt69fY1dSApaTrvizz2oafgXqSb2aqxcuhrX/11GvO3uGQeHG5z9T20V7e3t7s7uX4y0P6xSjv5byYeHC+sKyli4TSzMrIzc28wcGwtLVHR0c8OztIR0c1NTWNkJEvLy+NioqTkJCHhISlqKnU2dpCQUGBhIRnZmZeYGBqbGyZnJ07Ozvf5ebLwsCmqapfYGFiYmLAw8Tw9fXs8vNqjZVBTE9PYmY4Pj9deH5mho5GU1Y9RUdhf4ZznKVKW140Njdz5u6AAAAAf3RSTlMAMIBQ7/+fEI/PYL8QcIBAIK+v/7+fz+8wUP/fYEAgEP//////////32D//yD//7///4//////UP///zDv///////P//////////+vj3Ag//+fQJ/////////fz///////////////////gHD///////+v//////////////9AWHP9fwAABxxJREFUeAHs1IVy5DAQBNBZ0DJ3mJUonGiPmZmZmZmZPv6ssb2oFFqHeYUq7LJ7mlatWhWVWDxBf4SkEHH6EwhPKk2/X0Z4sn9AknRSeJIx+u0SguXot8sLliG7QrFUKtOvUEkKVrUXpQZPT6EZrBdAX7FA0YsLX7ZCFv0w+gco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" alt="Pro" width="18"></span>&#160;!
Tu optimiseras l&#8217;application et mesureras chaque progrès effectué&#160;!
Nous avons également un exercice pour passer en
<a href="https://angular-exercises.ninja-squad.com/exercises/36/zoneless">Zoneless</a> <span class="image"><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAIgAAACACAMAAADnN9ENAAACSVBMVEVMaXH7whr7whr7whr7whr7whr7whr7whr7whr7whr7whr7whp4o614o614o614o637whr7whp4o614o614o614o614o614o614o614o62EoKN4o614o637whqFXFKFXFKQnZm4kni0k3vA1Njr8fLd5+myytB/qLGFXFKFXFKcmY98oqp4o63V4uWFXFKFXFKoloWgmIx4o62Hpqu+nofCpI/b08yFXFKAoaaMnpzYzcSFXFKFXFKUnJaYm5O7mIDl5eOGrbaFXFKGk5Kfd2WSalyYcGClfmqhlIZ6lpx+hIWDaWOFXFKFXFJ/gICkl4nFqpeFXFKFXFKCamSDZV2EYFiDaWOCbmne2dTk7O77whqOZE6Ad3TIsJ6jwMflryWbb0h/gIDo6+rH2dz0vB58jZGIn6Cxgj17kZbOvK2FXFL7whq5iTqVt75/e3rPnC/eqSiMYk+FXFKjdkS4p6Ll6OjLtqbSwrXFubacu8PstSGynZiOsrqLZVzauj/013mrlI56mqLCtFrt69fY1dSApaTrvizz2oafgXqSb2aqxcuhrX/11GvO3uGQeHG5z9T20V7e3t7s7uX4y0P6xSjv5byYeHC+sKyli4TSzMrIzc28wcGwtLVHR0c8OztIR0c1NTWNkJEvLy+NioqTkJCHhISlqKnU2dpCQUGBhIRnZmZeYGBqbGyZnJ07Ozvf5ebLwsCmqapfYGFiYmLAw8Tw9fXs8vNqjZVBTE9PYmY4Pj9deH5mho5GU1Y9RUdhf4ZznKVKW140Njdz5u6AAAAAf3RSTlMAMIBQ7/+fEI/PYL8QcIBAIK+v/7+fz+8wUP/fYEAgEP//////////32D//yD//7///4//////UP///zDv///////P//////////+vj3Ag//+fQJ/////////fz///////////////////gHD///////+v//////////////9AWHP9fwAABxxJREFUeAHs1IVy5DAQBNBZ0DJ3mJUonGiPmZmZmZmZPv6ssb2oFFqHeYUq7LJ7mlatWhWVWDxBf4SkEHH6EwhPKk2/X0Z4sn9AknRSeJIx+u0SguXot8sLliG7QrFUKtOvUEkKVrUXpQZPT6EZrBdAX7FA0YsLX7ZCFv0w+gco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" alt="Pro" width="18"></span>&#160;!</p>
</div>
</td>
</tr>
</table>
</div>
<div style="page-break-after: always;"></div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="signals">28. Signaux&#160;: pour aller plus loin</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_égalité">28.1. Égalité</h3>
<div class="paragraph">
<p>Les signaux sont utilisés pour stocker un état, et pour pouvoir réagir à son changement.
Mais comment un signal décide-t-il que sa valeur a changé&#160;?
Appeler <code>set</code> ou <code>update</code> sur un signal ne le fait pas nécessairement changer de valeur&#160;:
si tu remplaces la valeur par une valeur <em>égale_</em> à celle qu&#8217;il a déjà, alors le signal
considérera qu&#8217;il n&#8217;a pas changé.</p>
</div>
<div class="paragraph">
<p>Cette <em>égalité</em> de deux valeurs, par défaut, est établie en appelant
<a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object/is"><code>Object.is</code></a>.
Pour des objets, si la nouvelle valeur est <code>===</code> à la valeur courante, il n&#8217;y a pas de changement.
Mais si cette égalité référentielle n&#8217;est pas celle que tu désires, tu peux fournir une fonction
d&#8217;égalité alternative.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="typescript">const status = signal(
  {
    dirty: false,
    touched: false
  },
  {
    equal: (previousStatus, newStatus) =&gt;
      previousStatus.dirty === newStatus.dirty &amp;&amp; previousStatus.touched === newStatus.touched
  }
);
// errorDisplayed will not re-evaluated if both values stay the same
const errorDisplayed = computed(() =&gt; status().dirty || status().touched);</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_untracked">28.2. <code>untracked</code></h3>
<div class="paragraph">
<p><code>computed</code> et <code>effect</code> prennent tous les deux une fonction en argument.
Angular appelle cette fonction au moins une fois.
Cela perme de calculer la valeur initiale ou de déclencher l&#8217;effet de bord initial.
Mais c&#8217;est aussi nécessaire pour qu&#8217;Angular sache quels signaux sont lus par la fonction,
afin de mettre à jour le graphe de dépendances.</p>
</div>
<div class="paragraph">
<p>Par exemple,</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="typescript">readonly price = signal(42);
readonly quantity = signal(2);

readonly total = computed(() =&gt; this.price() * this.quantity());</code></pre>
</div>
</div>
<div class="paragraph">
<p>crée une dépendance entre <code>total</code> et les deux autres signaux&#160;: quand <code>price</code> ou <code>quantity</code> change,
Angular sait que <code>total</code> doit être recalculé.</p>
</div>
<div class="paragraph">
<p>Les dépendances de l&#8217;exemple ci-dessus sont évidentes. Mais ce n&#8217;est pas toujours le cas, en particulier avec les effets.</p>
</div>
<div class="paragraph">
<p>Prenons l&#8217;exemple suivant&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="javascript">readonly visitedUrl = signal&lt;string | undefined&gt;(undefined);

constructor() {
  const analyticsService = inject(AnalyticsService);
  effect(() =&gt; {
    const url = this.visitedUrl();
    if (url) {
      analyticsService.sendHitForUrl(url).subscribe();
    }
  });
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Il envoie un <em>hit</em>, en utilisant HTTP, chaque fois que le signal <code>visitedUrl</code> change.
La dépendance a l&#8217;air claire&#160;: cet effet dépend seulement de <code>visitedUrl</code>.
Mais est-ce vraiment le cas&#160;?</p>
</div>
<div class="paragraph">
<p>Si un intercepteur a été configuré pour le client HTTP
et si cet intercepteur lit un signal <code>token</code> par exemple, alors la souscription
à l&#8217;observable lit indirectement le signal <code>token</code>.
L&#8217;effet est donc aussi dépendant du signal <code>token</code>, et un nouveau <em>hit</em> sera donc
aussi envoyé lorsque le <code>token</code> change.</p>
</div>
<div class="paragraph">
<p>Pour éviter de telles dépendances indésirables, utilise <code>untracked</code>.
Une bonne pratique pour éviter les surprises
est de commencer par lire les signaux dont on veut vraiment dépendre,
puis d&#8217;exécuter le reste de l&#8217;effet dans un bloc <code>untracked</code>&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="javascript">readonly visitedUrl = signal&lt;string | undefined&gt;(undefined);

constructor() {
  const analyticsService = inject(AnalyticsService);
  effect(() =&gt; {
    const url = this.visitedUrl();
    untracked(() =&gt; {
      if (url) {
        analyticsService.sendHitForUrl(url).subscribe();
      }
    });
  });
}</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_effets_racine_et_effets_de_composant">28.3. Effets racine et effets de composant</h3>
<div class="paragraph">
<p>Nous avons appris que <code>effect</code> nécessite un contexte d&#8217;injection.
Un effet peut être créé pendant la construction d&#8217;un composant, d&#8217;une directive, ou d&#8217;un service.
Autrement, on doit fournir un <code>Injector</code> en option.</p>
</div>
<div class="paragraph">
<p>Mais tous les effets ne sont pas traîtés de la même manière.
Angular distingue deux sortes d&#8217;effets&#160;:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>les effets de composant, qui sont créés en utilisant l&#8217;injecteur d&#8217;un composant (ou d&#8217;une directive)&#160;;</p>
</li>
<li>
<p>les effets "racine", qui sont créés dans les services fournis à la racine, ou avec l&#8217;option <code>forceRoot</code>.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Les effets de composant s&#8217;exécutent juste avant la détection de changements du composant
auxquels ils sont liés.
Ils sont détruits en même temps que ce composant.</p>
</div>
<div class="paragraph">
<p>En revanche, les effets racine ne sont jamais détruits (puisque le service auquel ils sont liés n&#8217;est jamais détruit).
Ils s&#8217;exécutent dans une "micro task" (c.-à-d. au même moment qu&#8217;une promesse résolue serait exécutée).
Dans les tests unitaires, il faut appeler <code>TestBed.flushEffects()</code> pour déclencher leur exécution.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
Si tu veux qu&#8217;un effet, quel que soit son type, cesse de s&#8217;exécuter à un quelconque moment,
tu peux toujours le détruire explicitement, en appelant la méthode <code>destroy</code> de l'`EffectRef`
retourné par <code>effect</code>.
</td>
</tr>
</table>
</div>
</div>
<div class="sect2">
<h3 id="_afterrendereffect">28.4. <code>afterRenderEffect</code></h3>
<div class="paragraph">
<p>Puisque les effets de composant s&#8217;exécutent avant la détection de changements,
ils ne sont pas appropriés pour lire ou modifier le DOM du composant&#160;:
le DOM n&#8217;a pas encore été mis à jour par Angular quand l&#8217;effet est exécuté.
Si tu veut lire ou modifier le DOM depuis un effet, tu peux créer cet effet
avec <code>afterRenderEffect</code>. Un tel effet, comme son nom l&#8217;indique, s&#8217;exécute
après le <em>rendering</em>.</p>
</div>
</div>
<div class="sect2">
<h3 id="_nettoyage_dun_effet">28.5. Nettoyage d&#8217;un effet</h3>
<div class="paragraph">
<p>Les effets peuvent également recevoir une fonction de nettoyage.
Cette fonction est appelée quand l&#8217;effet est exécuté à nouveau.
Cela peut être pratique quand tu as besoin d&#8217;annuler une action précédente
avant d&#8217;en démarrer une nouvelle.
Dans l&#8217;exemple ci-dessous, nous démarrons un intervalle qui s&#8217;exécute toutes les <code>count</code> secondes,
et nous voulons l&#8217;arrêter et en démarrer un nouveau quand <code>count</code> change&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="typescript">this.intervalEffect = effect(onCleanup =&gt; {
  const intervalId = setInterval(() =&gt; console.log(`count in intervalEffect ${this.count()}`), this.count() * 1000);
  return onCleanup(() =&gt; clearInterval(intervalId));
});</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_binding_bidirectionnel_avec_les_model_inputs">28.6. Binding bidirectionnel avec les <code>model</code> inputs</h3>
<div class="paragraph">
<p>Les signaux permettent une nouvelle approche des patterns existants.
Comme tu le sais probablement, Angular a une syntaxe "boîte de bananes" pour le binding bidirectionnel.</p>
</div>
<div class="paragraph">
<p>Cela est principalement utilisé avec <code>ngModel</code>
pour lier un contrôle de formulaire à une propriété de composant&#160;:</p>
</div>
<div class="listingblock">
<div class="title">login.component.html</div>
<div class="content">
<pre class="prettyprint highlight"><code data-lang="html">&lt;input name="login" [(ngModel)]="user.login" /&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>Sous le capot, c&#8217;est parce que la directive <code>ngModel</code> a un input <code>ngModel</code> et un output <code>ngModelChange</code>.</p>
</div>
<div class="paragraph">
<p>Ainsi, la syntaxe "boîte de bananes" n&#8217;est que du sucre syntaxique pour&#160;:</p>
</div>
<div class="listingblock">
<div class="title">login.component.html</div>
<div class="content">
<pre class="prettyprint highlight"><code data-lang="html">&lt;input name="login" [ngModel]="user.login" (ngModelChange)="user.login = $event" /&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>La syntaxe est, en fait, générale et peut être utilisée avec n&#8217;importe quel composant ou directive
qui a un input nommé <code>quelquechose</code> et un output nommé <code>quelquechoseChange</code>.</p>
</div>
<div class="paragraph">
<p>Tu peux en tirer parti dans tes propres composants et directives,
par exemple pour construire un composant de pagination&#160;:</p>
</div>
<div class="listingblock">
<div class="title">pagination.component.ts</div>
<div class="content">
<pre class="prettyprint highlight"><code data-lang="typescript">readonly collectionSize = input.required&lt;number&gt;();
readonly pageSize = input.required&lt;number&gt;();
readonly page = input.required&lt;number&gt;();
readonly pageChange = output&lt;number&gt;();

readonly pages = computed(() =&gt; this.computePages());

goToPage(page: number) {
  this.pageChange.emit(page);
}

private computePages() {
  return Array.from({ length: Math.ceil(this.collectionSize() / this.pageSize()) }, (_, i) =&gt; i + 1);
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Le composant reçoit la collection, la taille de la page et la page actuelle en tant qu&#8217;inputs,
et émet la nouvelle page quand l&#8217;utilisateur clique sur un bouton.</p>
</div>
<div class="paragraph">
<p>Chaque fois qu&#8217;un input change, le composant recalcule les boutons à afficher.
Le template utilise une boucle pour afficher les boutons&#160;:</p>
</div>
<div class="listingblock">
<div class="title">pagination.component.html</div>
<div class="content">
<pre class="prettyprint highlight"><code data-lang="html">@for (pageNumber of pages(); track pageNumber) {
  &lt;button [class.active]="page() === pageNumber" (click)="goToPage(pageNumber)"&gt;
    {{ pageNumber }}
  &lt;/button&gt;
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Le composant peut ensuite être utilisé comme&#160;:</p>
</div>
<div class="listingblock">
<div class="title">Utilisation</div>
<div class="content">
<pre class="prettyprint highlight"><code data-lang="html">&lt;ns-pagination [(page)]="page" [collectionSize]="collectionSize()" [pageSize]="pageSize()" /&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>Dans le composant parent, <code>page</code> peut être un <code>number</code>,
mais il peut aussi être un <code>WritableSignal&lt;number&gt;</code>.
Dans ce dernier cas, le framework passera automatiquement la valeur du signal
en tant qu&#8217;input au composant de pagination,
et définira la valeur du signal sur la nouvelle page quand le composant de pagination en émet une.</p>
</div>
<div class="paragraph">
<p>Le composant de pagination peut être réécrit en utilisant la fonction <code>model()</code>&#160;:</p>
</div>
<div class="listingblock">
<div class="title">pagination.component.ts</div>
<div class="content">
<pre class="prettyprint highlight"><code data-lang="typescript">readonly collectionSize = input.required&lt;number&gt;();
readonly pageSize = input.required&lt;number&gt;();
readonly pages = computed(() =&gt; this.computePages());

readonly page = model.required&lt;number&gt;();
// ^? ModelSignal&lt;number&gt;;
goToPage(page: number) {
  this.page.set(page);
}

private computePages() {
  return Array.from({ length: Math.ceil(this.collectionSize() / this.pageSize()) }, (_, i) =&gt; i + 1);
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Comme tu peux le voir, <code>model()</code> est utilisée pour définir la paire input/output,
et l&#8217;émission de l&#8217;output est faite en utilisant la méthode <code>set()</code> du signal.</p>
</div>
<div class="paragraph">
<p>Un <code>model</code> peut être requis, ou avoir une valeur par défaut,
ou avoir un alias, comme nous l&#8217;avons vu pour les inputs.
Il ne peut cependant pas être transformé.</p>
</div>
<div class="paragraph">
<p>Si tu essaies d&#8217;accéder à la valeur du modèle avant qu&#8217;elle n&#8217;ait été définie,
par exemple dans le constructeur du composant,
alors tu auras une erreur à l&#8217;exécution&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="typescript">'NG0952: Model is required but no value is available yet.'</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_signaux_liés_avec_linkedsignal">28.7. Signaux liés avec <code>linkedSignal</code></h3>
<div class="paragraph">
<p>Angular v19 a introduit un nouveau concept (en <em>developer preview</em>) appelé <em>linked signals</em> (signaux liés).
Un signal lié est un signal <em>writable</em>,
mais c&#8217;est aussi un signal <em>computed</em>,
car son contenu peut être réinitialisé grâce à une computation qui dépend d&#8217;un autre signal (ou de plusieurs).</p>
</div>
<div class="paragraph">
<p>Imaginons que nous ayons un composant qui affiche une liste d&#8217;éléments reçus via un <em>input</em>,
et nous voulons que nos utilisateurs en sélectionnent un.
Par défaut, disons que nous voulons sélectionner le premier élément de la liste.
Mais chaque fois que la liste d&#8217;éléments change, l&#8217;élément sélectionné peut ne plus être valide,
nous voulons donc réinitialiser l&#8217;élément sélectionné au premier de la nouvelle liste.</p>
</div>
<div class="paragraph">
<p>Nous pouvons imaginer un composant comme celui-ci&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="typescript">export class ItemListComponent {
  readonly items = input.required&lt;Array&lt;ItemModel&gt;&gt;();
  readonly selectedItem = signal&lt;ItemModel | undefined&gt;(undefined);

  pickItem(item: ItemModel) {
    this.selectedItem.set(item);
  }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Utiliser un effet peut venir à l&#8217;esprit pour résoudre ce problème de sélection&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="typescript">constructor() {
  // ⚠️ This is not recommended
  effect(() =&gt; {
    this.selectedItem.set(this.items()[0]);
  });
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>À chaque fois que la liste d&#8217;éléments change, l&#8217;effet sera déclenché et le premier élément sera sélectionné.
Cela fonctionne, mais l&#8217;utilisation des effets n&#8217;est généralement pas recommandée, sauf pour certains cas spécifiques,
comme la synchronisation de quelque chose en dehors de l&#8217;application (comme le stockage local par exemple).</p>
</div>
<div class="paragraph">
<p>Il y a une chouette astuce que je peux te montrer avant de plonger dans la solution désormais recommandée&#160;:
nous pouvons utiliser une valeur <code>computed</code> qui retourne&#8230;&#8203; un signal&#160;!</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="typescript">export class ItemListComponent {
  readonly items = input.required&lt;Array&lt;ItemModel&gt;&gt;();
  readonly selectedItem = computed&lt;WritableSignal&lt;ItemModel | undefined&gt;&gt;(() =&gt; signal(this.items()[0]));

  pickItem(item: ItemModel) {
    this.selectedItem().set(item);
  }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Comme tu peux le voir, la valeur <code>computed</code> retourne un signal qui représente l&#8217;élément sélectionné
(au lieu de retourner une valeur directement comme c&#8217;est habituellement le cas).
À chaque fois que la liste d&#8217;éléments change, la fonction <code>computed</code> est réévaluée,
et retourne un nouveau signal qui représente l&#8217;élément sélectionné.
Le désavantage de cette solution est que nous devons utiliser <code>selectedItem()()</code> pour lire la valeur,
ou <code>selectedItem().set()</code> pour la mettre à jour, ce qui est un peu moche.</p>
</div>
<div class="paragraph">
<p>C&#8217;est là que nous pouvons utiliser un <code>linkedSignal</code>&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="typescript">export class ItemListComponent {
  readonly items = input.required&lt;Array&lt;ItemModel&gt;&gt;();
  // ✅ This is recommended
  readonly selectedItem: WritableSignal&lt;ItemModel&gt; = linkedSignal(() =&gt; this.items()[0]);</code></pre>
</div>
</div>
<div class="paragraph">
<p>A <code>linkedSignal</code> is a <code>WritableSignal</code>, but its value can be reset thanks to a computation.
Un <code>linkedSignal</code> est un <code>WritableSignal</code>, mais sa valeur peut être réinitialisée grâce à une fonction, comme un <code>computed</code>.
Si les <code>items</code> changent,
alors la computation sera ré-exécutée et la valeur du signal sera mise à jour avec le résultat.</p>
</div>
<div class="paragraph">
<p>C&#8217;est un concept puissant, car il nous permet de définir un signal qui dépend d&#8217;un autre signal,
comme un <em>computed</em>, mais avec la possibilité de lui écrire une valeur (une sorte de "computed modifiable").</p>
</div>
<div class="paragraph">
<p>La computation peut bien sûr dépendre de plusieurs signaux.
Ici, <code>selectedItem</code> est réinitialisé quand l&#8217;input <code>items</code> change, mais aussi quand l&#8217;input <code>enabled</code> change.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="typescript">export class ItemListComponent {
  readonly items = input.required&lt;Array&lt;ItemModel&gt;&gt;();
  readonly enabled = input.required&lt;boolean&gt;();
  // recomputes if `enabled` or `items` change
  readonly selectedItem = linkedSignal(() =&gt; (this.enabled() ? this.items()[0] : undefined));</code></pre>
</div>
</div>
<div class="paragraph">
<p>Note que tu peux utiliser la valeur précédente du signal source dans la fonction de calcul si tu en as besoin.
Par exemple, si tu veux accéder à l&#8217;ancienne valeur de <code>items</code> pour la comparer avec la nouvelle,
Tu peux déclarer le <code>linkedSignal</code> avec les options <code>source</code> et <code>computation</code>.
Dans ce cas, la fonction de calcul reçoit les valeurs actuelle et précédente de la source en tant que paramètres.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="typescript">export class ItemListComponent {
  readonly items = input.required&lt;Array&lt;ItemModel&gt;&gt;();
  readonly selectedItem = linkedSignal&lt;/* source */ Array&lt;ItemModel&gt;, /* value */ ItemModel&gt;({
    source: this.items,
    computation: (items, previous) =&gt; {
      // pick the item the user selected if it's still in the new item list
      if (previous !== undefined) {
        const previousChoice = previous.value; // previous.source contains the previous items
        if (items.map(item =&gt; item.name).includes(previousChoice.name)) {
          return previousChoice;
        }
      }
      return items[0];
    }
  });</code></pre>
</div>
</div>
<div class="paragraph">
<p>Tu peux également définir une fonction d&#8217;égalité personnalisée pour décider si le signal a changé avec l&#8217;option <code>equal</code>.</p>
</div>
</div>
<div class="sect2">
<h3 id="_ressources_asynchrones_avec_resource_et_rxresource">28.8. Ressources asynchrones avec <code>resource</code> et <code>rxResource</code></h3>
<div class="paragraph">
<p>En Angular v19, une nouvelle fonctionnalité a été ajoutée pour aider avec les opérations asynchrones.
La plupart des applications ont besoin de récupérer des données depuis un serveur,
dépendant de certains paramètres, et afficher le résultat dans l&#8217;interface utilisateur&#160;:
<code>resource</code> est là pour ça.</p>
</div>
<div class="paragraph">
<p>Cette API est expérimentale, et passera bientôt par un processus de RFC&#160;:
on ne te conseille pas de l&#8217;utiliser pour le moment.</p>
</div>
<div class="paragraph">
<p>Cette fonction <code>resource()</code> prend un objet avec une fonction <code>loader</code> obligatoire qui retourne une promesse&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="typescript">list(): ResourceRef&lt;Array&lt;UserModel&gt; | undefined&gt; {
  return resource({
    loader: async () =&gt; {
      const response = await fetch('/users');
      return (await response.json()) as Array&lt;UserModel&gt;;
    }
  });
}</code></pre>
</div>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
Cet exemple n&#8217;utilise pas le client HTTP, mais la fonction native <code>fetch()</code>, qui retourne une promesse.
En effet, la fonction <code>resource()</code> n&#8217;est pas liée à RxJS,
et peut donc utiliser n&#8217;importe quel client qui retourne des promesses.
<code>rxResource</code>, dont nous parlerons dans quelques instants,
est l&#8217;alternative à <code>resource</code> qui peut être utilisée avec un client basé sur des observables.
C&#8217;est un autre exemple du découplage en cours entre Angular et RxJS,
tout en fournissant toujours des fonctions d&#8217;interopérabilité te permettant de l&#8217;utiliser.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Tu peux également définir une option <code>defaultValue</code> qui sera utilisée comme valeur initiale de la ressource
(au lieu de <code>undefined</code> par défaut).</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="typescript">return resource({
  defaultValue: [],
  loader: async () =&gt; {
    const response = await fetch('/users');
    return (await response.json()) as Array&lt;UserModel&gt;;
  }
});</code></pre>
</div>
</div>
<div class="paragraph">
<p><code>resource()</code> retourne une <code>ResourceRef</code>, un objet contenant&#160;:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>un signal <code>isLoading</code> qui indique si la ressource est en cours de chargement&#160;;</p>
</li>
<li>
<p>un signal <code>error</code> qui contient l&#8217;erreur si la promesse est rejetée&#160;;</p>
</li>
<li>
<p>un signal <code>value</code> qui contient la valeur de la ressource si la promesse est résolue&#160;;</p>
</li>
<li>
<p>un signal <code>status</code> qui contient le statut de la ressource.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Tu peux ensuite utiliser ces signaux dans ton template&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="html">@if (usersResource.isLoading()) {
  &lt;p&gt;Loading...&lt;/p&gt;
} @else {
  &lt;ul&gt;
    @for (user of usersResource.value(); track user.id) {
      &lt;li&gt;{{ user.name }}&lt;/li&gt;
    }
  &lt;/ul&gt;
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Le signal <code>status</code> peut être&#160;:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>ResourceStatus.Idle</code>, l&#8217;état initial&#160;;</p>
</li>
<li>
<p><code>ResourceStatus.Loading</code>, quand la promesse est en attente&#160;;</p>
</li>
<li>
<p><code>ResourceStatus.Error</code>, quand la promesse est rejetée&#160;;</p>
</li>
<li>
<p><code>ResourceStatus.Resolved</code>, quand la promesse est résolue&#160;;</p>
</li>
<li>
<p><code>ResourceStatus.Reloading</code>, quand la ressource est rechargée&#160;;</p>
</li>
<li>
<p><code>ResourceStatus.Local</code>, quand la valeur est définie localement.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>La ressource a également une méthode <code>reload</code> qui te permet de recharger la ressource.
Dans ce cas, son statut sera <code>ResourceStatus.Reloading</code>.</p>
</div>
<div class="paragraph">
<p>Mais le rechargement peut également être automatique, grâce à l&#8217;option <code>request</code>.
Quand elle est fournie, la ressource se rechargera automatiquement si l&#8217;un des signaux utilisés dans la <code>request</code> change.
Ici, par exemple, le composant a une option <code>sortOrder</code> qui est utilisée dans la requête&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="typescript">readonly sortOrder = signal&lt;'asc' | 'desc'&gt;('asc');
readonly usersResource = resource({
  // 👇 The `sortOrder` signal is used to trigger a reload
  request: () =&gt; ({ sort: this.sortOrder() }),
  loader: async params =&gt; {
    // 👇 Params also contains the `abortSignal` to cancel the request
    // and the previous status of the resource
    // here we are only interested in the request
    const request = params.request;
    const response = await fetch(`/users?sort=${request.sort}`);
    return (await response.json()) as Array&lt;UserModel&gt;;
  }
});</code></pre>
</div>
</div>
<div class="paragraph">
<p>Si le signal <code>sortOrder</code> change, la ressource se rechargera automatiquement&#160;!
Tu peux aussi annuler la requête précédente si nécessaire quand la ressource est rechargée
en utilisant le paramètre <a href="https://developer.mozilla.org/en-US/docs/Web/API/AbortSignal"><code>abortSignal</code></a> du <code>loader</code>.
(par exemple pour implémenter un <em>debounce</em>).
Tu peux aussi choisir d&#8217;ignorer la requête de rechargement
et ainsi conserver la valeur actuelle en retournant <code>undefined</code> de la fonction <code>request</code>.</p>
</div>
<div class="paragraph">
<p>Enfin, la <code>ResourceRef</code> retournée est en fait modifiable.
Tu peux utiliser ses méthodes <code>set</code> ou <code>update</code> pour changer la valeur de la ressource
(sur la <code>value</code> ou sur la ressource elle-même, les deux fonctionnent).
Dans ce cas, son statut sera <code>ResourceStatus.Local</code>.
Si tu es seulement intéressé par la lecture de la ressource,
tu peux utiliser la méthode <code>asReadonly</code> pour en obtenir une version en lecture seule.</p>
</div>
<div class="paragraph">
<p>Enfin, la <code>ResourceRef</code> a une méthode <code>destroy</code> qui peut être utilisée pour arrêter la ressource.</p>
</div>
<div class="paragraph">
<p>Angular v19.2 a ajouté la possibilité de créer des ressources avec un stream de données en réponse.
Une ressource "streamée" est définie avec une option <code>stream</code> au lieu de <code>loader</code>.
Cette fonction <code>stream</code> doit retourner une promesse d&#8217;un signal
(oui, j&#8217;ai dû le lire deux fois aussi).
La valeur du signal est de type <code>ResourceStreamItem</code>&#160;:
un objet avec une propriété <code>value</code> ou <code>error</code>.
Une fois que la promesse est résolue,
le loader peut continuer à mettre à jour ce signal au fil du temps,
et la ressource mettra à jour sa valeur et son erreur en fonction de la dernière valeur du signal.</p>
</div>
<div class="paragraph">
<p>On peut imaginer construire ce stream soi-même, en utilisant les WebSockets par exemple.
On peut aussi imaginer que certaines bibliothèques comme Firebase pourraient fournir une fonction directement utilisable&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="typescript">list(): ResourceRef&lt;Array&lt;UserModel&gt; | undefined&gt; {
  return resource({
    // firebaseCollection does not exist in real-life
    stream: async ({ abortSignal }) =&gt; await firebaseCollection('users', abortSignal)
  });
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Maintenant, voyons comment nous pouvons utiliser une ressource basée sur des observables au lieu des promesses.</p>
</div>
<div class="paragraph">
<p>Tu peux utiliser la fonction <code>rxResource()</code> dans ce cas.
Cette fonction est très similaire à <code>resource()</code>,
mais son loader doit retourner un observable au lieu d&#8217;une promesse.
Cela te permet d&#8217;utiliser notre bon vieux service <code>HttpClient</code> pour récupérer des données depuis un serveur,
en utilisant tous tes intercepteurs, gestion des erreurs, etc&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="typescript">readonly sortOrder = signal&lt;'asc' | 'desc'&gt;('asc');
readonly usersResource = rxResource({
  request: () =&gt; ({ sort: this.sortOrder() }),
  // 👇 RxJS powered loader
  loader: ({ request }) =&gt; this.httpClient.get&lt;Array&lt;UserModel&gt;&gt;('/users', { params: { sort: request.sort } })
});</code></pre>
</div>
</div>
<div class="paragraph">
<p>Note que la fonction <code>rxResource()</code> est dans le package <code>@angular/core/rxjs-interop</code>,
alors que la fonction <code>resource()</code> est dans <code>@angular/core</code>.
Tu peux avoir un flux de valeurs
en retournant un observable qui émet plusieurs fois,
et la ressource sera mise à jour à chaque nouvelle valeur émise&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="typescript">readonly sortOrder = signal&lt;'asc' | 'desc'&gt;('asc');
readonly usersResource = rxResource({
  request: () =&gt; ({ sort: this.sortOrder() }),
  // 👇 stream that fetches the value now and every 10s
  loader: ({ request }) =&gt;
    timer(0, 10000).pipe(
      switchMap(() =&gt; this.httpClient.get&lt;Array&lt;UserModel&gt;&gt;('/users', { params: { sort: request.sort } }))
    )
});</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_appels_http_avec_httpresource">28.9. Appels HTTP avec <code>httpResource</code></h3>
<div class="paragraph">
<p>Angular v19.2 a introduit une fonction dédiée (et expérimentale)
pour créer des ressources qui utilisent des requêtes HTTP&#160;:
<code>httpResource()</code> dans le package <code>@angular/common/http</code>.</p>
</div>
<div class="paragraph">
<p>Cette fonction utilise <code>HttpClient</code> sous le capot,
permettant ainsi d&#8217;utiliser nos intercepteurs habituels, utilitaires de test, etc.</p>
</div>
<div class="paragraph">
<p>L&#8217;utilisation la plus simple est d&#8217;appeler cette fonction avec l&#8217;URL
depuis laquelle tu veux récupérer des données&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="typescript">readonly usersResource = httpResource&lt;Array&lt;UserModel&gt;&gt;('/users');</code></pre>
</div>
</div>
<div class="paragraph">
<p><code>httpResource()</code> renvoie une <code>HttpResourceRef</code> avec les mêmes propriétés que <code>ResourceRef</code>,
le type retourné par <code>resource()</code>,
car il est construit à partir de celui-ci&#160;:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>value</code> est un signal qui contient le corps de la réponse JSON désérialisé&#160;;</p>
</li>
<li>
<p><code>status</code> est un signal qui contient le statut de la ressource (idle, loading, error, resolved, etc.)&#160;;</p>
</li>
<li>
<p><code>error</code> est un signal qui contient l&#8217;erreur si la requête échoue&#160;;</p>
</li>
<li>
<p><code>isLoading</code> est un signal qui indique si la ressource est en cours de chargement&#160;;</p>
</li>
<li>
<p><code>reload()</code> est une méthode qui te permet de recharger la ressource&#160;;</p>
</li>
<li>
<p><code>update()</code> et <code>set()</code> sont des méthodes qui te permettent de changer la valeur de la ressource&#160;;</p>
</li>
<li>
<p><code>asReadonly()</code> est une méthode qui te permet d&#8217;obtenir une version en lecture seule de la ressource&#160;;</p>
</li>
<li>
<p><code>hasValue()</code> est une méthode qui te permet de savoir si la ressource a une valeur&#160;;</p>
</li>
<li>
<p><code>destroy()</code> est une méthode qui te permet d&#8217;arrêter la ressource.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Ce type contient également quelques propriétés supplémentaires spécifiques aux ressources HTTP&#160;:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>statusCode</code> est un signal qui contient le code de statut de la réponse sous forme de nombre&#160;;</p>
</li>
<li>
<p><code>headers</code> est un signal qui contient les en-têtes de la réponse sous forme de <code>HttpHeaders</code>&#160;;</p>
</li>
<li>
<p><code>progress</code> est un signal qui contient la progression du téléchargement de la réponse sous forme de <code>HttpProgressEvent</code>.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Il est également possible de définir une ressource réactive
en utilisant une fonction qui retourne la requête en tant que paramètre.
Si la fonction utilise un signal, la ressource se rechargera automatiquement quand le signal changera&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="typescript">readonly sortOrder = signal&lt;'asc' | 'desc'&gt;('asc');
readonly sortedUsersResource = httpResource&lt;Array&lt;UserModel&gt;&gt;(() =&gt; `/users?sort=${this.sortOrder()}`);</code></pre>
</div>
</div>
<div class="paragraph">
<p>Quand tu utilises une requête réactive,
la ressource se rechargera automatiquement quand un signal utilisé dans la requête changera.
Si tu veux éviter le rechargement,
tu peux retourner <code>undefined</code> depuis la fonction de requête (comme pour <code>resource</code>).</p>
</div>
<div class="paragraph">
<p>Si tu as besoin d&#8217;un contrôle plus fin sur la requête,
tu peux également passer un objet <code>HttpResourceRequest</code> à la fonction <code>httpResource()</code>,
ou à une fonction qui retourne un objet <code>HttpResourceRequest</code> si tu veux rendre la requête réactive.</p>
</div>
<div class="paragraph">
<p>Cet objet doit avoir une propriété <code>url</code>
et peut avoir d&#8217;autres options comme <code>method</code> (<code>GET</code> par défaut), <code>params</code>, <code>headers</code>, <code>reportProgress</code>, etc.
Si tu veux rendre la requête réactive, tu peux utiliser des signaux dans les propriétés <code>url</code>, <code>params</code> ou <code>headers</code>.</p>
</div>
<div class="paragraph">
<p>L&#8217;exemple ci-dessus ressemblerait alors à&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="typescript">readonly sortedUsersResource = httpResource&lt;Array&lt;UserModel&gt;&gt;(() =&gt; ({
  url: `/users`,
  params: { sort: this.sortOrder() },
  headers: new HttpHeaders({ 'X-Custom-Header': this.customHeader() })
}));</code></pre>
</div>
</div>
<div class="paragraph">
<p>Tu peux bien sûr envoyer un contenu avec la requête, par exemple pour une requête <code>POST</code>/<code>PUT</code>,
en utilisant la propriété <code>body</code> de l&#8217;objet de requête.
Note que, comme nous créons la ressource dans une méthode,
nous devons passer l'`injector` dans les options en tant que deuxième argument&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="typescript">private readonly injector = inject(Injector);
filterUsersResource: HttpResourceRef&lt;UserModel | undefined&gt; | undefined;

filterUsers() {
  this.filterUsersResource = httpResource&lt;UserModel&gt;(
    {
      url: `/users`,
      method: 'POST',
      body: {
        name: 'JB'
      }
    },
    {
      injector: this.injector
    }
  );</code></pre>
</div>
</div>
<div class="paragraph">
<p>Dans ces options, tu peux également définir&#160;:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>defaultValue</code>, la valeur par défaut de la ressource à utiliser quand elle est en attente, en erreur, ou en idle&#160;;</p>
</li>
<li>
<p>une fonction <code>equal</code> qui définit l&#8217;égalité de deux valeurs&#160;;</p>
</li>
<li>
<p>une fonction <code>map</code> qui te permet de transformer la réponse avant de la mettre dans la ressource.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Il est également possible de demander autre chose que du JSON,
et en utilisant les fonctions <code>httpResource.text()</code>, <code>httpResource.blob()</code> ou <code>httpResource.arrayBuffer()</code>.</p>
</div>
<div class="paragraph">
<p>Certains d&#8217;entre vous ont peut-être un sentiment de déjà vu avec tout cela,
car c&#8217;est assez similaire à la bibliothèque <a href="https://tanstack.com/query/">TanStack Query</a>.
Je tiens à insister sur le fait que cette API est expérimentale et que cela évoluera probablement à l&#8217;avenir.
Il est également probable qu&#8217;elle soit utilisée par des APIs ou des bibliothèques de plus haut niveau.
Voyons ce que le processus de RFC nous apportera&#160;!</p>
</div>
<div style="page-break-after: always;"></div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="defer">29. Chargement différé avec <code>@defer</code></h2>
<div class="sectionbody">
<div class="paragraph">
<p>Avec l&#8217;introduction de la syntaxe <em>control flow</em>,
l&#8217;équipe Angular a aussi ajouté une nouvelle façon de charger des composants de façon différée
(pour l&#8217;instant expérimentale).
Nous avons déjà du lazy-loading dans Angular, mais il est principalement basé sur le router.</p>
</div>
<div class="paragraph">
<p>Angular v17 ajoute une nouvelle façon de charger des composants de façon différée, en utilisant la syntaxe <code>@defer</code> dans tes templates.</p>
</div>
<div class="paragraph">
<p><code>@defer</code> te permet de définir un bloc de template qui sera chargé de façon différée quand une des conditions est remplie
(avec tous les composants, pipes, directives, librairies utilisés dans ce bloc chargés de façon différée aussi).
Il y a plusieurs conditions qui peuvent être utilisées.
Par exemple, ça peut être "dès que possible (pas de condition)",
"quand l&#8217;utilisateur scrolle jusqu&#8217;à cette section",
"quand l&#8217;utilisateur clique sur ce bouton" ou "après 2 secondes".</p>
</div>
<div class="paragraph">
<p>Disons que ta page d&#8217;accueil affiche un <code>ChartComponent</code> "lourd" qui utilise une librairie de graphiques
et d&#8217;autres dépendances, comme un <em>pipe</em> <code>FromNow</code>&#160;:</p>
</div>
<div class="listingblock">
<div class="title">chart.component.ts</div>
<div class="content">
<pre class="prettyprint highlight"><code data-lang="typescript">@Component({
  selector: 'ns-chart',
  template: '...',
  imports: [FromNowPipe],
})
export class ChartComponent {
  // uses chart.js
}</code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">home.component.ts</div>
<div class="content">
<pre class="prettyprint highlight"><code data-lang="typescript">import { ChartComponent } from './chart.component';

@Component({
  selector: 'ns-home',
  template: `
    &lt;!-- some content --&gt;
    &lt;ns-chart /&gt;
  `,
  imports: [ChartComponent]
})
export class HomeComponent {
  // ...
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Quand l&#8217;application est construite, le <code>ChartComponent</code> est inclus dans le bundle principal&#160;:</p>
</div>
<div class="imageblock text-center">
<div class="content">
<img src="data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0nMS4wJyBlbmNvZGluZz0nVVRGLTgnPz48c3ZnIGhlaWdodD0nMTY4JyBwcmVzZXJ2ZUFzcGVjdFJhdGlvPSd4TWlkWU1pZCBtZWV0JyBzaGFwZS1yZW5kZXJpbmc9J2dlb21ldHJpY1ByZWNpc2lvbicgdmVyc2lvbj0nMS4wJyB2aWV3Qm94PScwIDAgMzEwIDE2OCcgd2lkdGg9JzMxMCcgeG1sbnM9J2h0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnJz48ZGVmcz48ZmlsdGVyIGhlaWdodD0nMjAwJScgaWQ9J3NoYWRvd0JsdXInIHdpZHRoPScyMDAlJyB4PScwJyB5PScwJz48ZmVPZmZzZXQgZHg9JzMuMDAwMzAwMicgZHk9JzMuMDAwMzAwMicgaW49J1NvdXJjZUdyYXBoaWMnIHJlc3VsdD0nb2ZmT3V0Jy8+PGZlR2F1c3NpYW5CbHVyIGluPSdvZmZPdXQnIHN0ZERldmlhdGlvbj0nMycvPjwvZmlsdGVyPjwvZGVmcz48ZyBzdHJva2UtbGluZWNhcD0nc3F1YXJlJyBzdHJva2UtbGluZWpvaW49J3JvdW5kJyBzdHJva2Utd2lkdGg9JzEnPjxyZWN0IGhlaWdodD0nMTY4JyBzdHlsZT0nZmlsbDogI2ZmZmZmZicgd2lkdGg9JzMxMCcgeD0nMCcgeT0nMCcvPjxwYXRoIGQ9J00zNS4wIDYzLjAgTDI4NS4wIDYzLjAgTDI4NS4wIDEzMy4wIEwzNS4wIDEzMy4wIHonIGZpbGw9JyM5Njk2OTYnIGZpbHRlcj0ndXJsKCNzaGFkb3dCbHVyKScgc3Ryb2tlPScjOTY5Njk2Jy8+PHBhdGggZD0nTTM1LjAgMzUuMCBMMjg1LjAgMzUuMCBMMjg1LjAgNjMuMCBMMzUuMCA2My4wIHonIGZpbGw9JyM5Njk2OTYnIGZpbHRlcj0ndXJsKCNzaGFkb3dCbHVyKScgc3Ryb2tlPScjOTY5Njk2Jy8+PHBhdGggZD0nTTM1LjAgNjMuMCBMMjg1LjAgNjMuMCBMMjg1LjAgMTMzLjAgTDM1LjAgMTMzLjAgeicgZmlsbD0nd2hpdGUnIHN0cm9rZT0nIzAwMDAwMCcgc3Ryb2tlLWxpbmVjYXA9J3JvdW5kJyBzdHJva2UtbGluZWpvaW49J3JvdW5kJyBzdHJva2Utd2lkdGg9JzEuMCcvPjxwYXRoIGQ9J00zNS4wIDM1LjAgTDI4NS4wIDM1LjAgTDI4NS4wIDYzLjAgTDM1LjAgNjMuMCB6JyBmaWxsPSd3aGl0ZScgc3Ryb2tlPScjMDAwMDAwJyBzdHJva2UtbGluZWNhcD0ncm91bmQnIHN0cm9rZS1saW5lam9pbj0ncm91bmQnIHN0cm9rZS13aWR0aD0nMS4wJy8+PHBhdGggZD0nTTE5MC4wIDQ5LjAgTDE5OS4wIDQ5LjAgJyBmaWxsPSdub25lJyBzdHJva2U9JyMwMDAwMDAnIHN0cm9rZS1saW5lY2FwPSdyb3VuZCcgc3Ryb2tlLWxpbmVqb2luPSdyb3VuZCcgc3Ryb2tlLXdpZHRoPScxLjAnLz48dGV4dCBmaWxsPScjMDAwMDAwJyBmb250LWZhbWlseT0nc2Fucy1zZXJpZicgZm9udC1zaXplPScxNScgc3Ryb2tlPSdub25lJyB4PSc1NicgeT0nNTQnPjwhW0NEQVRBW21haW7igJB4eHh4LmpzXV0+PC90ZXh0Pjx0ZXh0IGZpbGw9JyMwMDAwMDAnIGZvbnQtZmFtaWx5PSdzYW5zLXNlcmlmJyBmb250LXNpemU9JzEzJyBzdHJva2U9J25vbmUnIHg9JzIyMicgeT0nNTQnPjwhW0NEQVRBWzMwMEtCXV0+PC90ZXh0Pjx0ZXh0IGZpbGw9JyMwMDAwMDAnIGZvbnQtZmFtaWx5PSdzYW5zLXNlcmlmJyBmb250LXNpemU9JzE1JyBzdHJva2U9J25vbmUnIHg9JzUwJyB5PSc4Mic+PCFbQ0RBVEFbaG9tZS5jb21wb25lbnQudHNdXT48L3RleHQ+PHRleHQgZmlsbD0nIzAwMDAwMCcgZm9udC1mYW1pbHk9J3NhbnMtc2VyaWYnIGZvbnQtc2l6ZT0nMTUnIHN0cm9rZT0nbm9uZScgeD0nNTAnIHk9Jzk2Jz48IVtDREFUQVtjaGFydC5jb21wb25lbnQudHNdXT48L3RleHQ+PHRleHQgZmlsbD0nIzAwMDAwMCcgZm9udC1mYW1pbHk9J3NhbnMtc2VyaWYnIGZvbnQtc2l6ZT0nMTUnIHN0cm9rZT0nbm9uZScgeD0nNTAnIHk9JzExMCc+PCFbQ0RBVEFbZnJvbeKAkG5vdy5waXBlLnRzXV0+PC90ZXh0Pjx0ZXh0IGZpbGw9JyMwMDAwMDAnIGZvbnQtZmFtaWx5PSdzYW5zLXNlcmlmJyBmb250LXNpemU9JzE1JyBzdHJva2U9J25vbmUnIHg9JzUwJyB5PScxMjQnPjwhW0NEQVRBW2NoYXJ0LmpzXV0+PC90ZXh0PjwvZz48L3N2Zz4=" alt="no defer" width="310" height="168">
</div>
</div>
<div class="paragraph">
<p>Peut-être que le composant n&#8217;est pas visible au début sur la page d&#8217;accueil,
parce qu&#8217;il est en bas de la page, ou parce qu&#8217;il est dans un onglet qui n&#8217;est pas actif.
Il n&#8217;est pas utile de charger ce composant de façon immédiate,
car cela ralentira le chargement initial de la page.</p>
</div>
<div class="paragraph">
<p>Avec <code>@defer</code>, tu peux charger ce composant seulement quand l&#8217;utilisateur en a vraiment besoin.
Envelopper le <code>ChartComponent</code> dans un bloc <code>@defer</code> permet de résoudre le problème&#160;:</p>
</div>
<div class="listingblock">
<div class="title">home.component.ts</div>
<div class="content">
<pre class="prettyprint highlight"><code data-lang="typescript">import { ChartComponent } from './chart.component';

@Component({
  selector: 'ns-home',
  template: `
    &lt;!-- some content --&gt;
    @defer (when isVisible) {
      &lt;ns-chart /&gt;
    }
  `,
  imports: [ChartComponent]
})</code></pre>
</div>
</div>
<div class="paragraph">
<p>Le compilateur Angular va transformer l&#8217;import statique du <code>ChartComponent</code>
en un import dynamique (<code>() &#8658; import('./chart.component')</code>),
et le composant sera chargé seulement quand la condition est remplie.
Comme le composant est maintenant importé de façon dynamique,
il ne sera pas inclus dans le bundle principal,
et le bundler va créer un nouveau chunk pour lui&#160;:</p>
</div>
<div class="imageblock text-center">
<div class="content">
<img src="data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0nMS4wJyBlbmNvZGluZz0nVVRGLTgnPz48c3ZnIGhlaWdodD0nMTgyJyBwcmVzZXJ2ZUFzcGVjdFJhdGlvPSd4TWlkWU1pZCBtZWV0JyBzaGFwZS1yZW5kZXJpbmc9J2dlb21ldHJpY1ByZWNpc2lvbicgdmVyc2lvbj0nMS4wJyB2aWV3Qm94PScwIDAgNjUwIDE4Micgd2lkdGg9JzY1MCcgeG1sbnM9J2h0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnJz48ZGVmcz48ZmlsdGVyIGhlaWdodD0nMjAwJScgaWQ9J3NoYWRvd0JsdXInIHdpZHRoPScyMDAlJyB4PScwJyB5PScwJz48ZmVPZmZzZXQgZHg9JzMuMDAwMzAwMicgZHk9JzMuMDAwMzAwMicgaW49J1NvdXJjZUdyYXBoaWMnIHJlc3VsdD0nb2ZmT3V0Jy8+PGZlR2F1c3NpYW5CbHVyIGluPSdvZmZPdXQnIHN0ZERldmlhdGlvbj0nMycvPjwvZmlsdGVyPjwvZGVmcz48ZyBzdHJva2UtbGluZWNhcD0nc3F1YXJlJyBzdHJva2UtbGluZWpvaW49J3JvdW5kJyBzdHJva2Utd2lkdGg9JzEnPjxyZWN0IGhlaWdodD0nMTgyJyBzdHlsZT0nZmlsbDogI2ZmZmZmZicgd2lkdGg9JzY1MCcgeD0nMCcgeT0nMCcvPjxwYXRoIGQ9J00zNjUuMCA5MS4wIEw2MjUuMCA5MS4wIEw2MjUuMCAxNDcuMCBMMzY1LjAgMTQ3LjAgeicgZmlsbD0nIzk2OTY5NicgZmlsdGVyPSd1cmwoI3NoYWRvd0JsdXIpJyBzdHJva2U9JyM5Njk2OTYnLz48cGF0aCBkPSdNMzY1LjAgNjMuMCBMNjI1LjAgNjMuMCBMNjI1LjAgOTEuMCBMMzY1LjAgOTEuMCB6JyBmaWxsPScjOTY5Njk2JyBmaWx0ZXI9J3VybCgjc2hhZG93Qmx1ciknIHN0cm9rZT0nIzk2OTY5NicvPjxwYXRoIGQ9J00zNS4wIDM1LjAgTDI4NS4wIDM1LjAgTDI4NS4wIDYzLjAgTDM1LjAgNjMuMCB6JyBmaWxsPScjOTY5Njk2JyBmaWx0ZXI9J3VybCgjc2hhZG93Qmx1ciknIHN0cm9rZT0nIzk2OTY5NicvPjxwYXRoIGQ9J00zNS4wIDYzLjAgTDI4NS4wIDYzLjAgTDI4NS4wIDkxLjAgTDM1LjAgOTEuMCB6JyBmaWxsPScjOTY5Njk2JyBmaWx0ZXI9J3VybCgjc2hhZG93Qmx1ciknIHN0cm9rZT0nIzk2OTY5NicvPjxwYXRoIGQ9J00zNjUuMCA5MS4wIEw2MjUuMCA5MS4wIEw2MjUuMCAxNDcuMCBMMzY1LjAgMTQ3LjAgeicgZmlsbD0nd2hpdGUnIHN0cm9rZT0nIzAwMDAwMCcgc3Ryb2tlLWxpbmVjYXA9J3JvdW5kJyBzdHJva2UtbGluZWpvaW49J3JvdW5kJyBzdHJva2Utd2lkdGg9JzEuMCcvPjxwYXRoIGQ9J00zNjUuMCA2My4wIEw2MjUuMCA2My4wIEw2MjUuMCA5MS4wIEwzNjUuMCA5MS4wIHonIGZpbGw9J3doaXRlJyBzdHJva2U9JyMwMDAwMDAnIHN0cm9rZS1saW5lY2FwPSdyb3VuZCcgc3Ryb2tlLWxpbmVqb2luPSdyb3VuZCcgc3Ryb2tlLXdpZHRoPScxLjAnLz48cGF0aCBkPSdNMzUuMCAzNS4wIEwyODUuMCAzNS4wIEwyODUuMCA2My4wIEwzNS4wIDYzLjAgeicgZmlsbD0nd2hpdGUnIHN0cm9rZT0nIzAwMDAwMCcgc3Ryb2tlLWxpbmVjYXA9J3JvdW5kJyBzdHJva2UtbGluZWpvaW49J3JvdW5kJyBzdHJva2Utd2lkdGg9JzEuMCcvPjxwYXRoIGQ9J00zNS4wIDYzLjAgTDI4NS4wIDYzLjAgTDI4NS4wIDkxLjAgTDM1LjAgOTEuMCB6JyBmaWxsPSd3aGl0ZScgc3Ryb2tlPScjMDAwMDAwJyBzdHJva2UtbGluZWNhcD0ncm91bmQnIHN0cm9rZS1saW5lam9pbj0ncm91bmQnIHN0cm9rZS13aWR0aD0nMS4wJy8+PHBhdGggZD0nTTM1MC4wIDcwLjAgTDM2MC4wIDc3LjAgTDM1MC4wIDg0LjAgeicgZmlsbD0nIzAwMDAwMCcgc3Ryb2tlPSdub25lJyBzdHJva2UtbGluZWNhcD0ncm91bmQnIHN0cm9rZS1saW5lam9pbj0ncm91bmQnIHN0cm9rZS13aWR0aD0nMS4wJy8+PHBhdGggZD0nTTE5MC4wIDQ5LjAgTDE5OS4wIDQ5LjAgJyBmaWxsPSdub25lJyBzdHJva2U9JyMwMDAwMDAnIHN0cm9rZS1saW5lY2FwPSdyb3VuZCcgc3Ryb2tlLWxpbmVqb2luPSdyb3VuZCcgc3Ryb2tlLXdpZHRoPScxLjAnLz48cGF0aCBkPSdNNTIwLjAgNzcuMCBMNTI5LjAgNzcuMCAnIGZpbGw9J25vbmUnIHN0cm9rZT0nIzAwMDAwMCcgc3Ryb2tlLWxpbmVjYXA9J3JvdW5kJyBzdHJva2UtbGluZWpvaW49J3JvdW5kJyBzdHJva2Utd2lkdGg9JzEuMCcvPjxwYXRoIGQ9J00yOTUuMCA3Ny4wIEwzNTUuMCA3Ny4wICcgZmlsbD0nbm9uZScgc3Ryb2tlPScjMDAwMDAwJyBzdHJva2UtbGluZWNhcD0ncm91bmQnIHN0cm9rZS1saW5lam9pbj0ncm91bmQnIHN0cm9rZS13aWR0aD0nMS4wJy8+PHRleHQgZmlsbD0nIzAwMDAwMCcgZm9udC1mYW1pbHk9J3NhbnMtc2VyaWYnIGZvbnQtc2l6ZT0nMTUnIHN0cm9rZT0nbm9uZScgeD0nNTYnIHk9JzU0Jz48IVtDREFUQVttYWlu4oCQeHh4eC5qc11dPjwvdGV4dD48dGV4dCBmaWxsPScjMDAwMDAwJyBmb250LWZhbWlseT0nc2Fucy1zZXJpZicgZm9udC1zaXplPScxMycgc3Ryb2tlPSdub25lJyB4PScyMjInIHk9JzU0Jz48IVtDREFUQVsxMDBLQl1dPjwvdGV4dD48dGV4dCBmaWxsPScjMDAwMDAwJyBmb250LWZhbWlseT0nc2Fucy1zZXJpZicgZm9udC1zaXplPScxNScgc3Ryb2tlPSdub25lJyB4PSc1MicgeT0nODInPjwhW0NEQVRBW2hvbWUuY29tcG9uZW50LnRzXV0+PC90ZXh0Pjx0ZXh0IGZpbGw9JyMwMDAwMDAnIGZvbnQtZmFtaWx5PSdzYW5zLXNlcmlmJyBmb250LXNpemU9JzE1JyBzdHJva2U9J25vbmUnIHg9JzM4NicgeT0nODInPjwhW0NEQVRBW2NodW5r4oCQeHh4eC5qc11dPjwvdGV4dD48dGV4dCBmaWxsPScjMDAwMDAwJyBmb250LWZhbWlseT0nc2Fucy1zZXJpZicgZm9udC1zaXplPScxMycgc3Ryb2tlPSdub25lJyB4PSc1NDInIHk9JzgyJz48IVtDREFUQVsyMDBLQl1dPjwvdGV4dD48dGV4dCBmaWxsPScjMDAwMDAwJyBmb250LWZhbWlseT0nc2Fucy1zZXJpZicgZm9udC1zaXplPScxNScgc3Ryb2tlPSdub25lJyB4PSczODAnIHk9JzExMCc+PCFbQ0RBVEFbY2hhcnQuY29tcG9uZW50LnRzXV0+PC90ZXh0Pjx0ZXh0IGZpbGw9JyMwMDAwMDAnIGZvbnQtZmFtaWx5PSdzYW5zLXNlcmlmJyBmb250LXNpemU9JzE1JyBzdHJva2U9J25vbmUnIHg9JzM4MCcgeT0nMTI0Jz48IVtDREFUQVtmcm9t4oCQbm93LnBpcGUudHNdXT48L3RleHQ+PHRleHQgZmlsbD0nIzAwMDAwMCcgZm9udC1mYW1pbHk9J3NhbnMtc2VyaWYnIGZvbnQtc2l6ZT0nMTUnIHN0cm9rZT0nbm9uZScgeD0nMzgwJyB5PScxMzgnPjwhW0NEQVRBW2NoYXJ0LmpzXV0+PC90ZXh0PjwvZz48L3N2Zz4=" alt="defer" width="650" height="182">
</div>
</div>
<div class="paragraph">
<p>Le fichier <code>chunk-xxxx.js</code> sera chargé seulement quand la condition est remplie,
puis le <code>ChartComponent</code> sera affiché.</p>
</div>
<div class="paragraph">
<p>Avant de parler des différentes conditions qui peuvent être utilisées avec <code>@defer</code>,
voyons comment utiliser une autre fonctionnalité intéressante&#160;:
afficher un placeholder pendant que le bloc différé est chargé.</p>
</div>
<div class="sect2">
<h3 id="_placeholder_loading_et_error">29.1. <code>@placeholder</code>, <code>@loading</code> et <code>@error</code></h3>
<div class="paragraph">
<p>Il est possible de définir un template de placeholder avec <code>@placeholder</code>
qui sera affiché jusqu&#8217;à ce que la condition de chargement soit remplie.
Ensuite, pendant que le bloc est en cours de chargement, tu peux afficher un template de chargement avec <code>@loading</code>.
S&#8217;il n&#8217;y a pas de bloc <code>@loading</code> défini, le placeholder reste affiché jusqu&#8217;à ce que le bloc soit chargé.
Tu peux aussi définir un template d&#8217;erreur avec <code>@error</code> qui sera affiché si le chargement du bloc échoue.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="html">@defer (when show()) {
  &lt;ns-chart /&gt;
} @placeholder {
  &lt;div&gt;Something until the loading starts&lt;/div&gt;
} @loading {
  &lt;div&gt;Loading...&lt;/div&gt;
} @error {
  &lt;div&gt;Something went wrong&lt;/div&gt;
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Quand on utilise un rendu côté serveur (<em>SSR</em>),
seul le placeholder sera rendu sur le serveur (les conditions de chargement ne seront jamais déclenchées).</p>
</div>
<div class="sect3">
<h4 id="_after_et_minimum">29.1.1. <code>after</code> et <code>minimum</code></h4>
<div class="paragraph">
<p>Comme le chargement du bloc <code>@defer</code> peut être assez rapide,
il y a un risque que le bloc de chargement soit affiché et masqué trop rapidement,
ce qui provoque un effet de clignotement.</p>
</div>
<div class="paragraph">
<p>Pour éviter cela, tu peux utiliser l&#8217;option <code>after</code> pour spécifier après combien de millisecondes
le chargement doit être affiché.</p>
</div>
<div class="paragraph">
<p>Si le chargement se termine avant la fin de ce délai, alors le bloc <code>@loading</code> n&#8217;est jamais affiché.</p>
</div>
<div class="paragraph">
<p>Tu peux aussi utiliser l&#8217;option <code>minimum</code> pour spécifier une durée minimum pour le chargement.
Si le chargement est plus rapide que la durée minimum,
alors le chargement sera affiché pendant la durée minimum (cela s&#8217;applique seulement si le <code>@loading</code> est affiché).</p>
</div>
<div class="paragraph">
<p>Tu peux bien sûr combiner toutes ces options&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="html">@defer (when show()) {
  &lt;ns-chart /&gt;
} @placeholder {
  &lt;div&gt;Something until the loading starts&lt;/div&gt;
} @loading (after 500ms; minimum 500ms) {
  &lt;div&gt;Loading...&lt;/div&gt;
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Le placeholder peut lui aussi avoir une durée <code>minimum</code>.
Cela peut être utile quand la condition de chargement est immédiate (par exemple, quand aucune condition n&#8217;est spécifiée).
Dans ce cas, le placeholder sera affiché pendant la durée minimum,
même si le bloc est chargé immédiatement,
pour éviter un effet de clignotement.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="html">@defer (when show()) {
  &lt;ns-chart /&gt;
} @placeholder (minimum 500ms) {
  &lt;div&gt;Something until the loading starts&lt;/div&gt;
} @loading (after 500ms; minimum 500ms) {
  &lt;div&gt;Loading...&lt;/div&gt;
}</code></pre>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_conditions">29.2. Conditions</h3>
<div class="paragraph">
<p>Il y a plusieurs conditions qui peuvent être utilisées avec <code>@defer</code>.
Examinons-les une par une.</p>
</div>
<div class="sect3">
<h4 id="_pas_de_condition_ou_on_idle">29.2.1. Pas de condition ou <code>on idle</code></h4>
<div class="paragraph">
<p>La condition la plus simple est de ne pas spécifier de condition du tout&#160;:
dans ce cas le bloc sera chargé quand le navigateur est inactif
(le chargement est planifié en utilisant <code>requestIdleCallback</code>).</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="html">@defer {
  &lt;ns-chart /&gt;
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>C&#8217;est équivalent à utiliser la condition <code>on idle</code>&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="html">@defer (on idle) {
  &lt;ns-chart /&gt;
}</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_simple_condition_booléenne_avec_when">29.2.2. Simple condition booléenne avec <code>when</code></h4>
<div class="paragraph">
<p>Tu peux aussi utiliser une condition booléenne pour charger un bloc de template avec <code>when</code>.
Ici, on affiche le bloc <code>@defer</code> seulement quand la propriété <code>show</code> du composant est vraie&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="html">@defer (when show()) {
  &lt;ns-chart /&gt;
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Note que ce n&#8217;est pas la même chose que d&#8217;utiliser <code>*ngIf</code> sur le bloc,
car le bloc ne sera pas supprimé même si la condition devient fausse plus tard.</p>
</div>
</div>
<div class="sect3">
<h4 id="_on_immediate">29.2.3. on <code>immediate</code></h4>
<div class="paragraph">
<p>La condition <code>on immediate</code> déclenche le chargement du bloc immédiatement.
Elle n&#8217;affiche pas de placeholder, même s&#8217;il y en a un.</p>
</div>
</div>
<div class="sect3">
<h4 id="_on_timer">29.2.4. on <code>timer</code></h4>
<div class="paragraph">
<p>La condition <code>on timer</code> déclenche le chargement du bloc après une durée donnée,
en utilisant <code>setTimeout</code>.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="html">@defer (on timer(2s)) {
  &lt;ns-chart /&gt;
}</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_on_hover">29.2.5. on <code>hover</code></h4>
<div class="paragraph">
<p>Les autres conditions sont basées sur des interactions utilisateur.
Ces conditions peuvent spécifier l&#8217;élément de l&#8217;interaction en utilisant une variable de référence de template,
ou ne rien spécifier pour utiliser l&#8217;élément placeholder.
Dans ce dernier cas, l&#8217;élément placeholder doit exister
et avoir un seul élément enfant qui sera utilisé comme l&#8217;élément de l&#8217;interaction.</p>
</div>
<div class="paragraph">
<p>La condition <code>on hover</code> déclenche le chargement du bloc quand l&#8217;utilisateur survole l&#8217;élément.
Les événements <code>mouseenter</code> et <code>focusin</code> sont utilisés pour détecter les interactions.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="html">&lt;span #trigger&gt;Hover me&lt;/span&gt;

@defer (on hover(trigger)) {
  &lt;ns-chart /&gt;
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>ou en utilisant l&#8217;élément placeholder&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="html">@defer (on hover) {
  &lt;ns-chart /&gt;
} @placeholder {
  &lt;span&gt;Hover me&lt;/span&gt;
}</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_on_interaction">29.2.6. on <code>interaction</code></h4>
<div class="paragraph">
<p>La condition <code>on interaction</code> déclenche le chargement du bloc quand l&#8217;utilisateur interagit avec l&#8217;élément.
L&#8217;implémentation consiste à écouter les événements <code>click</code> et <code>keydown</code>.</p>
</div>
</div>
<div class="sect3">
<h4 id="_on_viewport">29.2.7. on <code>viewport</code></h4>
<div class="paragraph">
<p>La condition <code>on viewport</code> déclenche le chargement du bloc quand l&#8217;élément devient visible à l&#8217;écran.
Sous le capot, elle utilise un <a href="https://developer.mozilla.org/fr/docs/Web/API/Intersection_Observer_API">intersection observer</a>.</p>
</div>
</div>
<div class="sect3">
<h4 id="_conditions_multiples">29.2.8. Conditions multiples</h4>
<div class="paragraph">
<p>Tu peux aussi combiner plusieurs conditions en utilisant une liste séparée par des virgules&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="html">&lt;!-- Loads if the user hovers the placeholder, or after 1 minute --&gt;
@defer (on hover, timer(60s)) {
  &lt;ns-chart /&gt;
} @placeholder {
  &lt;span&gt;Something until the loading starts&lt;/span&gt;
}</code></pre>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_pré_chargement_avec_prefetch">29.3. Pré-chargement avec <code>prefetch</code></h3>
<div class="paragraph">
<p><code>@defer</code> te permet
de séparer le chargement d&#8217;un composant de son affichage.
Tu peux utiliser les mêmes conditions que nous venons de décrire pour charger un composant avec <code>prefetch</code>,
et ensuite l&#8217;afficher avec une autre condition.</p>
</div>
<div class="paragraph">
<p>Par exemple, tu peux pré-charger le contenu avec <code>on idle</code>
et ensuite l&#8217;afficher avec <code>on interaction</code>&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="html">@defer (on interaction; prefetch on idle) {
  &lt;ns-chart /&gt;
} @placeholder {
  &lt;button&gt;Show me&lt;/button&gt;
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Note que le bloc <code>@loading</code> ne sera pas affiché si le bloc <code>@defer</code> est déjà pré-chargé
quand la condition de chargement est remplie.</p>
</div>
</div>
<div class="sect2">
<h3 id="_comment_tester_le_chargement_différé">29.4. Comment tester le chargement différé&#160;?</h3>
<div class="paragraph">
<p>Quand un composant utilise des blocs <code>@defer</code> dans son template,
il y a un peu de travail supplémentaire pour le tester.</p>
</div>
<div class="paragraph">
<p>L&#8217;API <code>TestBed</code> a été étendue pour t&#8217;aider.
La méthode <code>configureTestingModule</code> accepte maintenant une option <code>deferBlockBehavior</code>.
Par défaut, cette option est définie à <code>DeferBlockBehavior.Playthrough</code>,
ce qui signifie que les blocs <code>@defer</code> seront affichés automatiquement
quand la condition est remplie, comme ils le seraient quand l&#8217;application s&#8217;exécute dans le navigateur.</p>
</div>
<div class="paragraph">
<p>Tu peux changer ce comportement en utilisant <code>DeferBlockBehavior.Manual</code>.
<em>Manual</em> ssignifie que tu devras manuellement déclencher l&#8217;affichage des blocs <code>@defer</code>.
Mais commençons par l&#8217;option par défaut.</p>
</div>
<div class="paragraph">
<p>Dans ce cas, les blocs <code>@defer</code> seront affichés automatiquement quand la condition est remplie,
après avoir appelé <code>await fixture.whenStable()</code>.</p>
</div>
<div class="paragraph">
<p>Donc si on teste un composant avec un bloc <code>@defer</code> qui est visible après avoir cliqué sur un bouton,
on peut utiliser&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="typescript">// Click the button to trigger the deferred block
(fixture.nativeElement as HTMLElement).querySelector('button')!.click();
fixture.detectChanges();

// Wait for the deferred block to render
await fixture.whenStable();

// Check its content
const loadedBlock = (fixture.nativeElement as HTMLElement).querySelector('div')!;
expect(loadedBlock.textContent).toContain('Some lazy-loaded content');</code></pre>
</div>
</div>
<div class="paragraph">
<p>Si tu veux utiliser le comportement <code>DeferBlockBehavior.Manual</code>,
tu devras manuellement déclencher l&#8217;affichage des blocs <code>@defer</code>.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="typescript">TestBed.configureTestingModule({
  deferBlockBehavior: DeferBlockBehavior.Manual
});</code></pre>
</div>
</div>
<div class="paragraph">
<p>Pour cela, la fixture retournée par <code>TestBed.createComponent</code> a maintenant une méthode asynchrone <code>getDeferBlocks</code>
qui retourne un tableau de <code>DeferBlockFixture</code>.
Chacune de ces fixtures a une méthode <code>render</code> que tu peux appeler pour afficher le bloc
dans un état spécifique, en fournissant un paramètre <code>DeferBlockState</code>.</p>
</div>
<div class="paragraph">
<p><code>DeferBlockState</code> est une énumération avec les valeurs suivantes&#160;:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>DeferBlockState.Placeholder</code>: affiche l&#8217;état placeholder du bloc</p>
</li>
<li>
<p><code>DeferBlockState.Loading</code>: affiche l&#8217;état de chargement du bloc</p>
</li>
<li>
<p><code>DeferBlockState.Error</code>: affiche l&#8217;état d&#8217;erreur du bloc</p>
</li>
<li>
<p><code>DeferBlockState.Complete</code>: affiche le bloc <code>@defer</code> comme si le chargement était terminé</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Cela permet un contrôle fin de l&#8217;état des blocs <code>@defer</code>.
Si on veut tester le même composant qu&#8217;avant, on peut faire&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="typescript">const deferBlocks = await fixture.getDeferBlocks();
// only one defer block should be found
expect(deferBlocks.length).toBe(1);

// Render the defer block
await deferBlocks[0].render(DeferBlockState.Complete);

// Check its content
const loadedBlock = (fixture.nativeElement as HTMLElement).querySelector('div')!;
expect(loadedBlock.textContent).toContain('Some lazy-loaded content');</code></pre>
</div>
</div>
<div style="page-break-after: always;"></div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="going-to-production">30. Livrer en production</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Voilà, maintenant tu as construit une belle application,
et tu penses sérieusement à la mettre à disposition du monde entier.
Discutons donc de ce qui doit être fait pour livrer en production&#160;!</p>
</div>
<div class="sect2">
<h3 id="_environnements_et_configurations">30.1. Environnements et configurations</h3>
<div class="paragraph">
<p>Si tu utilises Angular CLI,
il est possible de définir plusieurs environnements.</p>
</div>
<div class="paragraph">
<p>Pour cela, la CLI fournit une schematic <code>environment</code>&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="bash">ng generate environments</code></pre>
</div>
</div>
<div class="paragraph">
<p>Cela génère des fichiers nommés <code>environment.ts</code> et <code>environment.development.ts</code>.</p>
</div>
<div class="paragraph">
<p>Ces fichiers contiennent un objet vide appelé <code>environment</code>,
dans lequel tu peux ajouter autant de propriétés que tu le souhaites.</p>
</div>
<div class="listingblock">
<div class="title">environment.ts</div>
<div class="content">
<pre class="prettyprint highlight"><code data-lang="javascript">export const environment = {};</code></pre>
</div>
</div>
<div class="paragraph">
<p>Tu vas ensuite seulement importer <code>environment.ts</code> dans l&#8217;application.
C&#8217;est un peu étrange, mais la CLI va ensuite utiliser le bon fichier selon l&#8217;environnement.</p>
</div>
<div class="paragraph">
<p>Quand tu sers (avec <code>ng serve</code>) ton application,
la CLI (Webpack, pour être exact) va utiliser <code>environment.development.ts</code>.</p>
</div>
<div class="paragraph">
<p>Mais tu peux aussi servir ou construire ton application avec une configuration spécifique.
Par défaut la CLI propose une autre configuration nommée <code>production</code>.</p>
</div>
<div class="paragraph">
<p>Donc, tu peux aussi exécuter <code>ng serve --configuration=production</code>.
Les différences entre ces deux configurations sont visibles dans les fichiers <code>angular.json</code>&#160;:</p>
</div>
<div class="listingblock">
<div class="title">angular.json</div>
<div class="content">
<pre class="prettyprint highlight"><code data-lang="javascript">"configurations": {
  "production": {
    "budgets": [
      {
        "type": "initial",
        "maximumWarning": "500kB",
        "maximumError": "1MB"
      },
      {
        "type": "anyComponentStyle",
        "maximumWarning": "4kB",
        "maximumError": "8kB"
      }
    ],
    "outputHashing": "all"
  },
  "development": {
    "optimization": false,
    "extractLicenses": false,
    "sourceMap": true,
    "fileReplacements": [
      {
        "replace": "src/environments/environment.ts",
        "with": "src/environments/environment.development.ts"
      }
    ]
  },</code></pre>
</div>
</div>
<div class="paragraph">
<p>Comme tu le vois, il y a une configuration <code>production</code> avec son lot de propriétés.
Les <code>budgets</code>, par exemple, vérifient que le bundle initial et les styles des composants ne sont pas trop lourds.</p>
</div>
<div class="paragraph">
<p>Il y a une propriété hyper utile dans la configuration de développement, que la schematic a ajouté&#160;: <code>fileReplacements</code>.</p>
</div>
<div class="listingblock">
<div class="title">angular.json</div>
<div class="content">
<pre class="prettyprint highlight"><code data-lang="javascript">"fileReplacements": [
  {
    "replace": "src/environments/environment.ts",
    "with": "src/environments/environment.development.ts"
  }
]</code></pre>
</div>
</div>
<div class="paragraph">
<p>Tu peux voir que le fichier <code>environment.ts</code> est remplacé par <code>environment.development.ts</code>&#160;:
c&#8217;est comme cela que Webpack sait quel fichier utiliser.</p>
</div>
<div class="paragraph">
<p>Tu vas ensuite toujours importer ces variables depuis <code>environment.ts</code> dans ton code,
et, pendant le build, la CLI choisira le bon fichier d&#8217;environnement selon la configuration.</p>
</div>
<div class="paragraph">
<p>Cela signifie que tu peux donc définir autant de configurations que tu le souhaites.
Par exemple, tu pourrais ajouter une configuration <code>preprod</code> avec son fichier <code>environment.preprod.ts</code> dédié.</p>
</div>
<div class="paragraph">
<p>Cela signifie aussi que tu peux remplacer autant de fichiers que tu veux dans ton application.
On peut donc imaginer des choses un peu folles comme remplacer <code>pony.component.ts</code> par une version différente
(mais je ne vois pas bien pourquoi tu voudrais faire ça ^^).</p>
</div>
<div class="paragraph">
<p>Un fichier environnement peut contenir tout ce que tu veux.
Mais comme son nom l&#8217;indique,
il est censé contenir du code spécifique à un environnement donné (développement, production, pré-production, etc.).
Par exemple, tu peux avoir des URLs d&#8217;API différentes en développement et dans la version en production.</p>
</div>
<div class="paragraph">
<p>Comme l&#8217;environnement <code>production</code> est très fréquemment celui que tu veux quand tu construis l&#8217;application avec <code>ng build</code>,
la CLI l&#8217;utilise par défaut depuis la version 12.0 (plutôt que de devoir préciser <code>--configuration=production</code>).</p>
</div>
<div class="paragraph">
<p>Depuis la CLI version 9.0,
il est possible de spécifier plusieurs configurations&#160;:</p>
</div>
<div class="literalblock">
<div class="content">
<pre>ng build --configuration=production,preprod</pre>
</div>
</div>
<div class="paragraph">
<p>La commande utilise alors la configuration <code>production</code>,
fusionnée avec la configuration <code>preprod</code>.
Si la même propriété est définie dans les deux configurations,
celle de la configuration <code>preprod</code> prend le dessus sur celle de <code>production</code>.</p>
</div>
<div class="paragraph">
<p>Note que ce mécanisme de remplacement est aussi disponible pour les assets et les styles dans la CLI,
t&#8217;offrant ainsi la possibilité de proposer des thèmes différents de ton application par le seul jeu des configurations.</p>
</div>
</div>
<div class="sect2">
<h3 id="_stricttemplates">30.2. strictTemplates</h3>
<div class="paragraph">
<p>Lorsque tu compiles ton application en AoT
(<code>aot: true</code>, valeur par défaut depuis Angular&#160;9.0),
les templates sont vérifiés par le compilateur Angular.</p>
</div>
<div class="paragraph">
<p>Par défaut, seule une vérification superficielle est réalisée.
Pour aller un peu plus loin,
tu peux utiliser l&#8217;option de compilation <code>strictTemplates</code>&#160;:</p>
</div>
<div class="listingblock">
<div class="title">tsconfig.json</div>
<div class="content">
<pre class="prettyprint highlight"><code data-lang="javascript">"angularCompilerOptions": {
  "strictTemplates": true,
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Avec cette option,
le compilateur va vérifier que les valeurs passées aux inputs,
les événements DOM utilisés, les références dans les templates, etc.
ont tous un typage correct.
Par exemple, essayer de donner un nombre à un input qui attend un booléen
provoquera une erreur de compilation.</p>
</div>
<div class="paragraph">
<p>Angular&#160;13.2 a également ajouté une nouvelle option appelée <code>extendedDiagnostics</code>,
qui fait quelques vérifications supplémentaires.
Par exemple, cela vérifie que tu utilise bien la syntaxe du lien bi-directionnel correctement
(la "syntaxe boîte de bananes" <code>[(ngModel)]</code>, et pas <code>([ngModel])</code>).
L&#8217;option trace des avertissements par défaut,
mais tu peux la configurer pour qu&#8217;elle émette des erreurs&#160;:</p>
</div>
<div class="listingblock">
<div class="title">tsconfig.json</div>
<div class="content">
<pre class="prettyprint highlight"><code data-lang="javascript">"angularCompilerOptions": {
  "strictTemplates": true,
  "extendedDiagnostics": {
    "defaultCategory": "error"
  }
}</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_assembler_ton_application">30.3. Assembler ton application</h3>
<div class="paragraph">
<p>J&#8217;ai un peu divugalché la suite dans les étapes précédentes.
Si tu veux assembler ton application pour la production avec la CLI,
il te suffit juste d&#8217;exécuter&#160;:</p>
</div>
<div class="literalblock">
<div class="content">
<pre>ng build</pre>
</div>
</div>
<div class="paragraph">
<p>Cela va créer un répertoire <code>dist</code> contenant le résultat de la construction.
L&#8217;option <code>prod</code> déclenche le remplacement de fichier dont on a parlé,
mais ajoute aussi quelques options supplémentaires,
et certaines sont vraiment intéressantes.</p>
</div>
<div class="paragraph">
<p>Cela active également le <em>tree-shaking</em> et l&#8217;élimination du code mort,
grâce à <code>optimization: true</code>.
Pour rendre ce processus encore plus efficace,
l&#8217;équipe d&#8217;Angular CLI a écrit un outil nommé "build optimizer" (<em>l&#8217;optimisateur de construction</em>),
qui est activé par l&#8217;option <code>buildOptimizer: true</code>.</p>
</div>
<div class="paragraph">
<p>Pour réduire encore plus le volume de code JavaScript généré,
les bibliothèques tierces ne sont pas packagées dans un fichier séparé (<code>vendorChunk: false</code>),
et les licences sont supprimées (<code>extractLicences: true</code>).</p>
</div>
<div class="paragraph">
<p>Tu n&#8217;as certainement pas envie de déboguer en production.
Et tu n&#8217;as probablement pas envie non plus de fournir le code source non-minifié
à tous tes visiteurs.
Ainsi <code>sourceMap: false</code> désactive la coûteuse génération des <em>source maps</em>.</p>
</div>
<div class="paragraph">
<p>Une dernière option intéressante est <code>outputHashing</code>&#160;:
elle indique à Webpack que les fichiers générés ne doivent pas être nommés <code>main.js</code>
mais <code>main.xxxxxx.js</code>, où <code>xxxxxx</code> est le résultat d&#8217;une fonction cryptographique de hachage sur le contenu du fichier.
Pourquoi&#160;? Pour être sûr que ces fichiers puissent être mis en cache sans problème&#160;:
rappelle-toi de la partie "cache busting" du
<a href="#performances">chapitre</a>
Performances plus haut.</p>
</div>
<div class="paragraph">
<p>Comme tu le vois,
la CLI déclenche plein d&#8217;optimisations pour nous.
Si tu choisis de ne pas utiliser la CLI,
il te faudra imaginer des solutions pour faire la même chose avec Webpack ou ton outil préféré.</p>
</div>
</div>
<div class="sect2">
<h3 id="_configuration_du_serveur">30.4. Configuration du serveur</h3>
<div class="paragraph">
<p>La dernière étape est de prendre le résultat de l&#8217;étape de construction (dans le répertoire <code>dist</code>)
et le déployer sur ton serveur préféré.
Cela peut être un serveur statique comme Apache ou Nginx par exemple.</p>
</div>
<div class="admonitionblock warning">
<table>
<tr>
<td class="icon">
<i class="fa icon-warning" title="Attention"></i>
</td>
<td class="content">
N&#8217;utilise pas <code>ng serve</code> en production, même avec l&#8217;option <code>--configuration=production</code>.
Ce n&#8217;est qu&#8217;un outil de développement, qui n&#8217;est ni optimisé ni sécurisé pour la production.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Il reste cependant quelques détails à configurer.
Et ces détails dépendent du serveur web choisi.</p>
</div>
<div class="paragraph">
<p>Tout d&#8217;abord, tu vas t&#8217;assurer que toutes les ressources sont servies compressées
(probablement avec gzip).
Ensuite, tu vas t&#8217;assurer que toutes ces ressources sont mises en cache pour longtemps.
Ne te tracasse pas à propos des soucis classiques de cache,
puisqu&#8217;on a généré les assets avec un nom unique fonction de leur contenu.</p>
</div>
<div class="paragraph">
<p>La dernière étape est moins évidente et souvent oubliée (oui, ça nous est arrivé aussi&#160;😅)&#160;:
il te faut configurer ton serveur pour que toutes les routes servent <code>index.html</code>.</p>
</div>
<div class="paragraph">
<p>C&#8217;est logique&#160;: tu as déployé ton application sur <code><a href="https://ng-ponyracer.ninja-squad.com" class="bare">https://ng-ponyracer.ninja-squad.com</a></code>,
tu l&#8217;as tweetée au monde entier,
et les gens ont commencé à y affluer.
Ton serveur va leur servir le fichier <code>index.html</code>, et jusque-là tout va bien.
Ils vont naviguer dans l&#8217;application,
et peut-être atterrir sur la liste des courses à <code><a href="https://ng-ponyracer.ninja-squad.com/races" class="bare">https://ng-ponyracer.ninja-squad.com/races</a></code>.</p>
</div>
<div class="paragraph">
<p>Mais que va-t-il se passer si quelqu&#8217;un appuie sur <kbd>F5</kbd>/<span class="keyseq"><kbd>Cmd</kbd>+<kbd>R</kbd></span>&#160;?
La requête envoyée au serveur sera pour <code>/races</code>,
et si tu ne l&#8217;as pas prévu,
ton serveur va retourner une erreur <code>404</code>&#8230;&#8203;</p>
</div>
<div class="paragraph">
<p>Donc il faut t&#8217;assurer, d&#8217;une façon ou d&#8217;une autre,
que toute requête vers toute route de l&#8217;application servira <code>index.html</code>.
L&#8217;application Angular redémarrera entièrement, le routeur analysera l&#8217;URL,
et il naviguera vers la bonne route immédiatement.</p>
</div>
</div>
<div class="sect2">
<h3 id="_conclusion_5">30.5. Conclusion</h3>
<div class="paragraph">
<p>Je pense qu&#8217;on a abordé les points importants de la livraison en production.
Comme tu l&#8217;as vu, c&#8217;est assez facile si tu utilises Angular CLI,
aussi je ne peux que t&#8217;encourager fermement à le faire.</p>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<i class="fa icon-tip" title="Practice"></i>
</td>
<td class="content">
<div class="paragraph">
<p>Essaye l&#8217;exercice
<a href="https://angular-exercises.ninja-squad.com/exercises/38/production">Aller en production</a> <span class="image"><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAIgAAACACAMAAADnN9ENAAACSVBMVEVMaXH7whr7whr7whr7whr7whr7whr7whr7whr7whr7whr7whp4o614o614o614o637whr7whp4o614o614o614o614o614o614o614o62EoKN4o614o637whqFXFKFXFKQnZm4kni0k3vA1Njr8fLd5+myytB/qLGFXFKFXFKcmY98oqp4o63V4uWFXFKFXFKoloWgmIx4o62Hpqu+nofCpI/b08yFXFKAoaaMnpzYzcSFXFKFXFKUnJaYm5O7mIDl5eOGrbaFXFKGk5Kfd2WSalyYcGClfmqhlIZ6lpx+hIWDaWOFXFKFXFJ/gICkl4nFqpeFXFKFXFKCamSDZV2EYFiDaWOCbmne2dTk7O77whqOZE6Ad3TIsJ6jwMflryWbb0h/gIDo6+rH2dz0vB58jZGIn6Cxgj17kZbOvK2FXFL7whq5iTqVt75/e3rPnC/eqSiMYk+FXFKjdkS4p6Ll6OjLtqbSwrXFubacu8PstSGynZiOsrqLZVzauj/013mrlI56mqLCtFrt69fY1dSApaTrvizz2oafgXqSb2aqxcuhrX/11GvO3uGQeHG5z9T20V7e3t7s7uX4y0P6xSjv5byYeHC+sKyli4TSzMrIzc28wcGwtLVHR0c8OztIR0c1NTWNkJEvLy+NioqTkJCHhISlqKnU2dpCQUGBhIRnZmZeYGBqbGyZnJ07Ozvf5ebLwsCmqapfYGFiYmLAw8Tw9fXs8vNqjZVBTE9PYmY4Pj9deH5mho5GU1Y9RUdhf4ZznKVKW140Njdz5u6AAAAAf3RSTlMAMIBQ7/+fEI/PYL8QcIBAIK+v/7+fz+8wUP/fYEAgEP//////////32D//yD//7///4//////UP///zDv///////P//////////+vj3Ag//+fQJ/////////fz///////////////////gHD///////+v//////////////9AWHP9fwAABxxJREFUeAHs1IVy5DAQBNBZ0DJ3mJUonGiPmZmZmZmZPv6ssb2oFFqHeYUq7LJ7mlatWhWVWDxBf4SkEHH6EwhPKk2/X0Z4sn9AknRSeJIx+u0SguXot8sLliG7QrFUKtOvUEkKVrUXpQZPT6EZrBdAX7FA0YsLX7ZCFv0w+gco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" alt="Pro" width="18"></span>!
Tu apprendras quelques astuces intéressantes pour tes prochaines mises en prod.</p>
</div>
</td>
</tr>
</table>
</div>
<div style="page-break-after: always;"></div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="ending">31. Ce n&#8217;est qu&#8217;un au revoir</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Merci d&#8217;avoir lu ce livre&#160;!</p>
</div>
<div class="paragraph">
<p>Quelques chapitres seront ajoutés dans des versions ultérieures
sur des sujets avancés, et d&#8217;autres surprises.
Ils ont encore besoin d&#8217;être fignolés, mais je pense que tu les apprécieras.
Et bien sûr, nous tiendrons à jour ce contenu avec les nouvelles versions du framework,
pour que tu ne rates pas les nouvelles fonctionnalités à venir.
Et toutes ces révisions du livres seront gratuites, bien évidemment&#160;!</p>
</div>
<div class="paragraph">
<p>Si tu as aimé cette lecture, parles-en à tes amis&#160;!</p>
</div>
<div class="paragraph">
<p>Et si tu ne l&#8217;as pas déjà, sache qu&#8217;on propose une version "pro" de cet ebook.
Cette version donne accès à toute une série d&#8217;exercices
qui permettent de construire un projet complet pas à pas, en partant de zéro.
Pour chaque étape on fournit les tests unitaires nécessaires à une couverture de code de 100%,
des instructions détaillées (qui ne sont pas un simple copier/coller, elles te feront réfléchir et comprendre ce que tu utilises)
et une solution (qui sans trop se vanter est probablement la plus élégante, ou en tout cas celle conforme à l&#8217;état de l&#8217;art).
Un outil maison calcule ton score pour l&#8217;exercice, et ta progression est visible sur un tableau de bord.
Si tu cherches des exemples de code concrets, toujours à jour,
qui peuvent te faire gagner des heures de développement,
cette version pro est là pour toi{nbs)}!
Tu peux même <a href="https://angular-exercises.ninja-squad.com">essayer gratuitement les premiers exercices</a>, pour te faire une idée concrète.
Et vu que tu es déjà le possesseur de cet ebook, on te remercie pour ton soutien historique
avec un généreux code de réduction pour le pack pro que tu peux aller chercher <a href="https://books.ninja-squad.com/angular/discount">à cette adresse</a>.</p>
</div>
<div class="paragraph">
<p>On a essayé de te donner toutes les clés,
mais l&#8217;apprentissage du web se passe souvent comme ça&#160;:</p>
</div>
<div class="imageblock text-center">
<div class="content">
<a class="image" href="http://oktop.tumblr.com/post/15352780846"><img src="data:image/jpeg;base64,/9j/4AAQSkZJRgABAQAAAQABAAD/4gxYSUNDX1BST0ZJTEUAAQEAAAxITGlubwIQAABtbnRyUkdCIFhZWiAHzgACAAkABgAxAABhY3NwTVNGVAAAAABJRUMgc1JHQgAAAAAAAAAAAAAAAQAA9tYAAQAAAADTLUhQICAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABFjcHJ0AAABUAAAADNkZXNjAAABhAAAAGx3dHB0AAAB8AAAABRia3B0AAACBAAAABRyWFlaAAACGAAAABRnWFlaAAACLAAAABRiWFlaAAACQAAAABRkbW5kAAACVAAAAHBkbWRkAAACxAAAAIh2dWVkAAADTAAAAIZ2aWV3AAAD1AAAACRsdW1pAAAD+AAAABRtZWFzAAAEDAAAACR0ZWNoAAAEMAAAAAxyVFJDAAAEPAAACAxnVFJDAAAEPAAACAxiVFJDAAAEPAAACAx0ZXh0AAAAAENvcHlyaWdodCAoYykgMTk5OCBIZXdsZXR0LVBhY2thcmQgQ29tcGFueQAAZGVzYwAAAAAAAAASc1JHQiBJRUM2MTk2Ni0yLjEAAAAAAAAAAAAAABJzUkdCIElFQzYxOTY2LTIuMQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAWFlaIAAAAAAAAPNRAAEAAAABFsxYWVogAAAAAAAAAAAAAAAAAAAAAFhZWiAAAAAAAABvogAAOPUAAAOQWFlaIAAAAAAAAGKZAAC3hQAAGNpYWVogAAAAAAAAJKAAAA+EAAC2z2Rlc2MAAAAAAAAAFklFQyBodHRwOi8vd3d3LmllYy5jaAAAAAAAAAAAAAAAFklFQyBodHRwOi8vd3d3LmllYy5jaAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABkZXNjAAAAAAAAAC5JRUMgNjE5NjYtMi4xIERlZmF1bHQgUkdCIGNvbG91ciBzcGFjZSAtIHNSR0IAAAAAAAAAAAAAAC5JRUMgNjE5NjYtMi4xIERlZmF1bHQgUkdCIGNvbG91ciBzcGFjZSAtIHNSR0IAAAAAAAAAAAAAAAAAAAAAAAAAAAAAZGVzYwAAAAAAAAAsUmVmZXJlbmNlIFZpZXdpbmcgQ29uZGl0aW9uIGluIElFQzYxOTY2LTIuMQAAAAAAAAAAAAAALFJlZmVyZW5jZSBWaWV3aW5nIENvbmRpdGlvbiBpbiBJRUM2MTk2Ni0yLjEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHZpZXcAAAAAABOk/gAUXy4AEM8UAAPtzAAEEwsAA1yeAAAAAVhZWiAAAAAAAEwJVgBQAAAAVx/nbWVhcwAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAo8AAAACc2lnIAAAAABDUlQgY3VydgAAAAAAAAQAAAAABQAKAA8AFAAZAB4AIwAoAC0AMgA3ADsAQABFAEoATwBUAFkAXgBjAGgAbQByAHcAfACBAIYAiwCQAJUAmgCfAKQAqQCuALIAtwC8AMEAxgDLANAA1QDbAOAA5QDrAPAA9gD7AQEBBwENARMBGQEfASUBKwEyATgBPgFFAUwBUgFZAWABZwFuAXUBfAGDAYsBkgGaAaEBqQGxAbkBwQHJAdEB2QHhAekB8gH6AgMCDAIUAh0CJgIvAjgCQQJLAlQCXQJnAnECegKEAo4CmAKiAqwCtgLBAssC1QLgAusC9QMAAwsDFgMhAy0DOANDA08DWgNmA3IDfgOKA5YDogOuA7oDxwPTA+AD7AP5BAYEEwQgBC0EOwRIBFUEYwRxBH4EjASaBKgEtgTEBNME4QTwBP4FDQUcBSsFOgVJBVgFZwV3BYYFlgWmBbUFxQXVBeUF9gYGBhYGJwY3BkgGWQZqBnsGjAadBq8GwAbRBuMG9QcHBxkHKwc9B08HYQd0B4YHmQesB78H0gflB/gICwgfCDIIRghaCG4IggiWCKoIvgjSCOcI+wkQCSUJOglPCWQJeQmPCaQJugnPCeUJ+woRCicKPQpUCmoKgQqYCq4KxQrcCvMLCwsiCzkLUQtpC4ALmAuwC8gL4Qv5DBIMKgxDDFwMdQyODKcMwAzZDPMNDQ0mDUANWg10DY4NqQ3DDd4N+A4TDi4OSQ5kDn8Omw62DtIO7g8JDyUPQQ9eD3oPlg+zD88P7BAJECYQQxBhEH4QmxC5ENcQ9RETETERTxFtEYwRqhHJEegSBxImEkUSZBKEEqMSwxLjEwMTIxNDE2MTgxOkE8UT5RQGFCcUSRRqFIsUrRTOFPAVEhU0FVYVeBWbFb0V4BYDFiYWSRZsFo8WshbWFvoXHRdBF2UXiReuF9IX9xgbGEAYZRiKGK8Y1Rj6GSAZRRlrGZEZtxndGgQaKhpRGncanhrFGuwbFBs7G2MbihuyG9ocAhwqHFIcexyjHMwc9R0eHUcdcB2ZHcMd7B4WHkAeah6UHr4e6R8THz4faR+UH78f6iAVIEEgbCCYIMQg8CEcIUghdSGhIc4h+yInIlUigiKvIt0jCiM4I2YjlCPCI/AkHyRNJHwkqyTaJQklOCVoJZclxyX3JicmVyaHJrcm6CcYJ0kneierJ9woDSg/KHEooijUKQYpOClrKZ0p0CoCKjUqaCqbKs8rAis2K2krnSvRLAUsOSxuLKIs1y0MLUEtdi2rLeEuFi5MLoIuty7uLyQvWi+RL8cv/jA1MGwwpDDbMRIxSjGCMbox8jIqMmMymzLUMw0zRjN/M7gz8TQrNGU0njTYNRM1TTWHNcI1/TY3NnI2rjbpNyQ3YDecN9c4FDhQOIw4yDkFOUI5fzm8Ofk6Njp0OrI67zstO2s7qjvoPCc8ZTykPOM9Ij1hPaE94D4gPmA+oD7gPyE/YT+iP+JAI0BkQKZA50EpQWpBrEHuQjBCckK1QvdDOkN9Q8BEA0RHRIpEzkUSRVVFmkXeRiJGZ0arRvBHNUd7R8BIBUhLSJFI10kdSWNJqUnwSjdKfUrESwxLU0uaS+JMKkxyTLpNAk1KTZNN3E4lTm5Ot08AT0lPk0/dUCdQcVC7UQZRUFGbUeZSMVJ8UsdTE1NfU6pT9lRCVI9U21UoVXVVwlYPVlxWqVb3V0RXklfgWC9YfVjLWRpZaVm4WgdaVlqmWvVbRVuVW+VcNVyGXNZdJ114XcleGl5sXr1fD19hX7NgBWBXYKpg/GFPYaJh9WJJYpxi8GNDY5dj62RAZJRk6WU9ZZJl52Y9ZpJm6Gc9Z5Nn6Wg/aJZo7GlDaZpp8WpIap9q92tPa6dr/2xXbK9tCG1gbbluEm5rbsRvHm94b9FwK3CGcOBxOnGVcfByS3KmcwFzXXO4dBR0cHTMdSh1hXXhdj52m3b4d1Z3s3gReG54zHkqeYl553pGeqV7BHtje8J8IXyBfOF9QX2hfgF+Yn7CfyN/hH/lgEeAqIEKgWuBzYIwgpKC9INXg7qEHYSAhOOFR4Wrhg6GcobXhzuHn4gEiGmIzokziZmJ/opkisqLMIuWi/yMY4zKjTGNmI3/jmaOzo82j56QBpBukNaRP5GokhGSepLjk02TtpQglIqU9JVflcmWNJaflwqXdZfgmEyYuJkkmZCZ/JpomtWbQpuvnByciZz3nWSd0p5Anq6fHZ+Ln/qgaaDYoUehtqImopajBqN2o+akVqTHpTilqaYapoum/adup+CoUqjEqTepqaocqo+rAqt1q+msXKzQrUStuK4trqGvFq+LsACwdbDqsWCx1rJLssKzOLOutCW0nLUTtYq2AbZ5tvC3aLfguFm40blKucK6O7q1uy67p7whvJu9Fb2Pvgq+hL7/v3q/9cBwwOzBZ8Hjwl/C28NYw9TEUcTOxUvFyMZGxsPHQce/yD3IvMk6ybnKOMq3yzbLtsw1zLXNNc21zjbOts83z7jQOdC60TzRvtI/0sHTRNPG1EnUy9VO1dHWVdbY11zX4Nhk2OjZbNnx2nba+9uA3AXcit0Q3ZbeHN6i3ynfr+A24L3hROHM4lPi2+Nj4+vkc+T85YTmDeaW5x/nqegy6LzpRunQ6lvq5etw6/vshu0R7ZzuKO6070DvzPBY8OXxcvH/8ozzGfOn9DT0wvVQ9d72bfb794r4Gfio+Tj5x/pX+uf7d/wH/Jj9Kf26/kv+3P9t////2wBDAAUDBAQEAwUEBAQFBQUGBwwIBwcHBw8LCwkMEQ8SEhEPERETFhwXExQaFRERGCEYGh0dHx8fExciJCIeJBweHx7/2wBDAQUFBQcGBw4ICA4eFBEUHh4eHh4eHh4eHh4eHh4eHh4eHh4eHh4eHh4eHh4eHh4eHh4eHh4eHh4eHh4eHh4eHh7/wAARCAK8AYUDASIAAhEBAxEB/8QAHQABAAIDAQEBAQAAAAAAAAAAAAYHBAUIAwIBCf/EAFoQAAEDBAADAwgGBQYKBggHAQIAAwQBBQYSBxEiEyEyCBQxQUJSYoIVI1FhcpIWcYGRoiQzlqGywjRDU1djc6Oxs9IXJYOTwdE1N0RkdeHi8EdUVXbD0/Hy/8QAFwEBAQEBAAAAAAAAAAAAAAAAAAIBA//EABwRAQEBAQEBAQEBAAAAAAAAAAACEiJCMgNiUv/aAAwDAQACEQMRAD8A7LREQEREBERAREQEREBERAREQEREBERARebhi22RuFQRGnOta+ii+WXW3WgdacEwMeYmJc6Vp9qD2REQEREBFiXCZFt8J6dMfbYjMATjrp11EBHxVqsawXm1X+0s3Wyz2J8J+mzTzJ7CX/39iDaIiICL59Hetd9PWPtux+mLf2vuedBt+7mg2aKLcScvgYPiEvI58d+QzHqA9kzy2MiKgjQefd61GeGXGvDs8mUtcU5VtuhCVQiTRESd5enQhqQl+HxfcmTSz0WNMkx4UV2VKfBmOyFTccMtRAR9Na1X5AlxZsVuXBkMSY7o7A8y5QwOn2iQ+lBlIiICIiAiIgIiICIiAiIgIiICIiAiIgIiICIiAiIgIiICIiAiIgIiIC464k5/kuM+UndJkO8Shix5kdl2KLpdk6wIBsBB4faLq8S7FXA/HzZ7jflDZF4p4h/AC6fmmnRflQZ1brfwznWez32AdznmEY2GJQk6LJfzhaiWw01pr8yjPkrZS3Y+DeU3C5yHDhWSSTwtbc9Q7IS0H7Ni/tKCcW+BrXDvAvp88hK5SPOmmCbCH2LY0Pbq8RF4v962PAiyTsi4F8RrPbQI5jxNdgFPE4YDv2fza6/Ms5yz00sHOOM2dXm9ZBjVzuTYQA84dhw3Ro1Ha9kRAuky5CXskRakrc8nzi1c+IUS4YxfH2Y18bikcedHbpSroeGrmnh3EipXu6S+xUz5P/E2Hw0cyGtxgSJNZjLdGmWx5F24EXSe3hp1lt7XT4Vv/JFtlxu/FibkwsdnEisvduYjyDd3wtj/ABFy+FVUslicLc+yjhRxFfxTLJr7trGXVme2/XYWDL0SGql4R7xrqPSQl7y+uPHFXJC4tvFjd9lwYdlLzeL2DvQ6ftmQ+ExqXT37dwqeeWFgLtwgRM4tMWrj8MfN7iLTfMiZ9hzp9wudK/CXwqkeBWMRsy4nWyzzm+2gmLrsrUvYEC9r8Wq3n6P5WDxL4wHmvAJiC+QR707cwjXNlnuF1oAI+0GnukVA6ftElOvIiJ2uDX4S59kN16Of+qDmueeKmBXjh5kx2e6kLzTuzsOSBdMhrbXbX2S94fe+HVdTeSFbig8HI8lxvsynzX5H6x20p/YU18k/S4kRFzdHMXlT8O8rlTLjnMW9g7ZmmAJ+CTptkxQB12EedRPb5f2qmOFHDO58R7pLg2l+2xKwwF185O3hItekREuZflXWvlRTfMuCF+L2nuwZH5nw/u81U/kORtrvlEz3WGGvzEZf3V0muXPPTXeUVOueD4Zi/CyHdn34zcLtp7x+KR1loH4KVE+n7h91QjM+HtxwTBMay2RcXGLtcZe7TbNdaxQ7PtALb3+7+ui6F8qDhjJzmxMXixtdrerWBUpH5/4UwXeQU+MfEP6yH2lzXlGRZ1xDullxi4MOPzoADEiwWmCaPbpEiMfe6R2Lp119lbJTqGI1J40eTqyxLk+Y3C5Rhobwj0ecNOekhH2CIO8fdJRvyVcQzvDrjkNuyKE9EtZaebUJ8TaJ4SLY2xpX0FQh6u7b5Vts+x7KsN8nNiwYe4+5c4LIUmOxOdHagVSJ8mvXz2r6urkvnyTb3mN2xG4NZVW5PtR3w8wlzQLd0CHvESLxiPLxfEo8q9LtREUqEREBERAREQEREBERAREQEREBERAREQEREBEXL/lc5XmNgy+1Q7VkMu22+RC7UWYp1AiMTLYjL2vZ6fQqmdJqnUCLmDhJ5R7vnDVo4hgAifKjd2ZDTX/XBT2fjH8vtLphl1t9oXmTE2zGhAYlzoVK+uiVOSa090VH8UPKCt2F5ZLxtrHJdxlRNaOuE+LIcyES6ekiLxD7K0+NeVDYp12Zi3zHZNniulqUsJVJAtU94x0EuX4dkzRqXRCLFiyWJcZuTGeB5l0BNt1othMa+itK09NFDOOGcSeH+EFfodubnPVkAxRt09Qptz6q/uUqT1FEOFOYxs7weDkTDQsG9sEhnbbsnRLkQ8/4qfcQqtPLHev0DDLLcrRPlwmGbhpJrGdJotiAtC2Hv5dJD81FWU6X0oLkXCvBMiyhvJLrYWnrk3USJzcqC7y8O4c9S/bRRryWs1mZfgTjF2muzLnbX+yeedLY3ALqAiL2vaH5VWHEfjNmWMcdLjFauIlZIEhqOUAmhqBNaiRl72/UXft7qZrRp0tlNhteS2OTZr3EblQZA6utlT9xUr6ip9qwsEwzHsJtBWvHIPmrJnu4VTqZmXvERelZ2N3u25HY4l9tEgZMGUG7TnKo7U/UXorz7lXnlCcV3+GzNoat0CPOnzzM6g84QiDQctvR7RVIRH5k/kSbJOGOA5HOO4XjFLe/Ld6nHxCrTh1+Ig1Iv2rf2Gx2iwWtu2WW3xoENrwssN0Aaff+v71i4Df/ANKMNtOQ9hSN5/GF6rW22la+rmt+pULV2uyWe2POv2202+E6/XZ048cGycr8VRp3raLAk3K3RpkeHKnxWJEkq0jtOu0Fx0qemgDXxfsQaHiBgWM53b2IeRwfOKRzqbDwHUHWi9epD9uvfRbnHLPbsfssWzWmP5vBiN9my3zqWo/rqtoiAiLDhzIs1ursKSxJbE6gRtHQ6UKniHu9aD4vNrt95tj9susNiZCkBo6w8OwGP6loeHuB43gsaXGxyEcYJbnavbukZfcOxdWo9Wv66rIvWaYvZcggWO63yJDuNwrWkdlw9d6/+HP1c/T6lJUBYvmkfzusukdrzio61d7Om/L7Oayl5uGIBUzKgiNOda19SD0Xzy5dwqqbr5QPDGBdHIB3qRJJquhPRojjrW33GNOr5VOsTyrHstt1Z2N3eNcY411Imi6gL7CGvUNf10TI3yItXfL3a7DbHLnerjGt8Nr+cekOUAf/APfuQbRFFsMzrEsxrJHG72xcDj8u3AKEBhQvXqVBLX71l5jlNhxK0Fc8iujVvjc9RI+dSMvdER6ir+pBvkVKS/KX4cNlyZC9yae81DoP9shU24bcSMW4gRpDmPynTei1Ht477ejobegtfWPxUTKdJqiIihERAREQEREBERAREQEREBERAXLnlv2tzz7Gbxu32Oj0aoc+rbYT2/V6V1GucvLhCv6P4y9T0UmPh+YBr/dVT9Jr5afC+H0fiX5NVvFgGRyC1uyhgP8AhKvJ0iqwZe6XP5S1Ja/yeOL7+KPsYDl7MhuMMzzeO87XU4BF09kYl6t+X4di9lTXyPb1GjcJr2c18WmLbcXXnXT8IN9kBEX9RKgOKecyeIGcVvQW6PD1MQig20PakAl0bl4jL+z4VX1yxLPK/geZ8ZHpI/8AttvYf+Ydg/uCojxO/wCj9sLO1g7EvtSii9c3nnyMRdMR+qES93q2IenqU88s7evEu1EY9X0K1t+LtXVVONwrY3kNpHLRnRLJKIXXXY4dZMbEOw/DsJCRD1dJa9S2flNfTsPyU6zi4JWek2h6i6+Efan+Ko6Wv7PSsXyvxGvBaVt6p0fl+dWhYGbWxYoDNmFgLYDAeaCx/N9ly6dfu5KmvLPuLbHDODb9w7WXcwrpz6iAAMiry/Fp+9RP0vyo/gNxYncOrvWNL3l45Ld2mR6dRMF4e1a+LXXYfaEfeXVHFS2w864OXdm2OszGpkDzuC6HeLhj9Y3Uf11Gn71x3BjWU+DVyffuEJu9he2jixyMe3NjstT1H3djEvkV/eRdlT1wxe54pLc2K0ui9F2L/Eu8+Y/KYl+dVU+kz/lWvkgZFS1cTvox0xGPd4pM9Xvj1h/eH5lD+PZ9pxnysv8A38qflER/urM4lWyVw242S/MdmhiTwnwSEv8AFEW4j8vUHyrT8TJrF/4m3q4QS2ZuM4nWiL3T8K31pi9vIsysnYN1w2Q71MF57DGvLwl0uD+/kXzVUR8tOZ23E+3xKeiPaQ/MTjhf3RVecM8ilYBxJg3V8HGyhSCYnM+1p4DH/wC/aFS/yuZLUvi2Mlg6Gy7aYpgdPCQl2hCSejy6i4FUoPB3FKU//TGv7KmqhHAmvPg9iv8A8Oa/sqbrkuRcK+Uze5l44z3lt93otphEi8u7QRES6fi3IiXdS/nlxYlfSHFLKJIlsJ3aQI/hEyEf7K6fmU6h8lTiHMy3FpVnvckpF2tJDTt3C5m+yXPUq/aQ61Gtf1K7FxB5Kl++huMUGM4ZUj3Ro4R+7sQ7B/EAj8y7fU1JLVZNEeuGN3KDGcJt+REdaaMK8iEiAqDWi5I8kHK5Nm4iDjjrpDBvLRBVsirqMgB2EvxEIkP5V2Yv5+YXJG08a7a+OrYRchEC9kRAX9S/hVSUsjy2YwhxEs8n/L2nT8jp/wDOrmw3PXGvJzjZvOLzuTCtRk7uX8681sHV+Ihp+ZUt5ZF6sl6yWwFZ7tBuDkWO+1JpGfF3siJwNaFr835Vn47M08iq+ALm1W5vYfh2ktFr/Gs8s9K8tmRcXsvv8m92W55JOnMEJu+YOHowJbaj2Q9Ij4unVXFwu4tyOJliufDrJahBvlwtz8eHcGegJBEBD1Up4T9rp6S1Lw+FeXkOAHmOUn/jO1i0L9WrqqG17Yl5Q7Ql4YWTE18hP6/2SVDD4YYdbMi4i/obkNzk2p6pux2jYbE9pDZdTZbeHwl+X4lLc+sN28n/AD20T8YyA5ZTGCMgeDQXQbIRq06Il1CW3i6dfZ8Kj3FSS7jXlAXu4RR0dhXvz0ORa7FsLv8AeWqzPJck4n5zSY9HOTPlkMeFDjiRCAbdIAPzERF+IkS7jwDKYeXYTbsnit1jsTGtzBwu9ohrUTEq/CQl3rjDifmN/wCK/EAGItH34pSewtFubLpEdtRLX3y8RF/dFdg8JcUriHDa041Kq24+0zWsrl3jVwyqR0/VzLkuZ79iOU8CuIDWXW61tXmzMOOebSCEqgAHQh0d5dQHQa+Lw/2VktpcHBXgXFwi4xciuN1fk3ujBAYMlowG3ip7x/N0/Con5coHWLiR0/mhcmUL8WrWv+4lZvCbjBi3EGlIsUyt95oNSct0guuoj4ibL0GP6ur3hFV75cQ8sZxkqenz92n+y/8Akk/TfKvuDHA5niDiv6Qu5KUFoZBxyZCHuWw6+1sPve6r64R8GLBw8uj11jXCdcLg61VsXXq0AQCvpEQH8I+LmuW+H/FvLcGxt6xY8UFpl6UUo3XmO1MSIRHUerXXpH2VLuHvGPjFe8whwIMn6eJ18e1h+ZtUpQPXzMBppTl7XNbU0yal2Si+R2IaVrTWvrovpcnQREQEREBERAREQEREBERAREQFQfltMifDq0P+tu7iP5mXf+VX4qt8o7Bbzn+ER7dY5DAS4cykkWXq6i9yAh129mvWqn6TTjy25Xc7fg9zxSGVWol0lA9KMS7zEBIdPwl0kX4RU88l/AHctzdq8zGv+p7MYvu1r6HX/EAf3i+H8S8cO4C53d8lj2+92p+yQOo5Mt2oFqIlqQhqRbEXs/mXYWG43Z8Sx6NY7FFpHhRx6aekjL2jKvtFX7VdUmZc1eW9GIMwx6Zr0vwDa2/A5t/fWfYMDY4leTDZvo5kP0gs1ZVIZ+Gp8nTrVgi90hKnzcvvW58tu1yH8ZsN2ZiuONQpDoPuCPS0JiOtS+weYUWX5EtxN/ALzbnP/ZbnuH4TaD+8JKfLfSCeT/xpbwuFTDcvYl+ZtyqNx3+XfC5lyJsxLv1Eu/4epbvy3W7e4xiswCE5TvnAgYnzEmvq6/h9NfEp5x14MQ88cZuln81tt7EtX5NQ6X2/jEfEQ+yXpVYeVfit/g2rEXhYfnWq0WukJ+YFNtXekdjH2RLUeRLZzo8opwv4H3vPMWHIot4gworhugAGBk4ZB3fqpTb2ua+PJjv7mL8ZYkOZsw1cd7ZJCvsOkXRt8W4CPzLp3yeLU/ZuDtghSor0ST2JuutOhqYkbhF1U+Zc/eU/w8udl4hHk2Pw5T0S5l52XmrREUaSPiLp94uvb3tk1rlmU58tDESmWO3ZnFa2dtxeazK0/wAiZdBV/Cfd865XEyExISISH2l/Qq3R3cs4cMRcotxMPXK30anxjoPOhkGp/d6e+n7FyJaOAvEe4X6TbCtIwWI5kHn0t0aNHqXiDXqLb4R/Ktmipe3lG2DsbhY84i0EoWTW5qQ6Q06RlC2O/wCYdS/Xuq6v14l3gbf54WxwoIQgL2iACLT8u2vyrtLiPw1auvBCmGQyJ+Ta4oHb3T7iJ5oen81Nh+ZcNlQgIhcEhIekhIdSEkmmU794C/8AqcxX/wCHApwoPwF1rwcxXXw/RwKcLlTrIv5ySpgxs5kXB+N52AXM3zZIte1+tIiH5l/Rtfz3xevZcYbfqXgyEB/LJ1XT83Omig3Z+1ZGxfLYHYPRZQyowEW2hCewj8Xur+jFok+eWuJM2CvbsA7sHh6hpXu+5cr+WfijkDLLfl8dovNbk0MWQQ+y8Hh/MH9hWz5LGVjknCuHDedrWbZi8yf5+5Tvar+TWny1Sup0Std7tOyPsqDVzl08/RzX847xGuD+VzokuMLFydnug6z4dHSMth/Mv6QrgXjvFds3GzJqN00Ok/zpv5xF3+0SfmU/OJfDC/8ADy3WqTf34fbXInRBmOZGTWmviLXX2/ZU+w1spXkdZe03QebN1F0vioJxiLb5VJPLKfG4YZhd1GndIcMqf9o0Bf8AgvryS7bHyLhRmONzv8HlySaP7hcYEdv4VuuTLF8huUNJ+VQfaJqK6P4RJ0f7yrPyigG28ecgdgn1jKYkCQ+yZNNEX8SyccuGWcBOIUs7pZ6uk5Hdit0OpAxLHxAYHr1U2Gha+LxD0rx4UY3euK3FcrhcBJ5kpnn12k66gI7bdn+IvCI+7+FPWmfy9PKfjk1xgnSnA7Mp8OLK1/E0IF/EBL3itZLwXu+PZpZXWLlZ73BadAzapqYmIkcY/FoY+yQ+L8wqZeW7bCZyXHLwIDQJEN2KRfEB7CP+1JTvgta7ZxH8m2Hjt4b2aa7WJvSnU0YGVWjH4hEhTXLc9LN4e5VaM1xiNkFne3Ye6TAvGydPE2fxD/8AP1qQOALoVAxEgKnIhrTnStFxtiF2yfyfeIkm2ZFCfkWed0u1Y8EoR8D7HPu3H2hr72peySnPFR7ifk8mNnHC/ILhcMdlxwBuLb3uzdjnTx7td2xc/wARU9CjKtI35U2CxsJyG15pitStQS5OtQjfV0jyh6hca18O1BLp94fiWJxxzUs74J4ZeJIiM4bi+zNoI6j2oNdRDT3SEqF8yiF6sPGPLZbUe9WfMLkbRFpSZHd7MC+HcdRW24wYjNwPhnhthuToFcJUqbOltgWwslUWAEBr7XIafv5q0Jv5IeHYvkmO3udf7JBuL0ecIMFIa30HsxL+8ulrTarZamas222w4Qe7HYFqn8K5K8nTixjPDvHLtDvUa5vvy5lHwpEaAqai2I95EY+6rNb8qLBydoJWPIhD3+yY/wD7VlTWlzUr4RQ7h1xExXO4r72O3AnnI+vbx3Wyada29HMa+r4qdymK5qEREBERAREQEREBERAREQEREBERAREQeLzTbrRtOtiYGPIgIedK0+xYVjstqscHzGz26Lb425H2MdoQDYq8y6RWzRAXwYiYVExpUa+mlV9ogJyREBERAVAcU/J1iZLkf0xjlyjWPzgjOa0bBO0Nwi23CglTl+pX+iayZaHBMfjYtiVsx6K6461AYo1Q3C2I6+sv381vkRAVYM8E+H7eaDlTVqfbmBIKVVjzgiYJ4urtNK+vbq7q8uas9EGnyjH7Lk1pra77bmrhCIxcJp3nrUh8Ne5fOL47ZsXtTdqsFuagwwKpUab9HOvpKta99VukQFzb5RHBfKsszksmxvzF9qQw02+y692ZiQd2/h5EOuvr27l0D9K26l7pY/PmPpKsfzmkXfr7LbXfl7u3ctiqmsn0508qHH5kLgJjoTnWn5VkkRmpLzY1EKj2RNVL82i1PkPXEaS8mtBF3k3Hkh8pGJf2hXTUlliSwbL7QOtHTkQGO1K/sWvsdgslho/9C2iDbvOD3dpFYFqhl71dU1zlOemVc7fAukQolygxpkcvE1IaEwr+wl52W0Wuyw/M7RbYdvj8+fZRWRaHn+oVsUUqaXJ8csmTWsrZfrXHuMUu/R4eetftGvpGv30XxiOMWTE7O3aLDb24UUa8+Q051IveIvSVfvqvcr9Yxu42U7xbxuhdQw6yQ7etPT4Oey2yDU5BYbNkFuK3Xy1xLlEKvOrMhoTHb7e/1r3stqt9mtbNstcRqJEYHRppoeQjRZ6ICq7jjwojcS4MN2lyct11gA4MVzTdoqHrtQ6eL2adVK933q0UQcu475LchyBvf8oGNMIi5txGO1AR/EVR/srbU8ley0Hry66c/gjNj/5roxFWqTmVUcIuC1k4d3yRd412uFwlutdg3V3UBAK151HUfF4R8Xuq10RSoREQEREBERAREQEREBERAREQEREBERAREQEREBERAREQc2cbcrzXEuItyCz5NkDpnbmbjbbczBafjV+sIHQdppvQBENtttur8KlOZ3C928A4tYpKDIbRKsHm9xiMSC1bbHYxlR9vdIi3EurX71veKOCZDfcigZJiWQs2a7MwXra4chmrg1YdqJEQ8q9xjrzH1LZFgzNs4MS+H9ic58rO/CjOv1583HALrP8AWZbKkvTge5cHuEWLP3WU7Kmu2xo3X3S2M9h2Eq19fTyU3Wjwe1vWTC7HZpFWyfgW9iM6QV6dgbES5fdzot4pUKvuI+X3HCsls9zuFWf0SlgcSYevXFlF1NOEXuFqQfiIVYK0mY2C3ZRjc/H7s0TkOc1VpzSvIqfZUa+ohryKn30Qc75XxDziJ5N+G5F9OPt365XQqm+IiBOtAT5CJa0111ANveFT7jNndzj8GLLmuITasyJUyE61SmpC6J+Jo9vZ9RevuXhmvCpqXc+Gdkh2xy5WCxk6zcHJDg69gLY67t9wluY+yP8ACt3XhFazxCdiB3mcNkO7BcrdHboNSt+rgnVoCLbYN9/F4dlXKekfxzJYuS8b8OyiABttXfGJsV1k/Gw6w+BGBfEJEQq8VC7dw5xm38Q382hsSWrm+BiYUc+o3PXd2geoy1psXrU0U0Kn4oZnmls4hWzGcMg2yc79FSLrMjzKODV0AIREAMfCRdVKdJd/JQ9rjIzByO75BV2XLhXzHYE2w2siIiKURutEwA+otx6tfd2VmcQsFkZFdoV+smRSccv0SO7EGYwwD1DjueJswL76bDXn01Vc3Hg5dbHl2CUxG5T4zVutz8J+6UaaeKOY7GB1ad6dTI3RLXq8P4lU5G64mDxStnDZnLomVnButttjbl2t0WCw606Q12fMCMSqJCNa/D0KE5BOy+x5JDnQuJFxuDUPF3MiiHcSBqNdPrKbx6gGo8uy118RCRUJXpa7bkVww+ZZ8ykWx+ZIadjE/b2zFt1oh1odQP0F3948yFae08L8fd4d2LEctiQ8kGzsC0y9IY5d49Ow9XMe7lTlz9lNGVFcRbMNz4lNXay4y5eJWd46E21sk/Rh23TNW/rxd9WgiJdPvF7K6gxVm6MYzbGL4+2/dWojQTHQ8LjoiO5U+bmtVf8ACrXdr5i92Enob2Nvk5DGPyoFQJvQmqj7uvL0e6pYlUTIiIpUIiICIiAiIgIiICIiAiIgIiICIiAiIgIiICIiAiIgIiICIiAiLGlVeCM6TDQuvCBVbCpa0IvVTn6kGSiq39L+Mev/AKn4nP8A/czH/In6X8Yv8z8T+kzH/ImU6Wkiq39L+Mn+aCH/AElY/wCVP0u4y/5oYP8ASZn/AJEyaWkiqosu4z+zwgg/0kY/5V5Fl/G7n08ILf8A0iYRWltIqj/S7jh/mit39IGl+/pdxx/zRW3+kLKrKdLbRVJ+l3HH/NFbf6Qsp+l3HH/NFbf6Qspk0ttFUX6Xcc/80Vs/pC0v39LuOf8Amjtn9IWkyaW4iqP9LuOf+aO2f0haQMv44+1wgt37MiZTKtLcRVKOX8bva4QQf6RML6HMONftcH4P9JGP+VTlOlsIqp/TDjT/AJnYX9JGP+VfDmacZx//AAajF+rJGP8AlVZNLZRebRVJqhGOhVHnWn2L0UqEREBERAREQEREBERAREQEREBERAREQEREBERAREQEREBERAREQEREBERAREQEREBERAREQEREBERAREQEREBERAREQEREBERAREQEREBERAREQEREBERAREQERYN2uEK0WyTc7jJbjQorROvvGXIWwHvIqoF2uMG0WyRcrnLYhw44bvPPHqAD9taqqbjL4g8TZAjiVwexDD/VdnGK+fXEfeZAupoPdItSr4vhWdj1ln8RLlHy7MIrzVjbco7Y7E9TlSg+zKkD7TpekQr3BT4layr5SryJwzONEAWuIWeecj6ZB3ftalX8BiQfwr9i3bIsPu8S35fcG7vZ57wxol57CjDrD5eBqQA9Gp16RcHXq1Eh6qErCWoyezw8gsM6yXBveNNZq05T1jQvap9hU9NK/bRSpt0UT4S3aXfOGuPXW4H2suRAaJ93/KHryI/m5bftUsQEREBERAREQEREBERAREQFiXGZFgQnZs6S1GjMhu688dAbClPWVa+he7hi2FXHCoIjTnWtfUqptURzizdvpy7UKuDwn/8Aqm318N1dAv8ACnqe01z8AegvEXsoPi6zst4pjSPh1wl4xiNalR291b1lXEfsjAXUDf8ApS1qXs93i2Vk4I8PbXDo0dsl3CT4jmy5rpSTL7dxIdfl1VkiIiNBGnKlPRRfSrRlWtyx6+YTHrdsQn3W7QI3XKsc6UcntWh9Pm7p8zB2g07hIiEvD016lOrJc4V6s8S7W2QMmHMaF5hyntCVOdFsFWHBG7A7OzXHK9gw5acjkUaiNO7iwy7q4PLpHpI6ulr7PePsqUrPRERQiIgIiICIiAiIgIiICIiAiIgIiICIiAiIgIiICrfiWFMoy+wcPx6oRl9L3ofejMOD2TRfc47r+wCVkKv7LRuPxzyUJVKDInWeA7CrX22mjfF2g/hMw2/GKJpYCIiKFA+Ld6kxLM3jFjKpZFkO8K3hT/EjUfrZJfYDQFt+LUfaWbmmZ2+wSWbSxHkXi/yh5xLVC5Vfc+M6+Fprn6XD5D+v0LHwLGrhFnS8qyd5qVk1zAW3aM97UJgS5jGZ29mniIvbLq+xEpLj9ri2WyW+ywh1iwIzcdka+oAGgj/uWyWBd7pbbREKXdLjEgRx9Lkl8Wg/MSh1eKdinO9lituveVuc9alaYREyJfe+5o1/GilgIqZLjvF+lZFuYwPK50mLXV8bY2zNo0Xu1Jpwh2+Hmt7C4xYu6xRy42zK7M562puPyuY/MAEP9aZTpZKKLYxxAwzJZNYtlyKDIl09MYnOzfp/2R8j/qUpRQiIgIiICIiAiIgr/jRKlO2ODiNsdcan5RMpbRcDxMx9SOQ78rQn8xCppbIUW326LbobIsxorYssNh4QAR1Gn7lCeIhhbeIeEZBM5Dbmn5UB16vhYdkgFGir7okQVDn7xirCQERRPMMytuNOsW6jMm6XuYNawrVDpvIf5e1r6ACnrMuQig/eIOXRsWs9XGg8/u8ghYttubL62U+deQDy931kXsiJVVeSsdk8MLbj+bk/SVJiOEzljwU/wlqU7u6/X7eydPanwbLMuOFZnLuQ8R3pcOmaQqfyC2t98MIvVzhkdabEblKls73anryHXxSKRnODXzh4U6/3SHbrdcmXYcqNcHRadA+oHWSAu/cS2HVUlPhISHahc6L6VGcKOJc93F2cWtWPXbKb1Z9orkgCCMwbAkQsPmbpCQ7gIl4Sr4llz+KmdBfXrLa+HkO/TY9dZTdsu5uhEL3HXSYFsT+HbmmTS6EVX2niHm3I/p7hBkcQh5a1gy40oS/MYcv61nDxUsUUueQ2jJMaa25dtdLW4DH7XQ2AfmJTlWlhIsK2XCBcoTcy2zo02MdOh6O6LgF+oh7lmoCIiAiIgIiICIiAiIgIiICIiAiIgIiICimd4zW/sw5sCcVtvlsdJ63TKBuIFUdSAw9tsx7iH8PrGilaIIGzkubwQ7G98Ppcx0O6sizT2HWHfipR82jH8NRr+Kq8SDiTlFajXzbBrcXd3EE24nT/AIDX+1r+FWEiCN4hiFlxZl6ttZdclyi3mTpLlXZUo/eddLqL9Xhp6qUURLJskz6W9CwN4LTYGnCak5I+xvV8hLkQRGi6T+ztS6fdoSlnFOY/A4Z5ROic+2j2eU63y94WirRe3D6BGtWB2G2w6CMePbmAb5e7Rse9EtNZuGGG2+SNwl2077c6em4Xpwpr9S96lXOYh8lBopn2TXYdh2Y9lrrrr3cvsXsiKYFnttus9vat9rgxoMRoeTTMdoQAP1DRZ6Ig0WTYvj+TRfNb9ZYVyb9nt2RIg+8S9I1+8VE52L3/ABJgrhhV0uVyjs97thuUopAPN+sWXT5uNOcvDzIgr6CH2lZKINLi19t2S2aPeLW+TsZ7nTkdNTaMS1Jsx9ImJcxIa+itFulXuP8AOycaL7aRpQIt9tzV3aCncPbtF2D9eXvVEo9aqwkBERAREQEREGqyO0wL9ZpVnukUJMKY0TLzZU586V/3V+yvqqooxB4kY9yiQJlqyu3hyoyV1fOJNEfdN0AMHfxaDX7dvErARBXz8HiTkL/Zz7pbsSt3PrbtZ+dzHfu7Z0BBr9gFVb3EMRsuNUdctsMqy5Vdpc6Q8T8qQX2m6fMi/Dz1p6lJEQVresgyTKr9cMXwZwbdEtzvm92v74dp2LuokTEcPbdoJDzIukfvqsrCeFmN4rkU2+Re3nTJbQUdeuHJ9+rokVSd7UqbUI9qbCOo9I9y+OAgjXBpD7n+Fv3u6HL29Pa+eOjXn+wRVhqksAbfBbuDtxCFGCY63RtyQLVO1MB9AkXprT7llgABzqAiOxcy5euq9EUqF8kIkNRIdqV9NF9Iggl44Z449KdudiZcxq816wn2n6kt/jAeh2n2iYlssnBMjnT35WP5Ey3DyW10Hzttv+alNFtpJZ94D1Lp8QEJCXxTJV7xFGtpz3CMnDnRus12zyqjTxNSg6Of3Udaa/eiVhIiIoREQEREBERAREQEREBERAREQEREBERAREQYl0iMXK2S7dJpzZlMGy5T4SHWv+9Q/gfNekcOLZb5lf8ArGy7WicPrF6OXZV/MIif6iop2q2yiPMwjKJWb2qI/LtE8QpkUFkKkYVCnIZjVPWQj0mNPEI0r6R6gslFh2u4Qrrbo9xt8pqVEkN0dZeaLYHBL0FSqzEBERARF8GQgNSKtBGneVaoIDej864+Y5FaoNCgWGfIfr8LrsYA/ibL9ysFVnwrd/SXM8nz8KUK3TCatdpcr/jY8bfd0fhN0z5fcCsxAREQEREBERAREQEREFeYAX0LxAy/FH+nzmX9OwP9Iy+Ii7y/C+B7f60ftVhqHZ7jc27BCvNjeaiZHZzJ23vO/wA25QvGw7y/xTg91fdrQSp4VkYVlsPJWX2iact93glQLha3y+viH8XvBX0idOkhQSlERAREQFXnGFwnJWF2drqfm5PDOlPgY2fOv5Wv61Yaqmz3OFnnGt2db5TT9qwyOcYTAqF2s2R0nWnwgAVHn7xF7qJpayIiKEREBERAREQEREBERAREQEREBERAREQEREBERBA5eA1hS352FX6TjD77lXX4gtDIgunWvOpEwfgKvrq0Qbe1svz6Q4qW2vKXj2OZA179vnnEd/7t0SH/AGinqIIIHEJ6NWoXfA8ygmPp7K3UmB+wo5GhcTbP7FizNwvdHGpnP/hKdoggFc3yedTWw8M789/pbo8zAb/iIj/gWHKxHMsvGjGc32JBs51+ts1j3oMgfcekHyMh+0QFvZWWiJYduhxoEJiDDYbjxo4C0002OoAA05UGlPsWYiIoREQEREBERAREQEREBUxneNwrtxvMnqSWZj2JG7Dlw5BsPsvMSPFQwIfU9TpLpryVzqu8np5vx4wuTtr51abpFL79SjOD/ZJVIg0G+cRrZwLicRIuYMXXS1tTpEK52oCr6B7URdaqFfe8QkSkt5znPLJOsMadiNpubd3lEyw9bLr1PfUOOjQRfAKCXRz7y5L04RW1q4cJLzhMnXs4U66WU/X0dq5r/AYqLWy5PzeFfCO7S+VZNvyGJBlVr6jEX4ZbfNyRKZ33iTc7DZZN0vHDjJ4saKOzrvbwibCm2vio/wDf9iwr5nPEJm/2O0RcHg2o7u+6w0d2uYlsYNE7/wCz78ukC/F8Km/ES0jf8Ev1kqNC8+t77A/iICpT+vkq1nXal4w/g3lhc9yu0Kj1fdq/FdaL+MhFB5ZzbMzO8Yqxm2VNuWS73X6Om26yNnCDrZcqFKu7k6YkYUEuofEt9i1st2NccZdltMNqDb5WLR3WmGQ0bEmJJh6Pt1dBbPj3Cfk8MLnOgiRT7OTV2i6+LeM4Lv8AEIEP7Vrsmmxi4mcNsril/JLq1Kt/ae8L7AvtfxMfxILPREUqEREBERAREQEREBERAREQEREBERAREQEREBERAREQEREBERAREQEREBERAREQEREBERAVecS6Ui57w5u3LpC8Pwir/r4bvL+IBVhqtvKGerb8IhZCLfaVsd7gXAh5+yL4gX8JkklPvhtzgcS+Itl517P6Ri3QKfdJjCJfxskq7uQDB4UZswNKiWOZ152NB9kPPGJG35HSVhkI23yixIh1C+Y1WlK+87Ff/wCSR/CtPc8Vl3DJ+KGNnCfG35LaWJMWTQPqqSOyNgx297mDRclSVvrniYBQOAeRwR22w3KTNjXp5NMTgkD/ALI1bXCe/Fk3DqyXd2hDKcii3KAvEEgOh0a/qMSUM+jGpmbcVMFdGghf7cxcI4F4S7Vgo7hfnaD96SLYksszYjjDo0Nl4KgVPeEqKg4sh2JwNxx18q+d4Rk8aJLpUvDRiV5uX+ydEv2q0uDN9/SHhfj1yIqk/wCZAzLpXxA+0Ojo1+/cSWnn8NnrhTP7c7cQj2rKeyeYFoKkcWR2Qg651dxbVAC/YgspF4RwNtgG3DJ0wGlKnWnir9q91KhERAREQEREBERAREQEREBFosxyCDi+MTr9ce0JmK3zFtvvN069wNh9pERCNPvqoNb8y4jWZit4z/DYEeyl9Y67aZZPP24PeebLxiPTsTfo6q6oLWRYsKSxNisSojwPMPAJtugWwmNac6FSvrospAREQEREBERAREQEREBERAREQERanJbm3ZMfuN4fqxRqFHN8u2d7JvkNOfUffr+vkg2yKoMdyjjTkNqi3eNhuLWyJKqJNMz7i/R8Wy9BkIt9P6vF9ykNnzG9xL3EsmdWFmzyJ7lWoM6HL84hSneW3ZbEIk24Q0LUSHq1LlXn0plOk+RERQiIgIiIC1GUWO25Lj82xXdgn4M1qrTzYmQ1IfxU76Lbog1b1nt71zgXJ6KBzLcBtxXzpzJoToND1/FqP7ltERBp7FY7XY25bdqiUjBLmOzH6CVdSecLYy7/AEc6/Yvb6Itn6QfpB5o19Jea+Z+c+12O2+n4du9bJEGssdotlkiFEtcRmFHN9x8m2h1EnHCIzL9pEVVs0WHPmxYEJ2bNktRozAEbrzx0AAGnpIir6EGYi02MZHYsmglcMfuka5RQPsidYPYaFy58v4qLcoCIiAiIgIiICIiAiIgIiIK94mtDOzPh9aHq8ojt5dmOh75R4zrrf8epfKvWU64fHmBHI61aaxiUfZ7d3MpTA8+X6hWVxOtlxkw7VfbJFOXdbBPGcxGGtKFIDUmn2qVLu2Jpw9fioKit9y+TkU0YuBYvd2smkM1huXW5Wh2K1amSLmZGTojuQkO1AHbYlSW74P0ZjHlllt9a1s9qv7kWAPstDVppxxofhB0zGn2eH2VDpV6y7C8pzSc9kr95s9kKPPegXEA3rCfEiImXREdTAgdERLYSERHpKuytPB8bg4hjESw26rhtRxrVx52vNx50i2N06+siKtSqtLlvDTGcoyRu+Xrz+RUWAYfhDJKkWSLZEbfatU8etTKtB8PV30qmhArdxSyaFxldxLIZFjciPyxaitRGHR0aNhx1p0nzLWpdACQa+I+nwrU4Dxhv7mPRHbrPiXWTDaaulyIIhA4cA66v0EeQiLsepAZa8xIOXtbK3p+D2e4X653G5N0nRblbmbe/AeASY1aNwgOlNfF9aX6vUshnDceYjWOMFuCjNiGoW4dq/VBUKtVH4qVCtaVpXnz7k1Iq64cRrhcxvuJx7vVu80yyHDtz7OoEcJ59s9g18YiAuiVfd129KvhRix4RiVmKPW241bYxRX3ZEcm49ObBueOoV9jb7BUnUqVZmPEXIbReXii4mFLHCuMe3vTJ0qrTst11wB1itUGu+u/PYiGldS91WmofxEw6mXR7dUbvPtMq2yvOo0mIIEQHoQeExIfCZcq+zXvW8x22BZrNFtYTJ84WB184nSCffc9exnXxVQam4ZHIZzq14rBg+cuyYz02W+Tmgx44VoFK0p7RE4QjQfs2rzWHk2YuQjyu2wofO4WixfSkcnC5hI2o/SlOXwmzyL8SzMuxJu/SYlwjXa4Wa7QwNti4QSDtaNny3bITEgMK6jXkQ9xCNaclg4/w4sNkjC1EdmG59FO2x5157cpAuOE6Zn7x7m4W3xkiVc4zmGdU4WX/ACV25zJrcgYTFlnXGGDNSffMWnXQaAR+oE3QqG3eWherkrIza5XfFsPthR5nn0+txt0J2VIbHm6LslpozIR1pStaEXoWDjHCuxWfEa445KuEyDItoQ5bBSTow6YjQavgFSLsjLlz6K0ovn/oyCWzObv+W5JeTfpHCO85JFk4gsOC6BB2QiPabiJEdR2rqqGi403S4M5vZbRDuWYAw/bZj8mJY+yaI9Ca0Mn3R1Aeo9i3HXp9G3Vh8QbnfGMcsL91hX6JiDFsKTdq2W4tPSa6a6NuyCMC7LTYiMOoq923vS248JcLuEK1QJ0efKj22joiLk90vORdMTd7fq+t2MaEWy3GQYVZL9ItX0k28dttfexahKgwzIddCNqlOvTl0jXpp9iDd2UoZ2eGcGh0i1YCrO+22mvTz26vR9qz0RSoUC46gB8PH6SOXmlLjbqy6ersfPGO02+HXnt8Knq199tkK92abaLi1R6JNYOO+HvAQ6kgi/GV60x+HlyevUSXOY6BahxpJsuSnycEWmaEBCXWdRH9SgBDbYfkx3a1Vug3CbYGjBx9oiIWbiB0dBtoy8XZumADyrX0ar2zKFen8VYwzNrTllwZhyWnYV/x1sX3ZAtF0E4Hjad17i6ajt1UJbDFsclZIVntjeOTMUwSwk29GtksKBJuT4FsBOhzro0JdepdRn1F6FSWdxwtjUqXhst243K21K9DCdfhTzZIBdad1LpLWtRdFou8S8OvhIlVmdcS8jcg4pLcvM5th9m5RHJVrlDFalS4zotBK3Iaj2BdxkPhESLxaroLOMPsWaWtm2ZHEclw2pIyKM0fMBIx58ttSpsPf6F+SsPsD9xx6YEEYzmPGZW5uP8AVNtCYaEOo92uvq+5NGVZ5bxWuOLO4qT92x24wztPnt5lNH0ydXWmj81IS1ItjM9eXeIKSZ/xNC02KLLsMUJLl0tz8i1vyqG20b4G0ANkFaCfV2u3q6QJSGRg2PP5XGv5wGCciwnYTMarIdgFHT3cOg69x17x2+wi95eL/D7GpmM2fH7lGkTodmeaegVfeLtWiar0dY8qlQadPKvpH07JydNHiOeTMozKz2qILUerFpkvX+JXvciyhdBoWq+sesX/AMQ8i+xWcsJmDCZmvTGobDcmRr2zwNDQ3dfDtX0lyWapUrbNclzy1Z3arJZ7Vjj0C6k63FelzHhOpg12pb0FuuvhPXltt8K0PFTivIxS53u0k6xHnQIEGfFEI5u+cETrnbtV7vDoA9fTrsrLvVgh3a8WS6vm+EizSTkR+zLpIjaNoqF9tNTJYGTYRZcguFxl3Gsuv0laK2iSAO6iTO9TEqfYY1IuRfeqShNy4gXmXk9ytjV9xjFLVbo8aW7LuTbhyibfEiESaMmqNH094ltXqHp71bUd9qRHbfZMXWnAoYGPoKlfWq5zrhVFyTLYuQxruVsltxwjSHQgMvPuAB7UIHTps074h3pzryVliPIaU+xSInk12nW/O8UgNGNLfdClx5Aa07zFrtQLn+pt396iHGrIMpt2UY9Z7I/emYd0akC/9GRo9XzcAdhAHX+kO7epFWnSI7KwMpxy0ZRb24F7iG+w07R5rR9xowcpQh2EwISGupFTur7VVgHgGKPY3+jc62FcrVR/zijNwkuyqif20N0iL+L2iVCq7jxLvj0XFcetrr5vz23X33rKYXeYbDDnZaCeotdqZCe7pdA6lrsppk0iNxK4T+f2U2mWSlA+Ue6fVNO1jSNnI7xDtQRImqiRU2p+Jb7IOHuH3puI3NsbLdIbPm8c4jhxTba/yQk0Ql2fweFbI8Yx48Zaxg7NBOyg2LQwTYoTWg+Eda/qQanhnmttzezSZcCMcZ2FIrElM7g6FHRoNfq3WyqBh391Rr+5TJYsCJGhRW4kOO1GjtDqDTLdAAKfYI09CylKhERAREQEREBERAREQEREBERAREQEREBERAREQEREBERAREQEREBERAREQEREBERAREQEREBERAREQEREBERAREQEREBERAREQEREBERAREQEREBERAREQEREBERAREQEREBERAREQEREBERAREQEREBERAREQEREBERAREQEREBERAREQEREBERAREQEREBERAREQFH8Yymy5FIu7Npldu5aJxwZg68tHR9P66ff91VlZHfbPj1pdu17uMaBCY8bzzmo0+776/cucuEuUMW+6W3JLLZsllRZ781nInYtofdYMDkOvR3xqAlsYb6Fy79T+FVlOnSc65QIEqHEmTmGZE5wmorbp0EnjoO1RCntV1EqrYLnHKspt2Yca8ausCeXmWP3OFEajutk08bsoXe1cJo6CYiOrAeHxES6OUqEREBERAREQEREBERAREQEREHm44DQVNyoiAU51rX1LS4Zk9nzDHY9/sMrzmDI2oB1HUuYlUSpWlfR3itNxhyizYtgd0lXW5x4bsiG8zDF0up50gLURH017+X6lyPnVyuFjtVknYlLymzWWXbmmZGzT8Jg5QtADpAXSJiYtAX4hIlUzpNU7fK5W+l3paKzWBuBM1kUi1cp2pNULXfX068+7mtguTfJslPyM2x/IbzfRmvO224W/wCtkbnHYY7Aw3Ii2Hbd0ur2RXT1jvlnvsc5FmusO4stnUDcivi6IlT2a6pU5JptERFKhERAREQEREBERAREQEREBERAREQEREBERARE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" alt="How to draw a horse by Van Oktop" width="400"></a>
</div>
<div class="title">How to draw a horse. Credit to Van Oktop.</div>
</div>
<div class="paragraph">
<p>Alors on propose aussi <a href="http://ninja-squad.fr/training/angular">une formation</a>,
en France et en Europe essentiellement, mais pourquoi pas dans le monde entier.
On peut aussi faire du conseil pour aider ton équipe,
ou même travailler avec toi pour t&#8217;aider à construire ton produit.
Envoie un email à <a href="mailto:hello@ninja-squad.com">hello@ninja-squad.com</a> et on en discutera&#160;!</p>
</div>
<div class="paragraph">
<p>Mais surtout, j&#8217;adorerais avoir ton retour sur ce que tu as aimé, adoré, ou détesté dans ce livre.
Cela peut être une petite faute de frappe, une grosse erreur,
ou juste pour nous raconter comment tu as trouvé le job de tes rêves grâce à ce livre (on ne sait jamais&#8230;&#8203;).</p>
</div>
<div class="paragraph">
<p>Je ne peux pas conclure sans remercier quelques personnes.
Ma petite amie tout d&#8217;abord, qui a été d&#8217;un soutien formidable,
même quand je passais mon dimanche sur la dixième réécriture d&#8217;un chapitre dans une humeur détestable.
Mes collègues ninjas, pour leur travail et retours sans relâche,
leur gentillesse et encouragements, et pour m&#8217;avoir laissé le temps nécessaire à cette folle idée.
Et mes amis et ma famille, pour les petits mots qui redonnent l&#8217;énergie au bon moment.</p>
</div>
<div class="paragraph">
<p>Et merci surtout à toi, pour avoir acheté ce livre, et l&#8217;avoir lu jusqu&#8217;à cette toute dernière ligne.</p>
</div>
<div class="paragraph">
<p>À très bientôt.</p>
</div>
<div style="page-break-after: always;"></div>
</div>
</div>
<div class="sect1">
<h2 id="changelog">Annexe A: Historique des versions</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Voici ci-dessous les changements que nous avons apportés à cet ebook
depuis sa première version.
C&#8217;est en anglais, mais ça devrait t&#8217;aider à voir les nouveautés depuis ta dernière lecture&#160;!</p>
</div>
<div class="paragraph">
<p>N&#8217;oublie pas qu&#8217;acheter cet ebook te donne droit à toutes ses mises à jour ultérieures, gratuitement.
Rends-toi sur la page <a href="https://books.ninja-squad.com/claim" class="bare">https://books.ninja-squad.com/claim</a> pour obtenir la toute dernière version.</p>
</div>
<div class="paragraph">
<p>Current versions:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Angular: <code>19.2.8</code></p>
</li>
<li>
<p>Angular CLI: <code>19.2.9</code></p>
</li>
</ul>
</div>
<div class="sect2">
<h3 id="_v19_2_0_2025_02_26">A.1. v19.2.0 - 2025-02-26</h3>
<div class="paragraph">
<p><strong>Signals: advanced topics</strong></p>
</div>
<div class="ulist">
<ul>
<li>
<p>Add a section about <code>httpResource()</code>, introduced in v19.2 <span class="small">(2025-02-20)</span></p>
</li>
<li>
<p>Add a section about <code>resource</code> with a <code>stream</code> and update the <code>rxResource</code> section according to changes in v19.2. <span class="small">(2025-02-09)</span></p>
</li>
<li>
<p>We can define a <code>defaultValue</code> in a <code>resource</code> in v19.2. <span class="small">(2025-02-07)</span></p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_v19_1_0_2025_01_16">A.2. v19.1.0 - 2025-01-16</h3>

</div>
<div class="sect2">
<h3 id="_v19_0_0_2024_11_19">A.3. v19.0.0 - 2024-11-19</h3>
<div class="paragraph">
<p><strong>Signals basics</strong></p>
</div>
<div class="ulist">
<ul>
<li>
<p>New chapter to introduce signal basics at the beginning of the ebook! <span class="small">(2024-09-26)</span></p>
</li>
</ul>
</div>
<div class="paragraph">
<p><strong>Reactive Programming</strong></p>
</div>
<div class="ulist">
<ul>
<li>
<p>Rewrite and introduce the interoperability with signals. <span class="small">(2024-11-07)</span></p>
</li>
</ul>
</div>
<div class="paragraph">
<p><strong>Building components and directives</strong></p>
</div>
<div class="ulist">
<ul>
<li>
<p>Chapter updated to explain <code>input()</code> and <code>output()</code>. <span class="small">(2024-10-24)</span></p>
</li>
</ul>
</div>
<div class="paragraph">
<p><strong>Reacting to signal changes</strong></p>
</div>
<div class="ulist">
<ul>
<li>
<p>New chapter about <code>computed</code> and <code>effect</code> and how to use them. <span class="small">(2024-10-24)</span></p>
</li>
</ul>
</div>
<div class="paragraph">
<p><strong>Send and receive data with Http</strong></p>
</div>
<div class="ulist">
<ul>
<li>
<p>Showcase how to use <code>toSignal</code> to subscribe. <span class="small">(2024-11-19)</span></p>
</li>
</ul>
</div>
<div class="paragraph">
<p><strong>Advanced components and directives</strong></p>
</div>
<div class="ulist">
<ul>
<li>
<p>Use <code>viewChild()</code>/<code>contentChild()</code> instead of decorators. <span class="small">(2024-11-19)</span></p>
</li>
</ul>
</div>
<div class="paragraph">
<p><strong>Signals: advanced topics</strong></p>
</div>
<div class="ulist">
<ul>
<li>
<p>New chapter about advanced topics with Signals! <span class="small">(2024-11-19)</span></p>
</li>
<li>
<p>Add a section about the <code>resource</code> and <code>rxResource</code> functions introduced in v19. <span class="small">(2024-11-19)</span></p>
</li>
<li>
<p>Add a section about the experimental <code>linkedSignal</code> introduced in v19. <span class="small">(2024-11-19)</span></p>
</li>
</ul>
</div>
<div class="paragraph">
<p><strong>Performances</strong></p>
</div>
<div class="ulist">
<ul>
<li>
<p>Rewrite the chapter to use signals and solve a lot of problems our of the box! <span class="small">(2024-11-19)</span></p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_v18_2_0_2024_08_15">A.4. v18.2.0 - 2024-08-15</h3>

</div>
<div class="sect2">
<h3 id="_v18_1_0_2024_07_10">A.5. v18.1.0 - 2024-07-10</h3>
<div class="paragraph">
<p><strong>The templating syntax</strong></p>
</div>
<div class="ulist">
<ul>
<li>
<p>Add a section about <code>@let</code> variables, as introduced in Angular v18.1. <span class="small">(2024-07-08)</span></p>
</li>
</ul>
</div>
<div class="paragraph">
<p><strong>Building components and directives</strong></p>
</div>
<div class="ulist">
<ul>
<li>
<p>Add a section about <code>afterRender</code> and <code>afterNextRender</code>. <span class="small">(2024-06-21)</span></p>
</li>
</ul>
</div>
<div class="paragraph">
<p><strong>Performances</strong></p>
</div>
<div class="ulist">
<ul>
<li>
<p>Refresh the performances chapter regarding the control flow syntax, signals, and the experimental zoneless detection <span class="small">(2024-05-31)</span></p>
</li>
<li>
<p>Mention the <code>--ssr</code> option of the CLI for Server Side Rendering. <span class="small">(2024-05-23)</span></p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_v18_0_0_2024_05_22">A.6. v18.0.0 - 2024-05-22</h3>
<div class="paragraph">
<p><strong>The templating syntax</strong></p>
</div>
<div class="ulist">
<ul>
<li>
<p>The chapter now introduces <code>@if</code>/<code>@for</code>/<code>@switch</code> from the control flow syntax as the recommended way to write templates.
We kept a section about <code>*ngIf</code>/<code>*ngFor</code>/<code>*ngSwitch</code> as they are not deprecated and can still be used.
All template examples across the ebook now use the control flow syntax. <span class="small">(2024-04-22)</span></p>
</li>
</ul>
</div>
<div class="paragraph">
<p><strong>Building components and directives</strong></p>
</div>
<div class="ulist">
<ul>
<li>
<p>Add a section about fallback content for <code>ng-content</code>, as introduced in Angular v18. <span class="small">(2024-05-02)</span></p>
</li>
</ul>
</div>
<div class="paragraph">
<p><strong>Forms</strong></p>
</div>
<div class="ulist">
<ul>
<li>
<p>Mention the <code>events</code> observable on <code>FormControl</code>, introduced in Angular v18. <span class="small">(2024-05-03)</span></p>
</li>
</ul>
</div>
<div class="paragraph">
<p><strong>Send and receive data with Http</strong></p>
</div>
<div class="ulist">
<ul>
<li>
<p>Mention that <code>HttpClientModule</code> is deprecated in Angular v18. <span class="small">(2024-04-27)</span></p>
</li>
</ul>
</div>
<div class="paragraph">
<p><strong>Internationalization</strong></p>
</div>
<div class="ulist">
<ul>
<li>
<p>Add a section about i18n with Transloco and new exercice to go along with it! <span class="small">(2024-03-16)</span></p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_v17_3_0_2024_03_14">A.7. v17.3.0 - 2024-03-14</h3>
<div class="paragraph">
<p><strong>Signals</strong></p>
</div>
<div class="ulist">
<ul>
<li>
<p>Add a section about the <code>output()</code> function introduced in v17.3 <span class="small">(2024-03-08)</span></p>
</li>
</ul>
</div>
<div class="paragraph">
<p><strong>Advanced observables</strong></p>
</div>
<div class="ulist">
<ul>
<li>
<p>Add a section about using subjects as triggers. <span class="small">(2024-02-27)</span></p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_v17_2_0_2024_02_15">A.8. v17.2.0 - 2024-02-15</h3>
<div class="paragraph">
<p><strong>Signals</strong></p>
</div>
<div class="ulist">
<ul>
<li>
<p>Add a section about the <code>model()</code> function introduced in v17.2 <span class="small">(2024-02-13)</span></p>
</li>
<li>
<p>Add a section about the queries as signals functions (<code>viewChild()</code>/<code>viewChildren()</code>/<code>contentChild()</code>/<code>contentChildren()</code>) introduced in v17.2 <span class="small">(2024-02-12)</span></p>
</li>
</ul>
</div>
<div class="paragraph">
<p><strong>Deferred loading with <code>@defer</code></strong></p>
</div>
<div class="ulist">
<ul>
<li>
<p>The defer block fixture default behavior switched to <code>Playthrough</code>. <span class="small">(2024-02-01)</span></p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_v17_1_0_2024_01_18">A.9. v17.1.0 - 2024-01-18</h3>
<div class="paragraph">
<p><strong>Signals</strong></p>
</div>
<div class="ulist">
<ul>
<li>
<p>Add a section about input as signals, as introduced in v17.1 <span class="small">(2024-01-17)</span></p>
</li>
<li>
<p>Mention the new <code>Signals</code> exercise added to the Pro Pack! <span class="small">(2023-12-23)</span></p>
</li>
<li>
<p>Add a section about how to handle nullable values in signals. <span class="small">(2023-12-23)</span></p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_v17_0_0_2023_11_08">A.10. v17.0.0 - 2023-11-08</h3>
<div class="paragraph">
<p><strong>Styling components and encapsulation</strong></p>
</div>
<div class="ulist">
<ul>
<li>
<p>We now use <code>styleUrl</code> when possible, as introduced in Angular v17. <span class="small">(2023-11-08)</span></p>
</li>
</ul>
</div>
<div class="paragraph">
<p><strong>Signals</strong></p>
</div>
<div class="ulist">
<ul>
<li>
<p>Remove the <code>mutate</code> method from examples,a s it has been remove in Angular v17. <span class="small">(2023-10-12)</span></p>
</li>
</ul>
</div>
<div class="paragraph">
<p><strong>Control flow syntax</strong></p>
</div>
<div class="ulist">
<ul>
<li>
<p>New chapter about the control flow syntax introduced in Angular v17! <span class="small">(2023-10-08)</span></p>
</li>
</ul>
</div>
<div class="paragraph">
<p><strong>Deferred loading with <code>@defer</code></strong></p>
</div>
<div class="ulist">
<ul>
<li>
<p>New chapter about deferred loading with <code>@defer</code> as introduced in Angular v17! <span class="small">(2023-10-30)</span></p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_v16_2_0_2023_08_10">A.11. v16.2.0 - 2023-08-10</h3>
<div class="paragraph">
<p><strong>Building components and directives</strong></p>
</div>
<div class="ulist">
<ul>
<li>
<p>Add a section about the <code>transform</code> option of <code>@Input</code>, introduced in Angular v16.1. <span class="small">(2023-06-24)</span></p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_v16_1_0_2023_06_14">A.12. v16.1.0 - 2023-06-14</h3>

</div>
<div class="sect2">
<h3 id="_v16_0_0_2023_05_17">A.13. v16.0.0 - 2023-05-17</h3>
<div class="paragraph">
<p><strong>Building components and directives</strong></p>
</div>
<div class="ulist">
<ul>
<li>
<p>Introduce required inputs, as added in Angular v16 <span class="small">(2023-05-03)</span></p>
</li>
</ul>
</div>
<div class="paragraph">
<p><strong>Router</strong></p>
</div>
<div class="ulist">
<ul>
<li>
<p>Add a section about <code>withComponentInputBinding</code> to get router parameters and data as component inputs, as introduced in Angular v16 <span class="small">(2023-05-03)</span></p>
</li>
</ul>
</div>
<div class="paragraph">
<p><strong>Signals</strong></p>
</div>
<div class="ulist">
<ul>
<li>
<p>New chapter about Signals! <span class="small">(2023-05-17)</span></p>
</li>
</ul>
</div>
<div class="paragraph">
<p><strong>Advanced observables</strong></p>
</div>
<div class="ulist">
<ul>
<li>
<p>Use the <code>takeUntilDestroyed</code> RxJS operator introduced in Angular v16 <span class="small">(2023-05-03)</span></p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_v15_2_0_2023_02_23">A.14. v15.2.0 - 2023-02-23</h3>
<div class="paragraph">
<p><strong>Router</strong></p>
</div>
<div class="ulist">
<ul>
<li>
<p>As Angular v15.2 deprecates class-based resolvers and guards, we now use functional resolvers and guards in all examples. <span class="small">(2023-02-23)</span></p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_v15_1_0_2023_01_11">A.15. v15.1.0 - 2023-01-11</h3>
<div class="paragraph">
<p><strong>Dependency Injection</strong></p>
</div>
<div class="ulist">
<ul>
<li>
<p>Use a better example for DI configuration, with a logging service that logs to the console in development and calls an API in production. <span class="small">(2023-01-05)</span></p>
</li>
<li>
<p>Add a section about the <code>inject()</code> function. <span class="small">(2022-12-01)</span></p>
</li>
</ul>
</div>
<div class="paragraph">
<p><strong>Router</strong></p>
</div>
<div class="ulist">
<ul>
<li>
<p>Remove the section about the <code>CanLoad</code> guard as it is now deprecated (use <code>CanMatch</code> instead). <span class="small">(2023-01-11)</span></p>
</li>
</ul>
</div>
<div class="paragraph">
<p><strong>Standalone components</strong></p>
</div>
<div class="ulist">
<ul>
<li>
<p>Add a section about HTTP with <code>provideHttpClient</code> and functional interceptors. <span class="small">(2022-11-30)</span></p>
</li>
</ul>
</div>
<div class="paragraph">
<p><strong>Going to production</strong></p>
</div>
<div class="ulist">
<ul>
<li>
<p>Explains how to use <code>ng generate environments</code>. <span class="small">(2023-01-11)</span></p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_v15_0_0_2022_11_16">A.16. v15.0.0 - 2022-11-16</h3>
<div class="paragraph">
<p><strong>Dependency Injection</strong></p>
</div>
<div class="ulist">
<ul>
<li>
<p>Remove the <code>providedIn: NgModule</code> syntax now that it is deprecated in Angular v15 <span class="small">(2022-11-16)</span></p>
</li>
</ul>
</div>
<div class="paragraph">
<p><strong>Router</strong></p>
</div>
<div class="ulist">
<ul>
<li>
<p>The router automatically unwraps default module exports in lazy-loading routes in Angular v15 <span class="small">(2022-11-16)</span></p>
</li>
<li>
<p>Showcases an example of a functional resolver <span class="small">(2022-11-14)</span></p>
</li>
<li>
<p>Showcases an example of functional guard <span class="small">(2022-11-14)</span></p>
</li>
</ul>
</div>
<div class="paragraph">
<p><strong>Standalone components</strong></p>
</div>
<div class="ulist">
<ul>
<li>
<p>Use the <code>NgFor</code> alias introduced in Angular v15 for the <code>NgForOf</code> directive <span class="small">(2022-11-16)</span></p>
</li>
<li>
<p>The router now automatically unwraps default component exports in lazy-loading routes <span class="small">(2022-11-16)</span></p>
</li>
</ul>
</div>
<div class="paragraph">
<p><strong>Going to production</strong></p>
</div>
<div class="ulist">
<ul>
<li>
<p>Replace the explanation of <code>enableProdMode</code> by a section about production mode and mention the <code>ngDevMode</code> variable. <span class="small">(2022-11-16)</span></p>
</li>
<li>
<p>We now explain how to use <code>fileReplacements</code> as it is no longer included by default in CLI v15. <span class="small">(2022-11-16)</span></p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_v14_2_0_2022_08_26">A.17. v14.2.0 - 2022-08-26</h3>
<div class="paragraph">
<p><strong>Standalone components</strong></p>
</div>
<div class="ulist">
<ul>
<li>
<p>Mention <code>provideRouter(routes)</code> <span class="small">(2022-08-26)</span></p>
</li>
</ul>
</div>
<div class="paragraph">
<p><strong>Performances</strong></p>
</div>
<div class="ulist">
<ul>
<li>
<p>Mention the experimental <code>NgOptimizedImage</code> directive introduced in v14.2 <span class="small">(2022-08-26)</span></p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_v14_1_0_2022_07_21">A.18. v14.1.0 - 2022-07-21</h3>
<div class="paragraph">
<p><strong>Router</strong></p>
</div>
<div class="ulist">
<ul>
<li>
<p>Add a section on the new <code>CanMatch</code> guard introduced in v14.1 <span class="small">(2022-07-21)</span></p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_v14_0_0_2022_06_03">A.19. v14.0.0 - 2022-06-03</h3>
<div class="paragraph">
<p><strong>Forms</strong></p>
</div>
<div class="ulist">
<ul>
<li>
<p>Add a section about <code>FormArray</code> and <code>FormRecord</code> <span class="small">(2022-06-03)</span></p>
</li>
<li>
<p>Add a section about typed forms <span class="small">(2022-06-03)</span></p>
</li>
<li>
<p>We nows use and explain the new "strictly typed forms API" 🚀 <span class="small">(2022-06-03)</span></p>
</li>
</ul>
</div>
<div class="paragraph">
<p><strong>Standalone components</strong></p>
</div>
<div class="ulist">
<ul>
<li>
<p>New chapter about standalone APIs! <span class="small">(2022-06-03)</span></p>
</li>
</ul>
</div>
<div class="paragraph">
<p><strong>Performances</strong></p>
</div>
<div class="ulist">
<ul>
<li>
<p>Better example of <code>NgZone.runOutsideAngular</code> usage <span class="small">(2022-05-11)</span></p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_v13_3_0_2022_03_16">A.20. v13.3.0 - 2022-03-16</h3>

</div>
<div class="sect2">
<h3 id="_v13_2_0_2022_01_27">A.21. v13.2.0 - 2022-01-27</h3>
<div class="paragraph">
<p><strong>Forms</strong></p>
</div>
<div class="ulist">
<ul>
<li>
<p>The forms chapter has a new section about control value accessors, explaining how to create custom form controls <span class="small">(2021-12-14)</span></p>
</li>
</ul>
</div>
<div class="paragraph">
<p><strong>Advanced components and directives</strong></p>
</div>
<div class="ulist">
<ul>
<li>
<p>The advanced components chapter has a new section about ng-template, explaining how to create customizable components using conditional, contextual content projection <span class="small">(2021-12-17)</span></p>
</li>
</ul>
</div>
<div class="paragraph">
<p><strong>Going to production</strong></p>
</div>
<div class="ulist">
<ul>
<li>
<p>Section about the new <code>extendedDiagnostics</code> option introduced in v13.2 <span class="small">(2022-01-27)</span></p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_v13_1_0_2021_12_10">A.22. v13.1.0 - 2021-12-10</h3>

</div>
<div class="sect2">
<h3 id="_v13_0_0_2021_11_04">A.23. v13.0.0 - 2021-11-04</h3>
<div class="paragraph">
<p><strong>The templating syntax</strong></p>
</div>
<div class="ulist">
<ul>
<li>
<p>Remove the canonical <code>bind-</code>, <code>on-</code>, <code>ref-</code> syntax that has been deprecated in Angular v13 <span class="small">(2021-11-04)</span></p>
</li>
</ul>
</div>
<div class="paragraph">
<p><strong>Going to production</strong></p>
</div>
<div class="ulist">
<ul>
<li>
<p>Remove the section about differential loading as it has been removed in Angular v13 <span class="small">(2021-11-04)</span></p>
</li>
<li>
<p>Remove the <code>fullTemplateTypeCheck</code> explanation, as it is deprecated in Angular v13, and only keep its remplacement <code>strictTemplates</code>. <span class="small">(2021-11-04)</span></p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_v12_2_0_2021_08_05">A.24. v12.2.0 - 2021-08-05</h3>
<div class="paragraph">
<p><strong>Global</strong></p>
</div>
<div class="ulist">
<ul>
<li>
<p>Add links to our quizzes! <span class="small">(2021-07-29)</span></p>
</li>
</ul>
</div>
<div class="paragraph">
<p><strong>Reactive Programming</strong></p>
</div>
<div class="ulist">
<ul>
<li>
<p>RxJS v7.2 allows to import operators directly from <code>rxjs</code>, so all imports have been simplified. <span class="small">(2021-08-05)</span></p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_v12_1_0_2021_06_25">A.25. v12.1.0 - 2021-06-25</h3>

</div>
<div class="sect2">
<h3 id="_v12_0_0_2021_05_13">A.26. v12.0.0 - 2021-05-13</h3>
<div class="paragraph">
<p><strong>Global</strong></p>
</div>
<div class="ulist">
<ul>
<li>
<p>All examples now use strict null checks. <span class="small">(2021-05-13)</span></p>
</li>
</ul>
</div>
<div class="paragraph">
<p><strong>From zero to something</strong></p>
</div>
<div class="ulist">
<ul>
<li>
<p>The ebook now uses ESLint as its linter. <span class="small">(2021-05-13)</span></p>
</li>
</ul>
</div>
<div class="paragraph">
<p><strong>Testing your app</strong></p>
</div>
<div class="ulist">
<ul>
<li>
<p>The e2e tests section now introduces Cypress <span class="small">(2021-05-13)</span></p>
</li>
</ul>
</div>
<div class="paragraph">
<p><strong>Send and receive data with Http</strong></p>
</div>
<div class="ulist">
<ul>
<li>
<p>Section about the new <code>HttpContext</code> introduced in Angular v12. <span class="small">(2021-05-13)</span></p>
</li>
<li>
<p>The HTTP examples now use the human-readable <code>HttpStatusCode</code> enum. <span class="small">(2021-05-13)</span></p>
</li>
</ul>
</div>
<div class="paragraph">
<p><strong>Going to production</strong></p>
</div>
<div class="ulist">
<ul>
<li>
<p>The CLI uses the production configuration by default for <code>ng build</code> since v12, and the <code>--prod</code> flag is deprecated. <span class="small">(2021-05-13)</span></p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_v11_2_0_2021_02_12">A.27. v11.2.0 - 2021-02-12</h3>

</div>
<div class="sect2">
<h3 id="_v11_1_0_2021_01_21">A.28. v11.1.0 - 2021-01-21</h3>

</div>
<div class="sect2">
<h3 id="_v11_0_0_2020_11_12">A.29. v11.0.0 - 2020-11-12</h3>
<div class="paragraph">
<p><strong>Internationalization</strong></p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>ng xi18n</code> has been renamed <code>ng extract-i18n</code> in CLI v11 <span class="small">(2020-11-12)</span></p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_v10_2_0_2020_10_22">A.30. v10.2.0 - 2020-10-22</h3>
<div class="paragraph">
<p><strong>Internationalization</strong></p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>xi18N</code> now extracts messages from the <code>$localize</code> calls in TypeScript code <span class="small">(2020-09-10)</span></p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_v10_1_0_2020_09_03">A.31. v10.1.0 - 2020-09-03</h3>
<div class="paragraph">
<p><strong>Testing your app</strong></p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>async</code> has been deprecated and renamed <code>waitForAsync</code> <span class="small">(2020-09-01)</span></p>
</li>
</ul>
</div>
<div class="paragraph">
<p><strong>Internationalization</strong></p>
</div>
<div class="ulist">
<ul>
<li>
<p>Import the global variants of the locale data. It&#8217;s simpler, supports all formatting options, and doesn&#8217;t trigger an optimization bailout warning when building the app with the CLI. <span class="small">(2020-07-01)</span></p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_v10_0_0_2020_06_25">A.32. v10.0.0 - 2020-06-25</h3>
<div class="paragraph">
<p><strong>Global</strong></p>
</div>
<div class="ulist">
<ul>
<li>
<p>Bump to ng <code>10.0.0</code> <span class="small">(2020-06-25)</span></p>
</li>
</ul>
</div>
<div class="paragraph">
<p><strong>The wonderful world of Web Components</strong></p>
</div>
<div class="ulist">
<ul>
<li>
<p>Use <code>customElements.define</code> instead of the deprecated <code>document.registerElement</code>. <span class="small">(2020-06-17)</span></p>
</li>
</ul>
</div>
<div class="paragraph">
<p><strong>Reactive Programming</strong></p>
</div>
<div class="ulist">
<ul>
<li>
<p>Pass an object as argument to the <code>Observable.subscribe()</code> method when an error or a completion must be handled, instead of 2 or 3 functions, because passing several functions will be deprecated in RxJS 7. <span class="small">(2020-06-05)</span></p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_v9_1_0_2020_03_26">A.33. v9.1.0 - 2020-03-26</h3>
<div class="paragraph">
<p><strong>Global</strong></p>
</div>
<div class="ulist">
<ul>
<li>
<p>Bump to ng <code>9.1.0</code> <span class="small">(2020-03-26)</span></p>
</li>
</ul>
</div>
<div class="paragraph">
<p><strong>From zero to something</strong></p>
</div>
<div class="ulist">
<ul>
<li>
<p>Bump to cli <code>9.1.0</code> <span class="small">(2020-03-26)</span></p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_v9_0_0_2020_02_07">A.34. v9.0.0 - 2020-02-07</h3>
<div class="paragraph">
<p><strong>Global</strong></p>
</div>
<div class="ulist">
<ul>
<li>
<p>Bump to ng <code>9.0.0</code> <span class="small">(2020-02-07)</span></p>
</li>
<li>
<p>Bump to ng <code>9.0.0-next.5</code> <span class="small">(2020-02-06)</span></p>
</li>
</ul>
</div>
<div class="paragraph">
<p><strong>A gentle introduction to ECMAScript 2015+</strong></p>
</div>
<div class="ulist">
<ul>
<li>
<p>Add a section about tagged template strings. <span class="small">(2019-08-02)</span></p>
</li>
</ul>
</div>
<div class="paragraph">
<p><strong>Diving into TypeScript</strong></p>
</div>
<div class="ulist">
<ul>
<li>
<p>Showcase interface usage for modeling entities <span class="small">(2019-08-10)</span></p>
</li>
<li>
<p>Improve the <code>enum</code> section with examples of how to use union types <span class="small">(2019-08-10)</span></p>
</li>
</ul>
</div>
<div class="paragraph">
<p><strong>Advanced TypeScript</strong></p>
</div>
<div class="ulist">
<ul>
<li>
<p>Introduce a new chapter about advanced TypeScript patterns, like <code>keyof</code>, mapped types, type guards, and other things! <span class="small">(2019-08-10)</span></p>
</li>
</ul>
</div>
<div class="paragraph">
<p><strong>From zero to something</strong></p>
</div>
<div class="ulist">
<ul>
<li>
<p>Bump to cli <code>9.0.1</code> <span class="small">(2020-02-07)</span></p>
</li>
<li>
<p>Bump to cli <code>9.0.0-next.3</code> <span class="small">(2020-02-06)</span></p>
</li>
<li>
<p>Bump to cli <code>8.3.2</code> <span class="small">(2019-08-30)</span></p>
</li>
<li>
<p>Bump to cli <code>8.3.0</code> <span class="small">(2019-08-22)</span></p>
</li>
</ul>
</div>
<div class="paragraph">
<p><strong>Testing your app</strong></p>
</div>
<div class="ulist">
<ul>
<li>
<p>Use <code>TestBed.inject</code> instead of the deprecated <code>TestBed.get</code> in ng <code>9.0.0</code> <span class="small">(2020-02-06)</span></p>
</li>
</ul>
</div>
<div class="paragraph">
<p><strong>Internationalization</strong></p>
</div>
<div class="ulist">
<ul>
<li>
<p>Explains how to configure the default currency code <span class="small">(2020-02-07)</span></p>
</li>
<li>
<p>Introduce <code>@angular/localize</code> usage in ng <code>9.0.0</code> <span class="small">(2020-02-07)</span></p>
</li>
</ul>
</div>
<div class="paragraph">
<p><strong>Going to production</strong></p>
</div>
<div class="ulist">
<ul>
<li>
<p>Mention the multiple configurations support introduced in CLI v9.0 <span class="small">(2020-02-07)</span></p>
</li>
<li>
<p>Explain the <code>fullTemplateTypeCheck</code> and <code>strictTemplates</code> options <span class="small">(2020-02-07)</span></p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_v8_2_0_2019_08_01">A.35. v8.2.0 - 2019-08-01</h3>
<div class="paragraph">
<p><strong>Global</strong></p>
</div>
<div class="ulist">
<ul>
<li>
<p>Bump to ng <code>8.2.0</code> <span class="small">(2019-08-01)</span></p>
</li>
</ul>
</div>
<div class="paragraph">
<p><strong>From zero to something</strong></p>
</div>
<div class="ulist">
<ul>
<li>
<p>Bump to cli <code>8.2.0</code> <span class="small">(2019-08-01)</span></p>
</li>
</ul>
</div>
<div class="paragraph">
<p><strong>Testing your app</strong></p>
</div>
<div class="ulist">
<ul>
<li>
<p>Use a more strictly typed <code>createSpyObj</code> syntax. <span class="small">(2019-07-31)</span></p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_v8_1_0_2019_07_02">A.36. v8.1.0 - 2019-07-02</h3>
<div class="paragraph">
<p><strong>Global</strong></p>
</div>
<div class="ulist">
<ul>
<li>
<p>Bump to ng <code>8.1.0</code> <span class="small">(2019-07-02)</span></p>
</li>
</ul>
</div>
<div class="paragraph">
<p><strong>The wonderful world of Web Components</strong></p>
</div>
<div class="ulist">
<ul>
<li>
<p>Mention more recent alternatives to Polymer, remove the dead HTML import spec and mention Angular Elements <span class="small">(2019-06-01)</span></p>
</li>
</ul>
</div>
<div class="paragraph">
<p><strong>From zero to something</strong></p>
</div>
<div class="ulist">
<ul>
<li>
<p>Bump to cli <code>8.1.0</code> <span class="small">(2019-07-02)</span></p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_v8_0_0_2019_05_29">A.37. v8.0.0 - 2019-05-29</h3>
<div class="paragraph">
<p><strong>Global</strong></p>
</div>
<div class="ulist">
<ul>
<li>
<p>Bump to ng <code>8.0.0</code> <span class="small">(2019-05-29)</span></p>
</li>
</ul>
</div>
<div class="paragraph">
<p><strong>A gentle introduction to ECMAScript 2015+</strong></p>
</div>
<div class="ulist">
<ul>
<li>
<p>How to use <code>async/await</code> with promises <span class="small">(2019-05-19)</span></p>
</li>
</ul>
</div>
<div class="paragraph">
<p><strong>From zero to something</strong></p>
</div>
<div class="ulist">
<ul>
<li>
<p>Bump to cli <code>8.0.0</code> <span class="small">(2019-05-29)</span></p>
</li>
<li>
<p>Bump cli to <code>7.3.0</code> <span class="small">(2019-02-28)</span></p>
</li>
</ul>
</div>
<div class="paragraph">
<p><strong>Testing your app</strong></p>
</div>
<div class="ulist">
<ul>
<li>
<p>Showcase the awesome <code>ngx-speculoos</code> library for cleaner unit tests <span class="small">(2019-05-20)</span></p>
</li>
</ul>
</div>
<div class="paragraph">
<p><strong>Forms</strong></p>
</div>
<div class="ulist">
<ul>
<li>
<p>Showcase the awesome <code>ngx-valdemort</code> library for better validation error messages <span class="small">(2019-05-19)</span></p>
</li>
</ul>
</div>
<div class="paragraph">
<p><strong>Router</strong></p>
</div>
<div class="ulist">
<ul>
<li>
<p>Use <code>import</code> for lazy-loading routes as introduced by ng <code>8.0.0</code> <span class="small">(2019-05-20)</span></p>
</li>
</ul>
</div>
<div class="paragraph">
<p><strong>Angular compiler</strong></p>
</div>
<div class="ulist">
<ul>
<li>
<p>Update the AoT explanation and generated code for Angular 8.0.0 (Ivy) <span class="small">(2019-05-20)</span></p>
</li>
</ul>
</div>
<div class="paragraph">
<p><strong>Advanced components and directives</strong></p>
</div>
<div class="ulist">
<ul>
<li>
<p>Add and explain the <code>static</code> flag for <code>ViewChild</code> and <code>ContentChild</code> introduced by Angular <code>8.0.0</code> <span class="small">(2019-05-27)</span></p>
</li>
</ul>
</div>
<div class="paragraph">
<p><strong>Going to production</strong></p>
</div>
<div class="ulist">
<ul>
<li>
<p>Differential loading using <code>browserslist</code> as introduced by the cli <code>8.0.0</code>. <span class="small">(2019-05-20)</span></p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_v7_2_0_2019_01_09">A.38. v7.2.0 - 2019-01-09</h3>
<div class="paragraph">
<p><strong>Global</strong></p>
</div>
<div class="ulist">
<ul>
<li>
<p>Bump to ng <code>7.2.0</code> <span class="small">(2019-01-07)</span></p>
</li>
<li>
<p>Bump to ng <code>7.2.0-rc.0</code> <span class="small">(2019-01-03)</span></p>
</li>
<li>
<p>Bump to ng <code>7.2.0-beta.2</code> <span class="small">(2018-12-14)</span></p>
</li>
</ul>
</div>
<div class="paragraph">
<p><strong>From zero to something</strong></p>
</div>
<div class="ulist">
<ul>
<li>
<p>Bump to cli <code>7.2.0</code> <span class="small">(2019-01-09)</span></p>
</li>
<li>
<p>Bump to cli <code>7.2.0-rc.0</code> <span class="small">(2019-01-07)</span></p>
</li>
<li>
<p>Bump to cli <code>7.2.0-beta.2</code> <span class="small">(2019-01-07)</span></p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_v7_1_0_2018_11_27">A.39. v7.1.0 - 2018-11-27</h3>
<div class="paragraph">
<p><strong>Global</strong></p>
</div>
<div class="ulist">
<ul>
<li>
<p>Bump to ng <code>7.1.0</code> <span class="small">(2018-11-22)</span></p>
</li>
<li>
<p>Bump to ng <code>7.1.0-rc.0</code> <span class="small">(2018-11-20)</span></p>
</li>
<li>
<p>Bump to ng <code>7.0.2</code> <span class="small">(2018-11-05)</span></p>
</li>
</ul>
</div>
<div class="paragraph">
<p><strong>From zero to something</strong></p>
</div>
<div class="ulist">
<ul>
<li>
<p>Bump to cli <code>7.1.0</code> <span class="small">(2018-11-27)</span></p>
</li>
<li>
<p>Bump to cli <code>7.0.4</code> <span class="small">(2018-11-05)</span></p>
</li>
</ul>
</div>
<div class="paragraph">
<p><strong>Router</strong></p>
</div>
<div class="ulist">
<ul>
<li>
<p>Use <code>UrlTree</code> in <code>CanActivate</code> guard, as introduced by 7.1 <span class="small">(2018-11-22)</span></p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_v7_0_0_2018_10_25">A.40. v7.0.0 - 2018-10-25</h3>
<div class="paragraph">
<p><strong>Global</strong></p>
</div>
<div class="ulist">
<ul>
<li>
<p>Bump to ng <code>7.0.0</code> <span class="small">(2018-10-18)</span></p>
</li>
<li>
<p>Bump to ng <code>7.0.0-rc.1</code> <span class="small">(2018-10-18)</span></p>
</li>
<li>
<p>Bump to ng <code>7.0.0-rc.0</code> <span class="small">(2018-10-18)</span></p>
</li>
<li>
<p>Bump to ng <code>7.0.0-beta.6</code> <span class="small">(2018-10-18)</span></p>
</li>
<li>
<p>Bump to ng <code>7.0.0-beta.4</code> <span class="small">(2018-10-18)</span></p>
</li>
<li>
<p>Bump to ng <code>7.0.0-beta.0</code> <span class="small">(2018-10-18)</span></p>
</li>
</ul>
</div>
<div class="paragraph">
<p><strong>From zero to something</strong></p>
</div>
<div class="ulist">
<ul>
<li>
<p>Bump to cli <code>7.0.2</code> <span class="small">(2018-10-24)</span></p>
</li>
<li>
<p>Bump to cli <code>7.0.1</code> <span class="small">(2018-10-18)</span></p>
</li>
<li>
<p>Bump to cli <code>6.2.1</code> <span class="small">(2018-09-07)</span></p>
</li>
<li>
<p>Bump to cli <code>6.2.0-rc.0</code> <span class="small">(2018-09-07)</span></p>
</li>
</ul>
</div>
<div class="paragraph">
<p><strong>Performances</strong></p>
</div>
<div class="ulist">
<ul>
<li>
<p>Adds a performances chapter! <span class="small">(2018-08-30)</span></p>
</li>
</ul>
</div>
<div class="paragraph">
<p><strong>Going to production</strong></p>
</div>
<div class="ulist">
<ul>
<li>
<p>Adds a new chapter about Going to production! <span class="small">(2018-10-25)</span></p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_v6_1_0_2018_07_26">A.41. v6.1.0 - 2018-07-26</h3>
<div class="paragraph">
<p><strong>Global</strong></p>
</div>
<div class="ulist">
<ul>
<li>
<p>Bump to ng <code>6.1.0</code> <span class="small">(2018-07-26)</span></p>
</li>
<li>
<p>Bump to ng <code>6.1.0-rx.0</code> <span class="small">(2018-07-26)</span></p>
</li>
<li>
<p>Bump to ng <code>6.1.0-beta.1</code> <span class="small">(2018-07-26)</span></p>
</li>
<li>
<p>Bump to ng <code>6.0.7</code> <span class="small">(2018-07-06)</span></p>
</li>
</ul>
</div>
<div class="paragraph">
<p><strong>From zero to something</strong></p>
</div>
<div class="ulist">
<ul>
<li>
<p>Bump to cli <code>6.1.0</code> <span class="small">(2018-07-26)</span></p>
</li>
<li>
<p>Bump to cli <code>6.0.8</code> <span class="small">(2018-07-06)</span></p>
</li>
<li>
<p>Bump cli to <code>6.0.7</code> <span class="small">(2018-05-30)</span></p>
</li>
</ul>
</div>
<div class="paragraph">
<p><strong>Pipes</strong></p>
</div>
<div class="ulist">
<ul>
<li>
<p>Add the <code>keyvalue</code> pipe introduced in Angular 6.1 <span class="small">(2018-07-26)</span></p>
</li>
<li>
<p>Show usage of formatting functions available since Angular 6.0 <span class="small">(2018-06-15)</span></p>
</li>
</ul>
</div>
<div class="paragraph">
<p><strong>Styling components and encapsulation</strong></p>
</div>
<div class="ulist">
<ul>
<li>
<p>New <code>ShadowDom</code> encapsulation option with Shadow DOM v1 support (the old and soon deprecated <code>Native</code> option uses Shadow DOM v0) <span class="small">(2018-07-26)</span></p>
</li>
</ul>
</div>
<div class="paragraph">
<p><strong>Send and receive data with Http</strong></p>
</div>
<div class="ulist">
<ul>
<li>
<p>HTTP tests now use <code>verify</code> every time <span class="small">(2018-07-06)</span></p>
</li>
</ul>
</div>
<div class="paragraph">
<p><strong>Router</strong></p>
</div>
<div class="ulist">
<ul>
<li>
<p>Adds the <code>Scroll</code> event and <code>scrollPositionRestoration</code> option introduced in 6.1 <span class="small">(2018-07-26)</span></p>
</li>
</ul>
</div>
<div class="paragraph">
<p><strong>Advanced observables</strong></p>
</div>
<div class="ulist">
<ul>
<li>
<p>Use <code>shareReplay</code> instead of <code>publishReplay</code> and <code>refCount</code> <span class="small">(2018-07-20)</span></p>
</li>
</ul>
</div>
<div class="paragraph">
<p><strong>Internationalization</strong></p>
</div>
<div class="ulist">
<ul>
<li>
<p>Update for CLI 6.0 and use a dedicated configuration <span class="small">(2018-05-09)</span></p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_v6_0_0_2018_05_04">A.42. v6.0.0 - 2018-05-04</h3>
<div class="paragraph">
<p><strong>Global</strong></p>
</div>
<div class="ulist">
<ul>
<li>
<p>Bump to ng <code>6.0.0</code> <span class="small">(2018-05-04)</span></p>
</li>
<li>
<p>Bump to ng <code>6.0.0-rc.4</code> <span class="small">(2018-04-13)</span></p>
</li>
<li>
<p>Bump to ng <code>6.0.0-rc0</code> <span class="small">(2018-04-05)</span></p>
</li>
<li>
<p>Bump to ng <code>6.0.0-beta.7</code> <span class="small">(2018-04-05)</span></p>
</li>
<li>
<p>Bump to ng <code>6.0.0-beta.6</code> <span class="small">(2018-04-05)</span></p>
</li>
<li>
<p>Bump to ng <code>6.0.0-beta.1</code> <span class="small">(2018-04-05)</span></p>
</li>
</ul>
</div>
<div class="paragraph">
<p><strong>The wonderful world of Web Components</strong></p>
</div>
<div class="ulist">
<ul>
<li>
<p>Replace customelements.io by webcomponents.org <span class="small">(2018-01-19)</span></p>
</li>
</ul>
</div>
<div class="paragraph">
<p><strong>From zero to something</strong></p>
</div>
<div class="ulist">
<ul>
<li>
<p>Bump to cli <code>6.0.0</code> <span class="small">(2018-05-04)</span></p>
</li>
<li>
<p>The chapter now uses Angular CLI from the start! <span class="small">(2018-03-19)</span></p>
</li>
</ul>
</div>
<div class="paragraph">
<p><strong>Dependency Injection</strong></p>
</div>
<div class="ulist">
<ul>
<li>
<p>Use <code>providedIn</code> to register services, as recommended for Angular 6.0 <span class="small">(2018-04-15)</span></p>
</li>
<li>
<p>Updates the dependency injection via token section with a better example <span class="small">(2018-03-19)</span></p>
</li>
</ul>
</div>
<div class="paragraph">
<p><strong>Reactive Programming</strong></p>
</div>
<div class="ulist">
<ul>
<li>
<p>We now use the pipeable operators introduced in RxJS 5.5 <span class="small">(2018-01-28)</span></p>
</li>
</ul>
</div>
<div class="paragraph">
<p><strong>Services</strong></p>
</div>
<div class="ulist">
<ul>
<li>
<p>Use <code>providedIn</code> to register the service, as recommended for Angular 6.0 <span class="small">(2018-04-15)</span></p>
</li>
</ul>
</div>
<div class="paragraph">
<p><strong>Testing your app</strong></p>
</div>
<div class="ulist">
<ul>
<li>
<p>Simplify service unit tests now that they use <code>providedIn</code> from ng 6.0 <span class="small">(2018-04-15)</span></p>
</li>
</ul>
</div>
<div class="paragraph">
<p><strong>Advanced components and directives</strong></p>
</div>
<div class="ulist">
<ul>
<li>
<p>Angular 6.0+ allows to type ElementRef&lt;T&gt; <span class="small">(2018-04-05)</span></p>
</li>
</ul>
</div>
<div class="paragraph">
<p><strong>Advanced observables</strong></p>
</div>
<div class="ulist">
<ul>
<li>
<p>We now use the imports introduced in RxJS 6.0 (<code>import { Observable, of } from 'rxjs'</code>) <span class="small">(2018-04-05)</span></p>
</li>
<li>
<p>We now use the pipeable operators introduced with RxJS 5.5 <span class="small">(2018-01-28)</span></p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_v5_2_0_2018_01_10">A.43. v5.2.0 - 2018-01-10</h3>
<div class="paragraph">
<p><strong>Global</strong></p>
</div>
<div class="ulist">
<ul>
<li>
<p>Bump to ng <code>5.2.0</code> <span class="small">(2018-01-10)</span></p>
</li>
<li>
<p>Bump to ng <code>5.1.0</code> <span class="small">(2017-12-07)</span></p>
</li>
</ul>
</div>
<div class="paragraph">
<p><strong>Building components and directives</strong></p>
</div>
<div class="ulist">
<ul>
<li>
<p>Better lifecycle explanation <span class="small">(2017-12-13)</span></p>
</li>
</ul>
</div>
<div class="paragraph">
<p><strong>Forms</strong></p>
</div>
<div class="ulist">
<ul>
<li>
<p>Reintroduce the <code>min</code> and <code>max</code> validators from version 4.2.0, even if they are not available as directives. <span class="small">(2017-12-13)</span></p>
</li>
</ul>
</div>
<div class="paragraph">
<p><strong>Send and receive data with Http</strong></p>
</div>
<div class="ulist">
<ul>
<li>
<p>Remove remaining mentions to the deprecated <code>HttpModule</code> and <code>Http</code> <span class="small">(2017-12-08)</span></p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_v5_0_0_2017_11_02">A.44. v5.0.0 - 2017-11-02</h3>
<div class="paragraph">
<p><strong>Global</strong></p>
</div>
<div class="ulist">
<ul>
<li>
<p>Bump to ng <code>5.0.0</code> <span class="small">(2017-11-02)</span></p>
</li>
<li>
<p>Bump to ng <code>5.0.0-rc.5</code> <span class="small">(2017-11-02)</span></p>
</li>
<li>
<p>Bump to ng <code>5.0.0-rc.3</code> <span class="small">(2017-11-02)</span></p>
</li>
<li>
<p>Bump to ng <code>5.0.0-rc.2</code> <span class="small">(2017-11-02)</span></p>
</li>
<li>
<p>Bump to ng <code>5.0.0-rc.0</code> <span class="small">(2017-11-02)</span></p>
</li>
<li>
<p>Bump to ng <code>5.0.0-beta.6</code> <span class="small">(2017-11-02)</span></p>
</li>
<li>
<p>Bump to ng <code>5.0.0-beta.5</code> <span class="small">(2017-11-02)</span></p>
</li>
<li>
<p>Bump to ng <code>5.0.0-beta.4</code> <span class="small">(2017-11-02)</span></p>
</li>
<li>
<p>Bump to ng <code>5.0.0-beta.1</code> <span class="small">(2017-11-02)</span></p>
</li>
<li>
<p>Bump to ng <code>4.4.1</code> <span class="small">(2017-09-16)</span></p>
</li>
</ul>
</div>
<div class="paragraph">
<p><strong>Pipes</strong></p>
</div>
<div class="ulist">
<ul>
<li>
<p>Use the new i18n pipes introduced in ng 5.0.0 <span class="small">(2017-11-02)</span></p>
</li>
</ul>
</div>
<div class="paragraph">
<p><strong>Forms</strong></p>
</div>
<div class="ulist">
<ul>
<li>
<p>Add a section on the <code>updateOn: 'blur'</code> option for controls and groups introduced in 5.0 <span class="small">(2017-11-02)</span></p>
</li>
<li>
<p>Remove the section about combining template-based and code-based approaches <span class="small">(2017-09-01)</span></p>
</li>
</ul>
</div>
<div class="paragraph">
<p><strong>Send and receive data with Http</strong></p>
</div>
<div class="ulist">
<ul>
<li>
<p>Use object literals for headers and params for the new http client, introduced in 5.0.0 <span class="small">(2017-11-02)</span></p>
</li>
</ul>
</div>
<div class="paragraph">
<p><strong>Router</strong></p>
</div>
<div class="ulist">
<ul>
<li>
<p>Adds ng 5.0 <code>ChildActivationStart</code>/<code>ChildActivationEnd</code> to the router events <span class="small">(2017-11-02)</span></p>
</li>
</ul>
</div>
<div class="paragraph">
<p><strong>Internationalization</strong></p>
</div>
<div class="ulist">
<ul>
<li>
<p>Remove deprecated i18n comment with ng 5.0.0 <span class="small">(2017-11-02)</span></p>
</li>
<li>
<p>Show how to load the locale data as required in ng 5.0.0 and uses the new i18n pipes <span class="small">(2017-11-02)</span></p>
</li>
<li>
<p>Placeholders now displays the interpolation in translation files to help translators <span class="small">(2017-11-02)</span></p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_v4_3_0_2017_07_16">A.45. v4.3.0 - 2017-07-16</h3>
<div class="paragraph">
<p><strong>Global</strong></p>
</div>
<div class="ulist">
<ul>
<li>
<p>Bump to ng <code>4.3.0</code> <span class="small">(2017-07-16)</span></p>
</li>
<li>
<p>Bump to ng <code>4.2.3</code> <span class="small">(2017-06-17)</span></p>
</li>
</ul>
</div>
<div class="paragraph">
<p><strong>Forms</strong></p>
</div>
<div class="ulist">
<ul>
<li>
<p>Remove min/max validators mention, as they have been removed temporarily in ng 4.2.3 <span class="small">(2017-06-17)</span></p>
</li>
</ul>
</div>
<div class="paragraph">
<p><strong>Send and receive data with Http</strong></p>
</div>
<div class="ulist">
<ul>
<li>
<p>Updates the chapter to use the new <code>HttpClientModule</code> introduced in ng 4.3.0. <span class="small">(2017-07-16)</span></p>
</li>
</ul>
</div>
<div class="paragraph">
<p><strong>Router</strong></p>
</div>
<div class="ulist">
<ul>
<li>
<p>List the new router events introduced in 4.3.0 <span class="small">(2017-07-16)</span></p>
</li>
</ul>
</div>
<div class="paragraph">
<p><strong>Advanced components and directives</strong></p>
</div>
<div class="ulist">
<ul>
<li>
<p>Add a section about <code>HostBinding</code> <span class="small">(2017-06-29)</span></p>
</li>
<li>
<p>Add a section about <code>HostListener</code> <span class="small">(2017-06-29)</span></p>
</li>
<li>
<p>New chapter on advanced components, with <code>ViewChild</code>, <code>ContentChild</code> and <code>ng-content</code>! <span class="small">(2017-06-29)</span></p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_v4_2_0_2017_06_09">A.46. v4.2.0 - 2017-06-09</h3>
<div class="paragraph">
<p><strong>Global</strong></p>
</div>
<div class="ulist">
<ul>
<li>
<p>Bump to ng <code>4.2.0</code> <span class="small">(2017-06-09)</span></p>
</li>
<li>
<p>Bump to ng <code>4.1.0</code> <span class="small">(2017-04-28)</span></p>
</li>
</ul>
</div>
<div class="paragraph">
<p><strong>Forms</strong></p>
</div>
<div class="ulist">
<ul>
<li>
<p>Introduce the <code>min</code> and <code>max</code> validators from version 4.2.0 <span class="small">(2017-06-09)</span></p>
</li>
</ul>
</div>
<div class="paragraph">
<p><strong>Router</strong></p>
</div>
<div class="ulist">
<ul>
<li>
<p>New chapter on advanced router usage: protected routes with guards, nested routes, resolvers and lazy-loading! <span class="small">(2017-04-28)</span></p>
</li>
</ul>
</div>
<div class="paragraph">
<p><strong>Angular compiler</strong></p>
</div>
<div class="ulist">
<ul>
<li>
<p>Adds a chapter about the Angular compiler and the differences between JiT and AoT. <span class="small">(2017-05-02)</span></p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_v4_0_0_2017_03_24">A.47. v4.0.0 - 2017-03-24</h3>
<div class="paragraph">
<p><strong>Global</strong></p>
</div>
<div class="ulist">
<ul>
<li>
<p>🎉  Bump to stable release <code>4.0.0</code> 🎉 <span class="small">(2017-03-24)</span></p>
</li>
<li>
<p>Bump to <code>4.0.0-rc.6</code> <span class="small">(2017-03-23)</span></p>
</li>
<li>
<p>Bump to <code>4.0.0-rc.5</code> <span class="small">(2017-03-23)</span></p>
</li>
<li>
<p>Bump to <code>4.0.0-rc.4</code> <span class="small">(2017-03-23)</span></p>
</li>
<li>
<p>Bump to <code>4.0.0-rc.3</code> <span class="small">(2017-03-23)</span></p>
</li>
<li>
<p>Bump to <code>4.0.0-rc.1</code> <span class="small">(2017-03-23)</span></p>
</li>
<li>
<p>Bump to <code>4.0.0-beta.8</code> <span class="small">(2017-03-23)</span></p>
</li>
<li>
<p>Bump to ng <code>4.0.0-beta.7</code> and TS 2.1+ is now required <span class="small">(2017-03-23)</span></p>
</li>
<li>
<p>Bump to <code>4.0.0-beta.5</code> <span class="small">(2017-03-23)</span></p>
</li>
<li>
<p>Bump to <code>4.0.0-beta.0</code> <span class="small">(2017-03-23)</span></p>
</li>
<li>
<p>Each chapter now has a link to the corresponding exercise of our <a href="https://angular-exercises.ninja-squad.com">Pro Pack</a>
Chapters are slightly re-ordered to match the exercises order. <span class="small">(2017-03-22)</span></p>
</li>
</ul>
</div>
<div class="paragraph">
<p><strong>The templating syntax</strong></p>
</div>
<div class="ulist">
<ul>
<li>
<p>Use <code>as</code>, introduced in 4.0.0, instead of <code>let</code> for variables in templates <span class="small">(2017-03-23)</span></p>
</li>
<li>
<p>The <code>template</code> tag is now deprecated in favor of <code>ng-template</code> in 4.0 <span class="small">(2017-03-23)</span></p>
</li>
<li>
<p>Introduces the else syntax from version 4.0.0 <span class="small">(2017-03-23)</span></p>
</li>
</ul>
</div>
<div class="paragraph">
<p><strong>Dependency Injection</strong></p>
</div>
<div class="ulist">
<ul>
<li>
<p>Fix the Babel 6 config for dependency injection without TypeScript <span class="small">(2017-02-17)</span></p>
</li>
</ul>
</div>
<div class="paragraph">
<p><strong>Pipes</strong></p>
</div>
<div class="ulist">
<ul>
<li>
<p>Introduce the <code>as</code> syntax to store a <code>NgIf</code> or <code>NgFor</code> result, which can be useful with some pipes like <code>slice</code> or <code>async</code>. <span class="small">(2017-03-23)</span></p>
</li>
<li>
<p>Adds <code>titlecase</code> pipe introduced in 4.0.0 <span class="small">(2017-03-23)</span></p>
</li>
</ul>
</div>
<div class="paragraph">
<p><strong>Services</strong></p>
</div>
<div class="ulist">
<ul>
<li>
<p>New <code>Meta</code> service in 4.0.0 to get/set meta tags <span class="small">(2017-03-23)</span></p>
</li>
</ul>
</div>
<div class="paragraph">
<p><strong>Testing your app</strong></p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>overrideTemplate</code> has been added in 4.0.0 <span class="small">(2017-03-23)</span></p>
</li>
</ul>
</div>
<div class="paragraph">
<p><strong>Forms</strong></p>
</div>
<div class="ulist">
<ul>
<li>
<p>Introduce the <code>email</code> validator from version 4.0.0 <span class="small">(2017-03-23)</span></p>
</li>
</ul>
</div>
<div class="paragraph">
<p><strong>Send and receive data with Http</strong></p>
</div>
<div class="ulist">
<ul>
<li>
<p>Use <code>params</code> instead of the deprecated <code>search</code> in 4.0.0 <span class="small">(2017-03-23)</span></p>
</li>
</ul>
</div>
<div class="paragraph">
<p><strong>Router</strong></p>
</div>
<div class="ulist">
<ul>
<li>
<p>Use <code>paramMap</code> introduced in 4.0 instead of <code>params</code> <span class="small">(2017-03-23)</span></p>
</li>
</ul>
</div>
<div class="paragraph">
<p><strong>Advanced observables</strong></p>
</div>
<div class="ulist">
<ul>
<li>
<p>Shows the <code>as</code> syntax introduced in 4.0.0 as an alternative for the mulitple async pipe subscriptions problem <span class="small">(2017-03-23)</span></p>
</li>
</ul>
</div>
<div class="paragraph">
<p><strong>Internationalization</strong></p>
</div>
<div class="ulist">
<ul>
<li>
<p>Add a new chapter on internationalization (i18n) <span class="small">(2017-03-23)</span></p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_v2_4_4_2017_01_25">A.48. v2.4.4 - 2017-01-25</h3>
<div class="paragraph">
<p><strong>Global</strong></p>
</div>
<div class="ulist">
<ul>
<li>
<p>Bump to <code>2.4.4</code> <span class="small">(2017-01-25)</span></p>
</li>
<li>
<p>The big rename: "Angular 2" is now known as "Angular" <span class="small">(2017-01-13)</span></p>
</li>
<li>
<p>Bump to <code>2.4.0</code> <span class="small">(2016-12-21)</span></p>
</li>
</ul>
</div>
<div class="paragraph">
<p><strong>Forms</strong></p>
</div>
<div class="ulist">
<ul>
<li>
<p>Fix the <code>NgModel</code> explanation <span class="small">(2017-01-09)</span></p>
</li>
<li>
<p><code>Validators.compose()</code> is no longer necessary, we can apply several validators by just passing an array. <span class="small">(2016-12-01)</span></p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_v2_2_0_2016_11_18">A.49. v2.2.0 - 2016-11-18</h3>
<div class="paragraph">
<p><strong>Global</strong></p>
</div>
<div class="ulist">
<ul>
<li>
<p>Bump to <code>2.2.0</code> <span class="small">(2016-11-18)</span></p>
</li>
<li>
<p>Bump to <code>2.1.0</code> <span class="small">(2016-10-17)</span></p>
</li>
<li>
<p>Remove typings and use <code>npm install @types/&#8230;&#8203;</code> <span class="small">(2016-10-17)</span></p>
</li>
<li>
<p>Use <code>const</code> instead of <code>let</code> and TypeScript type inference whenever possible <span class="small">(2016-10-01)</span></p>
</li>
<li>
<p>Bump to <code>2.0.1</code> <span class="small">(2016-09-24)</span></p>
</li>
</ul>
</div>
<div class="paragraph">
<p><strong>Testing your app</strong></p>
</div>
<div class="ulist">
<ul>
<li>
<p>Use <code>TestBed.get</code> instead of <code>inject</code> in tests <span class="small">(2016-09-30)</span></p>
</li>
</ul>
</div>
<div class="paragraph">
<p><strong>Forms</strong></p>
</div>
<div class="ulist">
<ul>
<li>
<p>Add an async validator example <span class="small">(2016-11-18)</span></p>
</li>
<li>
<p>Remove the  useless (2.2+) <code>.control</code> in templates like <code>username.control.hasError('required')</code>. <span class="small">(2016-11-18)</span></p>
</li>
</ul>
</div>
<div class="paragraph">
<p><strong>Router</strong></p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>routerLinkActive</code> can be exported (2.2+). <span class="small">(2016-11-18)</span></p>
</li>
<li>
<p>We don&#8217;t need to unsubscribe from the router params in the <code>ngOnDestroy</code> method. <span class="small">(2016-10-07)</span></p>
</li>
</ul>
</div>
<div class="paragraph">
<p><strong>Advanced observables</strong></p>
</div>
<div class="ulist">
<ul>
<li>
<p>New chapter on Advanced Observables! <span class="small">(2016-11-03)</span></p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_v2_0_0_2016_09_15">A.50. v2.0.0 - 2016-09-15</h3>
<div class="paragraph">
<p><strong>Global</strong></p>
</div>
<div class="ulist">
<ul>
<li>
<p>🎉 Bump to stable release <code>2.0.0</code> 🎉 <span class="small">(2016-09-15)</span></p>
</li>
<li>
<p>Bump to <code>rc.7</code> <span class="small">(2016-09-14)</span></p>
</li>
<li>
<p>Bump to <code>rc.6</code> <span class="small">(2016-09-05)</span></p>
</li>
</ul>
</div>
<div class="paragraph">
<p><strong>From zero to something</strong></p>
</div>
<div class="ulist">
<ul>
<li>
<p>Update the SystemJS config for <code>rc.6</code> and bump the RxJS version <span class="small">(2016-09-05)</span></p>
</li>
</ul>
</div>
<div class="paragraph">
<p><strong>Pipes</strong></p>
</div>
<div class="ulist">
<ul>
<li>
<p>Remove the section about the replace pipe, removed in rc.6 <span class="small">(2016-09-05)</span></p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_v2_0_0_rc_5_2016_08_25">A.51. v2.0.0-rc.5 - 2016-08-25</h3>
<div class="paragraph">
<p><strong>Global</strong></p>
</div>
<div class="ulist">
<ul>
<li>
<p>Bump to <code>rc.5</code> <span class="small">(2016-08-23)</span></p>
</li>
<li>
<p>Bump to <code>rc.4</code> <span class="small">(2016-07-08)</span></p>
</li>
<li>
<p>Bump to <code>rc.3</code> <span class="small">(2016-06-28)</span></p>
</li>
<li>
<p>Bump to <code>rc.2</code> <span class="small">(2016-06-16)</span></p>
</li>
<li>
<p>Bump to <code>rc.1</code> <span class="small">(2016-06-08)</span></p>
</li>
<li>
<p>Code examples now follow the official style guide <span class="small">(2016-06-08)</span></p>
</li>
</ul>
</div>
<div class="paragraph">
<p><strong>From zero to something</strong></p>
</div>
<div class="ulist">
<ul>
<li>
<p>Small introduction to NgModule when you start your app from scratch <span class="small">(2016-08-12)</span></p>
</li>
</ul>
</div>
<div class="paragraph">
<p><strong>The templating syntax</strong></p>
</div>
<div class="ulist">
<ul>
<li>
<p>Replace the deprecated <code>ngSwitchWhen</code> with <code>ngSwitchCase</code> <span class="small">(2016-06-16)</span></p>
</li>
</ul>
</div>
<div class="paragraph">
<p><strong>Dependency Injection</strong></p>
</div>
<div class="ulist">
<ul>
<li>
<p>Introduce modules and their role in DI.
Changed the example to use a custom service instead of Http. <span class="small">(2016-08-15)</span></p>
</li>
<li>
<p>Remove deprecated <code>provide()</code> method and use <code>{provide: &#8230;&#8203;}</code> instead <span class="small">(2016-06-09)</span></p>
</li>
</ul>
</div>
<div class="paragraph">
<p><strong>Pipes</strong></p>
</div>
<div class="ulist">
<ul>
<li>
<p>Date pipe is now fixed in <code>rc.2</code>, no more problem with Intl API <span class="small">(2016-06-16)</span></p>
</li>
</ul>
</div>
<div class="paragraph">
<p><strong>Styling components and encapsulation</strong></p>
</div>
<div class="ulist">
<ul>
<li>
<p>New chapter on styling components and the different encapsulation strategies! <span class="small">(2016-06-08)</span></p>
</li>
</ul>
</div>
<div class="paragraph">
<p><strong>Services</strong></p>
</div>
<div class="ulist">
<ul>
<li>
<p>Add the service to the module&#8217;s providers <span class="small">(2016-08-21)</span></p>
</li>
</ul>
</div>
<div class="paragraph">
<p><strong>Testing your app</strong></p>
</div>
<div class="ulist">
<ul>
<li>
<p>Tests now use the TestBed API instead of the deprecated TestComponentBuilder one. <span class="small">(2016-08-15)</span></p>
</li>
<li>
<p>Angular 2 does not provide Jasmine wrappers and custom matchers for unit tests in <code>rc.4</code> anymore <span class="small">(2016-07-08)</span></p>
</li>
</ul>
</div>
<div class="paragraph">
<p><strong>Forms</strong></p>
</div>
<div class="ulist">
<ul>
<li>
<p>Forms now use the new form API (FormsModule and ReactiveFormsModule). <span class="small">(2016-08-22)</span></p>
</li>
<li>
<p>Warn about forms module being rewritten (and deprecated) <span class="small">(2016-06-16)</span></p>
</li>
</ul>
</div>
<div class="paragraph">
<p><strong>Send and receive data with Http</strong></p>
</div>
<div class="ulist">
<ul>
<li>
<p>Add the HttpModule import <span class="small">(2016-08-21)</span></p>
</li>
<li>
<p><code>http.post()</code> now autodetects the body type, removing the need of using <code>JSON.stringify</code> and setting the <code>ContentType</code> <span class="small">(2016-06-16)</span></p>
</li>
</ul>
</div>
<div class="paragraph">
<p><strong>Router</strong></p>
</div>
<div class="ulist">
<ul>
<li>
<p>Introduce RouterModule <span class="small">(2016-08-21)</span></p>
</li>
<li>
<p>Update the router to the API v3! <span class="small">(2016-07-08)</span></p>
</li>
<li>
<p>Warn about router module being rewritten (and deprecated) <span class="small">(2016-06-16)</span></p>
</li>
</ul>
</div>
<div class="paragraph">
<p><strong>Changelog</strong></p>
</div>
<div class="ulist">
<ul>
<li>
<p>Mention free updates and web page for obtaining latest version <span class="small">(2016-07-25)</span></p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_v2_0_0_rc_0_2016_05_06">A.52. v2.0.0-rc.0 - 2016-05-06</h3>
<div class="paragraph">
<p><strong>Global</strong></p>
</div>
<div class="ulist">
<ul>
<li>
<p>Bump to <code>rc.0</code>. All packages have changed! <span class="small">(2016-05-03)</span></p>
</li>
<li>
<p>Bump to <code>beta.17</code> <span class="small">(2016-05-03)</span></p>
</li>
<li>
<p>Bump to <code>beta.15</code> <span class="small">(2016-04-16)</span></p>
</li>
<li>
<p>Bump to <code>beta.14</code> <span class="small">(2016-04-11)</span></p>
</li>
<li>
<p>Bump to <code>beta.11</code> <span class="small">(2016-03-19)</span></p>
</li>
<li>
<p>Bump to <code>beta.9</code> <span class="small">(2016-03-11)</span></p>
</li>
<li>
<p>Bump to <code>beta.8</code> <span class="small">(2016-03-10)</span></p>
</li>
<li>
<p>Bump to <code>beta.7</code> <span class="small">(2016-03-04)</span></p>
</li>
<li>
<p>Display the Angular 2 version used in the intro and in the chapter "Zero to something". <span class="small">(2016-03-04)</span></p>
</li>
<li>
<p>Bump to <code>beta.6</code> (<code>beta.4</code> and <code>beta.5</code> were broken) <span class="small">(2016-03-04)</span></p>
</li>
<li>
<p>Bump to <code>beta.3</code> <span class="small">(2016-03-04)</span></p>
</li>
<li>
<p>Bump to <code>beta.2</code> <span class="small">(2016-03-04)</span></p>
</li>
</ul>
</div>
<div class="paragraph">
<p><strong>Diving into TypeScript</strong></p>
</div>
<div class="ulist">
<ul>
<li>
<p>Use <code>typings</code> instead of <code>tsd</code>. <span class="small">(2016-03-04)</span></p>
</li>
</ul>
</div>
<div class="paragraph">
<p><strong>The templating syntax</strong></p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>*ngFor</code> now also exports a <code>first</code> variable <span class="small">(2016-04-16)</span></p>
</li>
</ul>
</div>
<div class="paragraph">
<p><strong>Dependency Injection</strong></p>
</div>
<div class="ulist">
<ul>
<li>
<p>Better explanation of hierarchical injectors <span class="small">(2016-03-04)</span></p>
</li>
</ul>
</div>
<div class="paragraph">
<p><strong>Pipes</strong></p>
</div>
<div class="ulist">
<ul>
<li>
<p>A <code>replace</code> pipe has been introduced <span class="small">(2016-04-16)</span></p>
</li>
</ul>
</div>
<div class="paragraph">
<p><strong>Reactive Programming</strong></p>
</div>
<div class="ulist">
<ul>
<li>
<p>Observables are not scheduled for ES7 anymore <span class="small">(2016-03-04)</span></p>
</li>
</ul>
</div>
<div class="paragraph">
<p><strong>Building components and directives</strong></p>
</div>
<div class="ulist">
<ul>
<li>
<p>Explain how to remove the compilation warning when using <code>@Input</code> and a setter at the same time <span class="small">(2016-03-04)</span></p>
</li>
<li>
<p>Add an explanation on <code>isFirstChange</code> for <code>ngOnChanges</code> <span class="small">(2016-03-04)</span></p>
</li>
</ul>
</div>
<div class="paragraph">
<p><strong>Testing your app</strong></p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>injectAsync</code> is now deprecated and replaced by <code>async</code> <span class="small">(2016-05-03)</span></p>
</li>
<li>
<p>Add an example on how to test an event emitter <span class="small">(2016-03-04)</span></p>
</li>
</ul>
</div>
<div class="paragraph">
<p><strong>Forms</strong></p>
</div>
<div class="ulist">
<ul>
<li>
<p>A pattern validator has been introduced to make sure that the input matches a regexp <span class="small">(2016-04-16)</span></p>
</li>
<li>
<p>Add a mnemonic tip to rememeber the <code>[()]</code> syntax: the banana box! <span class="small">(2016-03-04)</span></p>
</li>
<li>
<p>Examples use <code>module.id</code> to have a relative <code>templateUrl</code> <span class="small">(2016-03-04)</span></p>
</li>
<li>
<p>Fix error <code>ng-no-form</code> &#8594; <code>ngNoForm</code> <span class="small">(2016-03-04)</span></p>
</li>
<li>
<p>Fix errors <code>(ngModel)</code> &#8594; <code>(ngModelChange)</code>, <code>is-old-enough</code> &#8594; <code>isOldEnough</code> <span class="small">(2016-03-04)</span></p>
</li>
</ul>
</div>
<div class="paragraph">
<p><strong>Send and receive data with Http</strong></p>
</div>
<div class="ulist">
<ul>
<li>
<p>Use <code>JSON.stringify</code> before sending data with a POST <span class="small">(2016-03-04)</span></p>
</li>
<li>
<p>Add a mention to <code>JSONP_PROVIDERS</code> <span class="small">(2016-03-04)</span></p>
</li>
</ul>
</div>
<div class="paragraph">
<p><strong>Router</strong></p>
</div>
<div class="ulist">
<ul>
<li>
<p>Introduce the new router (previous one is deprecated), and how to use parameters in URLs! <span class="small">(2016-05-06)</span></p>
</li>
<li>
<p><code>RouterOutlet</code> inserts the template of the component just after itself and not inside itself <span class="small">(2016-03-04)</span></p>
</li>
</ul>
</div>
<div class="paragraph">
<p><strong>Zones and the Angular magic</strong></p>
</div>
<div class="ulist">
<ul>
<li>
<p>New chapter! Let&#8217;s talk about how Angular 2 works under the hood!
First part is about how AngularJS 1.x used to work,
and then we&#8217;ll see how Angular 2 differs,
and uses a new concept called zones. <span class="small">(2016-05-03)</span></p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_v2_0_0_alpha_47_2016_01_15">A.53. v2.0.0-alpha.47 - 2016-01-15</h3>
<div class="paragraph">
<p><strong>Global</strong></p>
</div>
<div class="ulist">
<ul>
<li>
<p>First public release of the ebook! <span class="small">(2016-01-15)</span></p>
</li>
</ul>
</div>
</div>
</div>
</div>
</div>
<div id="footer">
<div id="footer-text">
Dernière mise à jour le 2025-04-25 22:12:04
</div>
</div>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prettify/r298/run_prettify.min.js"></script>
</body>
</html>